"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14343,27375],{14343:(e,r,n)=>{n.d(r,{e2:()=>c,dispatch:()=>o,$l:()=>a,A8:()=>s});let o=async(e,...r)=>{if(!window.electronAPI||!window.electronAPI.invoke)throw Error(`electronAPI.invoke not found. Please expose \`ipcRenderer.invoke\` to \`window.electronAPI.invoke\` in the preload:

import { contextBridge, ipcRenderer } from 'electron';

const invoke = async (event, ...data) =>
  ipcRenderer.invoke(event, ...data);

contextBridge.exposeInMainWorld('electronAPI', { invoke });
`);return window.electronAPI.invoke(e,...r)},t=async e=>{if(e){if("string"==typeof e||e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(e instanceof Blob)return await e.arrayBuffer();throw console.warn("不支持的 IPC 代理请求体类型:",typeof e),Error("不支持的 IPC 代理请求体类型")}},a=async(e,r)=>{var n;let o,a=new URL(e.toString(),window.location.origin),i=a.pathname+a.search,c=r?.method?.toUpperCase()||"GET",l=(n=r?.headers,o={},n&&(n instanceof Headers?n.forEach((e,r)=>{o[r]=e}):Array.isArray(n)?n.forEach(([e,r])=>{o[e]=r}):Object.assign(o,n),delete o.host,delete o.connection,delete o["content-length"]),o),s={body:await t(r?.body),headers:l,method:c,urlPath:i};return new Promise((e,r)=>{let n,o=!1,t=new ReadableStream({cancel(){a?.()},start(e){n=e}}),a=window.electronAPI.onStreamInvoke(s,{onData:e=>{n&&n.enqueue(e)},onEnd:()=>{n&&n.close()},onError:e=>{console.error("[streamInvoke] Error during IPC stream proxy call:",e),o?n&&n.error(e):(o=!0,r(e))},onResponse:r=>{o||(o=!0,e(new Response(t,r)))}})})};var i,c=((i={}).Cloud="cloud",i.Local="local",i.SelfHost="selfHost",i),l=n(83034);let s=(e,r)=>{(0,l.useEffect)(()=>{if(!window.electron)return;let n=(e,n)=>{r(n)};return window.electron.ipcRenderer.on(e,n),()=>{window.electron.ipcRenderer.removeListener(e,n)}},[])}},27375:(e,r,n)=>{n.d(r,{desktopFileAPI:()=>a});var o=n(14343);class t{async uploadFile(e,r,n){let t=await e.arrayBuffer();return(0,o.dispatch)("createFile",{content:t,filename:e.name,hash:r,path:n,type:e.type})}}let a=new t}}]);