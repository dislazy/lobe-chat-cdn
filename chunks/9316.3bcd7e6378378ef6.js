"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9316,78378],{9274:(e,t,r)=>{r.d(t,{A:()=>w});var a,n,i=r(65890),s=r(85017),o=r(83034),l=r(20480),u=r(12389),c=r(37412),d=r(74912),g=function(e){if((0,d.A)(e)){var t,r,a=1.8*e;return{blockSize:a,borderRadius:Math.floor(a/6)}}switch(e){case"large":t=44,r=8;break;case"middle":t=36,r=6;break;case"small":t=24,r=4;break;default:e?(t=(null==e?void 0:e.blockSize)||36,r=(null==e?void 0:e.borderRadius)||6):(t="1.8em",r="0.3em")}return{blockSize:t,borderRadius:r}};function p(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=(0,r(11577).rU)(function(e){var t=e.isDarkMode,r=e.css,i=e.token,s=e.stylish;return{active:s.active,borderless:s.variantBorderless,dangerBorderless:s.variantBorderlessDanger,dangerFilled:s.variantFilledDanger,dangerOutlined:s.variantOutlinedDanger,dangerRoot:r(a||(a=p(["\n      &:hover {\n        color: ",";\n      }\n\n      &:active {\n        color: ",";\n      }\n    "])),i.colorError,i.colorErrorActive),disabled:s.disabled,filled:s.variantFilled,glass:s.blur,outlined:s.variantOutlined,root:r(n||(n=p(["\n      cursor: pointer;\n\n      position: relative;\n\n      overflow: hidden;\n\n      color: ",";\n\n      transition:\n        color 400ms ",",\n        background 100ms ",";\n\n      &:hover {\n        color: ",";\n      }\n\n      &:active {\n        color: ",";\n      }\n    "])),i.colorTextTertiary,i.motionEaseOut,i.motionEaseOut,i.colorTextSecondary,t?i.colorTextTertiary:i.colorText),shadow:s.shadow}}),f=r(54898);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=["color","fill","className","active","icon","size","variant","style","glass","title","onClick","loading","fillOpacity","fillRule","focusable","shadow","disabled","spin","tooltipProps","danger","ref"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){var a,n,i;a=e,n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=y(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:String(t)}(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S=(0,o.memo)(function(e){var t,r=e.color,a=e.fill,n=e.className,d=e.active,p=e.icon,y=e.size,h=void 0===y?"middle":y,S=e.variant,w=e.style,O=e.glass,P=e.title,k=e.onClick,x=e.loading,A=e.fillOpacity,C=e.fillRule,j=e.focusable,M=e.shadow,I=e.disabled,N=e.spin,E=e.tooltipProps,$=e.danger,T=e.ref,U=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,b),z=m(),L=z.styles,D=z.cx,W=(0,o.useMemo)(function(){return g(h)},[h]),R=W.blockSize,F=W.borderRadius,J=(0,o.useMemo)(function(){return(0,i.F)(L.root,{compoundVariants:[{className:L.dangerFilled,danger:!0,variant:"filled"},{className:L.dangerBorderless,danger:!0,variant:"borderless"},{className:L.dangerOutlined,danger:!0,variant:"outlined"}],defaultVariants:{active:!1,danger:!1,disabled:!1,glass:!1,shadow:!1,variant:"borderless"},variants:{variant:{filled:L.filled,outlined:L.outlined,borderless:L.borderless},glass:{false:null,true:L.glass},shadow:{false:null,true:L.shadow},active:{false:null,true:L.active},danger:{false:null,true:L.dangerRoot},disabled:{false:null,true:L.disabled}}})},[L]),q=(0,o.useCallback)(function(e){x||I||null==k||k(e)},[x,I,k]),_=(0,f.jsx)(l.default,v(v({className:D(J({active:d,danger:$,disabled:I,glass:O,shadow:M,variant:void 0===S?"borderless":S}),n),flex:"none",horizontal:!0,onClick:q,ref:T,role:"button",style:v({borderRadius:F,height:R,width:R},w),tabIndex:I?-1:0},U),{},{children:p&&(0,f.jsx)(u.default,{color:r,fill:a,fillOpacity:A,fillRule:C,focusable:j,icon:x?s.A:p,size:h,spin:!!x||N,style:{pointerEvents:"none"}})}));return P?(0,f.jsx)(c.A,v(v({title:P},E),{},{styles:v(v({},null==E?void 0:E.styles),{},{root:v({pointerEvents:"none"},null==E||null==(t=E.styles)?void 0:t.root)}),children:_})):_});S.displayName="ActionIcon";let w=S},10053:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(83034),n=r(71673),i=r(46161),s=r(30335);let o=function(e=!0,t={}){let r=(0,a.useRef)(t),[,o]=(0,i.C)(),l=(0,s.Ay)();return(0,n.A)(()=>{let t=l.subscribe(t=>{r.current=t,e&&o()});return()=>l.unsubscribe(t)},[]),r.current}},13380:(e,t,r)=>{r.d(t,{A:()=>s});var a=r(76208),n=r(1866),i=r(32309);let s=function(e){return"string"==typeof e||!(0,n.A)(e)&&(0,i.A)(e)&&"[object String]"==(0,a.A)(e)}},14306:(e,t,r)=>{r.d(t,{J:()=>i});var a=r(5930),n=r(76694);let i={getCurrentLanguage:()=>n.c.currentLanguage(a.o.getState())}},14654:(e,t,r)=>{r.d(t,{Q:()=>s});var a=r(25196),n=r(40714),i=r(83034),s=function(){var e=n.Ay.useBreakpoint();return(0,i.useMemo)(function(){return(0,a.s)(e)},[e])}},17191:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(21637),n=r(5501),i=r(17975),s=r(28153),o=r(35956),l=r(94348),u=r(83959);let c=(0,l.OF)("Popover",e=>{let{colorBgElevated:t,colorText:r}=e,s=(0,u.oX)(e,{popoverBg:t,popoverColor:r});return[(e=>{let{componentCls:t,popoverColor:r,titleMinWidth:n,fontWeightStrong:s,innerPadding:o,boxShadowSecondary:l,colorTextHeading:u,borderRadiusLG:c,zIndexPopup:d,titleMarginBottom:g,colorBgElevated:p,popoverBg:m,titleBorderBottom:f,innerContentPadding:y,titlePadding:b}=e;return[{[t]:Object.assign(Object.assign({},(0,a.dF)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:"var(--valid-offset-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":p,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:m,backgroundClip:"padding-box",borderRadius:c,boxShadow:l,padding:o},[`${t}-title`]:{minWidth:n,marginBottom:g,color:u,fontWeight:s,borderBottom:f,padding:b},[`${t}-inner-content`]:{color:r,padding:y}})},(0,i.Ay)(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]})(s),(e=>{let{componentCls:t}=e;return{[t]:o.s.map(r=>{let a=e[`${r}6`];return{[`&${t}-${r}`]:{"--antd-arrow-background-color":a,[`${t}-inner`]:{backgroundColor:a},[`${t}-arrow`]:{background:"transparent"}}}})}})(s),(0,n.aB)(s,"zoom-big")]},e=>{let{lineWidth:t,controlHeight:r,fontHeight:a,padding:n,wireframe:o,zIndexPopupBase:l,borderRadiusLG:u,marginXS:c,lineType:d,colorSplit:g,paddingSM:p}=e,m=r-a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:l+30},(0,s.n)(e)),(0,i.Ke)({contentRadius:u,limitVerticalRadius:!0})),{innerPadding:12*!o,titleMarginBottom:o?0:c,titlePadding:o?`${m/2}px ${n}px ${m/2-t}px`:0,titleBorderBottom:o?`${t}px ${d} ${g}`:"none",innerContentPadding:o?`${p}px ${n}px`:0})},{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]})},29961:(e,t,r)=>{r.d(t,{A:()=>a});let a=(0,r(28709).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},30335:(e,t,r)=>{r.d(t,{Ay:()=>l,ko:()=>o,ye:()=>s});var a=r(83034),n=r(1191),i=r(64751);let s=["xxl","xl","lg","md","sm","xs"],o=(e,t)=>{if(t){for(let r of s)if(e[r]&&(null==t?void 0:t[r])!==void 0)return t[r]}},l=()=>{let e,[,t]=(0,n.Ay)(),r=((e=[].concat(s).reverse()).forEach((r,a)=>{let n=r.toUpperCase(),i=`screen${n}Min`,s=`screen${n}`;if(!(t[i]<=t[s]))throw Error(`${i}<=${s} fails : !(${t[i]}<=${t[s]})`);if(a<e.length-1){let r=`screen${n}Max`;if(!(t[s]<=t[r]))throw Error(`${s}<=${r} fails : !(${t[s]}<=${t[r]})`);let i=e[a+1].toUpperCase(),o=`screen${i}Min`;if(!(t[r]<=t[o]))throw Error(`${r}<=${o} fails : !(${t[r]}<=${t[o]})`)}}),{xs:`(max-width: ${t.screenXSMax}px)`,sm:`(min-width: ${t.screenSM}px)`,md:`(min-width: ${t.screenMD}px)`,lg:`(min-width: ${t.screenLG}px)`,xl:`(min-width: ${t.screenXL}px)`,xxl:`(min-width: ${t.screenXXL}px)`});return a.useMemo(()=>{let e=new Map,t=-1,a={};return{responsiveMap:r,matchHandlers:{},dispatch:t=>(a=t,e.forEach(e=>e(a)),e.size>=1),subscribe(r){return e.size||this.register(),t+=1,e.set(t,r),r(a),t},unsubscribe(t){e.delete(t),e.size||this.unregister()},register(){Object.entries(r).forEach(([e,t])=>{let r=({matches:t})=>{this.dispatch(Object.assign(Object.assign({},a),{[e]:t}))},n=window.matchMedia(t);(0,i.e)(n,r),this.matchHandlers[t]={mql:n,listener:r},r(n)})},unregister(){Object.values(r).forEach(e=>{let t=this.matchHandlers[e];(0,i.p)(null==t?void 0:t.mql,null==t?void 0:t.listener)}),e.clear()}}},[r])}},31065:(e,t,r)=>{r.d(t,{I:()=>i,i:()=>n});var a=r(78397);let n=e=>e.status,i={chatInputHeight:e=>e.status.chatInputHeight||64,disabledModelProvidersSortType:e=>e.status.disabledModelProvidersSortType||"default",disabledModelsSortType:e=>e.status.disabledModelsSortType||"default",expandInputActionbar:e=>e.status.expandInputActionbar,filePanelWidth:e=>e.status.filePanelWidth,getAgentSystemRoleExpanded:e=>t=>!1!==(t.status.systemRoleExpandedMap||{})[e],hidePWAInstaller:e=>e.status.hidePWAInstaller,imagePanelWidth:e=>e.status.imagePanelWidth,imageTopicPanelWidth:e=>e.status.imageTopicPanelWidth,inZenMode:e=>e.status.zenMode,isShowCredit:e=>e.status.isShowCredit,isStatusInit:e=>!!e.isStatusInit,language:e=>e.status.language||"auto",mobileShowPortal:e=>e.status.mobileShowPortal,mobileShowTopic:e=>e.status.mobileShowTopic,portalWidth:e=>e.status.portalWidth||400,sessionGroupKeys:e=>e.status.expandSessionGroupKeys||a._X.expandSessionGroupKeys,sessionWidth:e=>e.status.sessionsWidth,showChatHeader:e=>!e.status.zenMode,showChatSideBar:e=>!e.status.zenMode&&e.status.showChatSideBar,showFilePanel:e=>e.status.showFilePanel,showImagePanel:e=>e.status.showImagePanel,showImageTopicPanel:e=>e.status.showImageTopicPanel,showSessionPanel:e=>!e.status.zenMode&&e.status.showSessionPanel,showSystemRole:e=>e.status.showSystemRole,systemStatus:n,themeMode:e=>e.status.themeMode||"auto",tokenDisplayFormatShort:e=>void 0===e.status.tokenDisplayFormatShort||e.status.tokenDisplayFormatShort,wideScreen:e=>!e.status.noWideScreen}},32181:(e,t,r)=>{r.d(t,{b:()=>a});let a=e=>e?"function"==typeof e?e():e:null},38759:(e,t,r)=>{r.d(t,{c:()=>$,k:()=>E});var a=r(14308),n=r(50786),i=r(23993),s=r(41734),o=r(89872);let l={preference:o.I},u={...{defaultSettings:r(74551).a$,settings:{}},...l,...{},...{isOnboard:!1,isShowPWAGuide:!1,isUserCanEnableTrace:!1,isUserHasConversation:!1,isUserStateInit:!1}};var c=r(96773),d=r(70674),g=r(64911),p=r(85366),m=r(46265),f=r(55582),y=r(67095),b=r(61497),h=r(71457);let v=(0,b.K)("common"),S="initUserState",w=(0,b.K)("preference");var O=r(31021),P=r.n(O),k=r(19530),x=r(45628);class A{constructor(){this.createShareSettingsUrl=e=>`/?${x.N}=${encodeURI(JSON.stringify(e))}`,this.decodeShareSettings=e=>{try{return{data:JSON.parse(e)}}catch(e){return{message:JSON.stringify(e)}}}}}let C=new A;var j=r(34743),M=r(1866),I=r(28074);let N=(0,s.t)("user"),E=(0,i.h)()((0,a.eh)(N((...e)=>({...u,...((e,t)=>({addToolToAllowList:async e=>{let r=t().settings.tool?.humanIntervention?.allowList||[];r.includes(e)||await t().setSettings({tool:{humanIntervention:{allowList:[...r,e]}}})},importAppSettings:async e=>{let{setSettings:r}=t();await r(e)},importUrlShareSettings:async e=>{if(e){let r=C.decodeShareSettings(e);!r?.message&&r?.data&&await t().setSettings(r.data)}},internal_createSignal:()=>{let r=t().updateSettingsSignal;r&&!r.signal.aborted&&r.abort(k.ve);let a=new AbortController;return e({updateSettingsSignal:a},!1,"signalForUpdateSettings"),a},resetSettings:async()=>{await f.W.resetUserSettings(),await t().refreshUserState()},setSettings:async r=>{let a,{settings:n,defaultSettings:i}=t(),s=(0,y.h)(n,r);if(P()(n,s))return;let o=(a=(e,t)=>(0,j.A)(e,(e,r,n)=>{(0,M.A)(r)&&(0,M.A)(t[n])?P()(r,t[n])||(e[n]=r):P()(r,t[n])||(e[n]=(0,I.A)(r)&&(0,I.A)(t[n])?a(r,t[n]):r)}))(s,i);e({settings:o},!1,"optimistic_updateSettings");let l=t().internal_createSignal();await f.W.updateUserSettings(o,l.signal),await t().refreshUserState()},updateDefaultAgent:async e=>{await t().setSettings({defaultAgent:e})},updateGeneralConfig:async e=>{await t().setSettings({general:e})},updateHumanIntervention:async e=>{let r=t().settings.tool?.humanIntervention||{};await t().setSettings({tool:{humanIntervention:{...r,...e}}})},updateKeyVaults:async e=>{await t().setSettings({keyVaults:e})},updateSystemAgent:async(e,r)=>{await t().setSettings({systemAgent:{[e]:{...r}}})}}))(...e),...((e,t)=>({updateGuideState:async e=>{let{updatePreference:r}=t(),a=(0,y.h)(t().preference.guide,e);await r({guide:a})},updateLab:async e=>{let{updatePreference:r}=t(),a=(0,y.h)(t().preference.lab,e);await r({lab:a},w("updateLab"))},updatePreference:async(r,a)=>{let n=(0,y.h)(t().preference,r);e({preference:n},!1,a||w("updatePreference")),await f.W.updatePreference(n)}}))(...e),...((e,t)=>({enableAuth:()=>c.S4,logout:async()=>{if(c.Nd)return void t().clerkSignOut?.({redirectUrl:location.toString()});if(c.J_){let{signOut:e}=await r.e(4975).then(r.bind(r,4975));e()}},openLogin:async()=>{if(c.Nd){let e=location.toString();t().clerkSignIn?.({fallbackRedirectUrl:e,signUpForceRedirectUrl:e,signUpUrl:"/signup"});return}if(c.J_){let{signIn:e}=await r.e(4975).then(r.bind(r,4975)),a=t()?.oAuthSSOProviders;if(a&&1===a.length)return void e(a[0]);e()}}}))(...e),...((e,t)=>({refreshUserState:async()=>{await (0,g.j)(S)},updateAvatar:async e=>{await f.W.updateAvatar(e),await t().refreshUserState()},updateKeyVaultConfig:async(e,r)=>{await t().setSettings({keyVaults:{[e]:r}})},useCheckTrace:e=>(0,p.Ay)(e?"checkTrace":null,()=>"boolean"==typeof h.U.userAllowTrace(t())?Promise.resolve(!1):Promise.resolve(t().isUserCanEnableTrace),{revalidateOnFocus:!1}),useInitUserState:(r,a,n)=>(0,m.Ju)(r?S:null,()=>f.W.getUserState(),{onError:e=>{n?.onError?.(e)},onSuccess:r=>{if(n?.onSuccess?.(r),r){let n={defaultAgent:a.defaultAgent,image:a.image,systemAgent:a.systemAgent},i=(0,y.h)(t().defaultSettings,n),s=0===Object.keys(r.preference||{}).length?o.I:r.preference,l=r.avatar||r.userId?(0,y.h)(t().user,{avatar:r.avatar,email:r.email,firstName:r.firstName,fullName:r.fullName,id:r.userId,latestName:r.lastName,username:r.username}):t().user;e({defaultSettings:i,isOnboard:r.isOnboard,isShowPWAGuide:r.canEnablePWAGuide,isUserCanEnableTrace:r.canEnableTrace,isUserHasConversation:r.hasConversation,isUserStateInit:!0,preference:s,settings:r.settings||{},subscriptionPlan:r.subscriptionPlan,user:l},!1,v("initUserState"));let u=(0,d.wZ)();u?.identify(r.userId||"",{email:r.email,firstName:r.firstName,lastName:r.lastName,username:r.username})}}})}))(...e)}))),n.x),$=()=>E.getState()},40714:(e,t,r)=>{r.d(t,{Ay:()=>n});var a=r(10053);let n={useBreakpoint:function(){return(0,a.A)()}}},46161:(e,t,r)=>{r.d(t,{C:()=>n});var a=r(83034);let n=()=>a.useReducer(e=>e+1,0)},48703:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(5686),n=r(83034);let i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"};var s=r(15983);let o=n.forwardRef(function(e,t){return n.createElement(s.A,(0,a.A)({},e,{ref:t,icon:i}))})},55582:(e,t,r)=>{r.d(t,{W:()=>i});var a=r(77605);class n{constructor(){this.getUserRegistrationDuration=async()=>a.du.user.getUserRegistrationDuration.query(),this.getUserState=async()=>a.du.user.getUserState.query(),this.getUserSSOProviders=async()=>a.du.user.getUserSSOProviders.query(),this.unlinkSSOProvider=async(e,t)=>a.du.user.unlinkSSOProvider.mutate({provider:e,providerAccountId:t}),this.makeUserOnboarded=async()=>a.du.user.makeUserOnboarded.mutate(),this.updateAvatar=async e=>a.du.user.updateAvatar.mutate(e),this.updatePreference=async e=>a.du.user.updatePreference.mutate(e),this.updateGuide=async e=>a.du.user.updateGuide.mutate(e),this.updateUserSettings=async(e,t)=>a.du.user.updateSettings.mutate(e,{signal:t}),this.resetUserSettings=async()=>a.du.user.resetSettings.mutate()}}let i=new n},67137:(e,t,r)=>{r.d(t,{R:()=>u});var a=r(77605),n=r(14306),i=r(38759),s=r(71457),o=r(12890);class l{async injectMPToken(){let e,t;if("undefined"==typeof localStorage||"active"===this.getTokenStatusFromCookie())return;let r=localStorage.getItem("_mpc");if(r)try{let a=atob(r),n=JSON.parse(a);e=n.clientId,t=n.clientSecret}catch(n){console.error("Failed to decode client data:",n);let r=await this.registerClient(),a=btoa(JSON.stringify({clientId:e=r.clientId,clientSecret:t=r.clientSecret}));localStorage.setItem("_mpc",a)}else{let r=await this.registerClient(),a=btoa(JSON.stringify({clientId:e=r.clientId,clientSecret:t=r.clientSecret}));localStorage.setItem("_mpc",a)}try{if(!(await a.du.market.registerM2MToken.query({clientId:e,clientSecret:t})).success){if(console.warn("Token registration failed, client credentials may be invalid. Clearing and retrying..."),localStorage.removeItem("_mpc"),this._isRetrying)console.error("Failed to re-register after credential invalidation");else{this._isRetrying=!0;try{await this.injectMPToken()}finally{this._isRetrying=!1}}return}}catch(e){return console.error("Failed to register M2M token:",e),null}}getTokenStatusFromCookie(){if("undefined"==typeof document)return null;for(let e of document.cookie.split(";")){let[t,r]=e.trim().split("=");if("mp_token_status"===t)return r}return null}constructor(){this._isRetrying=!1,this.getAssistantCategories=async(e={})=>{let t=n.J.getCurrentLanguage(),{source:r,...i}=e;return a.du.market.getAssistantCategories.query({...i,locale:t,source:r})},this.getAssistantDetail=async e=>{let t=n.J.getCurrentLanguage();return a.du.market.getAssistantDetail.query({identifier:e.identifier,locale:t,source:e.source,version:e.version})},this.getAssistantIdentifiers=async(e={})=>a.du.market.getAssistantIdentifiers.query(e),this.getAssistantList=async(e={})=>{let t=n.J.getCurrentLanguage();return a.du.market.getAssistantList.query({...e,locale:t,page:e.page?Number(e.page):1,pageSize:e.pageSize?Number(e.pageSize):20},{context:{showNotification:!1}})},this.getMcpCategories=async(e={})=>{let t=n.J.getCurrentLanguage();return a.du.market.getMcpCategories.query({...e,locale:t})},this.getMcpDetail=async e=>{let t=n.J.getCurrentLanguage();return a.du.market.getMcpDetail.query({...e,locale:t})},this.getMcpList=async(e={})=>{let t=n.J.getCurrentLanguage();return a.du.market.getMcpList.query({...e,locale:t,page:e.page?Number(e.page):1,pageSize:e.pageSize?Number(e.pageSize):20})},this.getMCPPluginList=async e=>{await this.injectMPToken();let t=n.J.getCurrentLanguage();return a.du.market.getMcpList.query({...e,locale:t,page:e.page?Number(e.page):1,pageSize:e.pageSize?Number(e.pageSize):21})},this.getMcpManifest=async e=>{let t=n.J.getCurrentLanguage();return a.du.market.getMcpManifest.query({...e,locale:t})},this.getMCPPluginManifest=async(e,t={})=>{let r=n.J.getCurrentLanguage();return a.du.market.getMcpManifest.query({identifier:e,install:t.install,locale:r})},this.registerClient=()=>a.du.market.registerClientInMarketplace.mutate({}),this.reportMcpInstallResult=async({success:e,manifest:t,errorMessage:r,errorCode:n,...l})=>{if(!s.U.userAllowTrace(i.k.getState()))return;await this.injectMPToken();let u={errorCode:e?void 0:n,errorMessage:e?void 0:r,manifest:e?t:void 0,success:e,...l};a.du.market.reportMcpInstallResult.mutate((0,o.j)(u)).catch(e=>{console.warn("Failed to report MCP installation result:",e)})},this.reportPluginCall=async e=>{s.U.userAllowTrace(i.k.getState())&&(await this.injectMPToken(),a.du.market.reportCall.mutate((0,o.j)(e)).catch(e=>{console.warn("Failed to report call:",e)}))},this.getModelCategories=async(e={})=>a.du.market.getModelCategories.query(e),this.getModelDetail=async e=>{let t=n.J.getCurrentLanguage();return a.du.market.getModelDetail.query({...e,locale:t})},this.getModelIdentifiers=async()=>a.du.market.getModelIdentifiers.query(),this.getModelList=async(e={})=>{let t=n.J.getCurrentLanguage();return a.du.market.getModelList.query({...e,locale:t,page:e.page?Number(e.page):1,pageSize:e.pageSize?Number(e.pageSize):20})},this.getPluginCategories=async(e={})=>{let t=n.J.getCurrentLanguage();return a.du.market.getPluginCategories.query({...e,locale:t})},this.getPluginDetail=async e=>{let t=n.J.getCurrentLanguage();return a.du.market.getPluginDetail.query({...e,locale:t})},this.getPluginIdentifiers=async()=>a.du.market.getPluginIdentifiers.query(),this.getPluginList=async(e={})=>{let t=n.J.getCurrentLanguage();return a.du.market.getPluginList.query({...e,locale:t,page:e.page?Number(e.page):1,pageSize:e.pageSize?Number(e.pageSize):20})},this.getProviderDetail=async e=>{let t=n.J.getCurrentLanguage();return a.du.market.getProviderDetail.query({...e,locale:t})},this.getProviderIdentifiers=async()=>a.du.market.getProviderIdentifiers.query(),this.getProviderList=async(e={})=>{let t=n.J.getCurrentLanguage();return a.du.market.getProviderList.query({...e,locale:t,page:e.page?Number(e.page):1,pageSize:e.pageSize?Number(e.pageSize):20})}}}let u=new l},67693:(e,t,r)=>{r.d(t,{A:()=>b});var a=r(83034),n=r(52762),i=r.n(n),s=r(37255),o=r(70520),l=r(32181),u=r(36421),c=r(47846),d=r(67863),g=r(27498),p=r(76253),m=r(17191),f=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};let y=a.forwardRef((e,t)=>{var r,n;let{prefixCls:y,title:b,content:h,overlayClassName:v,placement:S="top",trigger:w="hover",children:O,mouseEnterDelay:P=.1,mouseLeaveDelay:k=.1,onOpenChange:x,overlayStyle:A={},styles:C,classNames:j}=e,M=f(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:I,className:N,style:E,classNames:$,styles:T}=(0,d.TP)("popover"),U=I("popover",y),[z,L,D]=(0,m.A)(U),W=I(),R=i()(v,L,D,N,$.root,null==j?void 0:j.root),F=i()($.body,null==j?void 0:j.body),[J,q]=(0,s.A)(!1,{value:null!=(r=e.open)?r:e.visible,defaultValue:null!=(n=e.defaultOpen)?n:e.defaultVisible}),_=(e,t)=>{q(e,!0),null==x||x(e,t)},B=(0,l.b)(b),G=(0,l.b)(h);return z(a.createElement(g.A,Object.assign({placement:S,trigger:w,mouseEnterDelay:P,mouseLeaveDelay:k},M,{prefixCls:U,classNames:{root:R,body:F},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},T.root),E),A),null==C?void 0:C.root),body:Object.assign(Object.assign({},T.body),null==C?void 0:C.body)},ref:t,open:J,onOpenChange:e=>{_(e)},overlay:B||G?a.createElement(p.hJ,{prefixCls:U,title:B,content:G}):null,transitionName:(0,u.b)(W,"zoom-big",M.transitionName),"data-popover-inject":!0}),(0,c.Ob)(O,{onKeyDown:e=>{var t,r;(0,a.isValidElement)(O)&&(null==(r=null==O?void 0:(t=O.props).onKeyDown)||r.call(t,e)),e.keyCode===o.A.ESC&&_(!1,e)}})))});y._InternalPanelDoNotUseOrYouWillBeFired=p.Ay;let b=y},71457:(e,t,r)=>{r.d(t,{U:()=>n});var a=r(74551);let n={hideSettingsMoveGuide:e=>e.preference.guide?.moveSettingsToAvatar,hideSyncAlert:e=>e.preference.hideSyncAlert,isPreferenceInit:e=>e.isUserStateInit,shouldTriggerFileInKnowledgeBaseTip:e=>"boolean"!=typeof e.preference.guide?.moveSettingsToAvatar,showUploadFileInKnowledgeBaseTip:e=>e.preference.guide?.uploadFileInKnowledgeBase,topicDisplayMode:e=>e.preference.topicDisplayMode||a.I4.topicDisplayMode,useCmdEnterToSend:e=>e.preference.useCmdEnterToSend||!1,userAllowTrace:e=>e.preference.telemetry}},76253:(e,t,r)=>{r.d(t,{Ay:()=>p,hJ:()=>d,xn:()=>g});var a=r(83034),n=r(52762),i=r.n(n),s=r(30396),o=r(32181),l=r(67863),u=r(17191),c=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)0>t.indexOf(a[n])&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r};let d=({title:e,content:t,prefixCls:r})=>e||t?a.createElement(a.Fragment,null,e&&a.createElement("div",{className:`${r}-title`},e),t&&a.createElement("div",{className:`${r}-inner-content`},t)):null,g=e=>{let{hashId:t,prefixCls:r,className:n,style:l,placement:u="top",title:c,content:g,children:p}=e,m=(0,o.b)(c),f=(0,o.b)(g),y=i()(t,r,`${r}-pure`,`${r}-placement-${u}`,n);return a.createElement("div",{className:y,style:l},a.createElement("div",{className:`${r}-arrow`}),a.createElement(s.z,Object.assign({},e,{className:t,prefixCls:r}),p||a.createElement(d,{prefixCls:r,title:m,content:f})))},p=e=>{let{prefixCls:t,className:r}=e,n=c(e,["prefixCls","className"]),{getPrefixCls:s}=a.useContext(l.QO),o=s("popover",t),[d,p,m]=(0,u.A)(o);return d(a.createElement(g,Object.assign({},n,{prefixCls:o,hashId:p,className:i()(r,m)})))}},76694:(e,t,r)=>{r.d(t,{c:()=>o});var a=r(5003),n=r(12020),i=r(31065);let s=e=>(0,i.i)(e).language||"auto",o={currentLanguage:e=>{let t=s(e);return"auto"===t?n.i?a.xN:navigator.language:t},language:s}},92831:(e,t,r)=>{r.d(t,{A:()=>a});let a=function(e){return function(t){return null==e?void 0:e[t]}}},99454:(e,t,r)=>{r.d(t,{A:()=>f});var a,n=r(83034),i=r(80457),s=r(11577),o=r(13380),l=(0,s.rU)(function(e,t){var r,n,i=e.css,s=t.rows,l=t.maxItemWidth,u=t.gap;return i(a||(r=["\n      --rows: ",";\n      --max-item-width: ",";\n      --gap: ",";\n\n      display: grid !important;\n      grid-template-columns: repeat(\n        auto-fill,\n        minmax(\n          max(var(--max-item-width), calc((100% - var(--gap) * (var(--rows) - 1)) / var(--rows))),\n          1fr\n        )\n      );\n    "],n||(n=r.slice(0)),a=Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))),s,(0,o.A)(l)?l:"".concat(l,"px"),(0,o.A)(u)?u:"".concat(u,"px"))}),u=r(54898);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=["className","gap","rows","children","maxItemWidth","ref"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){var a,n,i;a=e,n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=c(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:String(t)}(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=(0,n.memo)(function(e){var t=e.className,r=e.gap,a=void 0===r?"1em":r,n=e.rows,s=e.children,o=e.maxItemWidth,c=e.ref,g=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,d),m=l({gap:a,maxItemWidth:void 0===o?240:o,rows:void 0===n?3:n}),f=m.cx,y=m.styles;return(0,u.jsx)(i.Flexbox,p(p({className:f(y,t),gap:a,ref:c},g),{},{children:s}))});m.displayName="Grid";let f=m}}]);