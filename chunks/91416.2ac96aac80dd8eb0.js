"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91416],{27809:(e,t,r)=>{r.d(t,{P:()=>a});let a=async(e,t,r=!0)=>{try{let r=await fetch(e,{cache:"no-store",credentials:"omit",mode:"cors"});if(!r.ok)throw Error(`Failed to fetch image: ${r.status} ${r.statusText}`);let a=await r.blob(),o=window.URL.createObjectURL(a),n=document.createElement("a");n.href=o,n.download=t,n.style.display="none",document.body.append(n),n.click(),n.remove(),window.URL.revokeObjectURL(o)}catch(t){if(console.log("Download failed:",t),r)window.open(e);else throw t}}},28557:(e,t,r)=>{r.d(t,{H:()=>n});var a=r(16748),o=r(64752);let n=({provider:e,runtimeProvider:t,payload:r})=>{let n={...r,...(0,o.ZE)(e)};return a.k6.initializeWithProvider(t??e,{dangerouslyAllowBrowser:!0,...n,...r})}},32308:(e,t,r)=>{r.d(t,{Sn:()=>a,U9:()=>n,sg:()=>o});let a={oauth:"/api/auth",proxy:"/webapi/proxy",gateway:"/webapi/plugin/gateway",trace:"/webapi/trace",chat:e=>`/webapi/chat/${e}`,models:e=>`/webapi/models/${e}`,modelPull:e=>`/webapi/models/${e}/pull`,images:e=>`/webapi/text-to-image/${e}`,stt:"/webapi/stt/openai",tts:"/webapi/tts/openai",edge:"/webapi/tts/edge",microsoft:"/webapi/tts/microsoft"},o={auth:"/lobehub-oidc/auth",token:"/market/oidc/token",userinfo:"/market/oidc/userinfo",handoff:"/market/oidc/handoff",desktopCallback:"/lobehub-oidc/callback/desktop"},n={base:"/market",createAgent:"/market/agent/create",getAgentDetail:e=>`/market/agent/${encodeURIComponent(e)}`,createAgentVersion:"/market/agent/versions/create"}},32901:(e,t,r)=>{r.d(t,{Om:()=>m,SU:()=>o,qp:()=>s,PE:()=>l.P,HP:()=>d,Vz:()=>c,rX:()=>f,pU:()=>b});class a{getKeyStore(e){let t=this._cache.get(e);if(!t){let r=e.split(",").map(e=>e.trim()).filter(e=>!!e);t={index:0,keyLen:r.length,keys:r},this._cache.set(e,t)}return t}pick(e=""){if(!e)return;let t=this.getKeyStore(e),r=0;return"turn"===this._mode&&(r=t.index++%t.keyLen),"random"===this._mode&&(r=Math.floor(Math.random()*t.keyLen)),t.keys[r]}constructor(){this._cache=new Map,this._mode="random"}}let o=new a,n=e=>{let t=new Image;t.addEventListener("load",function(){let e=document.createElement("canvas");e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0);try{e.toBlob(function(e){let t=new ClipboardItem({"image/png":e});navigator.clipboard.write([t]).then(function(){console.log("Image copied to clipboard successfully using canvas and modern API")})})}catch{let t=e.toDataURL("image/png"),r=document.createElement("textarea");r.value=t,document.body.append(r),r.select(),document.execCommand("copy"),r.remove()}}),t.src=e},i=async e=>{try{let t=await fetch(e),r=await t.blob(),a=new ClipboardItem({"image/png":r});await navigator.clipboard.write([a])}catch(t){console.error("Failed to copy image using modern API:",t),n(e)}},s=async e=>{navigator.clipboard&&"write"in navigator.clipboard?await i(e):n(e)};var l=r(27809);let d=(e,t)=>{let r=new Blob([e],{type:"plain/text"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=t||"file.txt",document.body.append(o),o.click(),URL.revokeObjectURL(a),o.remove()},c=(e,t)=>{let r=new Blob([JSON.stringify(e)],{type:"application/json"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=t,document.body.append(o),o.click(),URL.revokeObjectURL(a),o.remove()};var u=r(38759),p=r(61520),g=r(46322);let m={date:()=>new Date().toLocaleDateString(),datetime:()=>new Date().toLocaleString(),day:()=>new Date().getDate().toString().padStart(2,"0"),hour:()=>new Date().getHours().toString().padStart(2,"0"),iso:()=>new Date().toISOString(),locale:()=>Intl.DateTimeFormat().resolvedOptions().locale,minute:()=>new Date().getMinutes().toString().padStart(2,"0"),month:()=>(new Date().getMonth()+1).toString().padStart(2,"0"),second:()=>new Date().getSeconds().toString().padStart(2,"0"),time:()=>new Date().toLocaleTimeString(),timestamp:()=>Date.now().toString(),timezone:()=>Intl.DateTimeFormat().resolvedOptions().timeZone,weekday:()=>new Date().toLocaleDateString("en-US",{weekday:"long"}),year:()=>new Date().getFullYear().toString(),email:()=>p.f.email(u.k.getState())??"",nickname:()=>p.f.nickName(u.k.getState())??"",username:()=>p.f.displayUserName(u.k.getState())??p.f.fullName(u.k.getState())??"",random:()=>Math.floor(1e6*Math.random()+1).toString(),random_bool:()=>Math.random()>.5?"true":"false",random_float:()=>(100*Math.random()).toFixed(2),random_hex:()=>Math.floor(0xffffff*Math.random()).toString(16).padStart(6,"0"),random_int:()=>Math.floor(100*Math.random()+1).toString(),random_string:()=>Math.random().toString(36).slice(2,15),random_digit:()=>Math.floor(10*Math.random()).toString(),uuid:()=>(0,g.uR)(),uuid_short:()=>(0,g.uR)().split("-")[0],language:()=>"undefined"!=typeof navigator?navigator.language:"",platform:()=>"undefined"!=typeof navigator?navigator.platform:"",user_agent:()=>"undefined"!=typeof navigator?navigator.userAgent:""};var h=r(83663);let f=e=>h.A.sanitize(e,{FORBID_ATTR:["onblur","onchange","onclick","onerror","onfocus","onkeydown","onkeypress","onkeyup","onload","onmousedown","onmouseout","onmouseover","onmouseup","onreset","onselect","onsubmit","onunload"],FORBID_TAGS:["embed","link","object","script","style"],KEEP_CONTENT:!1,USE_PROFILES:{svg:!0,svgFilters:!0}});var y=r(9402);let b=e=>{if(!e.type.startsWith("video/"))return{isValid:!0};let t=e.size<=0x1400000;return{actualSize:(0,y.Xq)(e.size),isValid:t}}},45282:(e,t,r)=>{r.d(t,{t:()=>n});var a=r(42897);let o=e=>(0,a.fe)(e).keyVaults||{},n={getVaultByProvider:e=>t=>o(t)[e]||{},keyVaultsSettings:o,password:e=>o(e).password||""}},47260:(e,t,r)=>{r.d(t,{w:()=>d});var a=r(67400);let o=e=>e.aiProviderList.filter(e=>e.enabled).sort((e,t)=>e.sort-t.sort),n=e=>e.aiProviderDetail,i=new Set(["ollama","lmstudio"]),s=e=>n(e)?.keyVaults,l=e=>t=>{if(e)return t.aiProviderRuntimeConfig?.[e]},d={activeProviderConfig:n,disabledAiProviderList:e=>e.aiProviderList.filter(e=>!e.enabled),enabledAiProviderList:o,enabledImageModelList:e=>e.enabledImageModelList||[],isActiveProviderApiKeyNotEmpty:e=>{let t=s(e);return!!t?.apiKey||!!t?.accessKeyId||!!t?.secretAccessKey},isActiveProviderEndpointNotEmpty:e=>{let t=s(e);return!!t?.baseURL||!!t?.endpoint},isAiProviderConfigLoading:e=>t=>t.activeAiProvider!==e,isInitAiProviderRuntimeState:e=>!!e.isInitAiProviderRuntimeState,isProviderConfigUpdating:e=>t=>t.aiProviderConfigUpdatingIds.includes(e),isProviderEnableResponseApi:e=>t=>{let r=l(e)(t),a=r?.config?.enableResponseApi;return"boolean"==typeof a?a:"openai"===e},isProviderEnabled:e=>t=>o(t).some(t=>t.id===e),isProviderFetchOnClient:e=>t=>{let r=l(e)(t);if((0,a.isProviderDisableBrowserRequest)(e))return!1;if(i.has(e)&&void 0!==r?.fetchOnClient)return r?.fetchOnClient;let o=!!r?.keyVaults.baseURL,n=!!r?.keyVaults.apiKey;return(!!o||!!n)&&(!!o&&!n||void 0!==r?.fetchOnClient&&r?.fetchOnClient)},isProviderHasBuiltinSearch:e=>t=>{let r=l(e)(t);return!!r?.settings.searchMode},isProviderHasBuiltinSearchConfig:e=>t=>{let r=l(e)(t);return!!r?.settings.searchMode&&r?.settings.searchMode!=="internal"},isProviderLoading:e=>t=>t.aiProviderLoadingIds.includes(e),providerConfigById:l,providerKeyVaults:e=>t=>{if(e)return t.aiProviderRuntimeConfig?.[e]?.keyVaults}}},50949:(e,t,r)=>{r.d(t,{J3:()=>l,a9:()=>d,oT:()=>s,u4:()=>u,w9:()=>c});var a=r(80286),o=r(94147),n=r(81196),i=r(47260);let s=(e,t)=>n.g.isModelSupportVision(e,t)((0,o.l)()),l=(e,t)=>n.g.isModelSupportVideo(e,t)((0,o.l)())||!1,d=(e,t)=>{let r=e,a=(0,o.l)().enabledAiModels?.find(r=>r.id===e&&r.providerId===t);return a&&a.config?.deploymentName&&(r=a.config?.deploymentName),r},c=e=>i.w.isProviderFetchOnClient(e)((0,o.l)()),u=e=>{if(Object.values(a.ModelProvider).includes(e))return e;let t=i.w.providerConfigById(e)((0,o.l)());return t?.settings.sdkType||"openai"}},64752:(e,t,r)=>{r.d(t,{createHeaderWithAuth:()=>y,ZE:()=>h,q9:()=>f});var a=r(74551),o=r(32901),n=r(80286),i=r(47260),s=r(94147),l=r(38759),d=r(45282),c=r(61520),u=r(96773);let p=e=>new TextEncoder().encode(e),g=e=>btoa(String.fromCharCode(...((e,t)=>{let r=new Uint8Array(e.length);for(let[a,o]of e.entries())r[a]=o^t[a%t.length];return r})(p(JSON.stringify(e)),p(u.RX))));var m=r(50949);let h=e=>{let t=i.w.providerKeyVaults(e)(s.d.getState())||{},r=(0,m.u4)(e);return{...((e,t)=>{switch(e){case n.ModelProvider.Bedrock:{let{accessKeyId:e,region:r,secretAccessKey:a,sessionToken:o}=t;return{accessKeyId:e,accessKeySecret:a,apiKey:(a||"")+(e||""),awsAccessKeyId:e,awsRegion:r,awsSecretAccessKey:a,awsSessionToken:o,region:r,sessionToken:o}}case n.ModelProvider.Azure:return{apiKey:o.SU.pick(t.apiKey),apiVersion:t.apiVersion,azureApiVersion:t.apiVersion,baseURL:t.baseURL||t.endpoint};case n.ModelProvider.Ollama:return{baseURL:t?.baseURL};case n.ModelProvider.Cloudflare:return{apiKey:o.SU.pick(t?.apiKey),baseURLOrAccountID:t?.baseURLOrAccountID,cloudflareBaseURLOrAccountID:t?.baseURLOrAccountID};case n.ModelProvider.ComfyUI:return{apiKey:t?.apiKey,authType:t?.authType,baseURL:t?.baseURL,customHeaders:t?.customHeaders,password:t?.password,username:t?.username};case n.ModelProvider.VertexAI:return{apiKey:t?.apiKey,baseURL:t?.baseURL,vertexAIRegion:t?.region};default:return{apiKey:o.SU.pick(t?.apiKey),baseURL:t?.baseURL}}})(r,t),runtimeProvider:r}},f=e=>g(h(e)),y=async e=>{let t=e?.payload||{};e?.provider&&(t={...t,...h(e?.provider)});let r=((e={})=>g({accessCode:d.t.password(l.k.getState()),userId:c.f.userId(l.k.getState()),...e}))(t);return{...e?.headers,[a.Zk]:r}}},79998:(e,t,r)=>{r.d(t,{aY:()=>m,EB:()=>u,gj:()=>f,jD:()=>h,Pv:()=>g});var a=r(74551),o=r(16748),n=r(22309);async function i(e,t){let r,a=e.getReader();for(;!(r=await a.read()).done;)t(r.value)}function s(){return{data:"",event:"",id:"",retry:void 0}}let l="last-event-id";var d=r(46322),c=r(85614);let u=async e=>{let t;try{let r=await e.json();t={body:r.body,message:(0,c.t)(`response.${r.errorType}`,{ns:"error"}),type:r.errorType}}catch{t={message:(0,c.t)(`response.${e.status}`,{ns:"error"}),type:e.status}}return t},p=e=>{let{startSpeed:t=10}=e,r="",a=[],o=!1,n=null,i=0,s=0,l=t,d=0;return{isAnimationActive:!1,isTokenRemain:()=>a.length>0,pushToQueue:e=>{a.push(...e.split(""))},startAnimation:(c=t)=>new Promise(t=>{if(o)return void t();o=!0,i=performance.now(),s=0,l=c,d=0;let u=p=>{if(!o){null!==n&&cancelAnimationFrame(n),t();return}let g=p-i;i=p,s+=g;let m=0;if(a.length>0){let e=Math.max(c,a.length),t=8e-4*Math.abs(a.length-d)+.005;l+=(e-l)*t,m=Math.floor(s*l/1e3)}if(m>0){s-=1e3*m/l;let t=Math.min(m,a.length),o=a.splice(0,t).join("");r+=o,e.onTextUpdate(o,r)}d=a.length,a.length>0&&o?n=requestAnimationFrame(u):(o=!1,n=null,t())};n=requestAnimationFrame(u)}),stopAnimation:()=>{o=!1,null!==n&&(cancelAnimationFrame(n),n=null)}}},g=e=>"object"==typeof e?e:{text:e},m=async(e,t={})=>{let r,c,m,h,f,y,b=!1,w="done",{text:v,speed:k}=g(t.responseAnimation??{}),M="none"===v,S="smooth"===v,A="",P=null,L=()=>{A&&(t.onMessageHandle?.({text:A,type:"text"}),A="")},R="",C=p({onTextUpdate:(e,r)=>{R=r,t.onMessageHandle?.({text:e,type:"text"})},startSpeed:k}),U="",x=p({onTextUpdate:(e,r)=>{U=r,t.onMessageHandle?.({text:e,type:"reasoning"})},startSpeed:k}),I="",E=null,T=()=>{I&&(t.onMessageHandle?.({text:I,type:"reasoning"}),I="")},O=[];if(await function(e,{signal:t,headers:r,onopen:a,onmessage:o,onclose:n,onerror:d,fetch:c,...u}){return new Promise(p=>{let g={...r};g.accept||(g.accept="text/event-stream");let m=c??window.fetch;!async function(){try{var r,c;let d,h,f,y,b,w,v=await m(e,{...u,headers:g,signal:t});await a(v),await i(v.body,(r=e=>{e?g[l]=e:delete g[l]},d=s(),h=new TextDecoder,c=function(e,t){if(0===e.length)o?.(d),d=s();else if(t>0){let a=h.decode(e.subarray(0,t)),o=t+(32===e[t+1]?2:1),n=h.decode(e.subarray(o));switch(a){case"data":d.data=d.data?d.data+"\n"+n:n;break;case"event":d.event=n;break;case"id":r(d.id=n)}}},w=!1,function(e){var t,r;let a;void 0===f?(f=e,y=0,b=-1):(t=f,r=e,(a=new Uint8Array(t.length+r.length)).set(t),a.set(r,t.length),f=a);let o=f.length,n=0;for(;y<o;){w&&(10===f[y]&&(n=++y),w=!1);let e=-1;for(;y<o&&-1===e;++y)switch(f[y]){case 58:-1===b&&(b=y-n);break;case 13:w=!0;case 10:e=y}if(-1===e)break;c(f.subarray(n,e),b),n=y,b=-1}n===o?f=void 0:0!==n&&(f=f.subarray(n),y-=n)})),n?.(),p()}catch(e){d?.(e),p()}}()})}(e,{body:t.body,fetch:t?.fetcher,headers:t.headers,method:t.method,onerror:e=>{if(e===a.OB||"AbortError"===e.name)w="abort",t?.onAbort?.(R),C.stopAnimation();else{w="error",t.onErrorHandle?.(e.type?e:{body:{message:e.message,name:e.name,stack:e.stack},message:e.message,type:n.T_.UnknownChatFetchError});return}},onmessage:e=>{let a;b=!0;try{a=JSON.parse(e.data)}catch(r){console.warn("parse error:",r),t.onErrorHandle?.({body:{context:{chunk:e.data,error:{message:r.message,name:r.name}},message:"chat response streaming chunk parse error, please contact your API Provider to fix it."},message:"parse error",type:"StreamChunkError"});return}switch(e.event){case"error":w="error",t.onErrorHandle?.(a);break;case"base64_image":{let e="tmp_img_"+(0,d.Ak)(),r={data:a,id:e,isBase64:!0};O.push(r),t.onMessageHandle?.({id:e,image:r,images:O,type:"base64_image"});break}case"text":if(!a)break;M?(R+=a,t.onMessageHandle?.({text:a,type:"text"})):S?(C.pushToQueue(a),C.isAnimationActive||C.startAnimation()):(R+=a,A+=a,P||(P=setTimeout(()=>{L(),P=null},300)));break;case"usage":c=a,t.onMessageHandle?.({type:"usage",usage:a});break;case"speed":m=a,t.onMessageHandle?.({speed:a,type:"speed"});break;case"grounding":r=a,t.onMessageHandle?.({grounding:a,type:"grounding"});break;case"reasoning_signature":y=a;break;case"stop":t.onMessageHandle?.({reason:a,type:"stop"});break;case"reasoning":S?(x.pushToQueue(a),x.isAnimationActive||x.startAnimation()):(U+=a,I+=a,E||(E=setTimeout(()=>{T(),E=null},300)));break;case"tool_calls":h||(h=[]),h=(0,o.NN)(h,a),t.onMessageHandle?.({tool_calls:h,type:"tool_calls"})}},onopen:async e=>{if(!(f=e.clone()).ok)throw await u(e)},signal:t.signal}),f&&(C.stopAnimation(),P&&(clearTimeout(P),L()),E&&(clearTimeout(E),T()),f.ok)){b||(R=await f.clone().text(),t.onMessageHandle?.({text:R,type:"text"}));let e=f.headers.get(a.g_),o=f.headers.get(a.TE);C.isTokenRemain()&&await C.startAnimation(k),await t?.onFinish?.(R,{grounding:r,images:O.length>0?O:void 0,observationId:o,reasoning:U?{content:U,signature:y}:void 0,speed:m,toolCalls:h,traceId:e,type:w,usage:c})}return f},h=e=>{let t={};return e&&(e instanceof Headers?e.forEach((e,r)=>{t[r]=e}):Array.isArray(e)?e.forEach(([e,r])=>{t[e]=r}):Object.assign(t,e),delete t.host,delete t.connection,delete t["content-length"]),t},f=async e=>{if(e){if("string"==typeof e||e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(e instanceof Blob)return await e.arrayBuffer();throw console.warn("Unsupported IPC proxy request body type:",typeof e),Error("Unsupported IPC proxy request body type")}}},81196:(e,t,r)=>{r.d(t,{g:()=>c});var a=r(80286),o=r(88573);let n=e=>e.aiProviderModelList.filter(e=>e.enabled),i=e=>e.aiProviderModelList.length,s=(e,t)=>r=>r.enabledAiModels?.find(r=>r.id===e&&(!t||t===r.providerId)),l=(e,t)=>r=>{let a=s(e,t)(r);return a?.settings?.extendParams},d=(e,t)=>r=>{let a=s(e,t)(r);return a?.settings?.searchImpl},c={aiProviderChatModelListIds:e=>e.aiProviderModelList.filter(e=>"chat"===e.type).map(e=>e.id),disabledAiProviderModelList:e=>e.aiProviderModelList.filter(e=>!e.enabled),enabledAiProviderModelList:n,filteredAiProviderModelList:e=>{let t=e.modelSearchKeyword.toLowerCase().trim();return e.aiProviderModelList.filter(e=>e.id.toLowerCase().includes(t)||e.displayName?.toLowerCase().includes(t))},getAiModelById:e=>t=>t.aiProviderModelList.find(t=>t.id===e),getEnabledModelById:s,getModelCard:(e,t)=>r=>r.builtinAiModelList.find(r=>r.id===e&&r.providerId===t),hasRemoteModels:e=>e.aiProviderModelList.some(e=>e.source===a.AiModelSourceEnum.Remote),isEmptyAiProviderModelList:e=>0===i(e),isModelBuiltinSearchInternal:(e,t)=>r=>d(e,t)(r)===o.P.Internal,isModelEnabled:e=>t=>n(t).some(t=>t.id===e),isModelHasBuiltinSearch:(e,t)=>r=>!!d(e,t)(r),isModelHasBuiltinSearchConfig:(e,t)=>r=>{let a=d(e,t)(r);return!!a&&[o.P.Tool,o.P.Params].includes(a)},isModelHasContextWindowToken:(e,t)=>r=>{let a=s(e,t)(r);return"number"==typeof a?.contextWindowTokens},isModelHasExtendParams:(e,t)=>r=>{let a=l(e,t)(r);return!!a&&a.length>0},isModelLoading:e=>t=>t.aiModelLoadingIds.includes(e),isModelSupportFiles:(e,t)=>r=>{let a=s(e,t)(r);return a?.abilities?.files},isModelSupportReasoning:(e,t)=>r=>{let a=s(e,t)(r);return a?.abilities?.reasoning},isModelSupportToolUse:(e,t)=>r=>{let a=s(e,t)(r);return a?.abilities?.functionCall||!1},isModelSupportVideo:(e,t)=>r=>{let a=s(e,t)(r);return a?.abilities?.video},isModelSupportVision:(e,t)=>r=>{let a=s(e,t)(r);return a?.abilities?.vision||!1},modelBuiltinSearchImpl:d,modelContextWindowTokens:(e,t)=>r=>{let a=s(e,t)(r);return a?.contextWindowTokens},modelExtendParams:l,totalAiProviderModelList:i}},91416:(e,t,r)=>{r.d(t,{modelsService:()=>p});var a=r(79998),o=r(64752),n=r(47260),i=r(94147),s=r(32308),l=r(28557),d=r(50949);let c=e=>n.w.isProviderFetchOnClient(e)((0,i.l)());class u{constructor(){this._abortController=null,this.getModels=async e=>{let t=await (0,o.createHeaderWithAuth)({headers:{"Content-Type":"application/json"},provider:e}),r=(0,d.u4)(e);try{if(c(e))return(await (0,l.H)({provider:e,runtimeProvider:r})).models();let a=await fetch(s.Sn.models(r),{headers:t});if(!a.ok)return;return a.json()}catch{return}},this.downloadModel=async({model:e,provider:t},{onProgress:r}={})=>{try{let n;this._abortController=new AbortController;let i=this._abortController.signal,u=await (0,o.createHeaderWithAuth)({headers:{"Content-Type":"application/json"},provider:t}),p=(0,d.u4)(t),g=c(t);if(console.log("enableFetchOnClientï¼š",g),g){let r=await (0,l.H)({provider:t,runtimeProvider:p});n=await r.pullModel({model:e},{signal:i})}else n=await fetch(s.Sn.modelPull(p),{body:JSON.stringify({model:e}),headers:u,method:"POST",signal:i});if(!n.ok)throw await (0,a.EB)(n);n.body&&await this.processModelPullStream(n,{onProgress:r})}catch(e){if(e instanceof DOMException&&"AbortError"===e.name)return;throw console.error("download model error:",e),e}finally{this._abortController=null}},this.abortPull=()=>{this._abortController&&(this._abortController.abort(),this._abortController=null)},this.processModelPullStream=async(e,{onProgress:t,onError:r})=>{let a=e.body?.getReader();if(a)for(;;){let{done:e,value:o}=await a.read();if(e)break;for(let e of new TextDecoder().decode(o).trim().split("\n")){let a;try{a=JSON.parse(e)}catch(t){console.error("Error parsing progress update:",t),console.error("raw data",e)}if("canceled"===a.status&&console.log("progress:",a),"error"===a.status)throw r?.({message:a.error}),Error(a.error);(void 0!==a.completed||a.status)&&t?.(a)}}}}}let p=new u}}]);