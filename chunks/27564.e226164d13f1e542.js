"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[27564,51989],{14654:(e,t,n)=>{n.d(t,{Q:()=>s});var r=n(25196),o=n(40714),i=n(83034),s=function(){var e=o.Ay.useBreakpoint();return(0,i.useMemo)(function(){return(0,r.s)(e)},[e])}},20439:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(28709).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},35007:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(72533);let o=function(e,t){return(0,r.A)(e,t)}},39639:(e,t,n)=>{n.d(t,{A:()=>r});let r=function(e){return void 0===e}},40697:(e,t,n)=>{n.d(t,{A:()=>r});let r=(0,n(28709).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},40714:(e,t,n)=>{n.d(t,{Ay:()=>o});var r=n(10053);let o={useBreakpoint:function(){return(0,r.A)()}}},51989:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});let r={addUserMessage:{desc:"将当前输入内容添加为用户消息，但不触发生成",title:"添加一条用户消息"},clearCurrentMessages:{desc:"清空当前会话的消息和上传的文件",title:"清空会话消息"},commandPalette:{desc:"打开全局命令面板快速访问功能",title:"命令面板"},deleteAndRegenerateMessage:{desc:"删除最后一条消息并重新生成",title:"删除并重新生成"},deleteLastMessage:{desc:"删除最后一条消息",title:"删除最后一条消息"},desktop:{openSettings:{desc:"打开应用设置页面",title:"应用设置"},showApp:{desc:"全局快捷键显示或隐藏主窗口",title:"显示/隐藏主窗口"}},editMessage:{desc:"通过按住 Alt 并双击消息进入编辑模式",title:"编辑消息"},navigateToChat:{desc:"切换至会话标签并进入随便聊聊",title:"切换至默认会话"},openChatSettings:{desc:"查看和修改当前会话的设置",title:"打开会话设置"},openHotkeyHelper:{desc:"查看所有快捷键的使用说明",title:"打开快捷键帮助"},regenerateMessage:{desc:"重新生成最后一条消息",title:"重新生成消息"},saveTopic:{desc:"保存当前话题并打开新话题",title:"开启新话题"},search:{desc:"唤起当前页面主要搜索框",title:"搜索"},showApp:{desc:"快速唤起应用主窗口",title:"显示主窗口"},switchAgent:{desc:"通过按住 Ctrl 加数字 0~9 切换固定在侧边栏的助手",title:"快捷切换助手"},toggleLeftPanel:{desc:"显示或隐藏左侧助手面板",title:"显示/隐藏助手面板"},toggleRightPanel:{desc:"显示或隐藏右侧话题面板",title:"显示/隐藏话题面板"},toggleZenMode:{desc:"专注模式下，只显示当前会话，隐藏其他 UI",title:"切换专注模式"}}},64751:(e,t,n)=>{n.d(t,{e:()=>r,p:()=>o});let r=(e,t)=>{void 0!==(null==e?void 0:e.addEventListener)?e.addEventListener("change",t):void 0!==(null==e?void 0:e.addListener)&&e.addListener(t)},o=(e,t)=>{void 0!==(null==e?void 0:e.removeEventListener)?e.removeEventListener("change",t):void 0!==(null==e?void 0:e.removeListener)&&e.removeListener(t)}},86653:(e,t,n)=>{n.d(t,{Hb:()=>S,KO:()=>j,vC:()=>x,wc:()=>w});var r=n(83034),o=n(54898);let i=["shift","alt","meta","mod","ctrl","control"],s={esc:"escape",return:"enter",left:"arrowleft",right:"arrowright",up:"arrowup",down:"arrowdown",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function l(e){return(s[e.trim()]||e.trim()).toLowerCase().replace(/key|digit|numpad/,"")}function a(e){return i.includes(e)}function c(e,t=","){return e.toLowerCase().split(t)}function u(e,t="+",n=">",r=!1,o){let s=[],a=!1;(e=e.trim()).includes(n)?(a=!0,s=e.toLocaleLowerCase().split(n).map(e=>l(e))):s=e.toLocaleLowerCase().split(t).map(e=>l(e));let c={alt:s.includes("alt"),ctrl:s.includes("ctrl")||s.includes("control"),shift:s.includes("shift"),meta:s.includes("meta"),mod:s.includes("mod"),useKey:r},d=s.filter(e=>!i.includes(e));return{...c,keys:d,description:o,isSequence:a,hotkey:e}}"u">typeof document&&(document.addEventListener("keydown",e=>{void 0!==e.code&&y([l(e.code)])}),document.addEventListener("keyup",e=>{void 0!==e.code&&p([l(e.code)])})),"u">typeof window&&(window.addEventListener("blur",()=>{d.clear()}),window.addEventListener("contextmenu",()=>{setTimeout(()=>{d.clear()},0)}));let d=new Set;function f(e){return Array.isArray(e)}function y(e){let t=Array.isArray(e)?e:[e];d.has("meta")&&d.forEach(e=>!a(e)&&d.delete(e.toLowerCase())),t.forEach(e=>d.add(e.toLowerCase()))}function p(e){let t=Array.isArray(e)?e:[e];"meta"===e?d.clear():t.forEach(e=>d.delete(e.toLowerCase()))}let h=["input","textarea","select","searchbox","slider","spinbutton","menuitem","menuitemcheckbox","menuitemradio","option","radio","textbox"];function v(e,t=!1){var n;let r,o,{target:i,composed:s}=e;return(n=i).tagName&&!n.tagName.startsWith("-")&&n.tagName.includes("-")&&s?(r=e.composedPath()[0]&&e.composedPath()[0].tagName,o=e.composedPath()[0]&&e.composedPath()[0].role):(r=i&&i.tagName,o=i&&i.role),f(t)?!!(r&&t&&t.some(e=>e.toLowerCase()===r.toLowerCase()||e===o)):!!(r&&t&&t)}let m=(0,r.createContext)(void 0);function b({addHotkey:e,removeHotkey:t,children:n}){return(0,o.jsx)(m.Provider,{value:{addHotkey:e,removeHotkey:t},children:n})}function k(e,t){return e&&t&&"object"==typeof e&&"object"==typeof t?Object.keys(e).length===Object.keys(t).length&&Object.keys(e).reduce((n,r)=>n&&k(e[r],t[r]),!0):e===t}let g=(0,r.createContext)({hotkeys:[],activeScopes:[],toggleScope:()=>{},enableScope:()=>{},disableScope:()=>{}}),w=()=>(0,r.useContext)(g),S=({initiallyActiveScopes:e=["*"],children:t})=>{let[n,i]=(0,r.useState)(e),[s,l]=(0,r.useState)([]),a=(0,r.useCallback)(e=>{i(t=>t.includes("*")?[e]:Array.from(new Set([...t,e])))},[]),c=(0,r.useCallback)(e=>{i(t=>t.filter(t=>t!==e))},[]),u=(0,r.useCallback)(e=>{i(t=>t.includes(e)?t.filter(t=>t!==e):t.includes("*")?[e]:Array.from(new Set([...t,e])))},[]),d=(0,r.useCallback)(e=>{l(t=>[...t,e])},[]),f=(0,r.useCallback)(e=>{l(t=>t.filter(t=>!k(t,e)))},[]);return(0,o.jsx)(g.Provider,{value:{activeScopes:n,hotkeys:s,enableScope:a,disableScope:c,toggleScope:u},children:(0,o.jsx)(b,{addHotkey:d,removeHotkey:f,children:t})})},A=e=>{e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},C="u">typeof window?r.useLayoutEffect:r.useEffect;function x(e,t,n,o){let i,s=(0,r.useRef)(null),b=(0,r.useRef)(!1),g=Array.isArray(n)?Array.isArray(o)?void 0:o:n,S=f(e)?e.join(g?.delimiter):e,x=Array.isArray(n)?n:Array.isArray(o)?o:void 0,j=(0,r.useCallback)(t,x??[]),E=(0,r.useRef)(j);x?E.current=j:E.current=t;let L=(k((i=(0,r.useRef)(void 0)).current,g)||(i.current=g),i.current),{activeScopes:O}=w(),P=(0,r.useContext)(m);return C(()=>{var e;if(L?.enabled===!1||(e=L?.scopes,0===O.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!1):!(!e||O.some(t=>e.includes(t))||O.includes("*"))))return;let t=[],n,r=(e,r=!1)=>{if(!(v(e,h)&&!v(e,L?.enableOnFormTags))){if(null!==s.current){let t=s.current.getRootNode();if((t instanceof Document||t instanceof ShadowRoot)&&t.activeElement!==s.current&&!s.current.contains(t.activeElement))return void A(e)}e.target?.isContentEditable&&!L?.enableOnContentEditable||c(S,L?.delimiter).forEach(o=>{if(o.includes(L?.splitKey??"+")&&o.includes(L?.sequenceSplitKey??">"))return void console.warn(`Hotkey ${o} contains both ${L?.splitKey??"+"} and ${L?.sequenceSplitKey??">"} which is not supported.`);let i=u(o,L?.splitKey,L?.sequenceSplitKey,L?.useKey,L?.description);if(i.isSequence){n=setTimeout(()=>{t=[]},L?.sequenceTimeoutMs??1e3);let r=i.useKey?e.key:l(e.code);if(a(r.toLowerCase()))return;if(t.push(r),r!==i.keys?.[t.length-1]){t=[],n&&clearTimeout(n);return}t.length===i.keys?.length&&(E.current(e,i),n&&clearTimeout(n),t=[])}else if(((e,t,n=!1)=>{let{alt:r,meta:o,mod:i,shift:s,ctrl:a,keys:c,useKey:u}=t,{code:y,key:p,ctrlKey:h,metaKey:v,shiftKey:m,altKey:b}=e,k=l(y);if(u&&c?.length===1&&c.includes(p))return!0;if(!c?.includes(k)&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(k))return!1;if(!n){if(r!==b&&"alt"!==k||s!==m&&"shift"!==k)return!1;if(i){if(!v&&!h)return!1}else if(o!==v&&"meta"!==k&&"os"!==k||a!==h&&"ctrl"!==k&&"control"!==k)return!1}return!!(c&&1===c.length&&c.includes(k))||(c?function(e,t=","){return(f(e)?e:e.split(t)).every(e=>d.has(e.trim().toLowerCase()))}(c):!c)})(e,i,L?.ignoreModifiers)||i.keys?.includes("*")){var s,c;if(L?.ignoreEventWhen?.(e)||r&&b.current)return;if(("function"==typeof(s=L?.preventDefault)&&s(e,i)||!0===s)&&e.preventDefault(),"function"==typeof(c=L?.enabled)?!c(e,i):!0!==c&&void 0!==c)return void A(e);E.current(e,i),r||(b.current=!0)}})}},o=e=>{void 0!==e.code&&(y(l(e.code)),(L?.keydown===void 0&&L?.keyup!==!0||L?.keydown)&&r(e))},i=e=>{void 0!==e.code&&(p(l(e.code)),b.current=!1,L?.keyup&&r(e,!0))},m=s.current||g?.document||document;return m.addEventListener("keyup",i,g?.eventListenerOptions),m.addEventListener("keydown",o,g?.eventListenerOptions),P&&c(S,L?.delimiter).forEach(e=>P.addHotkey(u(e,L?.splitKey,L?.sequenceSplitKey,L?.useKey,L?.description))),()=>{m.removeEventListener("keyup",i,g?.eventListenerOptions),m.removeEventListener("keydown",o,g?.eventListenerOptions),P&&c(S,L?.delimiter).forEach(e=>P.removeHotkey(u(e,L?.splitKey,L?.sequenceSplitKey,L?.useKey,L?.description))),t=[],n&&clearTimeout(n)}},[S,L,O]),s}function j(e=!1){let[t,n]=(0,r.useState)(new Set),[o,i]=(0,r.useState)(!1),s=(0,r.useCallback)(t=>{void 0!==t.code&&(t.preventDefault(),t.stopPropagation(),n(n=>{let r=new Set(n);return r.add(l(e?t.key:t.code)),r}))},[e]),a=(0,r.useCallback)(()=>{"u">typeof document&&(document.removeEventListener("keydown",s),i(!1))},[s]);return[t,{start:(0,r.useCallback)(()=>{n(new Set),"u">typeof document&&(a(),document.addEventListener("keydown",s),i(!0))},[s,a]),stop:a,resetKeys:(0,r.useCallback)(()=>{n(new Set)},[]),isRecording:o}]}},94721:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var r,o,i,s,l,a,c=n(28802),u=n(64861),d=n(43588),f=n(65890),y=n(35007);let p=(0,n(28709).A)("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);var h=n(83034),v=n(86653),m=n(80457),b=n(63639),k=n(9274),g=n(27752),w=n(68210);function S(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A=(0,n(11577).rU)(function(e){var t=e.css,n=e.token,c=e.stylish;return{borderless:c.variantBorderless,disabled:c.disabled,error:t(r||(r=S(["\n      border: 1px solid ",";\n    "])),n.colorError),errorText:t(o||(o=S(["\n      font-size: 12px;\n      color: ",";\n    "])),n.colorError),filled:c.variantFilled,focused:t(i||(i=S(["\n      background: "," !important;\n    "])),n.colorFillSecondary),hiddenInput:t(s||(s=S(["\n      cursor: text;\n\n      position: absolute;\n      z-index: -1;\n      inset-block-start: 0;\n      inset-inline-start: 0;\n\n      width: 100%;\n      height: 100%;\n\n      opacity: 0;\n    "]))),outlined:c.variantOutlined,placeholder:t(l||(l=S(["\n      color: ",";\n    "])),n.colorTextDescription),root:t(a||(a=S(["\n      cursor: pointer;\n\n      position: relative;\n\n      max-width: 100%;\n      height: 36px;\n      padding-block: 0;\n      padding-inline: 12px;\n\n      border-radius: ","px;\n    "])),n.borderRadius),shadow:c.shadow}}),C=n(54898);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,l=[],a=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{if(!a&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return l}}(e,t)||L(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var P=(0,h.memo)(function(e){var t=e.value,n=e.defaultValue,r=void 0===n?"":n,o=e.resetValue,i=void 0===o?"":o,s=e.onChange,l=e.onConflict,a=e.placeholder,c=void 0===a?"Press keys to record shortcut":a,u=e.disabled,d=e.shadow,S=e.allowReset,O=e.style,P=e.className,K=e.hotkeyConflicts,T=void 0===K?[]:K,H=e.variant,M=e.texts,R=e.isApple,N=e.onBlur,D=e.onReset,F=e.onFocus,V=E((0,h.useState)(!1),2),Y=V[0],I=V[1],z=E((0,h.useState)(!1),2),$=z[0],B=z[1],q=E((0,h.useState)(!1),2),U=q[0],_=q[1],Q=(0,h.useRef)(null),W=A(),Z=W.cx,G=W.styles,J=W.theme,X=(0,h.useMemo)(function(){return(0,w.vW)(R)},[R]),ee=E((0,b.A)(r,{defaultValue:r,onChange:s,value:void 0===t?"":t}),2),et=ee[0],en=ee[1],er=(0,h.useMemo)(function(){return(0,f.F)(G.root,{defaultVariants:{disabled:!1,error:!1,shadow:!1,variant:"outlined"},variants:{variant:{filled:G.filled,outlined:G.outlined,borderless:G.borderless},shadow:{false:null,true:G.shadow},focused:{false:null,true:G.focused},error:{fales:null,true:G.error},disabled:{false:null,true:G.disabled}}})},[G]),eo=E((0,v.KO)(),2),ei=eo[0],es=eo[1],el=es.start,ea=es.stop,ec=es.isRecording,eu=es.resetKeys;(0,v.vC)("*",function(){var e;null==(e=Q.current)||e.blur()},{enableOnContentEditable:!0,enableOnFormTags:!0,enabled:ec&&!u,keydown:!1,keyup:!0,preventDefault:!0});var ed=(0,h.useCallback)(function(e){var t,n=[],r=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=L(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(o.s();!(t=o.n()).done;){var i=t.value,s=i.toLowerCase();w.mU.includes(s)?!X&&"ctrl"===s||X&&"meta"===s?n.includes("mod")||n.push("mod"):n.includes(s)||n.push(s):r.push(i)}}catch(e){o.e(e)}finally{o.f()}if(0===n.length&&r.length>0)return{isValid:!1,keys:[]};var l=[n,r.length>0?[r.at(-1)]:[]];return{isValid:l.every(function(e){return e.length>0}),keys:l.flat()}},[])(ei),ef=ed.isValid,ey=ed.keys,ep=ey.join("+"),eh=(0,h.useCallback)(function(e){return T.filter(function(e){return e!==i}).some(function(t){var n=(0,w.iz)(e),r=(0,w.iz)(t);return(0,y.A)(n,r)})},[T]);return(0,h.useEffect)(function(){if(ei.size>0&&!ec){if(!ef){_(!0),B(!1);return}_(!1),eh(ep)?(B(!0),null==l||l(ep)):(B(!1),null==en||en(ep))}},[ei,ec,ef,ep,eh,en,l]),(0,C.jsxs)(m.Flexbox,{className:P,gap:8,style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){var r,o,i;r=e,o=t,i=n[t],(o=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=x(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:String(t)}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({position:"relative"},O),children:[(0,C.jsxs)(m.Flexbox,{align:"center",className:Z(er({disabled:u,error:$||U,focused:Y,shadow:d,variant:H||(J.isDarkMode?"filled":"outlined")})),horizontal:!0,justify:"space-between",onClick:function(e){var t;e.preventDefault(),e.stopPropagation(),u||Y||null==(t=Q.current)||t.focus()},children:[(0,C.jsx)("div",{style:{pointerEvents:"none"},children:ec?(0,C.jsx)("span",{className:G.placeholder,children:ey.length>0?(0,C.jsx)(g.A,{keys:ep}):c}):et?(0,C.jsx)(g.A,{keys:et}):(0,C.jsx)("span",{className:G.placeholder,children:c})}),(0,C.jsx)("input",{className:G.hiddenInput,disabled:u,onBlur:function(e){I(!1),ea(),null==N||N(e)},onFocus:function(e){u||(I(!0),B(!1),_(!1),el(),null==F||F(e))},readOnly:!0,ref:Q,style:{pointerEvents:"none"}}),!Y&&(void 0===S||S)&&et&&et!==i&&!u&&(0,C.jsx)(k.A,{icon:p,onClick:function(e){e.preventDefault(),e.stopPropagation(),null==en||en(i),eu(),B(!1),_(!1),I(!1),ea(),null==D||D(et,i)},size:"small",title:(null==M?void 0:M.reset)||"Reset to default",variant:"filled"})]}),$&&(0,C.jsx)("div",{className:G.errorText,children:(null==M?void 0:M.conflicts)||"This shortcut conflicts with an existing one."}),U&&(0,C.jsx)("div",{className:G.errorText,children:(null==M?void 0:M.invalidCombination)||"Shortcut must include a modifier key (Ctrl, Alt, Shift) and only one regular key."})]})});P.displayName="HotkeyInput";var K=n(12389),T=n(59202),H=n(31021),M=n.n(H),R=n(85017),N=n(59121),D=n(54606),F=n(49935),V=n(51989),Y=n(38759),I=n(42897),z=n(23047);let $=(0,h.memo)(()=>{let{t:e}=(0,N.Bd)(["setting","hotkey"]),[t]=d.Ay.useForm(),{hotkey:n}=(0,Y.k)(I.w0.currentSettings,M()),[r,o]=(0,Y.k)(e=>[e.setSettings,e.isUserStateInit]),[i,s]=(0,h.useState)(!1);if(!o)return(0,c.Y)(T.A,{active:!0,paragraph:{rows:5},title:!1});let l={children:D.e.filter(e=>e.group===z.vQ.Conversation).map(t=>{let r;return r=Object.entries(n).map(([e,n])=>e!==t.id&&n).filter(Boolean),{children:(0,c.Y)(P,{disabled:t.nonEditable,hotkeyConflicts:r,placeholder:e("hotkey.record"),resetValue:t.keys,texts:{conflicts:e("hotkey.conflicts"),invalidCombination:e("hotkey.invalidCombination"),reset:e("hotkey.reset")}}),desc:V.default[t.id].desc?e(`${t.id}.desc`,{ns:"hotkey"}):void 0,label:e(`${t.id}.title`,{ns:"hotkey"}),name:t.id}}),extra:i&&(0,c.Y)(K.default,{icon:R.A,size:16,spin:!0,style:{opacity:.5}}),title:e("hotkey.group.conversation")};return(0,c.Y)(d.Ay,{form:t,initialValues:n,items:[l],itemsType:"group",onValuesChange:async e=>{s(!0),await r({hotkey:e}),s(!1)},variant:"borderless",...F.pC})});var B=n(58244),q=n(64694),U=n(52609),_=n(67095);let Q=e=>(0,_.h)(U.d,e.desktopHotkeys),W=(0,h.memo)(()=>{let{t:e}=(0,N.Bd)(["setting","hotkey"]),[t]=d.Ay.useForm(),{message:n}=B.A.useApp(),r=(0,q.p)(Q,M()),[o,i,s]=(0,q.p)(e=>[e.isDesktopHotkeysInit,e.updateDesktopHotkey,e.useFetchDesktopHotkeys]);s();let[l,a]=(0,h.useState)(!1);if(!o)return(0,c.Y)(T.A,{active:!0,paragraph:{rows:5},title:!1});let u={children:D.z.map(t=>({children:(0,c.Y)(P,{disabled:t.nonEditable,onChange:async r=>{a(!0);try{let o=await i(t.id,r);console.log(o),o.success?n.success(e("hotkey.updateSuccess",{ns:"setting"})):n.error(e(`hotkey.errors.${o.errorType}`,{ns:"setting"}))}catch{n.error(e("hotkey.updateError",{ns:"setting"}))}finally{a(!1)}},placeholder:e("hotkey.record"),resetValue:t.keys,texts:{conflicts:e("hotkey.conflicts"),invalidCombination:e("hotkey.invalidCombination"),reset:e("hotkey.reset")},value:r[t.id]}),desc:V.default.desktop[t.id]?.desc?e(`desktop.${t.id}.desc`,{ns:"hotkey"}):void 0,label:e(`desktop.${t.id}.title`,{ns:"hotkey"}),name:t.id})),extra:l&&(0,c.Y)(K.default,{icon:R.A,size:16,spin:!0,style:{opacity:.5}}),title:e("hotkey.group.desktop")};return(0,c.Y)(d.Ay,{form:t,initialValues:r,items:[u],itemsType:"group",variant:"borderless",...F.pC})}),Z=(0,h.memo)(()=>{let{t:e}=(0,N.Bd)(["setting","hotkey"]),[t]=d.Ay.useForm(),{hotkey:n}=(0,Y.k)(I.w0.currentSettings,M()),[r,o]=(0,Y.k)(e=>[e.setSettings,e.isUserStateInit]),[i,s]=(0,h.useState)(!1);if(!o)return(0,c.Y)(T.A,{active:!0,paragraph:{rows:5},title:!1});let l={children:D.e.filter(e=>e.group===z.vQ.Essential).map(t=>{let r;return r=Object.entries(n).map(([e,n])=>e!==t.id&&n).filter(Boolean),{children:(0,c.Y)(P,{disabled:t.nonEditable,hotkeyConflicts:r,placeholder:e("hotkey.record"),resetValue:t.keys,texts:{conflicts:e("hotkey.conflicts"),invalidCombination:e("hotkey.invalidCombination"),reset:e("hotkey.reset")}}),desc:V.default[t.id].desc?e(`${t.id}.desc`,{ns:"hotkey"}):void 0,label:e(`${t.id}.title`,{ns:"hotkey"}),name:t.id}}),extra:i&&(0,c.Y)(K.default,{icon:R.A,size:16,spin:!0,style:{opacity:.5}}),title:e("hotkey.group.essential")};return(0,c.Y)(d.Ay,{form:t,initialValues:n,items:[l],itemsType:"group",onValuesChange:async e=>{s(!0),await r({hotkey:e}),s(!1)},variant:"borderless",...F.pC})}),G=()=>(0,c.FD)(c.FK,{children:[u.xl&&(0,c.Y)(W,{}),(0,c.Y)(Z,{}),(0,c.Y)($,{})]});G.displayName="HotkeySetting";let J=G}}]);