"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47445],{2261:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(28802),i=a(12389),s=a(11577),n=a(54759),l=a(83034),o=a(80457),u=a(3779);let d=(0,s.rU)(({css:e,token:t,isDarkMode:a})=>e`
    flex: none;
    width: 100%;
    height: 6px;
    background: ${a?(0,u.B3)(t.colorFillTertiary,.04):t.colorFillTertiary};
  `),c=(0,l.memo)(()=>{let{styles:e}=d();return(0,r.Y)("div",{className:e})}),g=(0,s.rU)(({css:e,token:t})=>({container:e`
    position: relative;
    border-radius: 0;
    font-size: 15px;

    &:active {
      background: ${t.colorFillTertiary};
    }
  `})),h=(0,l.memo)(({label:e,icon:t,onClick:a,type:s})=>{let{cx:l,styles:u,theme:d}=g();return"divider"===s?(0,r.Y)(c,{}):(0,r.FD)(o.Flexbox,{align:"center",className:l(u.container),gap:12,horizontal:!0,justify:"space-between",onClick:a,padding:16,children:[(0,r.FD)(o.Flexbox,{align:"center",gap:12,horizontal:!0,children:[t&&(0,r.Y)(i.default,{color:d.colorPrimaryBorder,icon:t,size:{size:20}}),e]}),(0,r.Y)(i.default,{color:d.colorBorder,icon:n.A,size:{size:16}})]})})},37348:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(28709).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},38759:(e,t,a)=>{a.d(t,{c:()=>F,k:()=>L});var r=a(14308),i=a(50786),s=a(23993),n=a(41734),l=a(89872);let o={preference:l.I},u={...{defaultSettings:a(74551).a$,settings:{}},...o,...{},...{isOnboard:!1,isShowPWAGuide:!1,isUserCanEnableTrace:!1,isUserHasConversation:!1,isUserStateInit:!1}};var d=a(96773),c=a(70674),g=a(64911),h=a(85366),m=a(46265),p=a(55582),S=a(67095),y=a(61497),f=a(71457);let A=(0,y.K)("common"),v="initUserState",k=(0,y.K)("preference");var U=a(31021),b=a.n(U),w=a(19530),N=a(45628);class I{constructor(){this.createShareSettingsUrl=e=>`/?${N.N}=${encodeURI(JSON.stringify(e))}`,this.decodeShareSettings=e=>{try{return{data:JSON.parse(e)}}catch(e){return{message:JSON.stringify(e)}}}}}let P=new I;var C=a(34743),T=a(1866),x=a(28074);let O=(0,n.t)("user"),L=(0,s.h)()((0,r.eh)(O((...e)=>({...u,...((e,t)=>({addToolToAllowList:async e=>{let a=t().settings.tool?.humanIntervention?.allowList||[];a.includes(e)||await t().setSettings({tool:{humanIntervention:{allowList:[...a,e]}}})},importAppSettings:async e=>{let{setSettings:a}=t();await a(e)},importUrlShareSettings:async e=>{if(e){let a=P.decodeShareSettings(e);!a?.message&&a?.data&&await t().setSettings(a.data)}},internal_createSignal:()=>{let a=t().updateSettingsSignal;a&&!a.signal.aborted&&a.abort(w.ve);let r=new AbortController;return e({updateSettingsSignal:r},!1,"signalForUpdateSettings"),r},resetSettings:async()=>{await p.W.resetUserSettings(),await t().refreshUserState()},setSettings:async a=>{let r,{settings:i,defaultSettings:s}=t(),n=(0,S.h)(i,a);if(b()(i,n))return;let l=(r=(e,t)=>(0,C.A)(e,(e,a,i)=>{(0,T.A)(a)&&(0,T.A)(t[i])?b()(a,t[i])||(e[i]=a):b()(a,t[i])||(e[i]=(0,x.A)(a)&&(0,x.A)(t[i])?r(a,t[i]):a)}))(n,s);e({settings:l},!1,"optimistic_updateSettings");let o=t().internal_createSignal();await p.W.updateUserSettings(l,o.signal),await t().refreshUserState()},updateDefaultAgent:async e=>{await t().setSettings({defaultAgent:e})},updateGeneralConfig:async e=>{await t().setSettings({general:e})},updateHumanIntervention:async e=>{let a=t().settings.tool?.humanIntervention||{};await t().setSettings({tool:{humanIntervention:{...a,...e}}})},updateKeyVaults:async e=>{await t().setSettings({keyVaults:e})},updateSystemAgent:async(e,a)=>{await t().setSettings({systemAgent:{[e]:{...a}}})}}))(...e),...((e,t)=>({updateGuideState:async e=>{let{updatePreference:a}=t(),r=(0,S.h)(t().preference.guide,e);await a({guide:r})},updateLab:async e=>{let{updatePreference:a}=t(),r=(0,S.h)(t().preference.lab,e);await a({lab:r},k("updateLab"))},updatePreference:async(a,r)=>{let i=(0,S.h)(t().preference,a);e({preference:i},!1,r||k("updatePreference")),await p.W.updatePreference(i)}}))(...e),...((e,t)=>({enableAuth:()=>d.S4,logout:async()=>{if(d.Nd)return void t().clerkSignOut?.({redirectUrl:location.toString()});if(d.J_){let{signOut:e}=await a.e(4975).then(a.bind(a,4975));e()}},openLogin:async()=>{if(d.Nd){let e=location.toString();t().clerkSignIn?.({fallbackRedirectUrl:e,signUpForceRedirectUrl:e,signUpUrl:"/signup"});return}if(d.J_){let{signIn:e}=await a.e(4975).then(a.bind(a,4975)),r=t()?.oAuthSSOProviders;if(r&&1===r.length)return void e(r[0]);e()}}}))(...e),...((e,t)=>({refreshUserState:async()=>{await (0,g.j)(v)},updateAvatar:async e=>{await p.W.updateAvatar(e),await t().refreshUserState()},updateKeyVaultConfig:async(e,a)=>{await t().setSettings({keyVaults:{[e]:a}})},useCheckTrace:e=>(0,h.Ay)(e?"checkTrace":null,()=>"boolean"==typeof f.U.userAllowTrace(t())?Promise.resolve(!1):Promise.resolve(t().isUserCanEnableTrace),{revalidateOnFocus:!1}),useInitUserState:(a,r,i)=>(0,m.Ju)(a?v:null,()=>p.W.getUserState(),{onError:e=>{i?.onError?.(e)},onSuccess:a=>{if(i?.onSuccess?.(a),a){let i={defaultAgent:r.defaultAgent,image:r.image,systemAgent:r.systemAgent},s=(0,S.h)(t().defaultSettings,i),n=0===Object.keys(a.preference||{}).length?l.I:a.preference,o=a.avatar||a.userId?(0,S.h)(t().user,{avatar:a.avatar,email:a.email,firstName:a.firstName,fullName:a.fullName,id:a.userId,latestName:a.lastName,username:a.username}):t().user;e({defaultSettings:s,isOnboard:a.isOnboard,isShowPWAGuide:a.canEnablePWAGuide,isUserCanEnableTrace:a.canEnableTrace,isUserHasConversation:a.hasConversation,isUserStateInit:!0,preference:n,settings:a.settings||{},subscriptionPlan:a.subscriptionPlan,user:o},!1,A("initUserState"));let u=(0,c.wZ)();u?.identify(a.userId||"",{email:a.email,firstName:a.firstName,lastName:a.lastName,username:a.username})}}})}))(...e)}))),i.x),F=()=>L.getState()},47445:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var r=a(28802),i=a(83034),s=a(97299),n=a(91609),l=a(94183),o=a(37348),u=a(59121),d=a(27697),c=a(2261),g=a(78397),h=a(38759),m=a(61520);let p=(0,i.memo)(()=>{let[e,t,a]=(0,h.k)(e=>[m.P.isLogin(e),m.P.isLoginWithClerk(e),e.logout]),i=(0,d.Zp)(),{t:p}=(0,u.Bd)("auth"),S=[{icon:s.A,key:g.yj.Profile,label:p("tab.profile"),onClick:()=>i("/profile")},t&&{icon:n.A,key:g.yj.Security,label:p("tab.security"),onClick:()=>i("/profile/security")},{icon:l.A,key:g.yj.Stats,label:p("tab.stats"),onClick:()=>i("/profile/stats")},e&&{type:"divider"},e&&{icon:o.A,key:"logout",label:p("signout",{ns:"auth"}),onClick:()=>{a(),i("/login")}}].filter(Boolean);return S?.map(({key:e,...t},a)=>(0,r.Y)(c.A,{...t},e||a))}),S=(0,i.memo)(()=>(0,r.Y)(p,{}));S.displayName="MeProfilePage";let y=S},54759:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(28709).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},55582:(e,t,a)=>{a.d(t,{W:()=>s});var r=a(77605);class i{constructor(){this.getUserRegistrationDuration=async()=>r.du.user.getUserRegistrationDuration.query(),this.getUserState=async()=>r.du.user.getUserState.query(),this.getUserSSOProviders=async()=>r.du.user.getUserSSOProviders.query(),this.unlinkSSOProvider=async(e,t)=>r.du.user.unlinkSSOProvider.mutate({provider:e,providerAccountId:t}),this.makeUserOnboarded=async()=>r.du.user.makeUserOnboarded.mutate(),this.updateAvatar=async e=>r.du.user.updateAvatar.mutate(e),this.updatePreference=async e=>r.du.user.updatePreference.mutate(e),this.updateGuide=async e=>r.du.user.updateGuide.mutate(e),this.updateUserSettings=async(e,t)=>r.du.user.updateSettings.mutate(e,{signal:t}),this.resetUserSettings=async()=>r.du.user.resetSettings.mutate()}}let s=new i},61520:(e,t,a)=>{a.d(t,{P:()=>u,f:()=>o});var r=a(74551),i=a(96987),s=a(96773);let n=r.Se,l=e=>s.S4?e.isSignedIn?e.user?.username:"anonymous":r.xl?e.user?.username:n,o={displayUserName:e=>l(e)||e.user?.email||"",email:e=>e.user?.email||"",fullName:e=>e.user?.fullName||"",nickName:e=>{let t=e.user?.fullName||e.user?.username;return s.S4?e.isSignedIn?t:(0,i.t)("userPanel.anonymousNickName",{ns:"common"}):r.xl?t:(0,i.t)("userPanel.defaultNickname",{ns:"common"})},userAvatar:e=>e.user?.avatar||"",userId:e=>e.user?.id,userProfile:e=>e.user,username:l},u={isLoaded:e=>e.isLoaded,isLogin:e=>!s.S4||e.isSignedIn,isLoginWithAuth:e=>e.isSignedIn,isLoginWithClerk:e=>e.isSignedIn&&s.Nd||!1,isLoginWithNextAuth:e=>e.isSignedIn&&!!s.J_||!1}},71457:(e,t,a)=>{a.d(t,{U:()=>i});var r=a(74551);let i={hideSettingsMoveGuide:e=>e.preference.guide?.moveSettingsToAvatar,hideSyncAlert:e=>e.preference.hideSyncAlert,isPreferenceInit:e=>e.isUserStateInit,shouldTriggerFileInKnowledgeBaseTip:e=>"boolean"!=typeof e.preference.guide?.moveSettingsToAvatar,showUploadFileInKnowledgeBaseTip:e=>e.preference.guide?.uploadFileInKnowledgeBase,topicDisplayMode:e=>e.preference.topicDisplayMode||r.I4.topicDisplayMode,useCmdEnterToSend:e=>e.preference.useCmdEnterToSend||!1,userAllowTrace:e=>e.preference.telemetry}},91609:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(28709).A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},94183:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(28709).A)("chart-column-big",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]])},97299:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(28709).A)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])}}]);