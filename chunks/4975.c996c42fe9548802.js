"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4975],{4975:(e,t,s)=>{s.d(t,{SessionProvider:()=>L,signIn:()=>m,signOut:()=>_,wV:()=>E});var n=s(54898),r=s(83034),a=s(56028);class o extends a.lR{}class i extends a.lR{}async function l(e,t,s,n={}){let r=`${c(t)}/${e}`;try{let e={headers:{"Content-Type":"application/json",...n?.headers?.cookie?{cookie:n.headers.cookie}:{}}};n?.body&&(e.body=JSON.stringify(n.body),e.method="POST");let t=await fetch(r,e),s=await t.json();if(!t.ok)throw s;return s}catch(e){return s.error(new o(e.message,e)),null}}function c(e){return"undefined"==typeof window?`${e.baseUrlServer}${e.basePathServer}`:e.basePath}function d(){return Math.floor(Date.now()/1e3)}function u(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e=`https://${e}`);let s=new URL(e||t),n=("/"===s.pathname?t.pathname:s.pathname).replace(/\/$/,""),r=`${s.origin}${n}`;return{origin:s.origin,host:s.host,path:n,base:r,toString:()=>r}}var h=s(55036);let p={baseUrl:u(h.env.NEXTAUTH_URL??h.env.VERCEL_URL).origin,basePath:u(h.env.NEXTAUTH_URL).path,baseUrlServer:u(h.env.NEXTAUTH_URL_INTERNAL??h.env.NEXTAUTH_URL??h.env.VERCEL_URL).origin,basePathServer:u(h.env.NEXTAUTH_URL_INTERNAL??h.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},w=null;function f(){return"undefined"==typeof BroadcastChannel?{postMessage:()=>{},addEventListener:()=>{},removeEventListener:()=>{},name:"next-auth",onmessage:null,onmessageerror:null,close:()=>{},dispatchEvent:()=>!1}:new BroadcastChannel("next-auth")}function v(){return null===w&&(w=f()),w}let g={debug:console.debug,error:console.error,warn:console.warn},y=r.createContext?.(void 0);function E(e){if(!y)throw Error("React Context is unavailable in Server Components");let t=r.useContext(y),{required:s,onUnauthenticated:n}=e??{},a=s&&"unauthenticated"===t.status;return(r.useEffect(()=>{if(a){let e=`${p.basePath}/signin?${new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href})}`;n?n():window.location.href=e}},[a,n]),a)?{data:t.data,update:t.update,status:"loading"}:t}async function x(e){let t=await l("session",p,g,e);return(e?.broadcast??!0)&&f().postMessage({event:"session",data:{trigger:"getSession"}}),t}async function S(){let e=await l("csrf",p,g);return e?.csrfToken??""}async function b(){return l("providers",p,g)}async function m(e,t,s){let{callbackUrl:n,...r}=t??{},{redirect:a=!0,redirectTo:o=n??window.location.href,...i}=r,l=c(p),d=await b();if(!d){let e=`${l}/error`;window.location.href=e;return}if(!e||!d[e]){let e=`${l}/signin?${new URLSearchParams({callbackUrl:o})}`;window.location.href=e;return}let u=d[e].type;if("webauthn"===u)throw TypeError(`Provider id "${e}" refers to a WebAuthn provider.
Please use \`import { signIn } from "next-auth/webauthn"\` instead.`);let h=`${l}/${"credentials"===u?"callback":"signin"}/${e}`,w=await S(),f=await fetch(`${h}?${new URLSearchParams(s)}`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...i,csrfToken:w,callbackUrl:o})}),v=await f.json();if(a){let e=v.url??o;window.location.href=e,e.includes("#")&&window.location.reload();return}let g=new URL(v.url).searchParams.get("error")??void 0,y=new URL(v.url).searchParams.get("code")??void 0;return f.ok&&await p._getSession({event:"storage"}),{error:g,code:y,status:f.status,ok:f.ok,url:g?null:v.url}}async function _(e){let{redirect:t=!0,redirectTo:s=e?.callbackUrl??window.location.href}=e??{},n=c(p),r=await S(),a=await fetch(`${n}/signout`,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({csrfToken:r,callbackUrl:s})}),o=await a.json();if(v().postMessage({event:"session",data:{trigger:"signout"}}),t){let e=o.url??s;window.location.href=e,e.includes("#")&&window.location.reload();return}return await p._getSession({event:"storage"}),o}function L(e){if(!y)throw Error("React Context is unavailable in Server Components");let{children:t,basePath:s,refetchInterval:a,refetchWhenOffline:o}=e;s&&(p.basePath=s);let c=void 0!==e.session;p._lastSync=c?d():0;let[u,h]=r.useState(()=>(c&&(p._session=e.session),e.session)),[w,f]=r.useState(!c);r.useEffect(()=>(p._getSession=async({event:e}={})=>{try{let t="storage"===e;if(t||void 0===p._session){p._lastSync=d(),p._session=await x({broadcast:!t}),h(p._session);return}if(!e||null===p._session||d()<p._lastSync)return;p._lastSync=d(),p._session=await x(),h(p._session)}catch(e){g.error(new i(e.message,e))}finally{f(!1)}},p._getSession(),()=>{p._lastSync=0,p._session=void 0,p._getSession=()=>{}}),[]),r.useEffect(()=>{let e=()=>p._getSession({event:"storage"});return v().addEventListener("message",e),()=>v().removeEventListener("message",e)},[]),r.useEffect(()=>{let{refetchOnWindowFocus:t=!0}=e,s=()=>{t&&"visible"===document.visibilityState&&p._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",s,!1),()=>document.removeEventListener("visibilitychange",s,!1)},[e.refetchOnWindowFocus]);let E=function(){let[e,t]=r.useState("undefined"!=typeof navigator&&navigator.onLine),s=()=>t(!0),n=()=>t(!1);return r.useEffect(()=>(window.addEventListener("online",s),window.addEventListener("offline",n),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}),[]),e}(),b=!1!==o||E;r.useEffect(()=>{if(a&&b){let e=setInterval(()=>{p._session&&p._getSession({event:"poll"})},1e3*a);return()=>clearInterval(e)}},[a,b]);let m=r.useMemo(()=>({data:u,status:w?"loading":u?"authenticated":"unauthenticated",async update(e){if(w)return;f(!0);let t=await l("session",p,g,void 0===e?void 0:{body:{csrfToken:await S(),data:e}});return f(!1),t&&(h(t),v().postMessage({event:"session",data:{trigger:"getSession"}})),t}}),[u,w]);return(0,n.jsx)(y.Provider,{value:m,children:t})}},56028:(e,t,s)=>{s.d(t,{k9:()=>p,lR:()=>n});class n extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);const s=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${s}`}}class r extends n{}r.kind="signIn";class a extends n{}a.type="AdapterError";class o extends n{}o.type="AccessDenied";class i extends n{}i.type="CallbackRouteError";class l extends n{}l.type="ErrorPageLoop";class c extends n{}c.type="EventError";class d extends n{}d.type="InvalidCallbackUrl";class u extends r{constructor(){super(...arguments),this.code="credentials"}}u.type="CredentialsSignin";class h extends n{}h.type="InvalidEndpoints";class p extends n{}p.type="InvalidCheck";class w extends n{}w.type="JWTSessionError";class f extends n{}f.type="MissingAdapter";class v extends n{}v.type="MissingAdapterMethods";class g extends n{}g.type="MissingAuthorize";class y extends n{}y.type="MissingSecret";class E extends r{}E.type="OAuthAccountNotLinked";class x extends r{}x.type="OAuthCallbackError";class S extends n{}S.type="OAuthProfileParseError";class b extends n{}b.type="SessionTokenError";class m extends r{}m.type="OAuthSignInError";class _ extends r{}_.type="EmailSignInError";class L extends n{}L.type="SignOutError";class U extends n{}U.type="UnknownAction";class R extends n{}R.type="UnsupportedStrategy";class k extends n{}k.type="InvalidProvider";class A extends n{}A.type="UntrustedHost";class T extends n{}T.type="Verification";class C extends r{}C.type="MissingCSRF";class $ extends n{}$.type="DuplicateConditionalUI";class P extends n{}P.type="MissingWebAuthnAutocomplete";class N extends n{}N.type="WebAuthnVerificationError";class I extends r{}I.type="AccountNotLinked";class M extends n{}M.type="ExperimentalFeatureNotEnabled"}}]);