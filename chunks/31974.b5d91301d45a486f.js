"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[31974],{6332:(e,t,l)=>{l.d(t,{J:()=>n});var o=l(31021),i=l.n(o),r=l(94147);let n=()=>(0,r.d)(e=>e.enabledChatModelList,i())||[]},25598:(e,t,l)=>{l.d(t,{$:()=>C,$z:()=>T,IW:()=>D,TK:()=>$,V7:()=>M});var o=l(28802),i=l(37618),r=l(2893),n=l(37412),a=l(3136),s=l(12389),d=l(75431),c=l(67072),p=l(11577),m=l(14654),h=l(56055),g=l(4562),u=l(10726),f=l(20028),x=l(48019),b=l(10376),y=l(62874),v=l(54565),Y=l(30598),A=l.n(Y),k=l(83034),w=l(59121),S=l(80457),z=l(9402);let C="lobe-model-info-tags",F=(0,p.rU)(({css:e,token:t})=>({tag:e`
    cursor: default;

    display: flex;
    align-items: center;
    justify-content: center;

    width: 20px !important;
    height: 20px;
    border-radius: 4px;
  `,token:e`
    width: 36px !important;
    height: 20px;
    border-radius: 4px;

    font-family: ${t.fontFamilyCode};
    font-size: 11px;
    color: ${t.colorTextSecondary};

    background: ${t.colorFillTertiary};
  `})),M=(0,k.memo)(({directionReverse:e,placement:t="right",...l})=>{let{t:i}=(0,w.Bd)("components"),{styles:r}=F();return(0,o.FD)(S.Flexbox,{className:C,direction:e?"horizontal-reverse":"horizontal",gap:4,width:"fit-content",children:[l.files&&(0,o.Y)(n.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:i("ModelSelect.featureTag.file"),children:(0,o.Y)(a.A,{className:r.tag,color:"success",size:"small",children:(0,o.Y)(s.default,{icon:h.A})})}),l.imageOutput&&(0,o.Y)(n.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:i("ModelSelect.featureTag.imageOutput"),children:(0,o.Y)(a.A,{className:r.tag,color:"success",size:"small",children:(0,o.Y)(s.default,{icon:g.A})})}),l.vision&&(0,o.Y)(n.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:i("ModelSelect.featureTag.vision"),children:(0,o.Y)(a.A,{className:r.tag,color:"success",size:"small",children:(0,o.Y)(s.default,{icon:u.A})})}),l.video&&(0,o.Y)(n.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:i("ModelSelect.featureTag.video"),children:(0,o.Y)(a.A,{className:r.tag,color:"magenta",size:"small",children:(0,o.Y)(s.default,{icon:f.A})})}),l.functionCall&&(0,o.Y)(n.A,{placement:t,styles:{root:{maxWidth:"unset",pointerEvents:"none"}},title:i("ModelSelect.featureTag.functionCall"),children:(0,o.Y)(a.A,{className:r.tag,color:"info",size:"small",children:(0,o.Y)(s.default,{icon:x.A})})}),l.reasoning&&(0,o.Y)(n.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:i("ModelSelect.featureTag.reasoning"),children:(0,o.Y)(a.A,{className:r.tag,color:"purple",size:"small",children:(0,o.Y)(s.default,{icon:b.A})})}),l.search&&(0,o.Y)(n.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:i("ModelSelect.featureTag.search"),children:(0,o.Y)(a.A,{className:r.tag,color:"cyan",size:"small",children:(0,o.Y)(s.default,{icon:y.A})})}),"number"==typeof l.contextWindowTokens&&(0,o.Y)(n.A,{placement:t,styles:{root:{maxWidth:"unset",pointerEvents:"none"}},title:i("ModelSelect.featureTag.tokens",{tokens:0===l.contextWindowTokens?"âˆž":A()(l.contextWindowTokens).format("0,0")}),children:(0,o.Y)(a.A,{className:r.token,size:"small",children:0===l.contextWindowTokens?(0,o.Y)(v.A,{size:17,strokeWidth:1.6}):(0,z.KT)(l.contextWindowTokens)})})]})}),T=(0,k.memo)(({showInfoTag:e=!0,...t})=>{let{mobile:l}=(0,m.Q)();return(0,o.FD)(S.Flexbox,{align:"center",gap:32,horizontal:!0,justify:"space-between",style:{minWidth:l?"100%":void 0,overflow:"hidden",position:"relative",width:l?"80vw":"auto"},children:[(0,o.FD)(S.Flexbox,{align:"center",gap:8,horizontal:!0,style:{flexShrink:1,minWidth:0,overflow:"hidden"},children:[(0,o.Y)(i.A,{model:t.id,size:20}),(0,o.Y)(d.A,{style:l?{maxWidth:"60vw",overflowX:"auto",whiteSpace:"nowrap"}:{},children:t.displayName||t.id})]}),e&&(0,o.Y)(M,{...t})]})}),$=(0,k.memo)(({provider:e,name:t,source:l,logo:i})=>(0,o.FD)(S.Flexbox,{align:"center",gap:4,horizontal:!0,children:["custom"===l&&i?(0,o.Y)(c.A,{avatar:i,size:20,style:{filter:"grayscale(1)"},title:t}):(0,o.Y)(r.A,{provider:e,size:20,type:"mono"}),t]})),D=(0,k.memo)(({Icon:e,label:t})=>(0,o.FD)(S.Flexbox,{align:"center",gap:8,horizontal:!0,children:[(0,o.Y)(e,{size:20}),(0,o.Y)("span",{children:t})]}))},31974:(e,t,l)=>{l.d(t,{A:()=>ey});var o=l(28802),i=l(83034),r=l(27384),n=l(81490),a=l(11577);let s=(0,a.rU)(({css:e})=>e`
    display: flex;
    flex-direction: column;
    gap: 2px;

    padding-block: 8px 0;
    padding-inline: 8px;
  `),d=(0,i.memo)(({children:e})=>{let{styles:t}=s();return(0,o.Y)(n.A,{className:t,size:8,children:e})});var c=l(38153),p=l(12389),m=l(9274),h=l(35426),g=l(88967),u=l(90289),f=l(59327),x=l(59121),b=l(80457),y=l(95891),v=l(16385),Y=l(75431),A=l(67072),k=l(37412),w=l(29703),S=l(44452),z=l(18455),C=l(54645),F=l(87508),M=l(42507),T=l(28755),$=l(16602),D=l(97043),N=l(99278),E=l(99859),W=l(6332),B=l(64811),P=l(3296),I=l(97496);let R=(0,i.memo)(({template:e,isSelected:t,onToggle:l,styles:i,cx:r})=>{let{t:n}=(0,x.Bd)("chat");return(0,o.Y)("div",{className:r(i.listItem),onClick:()=>l(e.id),children:(0,o.FD)(b.Flexbox,{align:"center",gap:12,horizontal:!0,width:"100%",children:[(0,o.Y)(F.A,{checked:t,onChange:()=>l(e.id),onClick:e=>e.stopPropagation()}),(0,o.Y)(v.A,{avatars:e.members.filter(e=>null!=e).map(e=>({avatar:e.avatar||N.k_,background:e.backgroundColor||void 0})),size:40}),(0,o.FD)(b.Flexbox,{flex:1,gap:2,children:[(0,o.Y)(Y.A,{className:i.title,children:e.title}),(0,o.Y)(Y.A,{className:i.description,ellipsis:!0,children:e.description}),(0,o.FD)(b.Flexbox,{align:"center",gap:4,horizontal:!0,children:[(0,o.Y)(g.A,{size:11,style:{color:"#999"}}),(0,o.Y)(Y.A,{style:{fontSize:11},type:"secondary",children:n("groupWizard.memberCount",{count:e.members.filter(e=>null!=e).length})})]})]})]})})}),L=(0,i.memo)(({agent:e,isSelected:t,onToggle:l,styles:i,cx:r})=>{let{t:n}=(0,x.Bd)(["chat","common"]),a=e.config?.id,s=e.meta?.title||n("defaultSession",{ns:"common"}),d=e.meta?.description||"",c=e.meta?.avatar||N.k_,p=e.meta?.backgroundColor;return a?(0,o.Y)("div",{className:r(i.listItem),onClick:()=>l(a),children:(0,o.FD)(b.Flexbox,{align:"center",gap:12,horizontal:!0,width:"100%",children:[(0,o.Y)(F.A,{checked:t,onChange:()=>l(a),onClick:e=>e.stopPropagation()}),(0,o.Y)(A.A,{avatar:c,background:p,shape:"circle",size:40}),(0,o.FD)(b.Flexbox,{flex:1,gap:2,style:{minWidth:0},children:[(0,o.Y)(Y.A,{className:i.title,children:s}),d&&(0,o.Y)(Y.A,{className:i.description,ellipsis:!0,children:d})]})]})}):null}),_=(0,a.rU)(({css:e,token:t})=>({container:e`
    display: flex;
    flex-direction: row;

    height: 500px;
    border: 1px solid ${t.colorBorderSecondary};
    border-radius: ${t.borderRadius}px;
  `,description:e`
    font-size: 12px;
    line-height: 1.2;
    color: ${t.colorTextSecondary};
  `,hostCard:e`
    margin-block-start: ${t.paddingSM}px;
    margin-inline: ${t.paddingSM}px;
    padding: ${t.padding}px;
    border: 1px solid ${t.colorBorderSecondary};
    border-radius: ${t.borderRadiusLG}px;

    background: ${t.colorFillTertiary};
  `,leftColumn:e`
    user-select: none;

    overflow-y: auto;
    flex: 1;

    padding: 0;
    border-inline-end: 1px solid ${t.colorBorderSecondary};
  `,listHeader:e`
    padding: 0;
    color: ${t.colorTextDescription};
  `,listItem:e`
    cursor: pointer;

    position: relative;

    margin-block: 2px;
    padding: ${t.paddingSM}px !important;
    border-radius: ${t.borderRadius}px;

    transition: all 0.2s ease;

    &:hover {
      background: ${t.colorFillTertiary};
    }
  `,memberDescription:e`
    display: block;
    padding-inline-end: 48px;
  `,modelSelectDisabled:e`
    pointer-events: none;
  `,rightColumn:e`
    overflow-y: auto;
    display: flex;
    flex: 1;
    flex-direction: column;

    padding: 0;
  `,title:e`
    font-size: 14px;
    font-weight: 500;
  `})),G=(0,i.memo)(({onCancel:e,onCreateFromTemplate:t,onCreateCustom:l,open:r,isCreatingFromTemplate:n})=>{let{t:s}=(0,x.Bd)(["chat","common"]),{styles:d,cx:c}=_(),p=(0,a.DP)(),m=(0,I.Q)(),h=(0,W.J)(),g=(0,B.B)(e=>(e.sessions||[]).filter(e=>e.type===P.r.Agent)),u=(0,i.useMemo)(()=>g.filter(e=>!e.config?.virtual),[g]),f=(0,i.useMemo)(()=>c(d.description,d.memberDescription),[c,d.description,d.memberDescription]),y=(0,i.useMemo)(()=>{if(h.length>0&&h[0].children.length>0){let e=h[0];return{model:e.children[0].id,provider:e.id}}return{model:void 0,provider:void 0}},[h]),[v,F]=(0,i.useState)(""),[G,K]=(0,i.useState)(""),[U,j]=(0,i.useState)(""),[H,J]=(0,i.useState)([]),[Q,O]=(0,i.useState)({}),[V,X]=(0,i.useState)(!1),[q,Z]=(0,i.useState)(y.model&&y.provider?y:{}),[ee,et]=(0,i.useState)(!1),[el,eo]=(0,i.useState)("templates"),ei=(0,i.useRef)(null),er=(0,i.useCallback)(e=>{j(t=>{let l=t===e?"":e;return l!==t&&(O({}),X(!1)),l&&J([]),l})},[]),en=(0,i.useCallback)(e=>{j(""),O({}),J(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),ea=(0,i.useCallback)(e=>{J(t=>t.filter(t=>t!==e))},[]),es=()=>{j(""),J([]),F(""),K(""),O({}),X(!1),Z(y.model&&y.provider?y:{}),ei.current&&clearTimeout(ei.current)},ed=(0,i.useCallback)(e=>{Z(e)},[]),ec=(0,i.useCallback)((e,t,l)=>{O(o=>{let i=o[e]||[];if(l){let l=i.filter(e=>e!==t);return 0===l.length?(0,D.A)(o,[e]):{...o,[e]:l}}return i.includes(t)?o:{...o,[e]:[...i,t]}})},[]),ep=(0,i.useCallback)(e=>{X(!e)},[]),em=(0,i.useCallback)(e=>{let t=e.target.value;F(t),ei.current&&clearTimeout(ei.current),ei.current=setTimeout(()=>{K(t)},300)},[]),eh=u.length;(0,i.useEffect)(()=>()=>{ei.current&&clearTimeout(ei.current)},[]),(0,i.useEffect)(()=>{r&&eo(eh>2?"agents":"templates")},[r,eh]),(0,i.useEffect)(()=>{J(e=>e.filter(e=>u.some(t=>t.config?.id===e)))},[u]);let eg=(0,i.useCallback)(e=>{if(!e)return;let t=Array.isArray(e)?e[0]:e;("templates"===t||"agents"===t)&&eo(t)},[]),eu=(0,i.useMemo)(()=>{let e=G.trim().toLowerCase();return e?m.filter(t=>!!(t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))||t.members.some(t=>null!=t&&t.title.toLowerCase().includes(e))):m},[m,G]),ef=(0,i.useMemo)(()=>{let e=G.trim().toLowerCase();return e?u.filter(t=>{let l=t.meta?.title||"",o=t.meta?.description||"";return l.toLowerCase().includes(e)||o.toLowerCase().includes(e)}):u},[u,G]),ex=(0,i.useMemo)(()=>{if(!U)return[];let e=m.find(e=>e.id===U);if(!e)return[];let t=new Set(Q[U]||[]);return e.members.filter(e=>null!=e).map(e=>({avatar:e.avatar||N.k_,backgroundColor:e.backgroundColor,description:e.systemRole,isRemoved:t.has(e.title),key:`${U}-${e.title}`,systemRole:e.systemRole,title:e.title}))},[U,Q,m]),eb=(0,i.useMemo)(()=>ex.filter(e=>!e.isRemoved).length,[ex]),ey=(0,i.useMemo)(()=>H.map(e=>{let t=g.find(t=>t.config?.id===e);if(!t)return null;let l=t.meta?.title||s("defaultSession",{ns:"common"}),i=t.meta?.avatar||N.k_,r=t.meta?.backgroundColor,n=t.meta?.description||"";return{actions:(0,o.Y)(M.A,{checked:!0,onChange:t=>{t||ea(e)},size:"small"}),avatar:(0,o.Y)(A.A,{avatar:i,background:r,shape:"circle",size:40}),description:n?(0,o.Y)(k.A,{title:n,children:(0,o.Y)(Y.A,{className:f,ellipsis:{rows:1},children:n})}):null,key:e,showAction:!0,title:l}}).filter(e=>!!e),[H,g,s,ea,f]),ev=(0,i.useMemo)(()=>{let e=q.model??y.model,t=q.provider??y.provider;if(e&&t)return{model:e,provider:t}},[q,y]),eY=(0,i.useCallback)(async()=>{if(!U)return;let e=V?void 0:ev;try{let l=m.find(e=>e.id===U),o=new Set(Q[U]||[]),i=(l?.members||[]).filter(e=>null!=e&&!o.has(e.title)).map(e=>e.title);await t(U,e,!V,i),es()}catch(e){console.error("Failed to create group from template:",e)}},[U,t,ev,V,m,Q]),eA=(0,i.useCallback)(async()=>{if(0===H.length)return;let t=V?void 0:ev;try{et(!0),await l(H,t,!V),es(),e()}catch(e){console.error("Failed to create group with selected members:",e)}finally{et(!1)}},[H,l,ev,V,e]),ek=(0,i.useCallback)(async()=>{U?await eY():await eA()},[U,eY,eA]),ew=()=>{es(),e()},eS=U?0===eb&&V:0===H.length,ez=U?n??!1:ee;return(0,o.Y)(w.A,{footer:(0,o.FD)(b.Flexbox,{gap:8,horizontal:!0,justify:"end",children:[(0,o.Y)(T.Ay,{onClick:ew,children:s("cancel",{ns:"common"})}),(0,o.Y)(T.Ay,{disabled:eS,loading:ez,onClick:ek,type:"primary",children:s("groupWizard.createGroup")})]}),onCancel:ew,open:r,title:s("groupWizard.title"),width:900,children:(0,o.FD)(b.Flexbox,{className:d.container,horizontal:!0,children:[(0,o.FD)(b.Flexbox,{className:d.leftColumn,flex:1,gap:12,children:[(0,o.Y)(S.A,{allowClear:!0,onChange:em,placeholder:s("memberSelection.searchAgents"),style:{margin:`${p.paddingSM}px ${p.paddingSM}px 0 ${p.paddingSM}px`},value:v,variant:"filled"}),(0,o.Y)(b.Flexbox,{flex:1,style:{overflowY:"auto",padding:`0 ${p.paddingSM}px`},children:(0,o.Y)(z.A,{accordion:!0,activeKey:el,collapsible:!0,expandIconPosition:"end",gap:12,items:[{children:0===eu.length?(0,o.Y)($.A,{description:G?s("groupWizard.noMatchingTemplates"):s("groupWizard.noTemplates"),image:$.A.PRESENTED_IMAGE_SIMPLE}):(0,o.Y)(b.Flexbox,{gap:4,children:eu.map(e=>(0,o.Y)(R,{cx:c,isSelected:U===e.id,onToggle:er,styles:d,template:e},e.id))}),key:"templates",label:s("groupWizard.useTemplate")},{children:0===ef.length?(0,o.Y)($.A,{description:G?s("noMatchingAgents",{ns:"chat"}):s("noAvailableAgents",{ns:"chat"}),image:$.A.PRESENTED_IMAGE_SIMPLE}):(0,o.Y)(b.Flexbox,{gap:4,children:ef.map(e=>(0,o.Y)(L,{agent:e,cx:c,isSelected:H.includes(e.config?.id||""),onToggle:en,styles:d},e.id))}),key:"agents",label:s("groupWizard.existingMembers")}],onChange:eg,size:"small",styles:{header:{color:p.colorTextDescription,fontSize:p.fontSize,padding:0}},variant:"borderless"})})]}),(0,o.Y)(b.Flexbox,{className:d.rightColumn,flex:1,children:(0,o.FD)(b.Flexbox,{flex:1,gap:16,style:{overflowY:"auto"},children:[(0,o.FD)(b.Flexbox,{align:"center",className:d.hostCard,gap:12,horizontal:!0,children:[(0,o.FD)(b.Flexbox,{flex:1,gap:2,children:[(0,o.Y)(Y.A,{style:{fontSize:14,fontWeight:500},type:V?"secondary":void 0,children:s("groupWizard.host.title")}),(0,o.Y)(Y.A,{style:{color:"#999",fontSize:12},type:V?"secondary":void 0,children:s("groupWizard.host.description")})]}),(0,o.FD)(b.Flexbox,{align:"center",gap:12,horizontal:!0,children:[(0,o.Y)("div",{className:c(V&&d.modelSelectDisabled),style:{opacity:V?.6:1},children:(0,o.Y)(E.A,{onChange:ed,requiredAbilities:["functionCall"],value:ev})}),(0,o.Y)(k.A,{title:s("groupWizard.host.tooltip"),children:(0,o.Y)(M.A,{checked:!V,onChange:e=>ep(e),size:"small"})})]})]}),(0,o.Y)(b.Flexbox,{style:{padding:`0 ${p.paddingSM}px`},children:U?ex.length>0?(0,o.Y)(C.A,{items:ex.map(e=>({actions:(0,o.Y)(M.A,{checked:!e.isRemoved,onChange:t=>ec(U,e.title,t),size:"small"}),avatar:(0,o.Y)(A.A,{avatar:e.avatar,background:e.backgroundColor,shape:"circle",size:40}),description:e.systemRole?(0,o.Y)(k.A,{title:e.systemRole,children:(0,o.Y)(Y.A,{className:f,ellipsis:{rows:1},type:e.isRemoved?"secondary":void 0,children:e.systemRole})}):null,key:e.key,showAction:!0,title:(0,o.Y)(Y.A,{type:e.isRemoved?"secondary":void 0,children:e.title})}))}):(0,o.Y)($.A,{description:s("groupWizard.noTemplateMembers"),image:$.A.PRESENTED_IMAGE_SIMPLE}):ey.length>0?(0,o.Y)(C.A,{items:ey}):(0,o.Y)($.A,{description:s("memberSelection.noSelectedAgents"),image:$.A.PRESENTED_IMAGE_SIMPLE})})]})})]})})});var K=l(49935),U=l(99061),j=l(46265),H=l(50243),J=l(62326),Q=l(12467),O=l(62016),V=l(60540),X=l(38759),q=l(42897),Z=l(23047);let ee=(0,i.memo)(({mobile:e})=>{let{t}=(0,x.Bd)("chat"),l=(0,X.k)(e=>e.isLoaded),r=(0,X.k)(q.w0.getHotkeyById(Z.g8.Search)),[n,a,s]=(0,B.B)(e=>[e.sessionSearchKeywords,e.useSearchSessions,e.updateSearchKeywords]),{isValidating:d}=a(n),c=(0,i.useCallback)(e=>{s(e.target.value)},[s]);return(0,o.Y)(S.A,{allowClear:!0,enableShortKey:!e,loading:!l||d,onChange:c,placeholder:t("searchAgentPlaceholder"),shortKey:r,spotlight:!e,value:n,variant:"filled"})}),et=(0,a.rU)(({css:e,token:t})=>({logo:e`
    color: ${t.colorText};
    fill: ${t.colorText};
  `,top:e`
    position: sticky;
    inset-block-start: 0;
    padding-block-start: 10px;
  `})),el=(0,i.memo)(()=>{let{styles:e}=et(),{t}=(0,x.Bd)("chat"),l=(0,I.Q)(),[r,n]=(0,B.B)(e=>[e.createSession,e.refreshSessions]),[a]=(0,H.u)(e=>[e.createGroup]),{showCreateSession:s,enableGroupChat:d}=(0,J.wo)(Q.E),[v,Y]=(0,i.useState)(!1),[A,k]=(0,i.useState)(!1),{mutate:w,isValidating:S}=(0,j.Cf)("session.createSession",()=>r()),z=async(e,t,o,i)=>{k(!0);try{let s=l.find(t=>t.id===e);if(!s)throw Error(`Template ${e} not found`);let d=void 0===i?s.members:s.members.filter(e=>i.includes(e.title)),c=[];for(let e of d){let t=await r({config:{plugins:e.plugins,systemRole:e.systemRole,virtual:!0},meta:{avatar:e.avatar,backgroundColor:e.backgroundColor,description:`${e.title} - ${s.description}`,title:e.title}},!1);await n();let l=O.z.getSessionById(t)(B.B.getState());l&&"agent"===l.type&&l.config?.id&&c.push(l.config.id)}await new Promise(e=>{setTimeout(()=>e(),1e3)}),console.log("Creating group with hostConfig:",t),console.log("Mapped config:",t?{orchestratorModel:t.model,orchestratorProvider:t.provider}:void 0),await a({config:{...t?{orchestratorModel:t.model,orchestratorProvider:t.provider}:{},enableSupervisor:o??!0,scene:U.DM.scene},title:s.title},c),Y(!1)}catch(e){console.error("Failed to create group from template:",e)}finally{k(!1)}},C=async(e,l,o)=>{k(!0);try{console.log("Creating custom group with hostConfig:",l),console.log("Mapped config:",l?{orchestratorModel:l.model,orchestratorProvider:l.provider}:void 0),await a({config:{...l?{orchestratorModel:l.model,orchestratorProvider:l.provider}:{},enableSupervisor:o??!0,scene:U.DM.scene},title:t("defaultGroupChat")},e),Y(!1)}catch(e){console.error("Failed to create group:",e)}finally{k(!1)}};return(0,o.FD)(b.Flexbox,{className:e.top,gap:16,paddingInline:8,children:[(0,o.FD)(b.Flexbox,{align:"flex-start",horizontal:!0,justify:"space-between",children:[(0,o.Y)(b.Flexbox,{align:"center",gap:4,horizontal:!0,style:{paddingInlineStart:4,paddingTop:2},children:(0,o.Y)(y.d,{className:e.logo,size:36,type:"text"})}),(0,o.FD)(b.Flexbox,{align:"center",gap:4,horizontal:!0,children:[(0,o.Y)(V.A,{}),s&&(d?(0,o.Y)(c.A,{menu:{items:[{icon:(0,o.Y)(p.default,{icon:h.A}),key:"newAgent",label:t("newAgent"),onClick:()=>{w()}},{icon:(0,o.Y)(p.default,{icon:g.A}),key:"newGroup",label:t("newGroupChat"),onClick:()=>{Y(!0)}}]},trigger:["hover"],children:(0,o.Y)(m.A,{icon:u.A,loading:S||A,size:K.R4,style:{flex:"none"}})}):(0,o.Y)(m.A,{icon:f.A,loading:S,onClick:()=>w(),size:K.R4,style:{flex:"none"},title:t("newAgent"),tooltipProps:{placement:"bottom"}}))]})]}),(0,o.Y)(ee,{}),d&&(0,o.Y)(G,{isCreatingFromTemplate:A,onCancel:()=>{Y(!1)},onCreateCustom:C,onCreateFromTemplate:z,open:v})]})}),eo=({children:e})=>(0,o.FD)(o.FK,{children:[(0,o.Y)(el,{}),(0,o.Y)(d,{children:e})]});var ei=l(42379),er=l(33145),en=l(27697),ea=l(83395),es=l(98603);let ed=(0,i.memo)(()=>{let[e]=(0,B.B)(e=>[e.createSession]),t=(0,en.Zp)(),{showCreateSession:l}=(0,J.wo)(Q.E);return(0,o.Y)(er.A,{left:(0,o.FD)(b.Flexbox,{align:"center",gap:8,horizontal:!0,style:{marginLeft:8},children:[(0,o.Y)(ea.A,{onClick:()=>t("/me"),size:32}),(0,o.Y)(y.d,{type:"text"})]}),right:l&&(0,o.Y)(m.A,{icon:f.A,onClick:()=>e(),size:K.Jo}),style:es.p})}),ec=({children:e})=>(0,o.FD)(ei.A,{header:(0,o.Y)(ed,{}),withNav:!0,children:[(0,o.Y)("div",{style:{padding:"8px 16px"},children:(0,o.Y)(ee,{mobile:!0})}),e]});var ep=l(81088),em=l(38858),eh=l(45541),eg=l(17068);let eu=(0,i.memo)(()=>{let e=(0,ep.H)(B.B),t=(0,ep.H)(eh.o),l=(0,ep.H)(eg.L),[o]=(0,eg.L)(e=>[e.switchTopic]),[r,n]=(0,em.pE)("session",em.tU.withDefault("inbox"),{history:"replace",throttleMs:50});return e("activeId",r),t("activeId",r),l("activeId",r),(0,i.useEffect)(()=>{let e=B.B.subscribe(e=>e.activeId,e=>{o(),n(e)});return()=>{e()}},[]),null});var ef=l(45306);let ex=(0,i.lazy)(()=>Promise.all([l.e(76181),l.e(59744),l.e(2460),l.e(84486),l.e(65998),l.e(40035),l.e(1505),l.e(92210)]).then(l.bind(l,92210))),eb=(0,i.memo)(({mobile:e})=>(0,o.FD)(i.Suspense,{fallback:(0,o.Y)(r.default,{}),children:[(0,o.Y)(e?ec:eo,{children:(0,o.Y)(i.Suspense,{fallback:(0,o.Y)(ef.A,{}),children:(0,o.Y)(ex,{})})}),(0,o.Y)(eu,{})]}));eb.displayName="SessionPanel";let ey=eb},42379:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(28802),i=l(80457);let r=({children:e,withNav:t,style:l,header:r,id:n="lobe-mobile-scroll-container",...a})=>{let s=(0,o.Y)(i.Flexbox,{height:"100%",id:n,style:{overflowX:"hidden",overflowY:"auto",position:"relative",...l,paddingBottom:t?48:l?.paddingBottom},width:"100%",...a,children:e});return r?(0,o.FD)(i.Flexbox,{height:"100%",style:{overflow:"hidden",position:"relative"},width:"100%",children:[r,(0,o.Y)(i.Flexbox,{height:"100%",id:"lobe-mobile-scroll-container",style:{overflowX:"hidden",overflowY:"auto",position:"relative",...l,paddingBottom:t?48:l?.paddingBottom},width:"100%",...a,children:e})]}):s};r.displayName="MobileContentLayout";let n=r},45306:(e,t,l)=>{l.d(t,{A:()=>d});var o=l(28802),i=l(59202),r=l(11577),n=l(83034),a=l(80457);let s=(0,r.rU)(({css:e})=>({paragraph:e`
    height: 12px !important;
    margin-block-start: 12px !important;

    > li {
      height: 12px !important;
    }
  `,title:e`
    height: 14px !important;
    margin-block: 4px 12px !important;

    > li {
      height: 14px !important;
    }
  `})),d=(0,n.memo)(({count:e=4})=>{let{styles:t}=s(),l=Array.from({length:e}).fill("");return(0,o.Y)(a.Flexbox,{gap:8,paddingInline:16,children:l.map((e,l)=>(0,o.Y)(i.A,{active:!0,avatar:!0,paragraph:{className:t.paragraph,rows:1},title:{className:t.title}},l))})})},60540:(e,t,l)=>{l.d(t,{A:()=>b,x:()=>x});var o=l(28802),i=l(37412),r=l(9274),n=l(85040),a=l(20964),s=l(83034),d=l(59121),c=l(49935),p=l(20108),m=l(5930),h=l(31065),g=l(38759),u=l(42897),f=l(23047);let x="toggle-panel-button",b=(0,s.memo)(()=>{let e=(0,p.f)(),t=(0,g.k)(u.w0.getHotkeyById(f.g8.ToggleLeftPanel)),{t:l}=(0,d.Bd)(["chat","hotkey"]),s=(0,m.o)(h.I.showSessionPanel),b=(0,m.o)(e=>e.updateSystemStatus);return e?null:(0,o.Y)(i.A,{hotkey:t,title:l("toggleLeftPanel.title",{ns:"hotkey"}),children:(0,o.Y)(r.A,{icon:s?n.A:a.A,id:x,onClick:()=>{b({sessionsWidth:320*!s,showSessionPanel:!s})},size:c.R4})})})},95891:(e,t,l)=>{l.d(t,{d:()=>f});var o=l(28802),i=l(8756),r=l(83034),n=l(64861),a=l(11577),s=l(65101),d=l(80457),c=l(98724);let p=(0,a.rU)(({css:e})=>({extraTitle:e`
      font-weight: 300;
      white-space: nowrap;
    `})),m=(0,r.memo)(({size:e,style:t,...l})=>(0,o.Y)(d.Flexbox,{height:e,style:{fontSize:e/1.5,fontWeight:"bolder",userSelect:"none",...t},...l,children:c.Se})),h=(0,r.memo)(({size:e,...t})=>(0,o.Y)(s.default,{alt:c.Se,height:e,src:c.UE,unoptimized:!0,width:e,...t})),g=(0,r.forwardRef)(({size:e="1em",style:t,...l},i)=>(0,o.Y)("svg",{fill:"none",height:e,ref:i,shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",style:{flex:"none",lineHeight:1,...t},viewBox:"0 0 24 24",width:e,...l,children:(0,o.Y)("path",{d:"M16.88 3.549L7.12 20.451"})})),u=(0,r.memo)(({extra:e,size:t=32,className:l,style:i,type:r,...n})=>{let s,c=(0,a.DP)(),{styles:u}=p();switch(r){case"3d":case"flat":default:s=(0,o.Y)(h,{size:t,style:i,...n});break;case"mono":s=(0,o.Y)(h,{size:t,style:{filter:"grayscale(100%)",...i},...n});break;case"text":s=(0,o.Y)(m,{size:t,style:i,...n});break;case"combine":s=(0,o.FD)(o.FK,{children:[(0,o.Y)(h,{size:t}),(0,o.Y)(m,{size:t,style:{marginLeft:Math.round(t/4)}})]}),e||(s=(0,o.Y)(d.Flexbox,{align:"center",flex:"none",horizontal:!0,...n,children:s}))}if(!e)return s;let f=Math.round(t/3*1.9);return(0,o.FD)(d.Flexbox,{align:"center",className:l,flex:"none",horizontal:!0,...n,children:[s,(0,o.Y)(g,{size:f,style:{color:c.colorFill}}),(0,o.Y)("div",{className:u.extraTitle,style:{fontSize:f},children:e})]})}),f=(0,r.memo)(e=>n.fF?(0,o.Y)(u,{...e}):(0,o.Y)(i.default,{...e}))},97496:(e,t,l)=>{l.d(t,{Q:()=>i});var o=l(59121);let i=()=>{let{t:e}=(0,o.Bd)("welcome");return["brainstorm","analysis","writing","planning","product","game"].map(t=>({description:e(`guide.groupTemplates.${t}.description`),id:t,members:e(`guide.groupTemplates.${t}.members`,{returnObjects:!0}),title:e(`guide.groupTemplates.${t}.title`)}))}},98603:(e,t,l)=>{l.d(t,{p:()=>o});let o={position:"sticky",top:0,width:"100%",zIndex:100}},99859:(e,t,l)=>{l.d(t,{A:()=>c});var o=l(28802),i=l(47762),r=l(11577),n=l(83034),a=l(25598),s=l(6332);let d=(0,r.rU)(({css:e,prefixCls:t})=>({popup:e`
    &.${t}-select-dropdown .${t}-select-item-option-grouped {
      padding-inline-start: 12px;
    }
  `,select:e`
    .${t}-select-selection-item {
      .${a.$} {
        display: none;
      }
    }
  `})),c=(0,n.memo)(({value:e,onChange:t,showAbility:l=!0,requiredAbilities:r})=>{let c=(0,s.J)(),{styles:p}=d(),m=(0,n.useMemo)(()=>{let e=e=>(r&&r.length>0?e.children.filter(e=>r.every(t=>!!e.abilities?.[t])):e.children).map(t=>({label:(0,o.Y)(a.$z,{...t,...t.abilities,showInfoTag:l}),provider:e.id,value:`${e.id}/${t.id}`}));return 1===c.length?e(c[0]):c.map(t=>{let l=e(t);if(0!==l.length)return{label:(0,o.Y)(a.TK,{logo:t.logo,name:t.name,provider:t.id,source:t.source}),options:l}}).filter(Boolean)},[c,r,l]);return console.log("options",m),console.log("enabledList",c),(0,o.Y)(i.A,{className:p.select,classNames:{popup:{root:p.popup}},defaultValue:`${e?.provider}/${e?.model}`,onChange:(e,l)=>{let o=e.split("/").slice(1).join("/");t?.({model:o,provider:l.provider})},options:m,popupMatchSelectWidth:!1,value:`${e?.provider}/${e?.model}`})})}}]);