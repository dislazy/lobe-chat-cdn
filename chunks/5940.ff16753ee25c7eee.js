"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5940],{5940:(e,r,l)=>{l.r(r),l.d(r,{default:()=>eG});var a,i=l(28802),t=l(83034),o=l(27697),d=l(64861),n=l(80457),c=l(44452),s=l(11577),p=l(59121),u=l(94147),h=l(9274),m=l(90897),b=l(2893),v=l(69033),g=l(40681),A=l(47762),Y=l(53860),y=l(69904),w=l(12389),f=l(58244),x=l(18223),k=l(84840),P=l(13735);let F=(0,t.memo)(({onClose:e,open:r})=>{let{t:l}=(0,p.Bd)("modelProvider"),[a,d]=(0,t.useState)(!1),c=(0,u.d)(e=>e.createNewAiProvider),{message:s}=f.A.useApp(),h=(0,o.Zp)(),m=async r=>{d(!0);try{let a={...r,name:r.name||r.id},i=r.settings?.sdkType;("openai"===i||"router"===i)&&(a.settings={...a.settings,supportResponsesApi:!0}),await c(a),d(!1),h(`/settings?active=provider&provider=${r.id}`),s.success(l("createNewAiProvider.createSuccess")),e?.()}catch(e){console.error(e),d(!1)}},F=[{children:(0,i.Y)(v.A,{autoFocus:!0,placeholder:l("createNewAiProvider.id.placeholder"),variant:"filled"}),desc:l("createNewAiProvider.id.desc"),label:l("createNewAiProvider.id.title"),minWidth:400,name:"id",rules:[{message:l("createNewAiProvider.id.required"),required:!0},{message:l("createNewAiProvider.id.format"),pattern:/^[\d_a-z-]+$/}]},{children:(0,i.Y)(v.A,{placeholder:l("createNewAiProvider.name.placeholder"),variant:"filled"}),label:l("createNewAiProvider.name.title"),minWidth:400,name:"name"},{children:(0,i.Y)(g.A,{placeholder:l("createNewAiProvider.description.placeholder"),style:{minHeight:80},variant:"filled"}),label:l("createNewAiProvider.description.title"),minWidth:400,name:"description"},{children:(0,i.Y)(v.A,{allowClear:!0,placeholder:"https://logo-url",variant:"filled"}),label:l("createNewAiProvider.logo.title"),minWidth:400,name:"logo"}],C=[{children:(0,i.Y)(A.A,{optionRender:({label:e,value:r})=>(0,i.FD)(n.Flexbox,{align:"center",gap:8,horizontal:!0,children:[(0,i.Y)(b.A,{provider:"router"===r?"newapi":r,size:18}),e]}),options:P.m,placeholder:l("createNewAiProvider.sdkType.placeholder"),variant:"filled"}),label:l("createNewAiProvider.sdkType.title"),minWidth:400,name:["settings","sdkType"],rules:[{message:l("createNewAiProvider.sdkType.required"),required:!0}]},{children:(0,i.Y)(v.A,{allowClear:!0,placeholder:"https://xxxx-proxy.com/v1"}),label:l("createNewAiProvider.proxyUrl.title"),minWidth:400,name:[k.Gf,k.UR],rules:[{message:l("createNewAiProvider.proxyUrl.required"),required:!0}]},{children:(0,i.Y)(Y.A,{autoComplete:"new-password",placeholder:l("createNewAiProvider.apiKey.placeholder"),variant:"filled"}),label:l("createNewAiProvider.apiKey.title"),minWidth:400,name:[k.Gf,k.FR]}];return(0,i.Y)(y.A,{destroyOnHidden:!0,items:[{children:F,title:l("createNewAiProvider.basicTitle")},{children:C,title:l("createNewAiProvider.configTitle")}],onCancel:e,onFinish:m,open:r,scrollToFirstError:{behavior:"instant",block:"end",focus:!0},submitLoading:a,submitText:l("createNewAiProvider.confirm"),title:(0,i.FD)(n.Flexbox,{gap:8,horizontal:!0,children:[(0,i.Y)(w.default,{icon:x.A}),l("createNewAiProvider.title")]})})}),C=()=>{let{t:e}=(0,p.Bd)("modelProvider"),[r,l]=(0,t.useState)(!1);return(0,i.FD)(i.FK,{children:[(0,i.Y)(h.A,{icon:m.A,onClick:()=>l(!0),size:{blockSize:34,size:18},title:e("menu.addCustomProvider"),variant:"filled"}),(0,i.Y)(F,{onClose:()=>l(!1),open:r})]})};var z=l(1894),S=l(81490),N=l(75431),D=l(38153),G=l(31021),R=l.n(G),T=l(63433),B=l(6563),L=l(47260),q=l(5930),I=l(31065),K=l(57842),$=l(20480),M=l(67072),U=l(64873),W=l(77186);let j=(0,s.rU)(({css:e,token:r})=>({active:e`
    background: ${r.colorFillSecondary};
  `,container:e`
    cursor: pointer;

    display: flex;
    gap: 8px;
    align-items: center;
    justify-content: space-between;

    padding-block: 8px;
    padding-inline: 12px;
    border-radius: ${r.borderRadius}px;

    color: inherit;

    transition: all 0.2s ease-in-out;

    &:hover {
      color: inherit;
      background-color: ${r.colorFill};
    }
  `})),_=(0,t.memo)(({id:e,name:r,source:l,enabled:a,logo:t,onClick:d=()=>{}})=>{let{styles:c,cx:s}=j(),[p]=(0,o.ok)(),u=p.get("provider"),h=l===W.Ag.Custom;return(0,i.FD)("div",{className:s(c.container,u===e&&c.active),onClick:()=>{d(e)},children:[(0,i.FD)(n.Flexbox,{gap:8,horizontal:!0,children:[h&&t?(0,i.Y)(M.A,{alt:r||e,avatar:t,shape:"square",size:24,style:{borderRadius:6}}):(0,i.Y)(b.A,{provider:e,size:24,style:{borderRadius:6},type:"avatar"}),r]}),(0,i.Y)(n.Flexbox,{horizontal:!0,children:a&&(0,i.Y)($.default,{width:24,children:(0,i.Y)(U.A,{status:"success"})})})]})}),O=(0,t.memo)(e=>{let{onClick:r}=e,{t:l}=(0,p.Bd)("modelProvider"),{styles:a,cx:t}=j(),[d]=(0,o.ok)(),c=d.get("provider");return(0,i.Y)("div",{className:t(a.container,"all"===c&&a.active),onClick:()=>{r("all")},children:(0,i.FD)(n.Flexbox,{gap:8,horizontal:!0,children:[(0,i.Y)($.default,{width:24,children:(0,i.Y)(w.default,{icon:K.A,size:18})}),l("menu.all")]})})});var H=l(29703),E=l(2460),Q=l(15447);let V=(0,t.memo)(({id:e,name:r,source:l,logo:a})=>(0,i.FD)(i.FK,{children:[(0,i.FD)(n.Flexbox,{gap:8,horizontal:!0,children:["custom"===l&&a?(0,i.Y)(M.A,{alt:r||e,avatar:a,shape:"square",size:24,style:{borderRadius:6}}):(0,i.Y)(b.A,{provider:e,size:24,style:{borderRadius:6},type:"avatar"}),r]}),(0,i.Y)(E.A.DragHandle,{})]})),X=(0,s.rU)(({css:e,token:r})=>({container:e`
    height: 36px;
    padding-inline: 8px;
    border-radius: ${r.borderRadius}px;
    transition: background 0.2s ease-in-out;

    &:hover {
      background: ${r.colorFillTertiary};
    }
  `})),Z=(0,t.memo)(({open:e,onCancel:r,defaultItems:l})=>{let{t:a}=(0,p.Bd)("modelProvider"),{styles:o}=X(),d=(0,u.d)(e=>e.updateAiProviderSort),[c,s]=(0,t.useState)(!1),{message:h}=f.A.useApp(),[m,b]=(0,t.useState)(l);return(0,i.Y)(H.A,{allowFullscreen:!0,footer:null,onCancel:r,open:e,title:a("sortModal.title"),width:400,children:(0,i.FD)(n.Flexbox,{gap:16,children:[(0,i.Y)(E.A,{items:m,onChange:async e=>{b(e)},renderItem:e=>(0,i.Y)(E.A.Item,{align:"center",className:o.container,gap:4,horizontal:!0,id:e.id,justify:"space-between",children:(0,i.Y)(V,{...e})})}),(0,i.Y)(Q.A,{block:!0,loading:c,onClick:async()=>{let e=m.map((e,r)=>({id:e.id,sort:r}));s(!0),await d(e),s(!1),h.success(a("sortModal.success")),r()},type:"primary",children:a("sortModal.update")})]})})});var J=((a=J||{}).Alphabetical="alphabetical",a.AlphabeticalDesc="alphabeticalDesc",a.Default="default",a);let ee=e=>{let{onProviderSelect:r,mobile:l}=e,{t:a}=(0,p.Bd)("modelProvider"),[o,d]=(0,t.useState)(!1),[c,s]=(0,q.o)(e=>[I.I.disabledModelProvidersSortType(e),e.updateSystemStatus]),m=(0,t.useCallback)(e=>{s({disabledModelProvidersSortType:e})},[s]),b=(0,u.d)(L.w.enabledAiProviderList,R()),v=(0,u.d)(L.w.disabledAiProviderList,R()),g=(0,t.useMemo)(()=>{let e=[...v];switch(c){case"alphabetical":return e.sort((e,r)=>{let l=(e.name||e.id).localeCompare(r.name||r.id);return 0!==l?l:e.id.localeCompare(r.id)});case"alphabeticalDesc":return e.sort((e,r)=>{let l=(r.name||e.id).localeCompare(e.name||r.id);return 0!==l?l:r.id.localeCompare(e.id)});default:return e}},[v,c]);return(0,i.FD)(S.A,{gap:4,height:"100%",paddingInline:12,size:4,style:{paddingBottom:32},children:[!l&&(0,i.Y)(O,{onClick:r}),(0,i.FD)(n.Flexbox,{align:"center",horizontal:!0,justify:"space-between",style:{fontSize:12,marginTop:8},children:[(0,i.Y)(N.A,{style:{fontSize:12},type:"secondary",children:a("menu.list.enabled")}),(0,i.Y)(h.A,{icon:T.A,onClick:()=>{d(!0)},size:"small",title:a("menu.sort")}),o&&(0,i.Y)(Z,{defaultItems:b,onCancel:()=>{d(!1)},open:o})]}),b.map(e=>(0,z.n)(_,{...e,key:e.id,onClick:r})),(0,i.FD)(n.Flexbox,{align:"center",horizontal:!0,justify:"space-between",children:[(0,i.Y)(N.A,{style:{fontSize:12,marginTop:8},type:"secondary",children:a("menu.list.disabled")}),v.length>1&&(0,i.Y)(D.A,{menu:{items:[{icon:"default"===c?(0,i.Y)(w.default,{icon:B.A}):(0,i.Y)("div",{}),key:"default",label:a("menu.list.disabledActions.sortDefault"),onClick:()=>m("default")},{type:"divider"},{icon:"alphabetical"===c?(0,i.Y)(w.default,{icon:B.A}):(0,i.Y)("div",{}),key:"alphabetical",label:a("menu.list.disabledActions.sortAlphabetical"),onClick:()=>m("alphabetical")},{icon:"alphabeticalDesc"===c?(0,i.Y)(w.default,{icon:B.A}):(0,i.Y)("div",{}),key:"alphabeticalDesc",label:a("menu.list.disabledActions.sortAlphabeticalDesc"),onClick:()=>m("alphabeticalDesc")}]},trigger:["click"],children:(0,i.Y)(h.A,{icon:T.A,size:"small",title:a("menu.list.disabledActions.sort")})})]}),g.map(e=>(0,z.n)(_,{...e,key:e.id,onClick:r}))]})},er=(0,t.memo)(e=>{let{onProviderSelect:r=()=>{}}=e,{t:l}=(0,p.Bd)("modelProvider"),a=(0,u.d)(e=>e.providerSearchKeyword),o=(0,u.d)(e=>e.aiProviderList,R()),d=(0,t.useMemo)(()=>{let e=a.toLowerCase().trim();return o.filter(r=>r.id.toLowerCase().includes(e)||r.name?.toLowerCase().includes(e)||r.description?.toLowerCase().includes(e))},[a]);return(0,i.Y)(n.Flexbox,{gap:4,padding:"0 12px",children:a&&0===d.length?(0,i.Y)(n.Flexbox,{align:"center",justify:"center",padding:16,children:l("menu.notFound")}):d.map(e=>(0,z.n)(_,{...e,key:e.id,onClick:r}))})});var el=l(59202);let ea=(0,s.rU)(({css:e,prefixCls:r})=>({avatar:e`
    border-radius: 6px;
  `,container:e`
    display: flex;
    align-items: center;
    justify-content: center;

    height: 40px;
    padding-block: 8px;
    padding-inline: 12px;

    .${r}-skeleton-content {
      display: flex;
      flex-direction: column;
    }
  `,paragraph:e`
    > li {
      height: 20px !important;
    }
  `})),ei=(0,t.memo)(()=>{let{styles:e}=ea();return(0,i.Y)(el.A,{active:!0,avatar:{className:e.avatar,shape:"square",size:"small"},className:e.container,paragraph:{className:e.paragraph,rows:1,style:{marginBottom:0},width:"95%"},title:!1})}),et=(0,t.memo)(()=>(0,i.Y)(n.Flexbox,{flex:1,gap:4,style:{paddingTop:6},children:Array.from({length:6}).map((e,r)=>(0,i.Y)(ei,{},r))})),eo=(0,t.memo)(({children:e,mobile:r})=>{let{t:l}=(0,p.Bd)("modelProvider"),a=(0,s.DP)(),[t,o]=(0,u.d)(e=>[e.providerSearchKeyword,e.useFetchAiProviderList,e.initAiProviderList]);o();let d=r?void 0:280;return(0,i.FD)(n.Flexbox,{style:{background:a.colorBgLayout,borderRight:`1px solid ${a.colorBorderSecondary}`,minWidth:d,overflow:r?void 0:"scroll"},width:d,children:[(0,i.FD)(n.Flexbox,{gap:8,horizontal:!0,justify:"space-between",padding:"16px 12px 12px",style:{background:a.colorBgLayout,position:"sticky",top:0,zIndex:50},width:"100%",children:[(0,i.Y)(c.A,{allowClear:!0,onChange:e=>u.d.setState({providerSearchKeyword:e.target.value}),placeholder:l("menu.searchProviders"),style:{width:"100%"},value:t,variant:"filled"}),(0,i.Y)(C,{})]}),e]})}),ed=({mobile:e,onProviderSelect:r=()=>{}})=>{let[l,a]=(0,u.d)(e=>[e.initAiProviderList,e.providerSearchKeyword]),t=(0,i.Y)(ee,{mobile:e,onProviderSelect:r});return l||(t=(0,i.Y)(et,{})),a&&(t=(0,i.Y)(er,{onProviderSelect:r})),(0,i.Y)(eo,{mobile:e,children:t})};var en=l(54329);let ec=(0,t.memo)(({children:e})=>(0,i.Y)(en.A,{style:{paddingBlock:24,paddingInline:32},children:e})),es=({children:e,onProviderSelect:r})=>(0,i.FD)(n.Flexbox,{horizontal:!0,style:{maxHeight:"100vh"},width:"100%",children:[(0,i.Y)(ed,{mobile:!1,onProviderSelect:r}),(0,i.Y)(ec,{children:e})]}),ep=({children:e,onProviderSelect:r})=>{let[l]=(0,o.ok)(),a=l.get("provider");return"all"!==a&&a?e:(0,i.Y)(ed,{mobile:!0,onProviderSelect:r})};var eu=l(33375),eh=l(92565);let em=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(11371)]).then(l.bind(l,12866)),{loadableGenerated:{webpack:()=>[12866]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),eb=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(39687)]).then(l.bind(l,43834)),{loadableGenerated:{webpack:()=>[43834]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),ev=(0,eu.default)(()=>Promise.all([l.e(87940),l.e(7543),l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(80812),l.e(87508),l.e(29883),l.e(99034),l.e(9374),l.e(32251),l.e(10),l.e(80122),l.e(38471),l.e(1440),l.e(16534),l.e(80729),l.e(22093)]).then(l.bind(l,48007)),{loadableGenerated:{webpack:()=>[48007]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),eg=(0,eu.default)(()=>Promise.all([l.e(87940),l.e(7543),l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(80812),l.e(87508),l.e(29883),l.e(99034),l.e(9374),l.e(32251),l.e(10),l.e(80122),l.e(38471),l.e(1440),l.e(16534),l.e(80729),l.e(10904)]).then(l.bind(l,81957)),{loadableGenerated:{webpack:()=>[81957]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),eA=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(63931)]).then(l.bind(l,69544)),{loadableGenerated:{webpack:()=>[69544]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),eY=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(12035)]).then(l.bind(l,5500)),{loadableGenerated:{webpack:()=>[5500]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),ey=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(5216)]).then(l.bind(l,48217)),{loadableGenerated:{webpack:()=>[48217]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),ew=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(23775)]).then(l.bind(l,50552)),{loadableGenerated:{webpack:()=>[50552]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),ef=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(60422)]).then(l.bind(l,49705)),{loadableGenerated:{webpack:()=>[49705]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),ex=(0,eu.default)(()=>Promise.all([l.e(87940),l.e(7543),l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(80812),l.e(87508),l.e(29883),l.e(99034),l.e(9374),l.e(32251),l.e(10),l.e(80122),l.e(38471),l.e(1440),l.e(16534),l.e(80729),l.e(2124)]).then(l.bind(l,65399)),{loadableGenerated:{webpack:()=>[65399]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),ek=(0,eu.default)(()=>l.e(7649).then(l.bind(l,7649)),{loadableGenerated:{webpack:()=>[7649]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),eP=(0,eu.default)(()=>Promise.all([l.e(88440),l.e(13284),l.e(37618),l.e(20659),l.e(69507),l.e(87508),l.e(29883),l.e(80122),l.e(1440),l.e(16534),l.e(80729),l.e(72180)]).then(l.bind(l,2767)),{loadableGenerated:{webpack:()=>[2767]},loading:()=>(0,i.Y)(eh.A,{}),ssr:!1}),eF=e=>{let{id:r,onProviderSelect:l}=e;switch(r){case"all":return(0,i.Y)(ek,{onProviderSelect:l});case"azure":return(0,i.Y)(ex,{});case"azureai":return(0,i.Y)(ef,{});case"bedrock":return(0,i.Y)(ew,{});case"cloudflare":return(0,i.Y)(ey,{});case"comfyui":return(0,i.Y)(eY,{});case"github":return(0,i.Y)(eg,{});case"ollama":return(0,i.Y)(eA,{});case"newapi":return(0,i.Y)(em,{});case"openai":return(0,i.Y)(eb,{});case"vertexai":return(0,i.Y)(ev,{});default:return(0,i.Y)(eP,{id:r})}};var eC=l(51997),ez=l.n(eC),eS=l(45628);let eN=(0,t.memo)(()=>{let e=(0,s.DP)();return(0,i.Y)($.default,{style:{background:e.colorFillQuaternary,border:`1px dashed ${e.colorFillSecondary}`,borderRadius:e.borderRadiusLG,padding:12},width:"100%",children:(0,i.Y)("div",{style:{color:e.colorTextSecondary,fontSize:12,textAlign:"center"},children:(0,i.FD)(p.x6,{i18nKey:"llm.waitingForMore",ns:"setting",children:["更多模型正在",(0,i.Y)(ez(),{"aria-label":"todo",href:eS.O1,target:"_blank",children:"计划接入"}),"中 ，敬请期待"]})})})}),eD=e=>{let[r,l]=(0,o.ok)(),[a,n]=(0,t.useState)(r.get("provider")||"all"),c=e=>{l({active:"provider",provider:e}),n(e)},{mobile:s}=e,p=(0,t.useMemo)(()=>(0,i.Y)(eF,{id:a,onProviderSelect:c}),[a]);return(0,i.FD)(s?ep:es,{onProviderSelect:c,children:[p,!d.fF&&(0,i.Y)(eN,{})]})};eD.displayName="ProviderGrid";let eG=e=>{let{mobile:r}=e;return(0,i.Y)(eD,{mobile:r})}},13735:(e,r,l)=>{l.d(r,{m:()=>a});let a=[{label:"OpenAI",value:"openai"},{label:"Azure OpenAI",value:"azure"},{label:"Anthropic",value:"anthropic"},{label:"Google",value:"google"},{label:"Cloudflare",value:"cloudflare"},{label:"Qwen",value:"qwen"},{label:"Volcengine",value:"volcengine"},{label:"Ollama",value:"ollama"},{label:"New API",value:"router"}]},54329:(e,r,l)=>{l.d(r,{A:()=>d});var a=l(28802),i=l(11577),t=l(83034),o=l(80457);let d=(0,t.memo)(({variant:e,maxWidth:r=1024,children:l,addonAfter:t,addonBefore:d,style:n,...c})=>{let s=(0,i.DP)();return(0,a.FD)(o.Flexbox,{align:"center",height:"100%",style:{background:"secondary"===e?s.colorBgContainerSecondary:s.colorBgContainer,overflowX:"hidden",overflowY:"auto",...n},width:"100%",...c,children:[d,(0,a.Y)(o.Flexbox,{flex:1,gap:64,style:{maxWidth:r},width:"100%",children:l}),t]})})},84840:(e,r,l)=>{l.d(r,{FR:()=>i,Gf:()=>a,UR:()=>t});let a="keyVaults",i="apiKey",t="baseURL"}}]);