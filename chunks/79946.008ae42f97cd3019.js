"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79946],{6332:(e,t,o)=>{o.d(t,{J:()=>a});var l=o(31021),n=o.n(l),i=o(94147);let a=()=>(0,i.d)(e=>e.enabledChatModelList,n())||[]},25598:(e,t,o)=>{o.d(t,{$:()=>$,$z:()=>C,IW:()=>E,TK:()=>N,V7:()=>F});var l=o(28802),n=o(37618),i=o(2893),a=o(37412),s=o(3136),r=o(12389),c=o(75431),d=o(67072),m=o(11577),p=o(14654),u=o(56055),h=o(4562),g=o(10726),y=o(20028),A=o(48019),f=o(10376),Y=o(62874),v=o(54565),x=o(30598),w=o.n(x),b=o(83034),z=o(59121),T=o(80457),k=o(9402);let $="lobe-model-info-tags",S=(0,m.rU)(({css:e,token:t})=>({tag:e`
    cursor: default;

    display: flex;
    align-items: center;
    justify-content: center;

    width: 20px !important;
    height: 20px;
    border-radius: 4px;
  `,token:e`
    width: 36px !important;
    height: 20px;
    border-radius: 4px;

    font-family: ${t.fontFamilyCode};
    font-size: 11px;
    color: ${t.colorTextSecondary};

    background: ${t.colorFillTertiary};
  `})),F=(0,b.memo)(({directionReverse:e,placement:t="right",...o})=>{let{t:n}=(0,z.Bd)("components"),{styles:i}=S();return(0,l.FD)(T.Flexbox,{className:$,direction:e?"horizontal-reverse":"horizontal",gap:4,width:"fit-content",children:[o.files&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:n("ModelSelect.featureTag.file"),children:(0,l.Y)(s.A,{className:i.tag,color:"success",size:"small",children:(0,l.Y)(r.default,{icon:u.A})})}),o.imageOutput&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:n("ModelSelect.featureTag.imageOutput"),children:(0,l.Y)(s.A,{className:i.tag,color:"success",size:"small",children:(0,l.Y)(r.default,{icon:h.A})})}),o.vision&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:n("ModelSelect.featureTag.vision"),children:(0,l.Y)(s.A,{className:i.tag,color:"success",size:"small",children:(0,l.Y)(r.default,{icon:g.A})})}),o.video&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:n("ModelSelect.featureTag.video"),children:(0,l.Y)(s.A,{className:i.tag,color:"magenta",size:"small",children:(0,l.Y)(r.default,{icon:y.A})})}),o.functionCall&&(0,l.Y)(a.A,{placement:t,styles:{root:{maxWidth:"unset",pointerEvents:"none"}},title:n("ModelSelect.featureTag.functionCall"),children:(0,l.Y)(s.A,{className:i.tag,color:"info",size:"small",children:(0,l.Y)(r.default,{icon:A.A})})}),o.reasoning&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:n("ModelSelect.featureTag.reasoning"),children:(0,l.Y)(s.A,{className:i.tag,color:"purple",size:"small",children:(0,l.Y)(r.default,{icon:f.A})})}),o.search&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:n("ModelSelect.featureTag.search"),children:(0,l.Y)(s.A,{className:i.tag,color:"cyan",size:"small",children:(0,l.Y)(r.default,{icon:Y.A})})}),"number"==typeof o.contextWindowTokens&&(0,l.Y)(a.A,{placement:t,styles:{root:{maxWidth:"unset",pointerEvents:"none"}},title:n("ModelSelect.featureTag.tokens",{tokens:0===o.contextWindowTokens?"âˆž":w()(o.contextWindowTokens).format("0,0")}),children:(0,l.Y)(s.A,{className:i.token,size:"small",children:0===o.contextWindowTokens?(0,l.Y)(v.A,{size:17,strokeWidth:1.6}):(0,k.KT)(o.contextWindowTokens)})})]})}),C=(0,b.memo)(({showInfoTag:e=!0,...t})=>{let{mobile:o}=(0,p.Q)();return(0,l.FD)(T.Flexbox,{align:"center",gap:32,horizontal:!0,justify:"space-between",style:{minWidth:o?"100%":void 0,overflow:"hidden",position:"relative",width:o?"80vw":"auto"},children:[(0,l.FD)(T.Flexbox,{align:"center",gap:8,horizontal:!0,style:{flexShrink:1,minWidth:0,overflow:"hidden"},children:[(0,l.Y)(n.A,{model:t.id,size:20}),(0,l.Y)(c.A,{style:o?{maxWidth:"60vw",overflowX:"auto",whiteSpace:"nowrap"}:{},children:t.displayName||t.id})]}),e&&(0,l.Y)(F,{...t})]})}),N=(0,b.memo)(({provider:e,name:t,source:o,logo:n})=>(0,l.FD)(T.Flexbox,{align:"center",gap:4,horizontal:!0,children:["custom"===o&&n?(0,l.Y)(d.A,{avatar:n,size:20,style:{filter:"grayscale(1)"},title:t}):(0,l.Y)(i.A,{provider:e,size:20,type:"mono"}),t]})),E=(0,b.memo)(({Icon:e,label:t})=>(0,l.FD)(T.Flexbox,{align:"center",gap:8,horizontal:!0,children:[(0,l.Y)(e,{size:20}),(0,l.Y)("span",{children:t})]}))},79946:(e,t,o)=>{o.r(t),o.d(t,{default:()=>S});var l=o(28802),n=o(15361),i=o(62326),a=o(12467),s=o(15447),r=o(12389),c=o(43588),d=o(80176),m=o(59202),p=o(42507),u=o(31021),h=o.n(u),g=o(13035),y=o(85017),A=o(83034),f=o(59121),Y=o(80457),v=o(40681);let x=(0,A.memo)(({onChange:e,value:t,...o})=>{let n=(0,A.useRef)(null),i=(0,A.useRef)(!1),[a,s]=(0,A.useState)(t);return(0,l.Y)(v.A,{onBlur:()=>{e?.(a)},onChange:e=>{s(e.target.value)},onCompositionEnd:()=>{i.current=!1},onCompositionStart:()=>{i.current=!0},onPressEnter:()=>{i.current||e?.(a)},ref:n,...o,value:a})});x.displayName="TextArea";var w=o(49935),b=o(99859),z=o(38759),T=o(42897);let k=(0,A.memo)(({systemAgentKey:e,allowDisable:t,allowCustomPrompt:o,defaultPrompt:n})=>{let{t:i}=(0,f.Bd)("setting"),[a]=d.A.useForm(),u=(0,z.k)(T.w0.currentSystemAgent,h()),[v,k]=(0,z.k)(e=>[e.updateSystemAgent,e.isUserStateInit]),[$,S]=(0,A.useState)(!1);if(!k)return(0,l.Y)(m.A,{active:!0,paragraph:{rows:5},title:!1});let F=u[e],C={children:[{children:(0,l.Y)(b.A,{onChange:async t=>{S(!0),await v(e,t),S(!1)},showAbility:!1}),desc:i(`systemAgent.${e}.modelDesc`),label:i(`systemAgent.${e}.label`),name:e},!!o&&{children:F.customPrompt?(0,l.Y)(x,{onBlur:async t=>{S(!0),await v(e,{customPrompt:t.target.value}),S(!1)},placeholder:i("systemAgent.customPrompt.placeholder"),style:{minHeight:160},value:F.customPrompt}):(0,l.Y)(s.A,{block:!0,icon:g.A,onClick:async()=>{S(!0),await v(e,{customPrompt:n}),S(!1)},children:i("systemAgent.customPrompt.addPrompt")}),desc:i("systemAgent.customPrompt.desc"),label:i("systemAgent.customPrompt.title"),name:[e,"customPrompt"]}].filter(Boolean),extra:(0,l.FD)(Y.Flexbox,{direction:"horizontal",gap:8,children:[$&&(0,l.Y)(r.default,{icon:y.A,size:16,spin:!0,style:{opacity:.5}}),t&&(0,l.Y)(p.A,{onChange:async t=>{S(!0),await v(e,{enabled:t}),S(!1)},value:F.enabled})]}),title:(0,l.Y)("span",{style:{opacity:"boolean"!=typeof F.enabled||F.enabled?1:.45},children:i(`systemAgent.${e}.title`)})};return(0,l.Y)(c.Ay,{form:a,initialValues:u,items:[C],...w.pC})}),$=()=>{let{enableKnowledgeBase:e}=(0,i.wo)(a.E);return(0,l.FD)(l.FK,{children:[(0,l.Y)(k,{systemAgentKey:"topic"}),(0,l.Y)(k,{systemAgentKey:"generationTopic"}),(0,l.Y)(k,{systemAgentKey:"translation"}),(0,l.Y)(k,{systemAgentKey:"historyCompress"}),(0,l.Y)(k,{systemAgentKey:"agentMeta"}),e&&(0,l.Y)(k,{allowCustomPrompt:!0,allowDisable:!0,defaultPrompt:n.cA,systemAgentKey:"queryRewrite"})]})};$.displayName="SystemAgent";let S=$},99859:(e,t,o)=>{o.d(t,{A:()=>d});var l=o(28802),n=o(47762),i=o(11577),a=o(83034),s=o(25598),r=o(6332);let c=(0,i.rU)(({css:e,prefixCls:t})=>({popup:e`
    &.${t}-select-dropdown .${t}-select-item-option-grouped {
      padding-inline-start: 12px;
    }
  `,select:e`
    .${t}-select-selection-item {
      .${s.$} {
        display: none;
      }
    }
  `})),d=(0,a.memo)(({value:e,onChange:t,showAbility:o=!0,requiredAbilities:i})=>{let d=(0,r.J)(),{styles:m}=c(),p=(0,a.useMemo)(()=>{let e=e=>(i&&i.length>0?e.children.filter(e=>i.every(t=>!!e.abilities?.[t])):e.children).map(t=>({label:(0,l.Y)(s.$z,{...t,...t.abilities,showInfoTag:o}),provider:e.id,value:`${e.id}/${t.id}`}));return 1===d.length?e(d[0]):d.map(t=>{let o=e(t);if(0!==o.length)return{label:(0,l.Y)(s.TK,{logo:t.logo,name:t.name,provider:t.id,source:t.source}),options:o}}).filter(Boolean)},[d,i,o]);return console.log("options",p),console.log("enabledList",d),(0,l.Y)(n.A,{className:m.select,classNames:{popup:{root:m.popup}},defaultValue:`${e?.provider}/${e?.model}`,onChange:(e,o)=>{let l=e.split("/").slice(1).join("/");t?.({model:l,provider:o.provider})},options:p,popupMatchSelectWidth:!1,value:`${e?.provider}/${e?.model}`})})}}]);