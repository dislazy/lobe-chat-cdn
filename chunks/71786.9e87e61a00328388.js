"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[71786],{5003:(e,t,a)=>{a.d(t,{Ty:()=>s,xN:()=>o});let o="en-US",s="LOBE_LOCALE"},5930:(e,t,a)=>{a.d(t,{o:()=>A});var o=a(14308),s=a(50786),n=a(23993),i=a(41734),l=a(31021),r=a.n(l),g=a(83897),d=a(62340),c=a(64861),u=a(46265),p=a(96153),S=a(48349),m=a(60317),h=a(96987),y=a(5003),w=a(67095),b=a(61497);let f=(0,b.K)("g");var M=a(85601),E=a(35245),I=a(45628);let T=(0,b.K)("w");var L=a(78397);let v=(0,i.t)("global"),A=(0,n.h)()((0,o.eh)(v((...e)=>({...L.ue,...((e,t)=>({switchBackToChat:e=>{let a=(0,I.iU)(e||E.Ed,t().isMobile);t().navigate?.(a)},toggleAgentSystemRoleExpand:(e,a)=>{let{status:o}=t(),s=o.systemRoleExpandedMap||{},n="boolean"==typeof a?a:!s[e];t().updateSystemStatus({systemRoleExpandedMap:{...s,[e]:n}},T("toggleAgentSystemRoleExpand",{agentId:e,expanded:n}))},toggleChatSideBar:e=>{let a="boolean"==typeof e?e:!t().status.showChatSideBar;t().updateSystemStatus({showChatSideBar:a},T("toggleAgentPanel",e))},toggleExpandInputActionbar:e=>{let a="boolean"==typeof e?e:!t().status.expandInputActionbar;t().updateSystemStatus({expandInputActionbar:a},T("toggleExpandInputActionbar",e))},toggleExpandSessionGroup:(e,a)=>{let{status:o}=t(),s=(0,M.jM)(o.expandSessionGroupKeys,t=>{if(a)t.includes(e)||t.push(e);else{let a=t.indexOf(e);-1!==a&&t.splice(a,1)}});t().updateSystemStatus({expandSessionGroupKeys:s})},toggleMobilePortal:e=>{let a="boolean"==typeof e?e:!t().status.mobileShowPortal;t().updateSystemStatus({mobileShowPortal:a},T("toggleMobilePortal",e))},toggleMobileTopic:e=>{let a="boolean"==typeof e?e:!t().status.mobileShowTopic;t().updateSystemStatus({mobileShowTopic:a},T("toggleMobileTopic",e))},toggleSystemRole:e=>{let a="boolean"==typeof e?e:!t().status.mobileShowTopic;t().updateSystemStatus({showSystemRole:a},T("toggleMobileTopic",e))},toggleWideScreen:e=>{let a="boolean"==typeof e?e:!t().status.noWideScreen;t().updateSystemStatus({noWideScreen:a},T("toggleWideScreen",e))},toggleZenMode:()=>{let{status:e}=t(),a=!e.zenMode;t().updateSystemStatus({zenMode:a},T("toggleZenMode"))}}))(...e),...((e,t)=>({openSessionInNewWindow:async e=>{if(c.xl)try{let{dispatch:t}=await a.e(14343).then(a.bind(a,14343)),o=`/chat?session=${e}&mode=single`,s=await t("createMultiInstanceWindow",{path:o,templateId:"chatSingle",uniqueId:`chat_${e}`});s.success||console.error("Failed to open session in new window:",s.error)}catch(e){console.error("Error opening session in new window:",e)}},openTopicInNewWindow:async(e,t)=>{if(c.xl)try{let{dispatch:o}=await a.e(14343).then(a.bind(a,14343)),s=`/chat?session=${e}&topic=${t}&mode=single`,n=await o("createMultiInstanceWindow",{path:s,templateId:"chatSingle",uniqueId:`chat_${e}_${t}`});n.success||console.error("Failed to open topic in new window:",n.error)}catch(e){console.error("Error opening topic in new window:",e)}},switchLocale:(e,{skipBroadcast:o}={})=>{let s;t().updateSystemStatus({language:e}),s="auto"===e?navigator.language:e,(0,h.v2)(s),document.documentElement.lang=s,(0,m.TV)(y.Ty,"auto"===e?void 0:e,365),c.xl&&!o&&(async()=>{try{let{dispatch:t}=await a.e(14343).then(a.bind(a,14343));await t("updateLocale",e)}catch(e){console.error("Failed to update locale in main process:",e)}})()},switchThemeMode:(e,{skipBroadcast:o}={})=>{t().updateSystemStatus({themeMode:e}),(0,S.T)(d.mh,"auto"===e?void 0:e),c.xl&&!o&&(async()=>{try{let{dispatch:t}=await a.e(14343).then(a.bind(a,14343));await t("updateThemeMode",e)}catch(e){console.error("Failed to update theme in main process:",e)}})()},updateSystemStatus:(a,o)=>{if(!t().isStatusInit)return;let s=(0,w.h)(t().status,a);r()(t().status,s)||(e({status:s},!1,o||f("updateSystemStatus")),t().statusStorage.saveToLocalStorage(s))},useCheckLatestVersion:(t=!0)=>(0,u.Ju)(t?"checkLatestVersion":null,async()=>p.v.getLatestVersion(),{focusThrottleInterval:18e5,onSuccess:t=>{if(!(0,g.valid)(c.V_)||!(0,g.valid)(t))return;let a=(0,g.parse)(c.V_),o=(0,g.parse)(t);if(!a||!o)return;let s=`${a.major}.${a.minor}.0`,n=`${o.major}.${o.minor}.0`;(0,g.gt)(n,s)&&e({hasNewVersion:!0,latestVersion:t},!1,f("checkLatestVersion"))}}),useInitSystemStatus:()=>(0,u.Ju)("initSystemStatus",()=>t().statusStorage.getFromLocalStorage(),{onSuccess:a=>{e({isStatusInit:!0},!1,"setStatusInit"),t().updateSystemStatus(a,"initSystemStatus")}})}))(...e)}))),s.x)},35007:(e,t,a)=>{a.d(t,{A:()=>s});var o=a(72533);let s=function(e,t){return(0,o.A)(e,t)}},62340:(e,t,a)=>{a.d(t,{mh:()=>o,rw:()=>n,sM:()=>s});let o="LOBE_THEME_APPEARANCE",s="LOBE_THEME_PRIMARY_COLOR",n="LOBE_THEME_NEUTRAL_COLOR"},78397:(e,t,a)=>{a.d(t,{iL:()=>p,xY:()=>S,_X:()=>y,yj:()=>h,mm:()=>m,Zc:()=>u,ue:()=>w});var o,s,n,i,l,r=a(2080),g=a(3296);let d="LOBE_GLOBAL";class c{constructor(e){if(this.storageKey=e,localStorage.getItem(d)){const e=JSON.parse(localStorage.getItem(d)||"{}"),t=e.state.preference;e.state?.preference&&localStorage.setItem("LOBE_PREFERENCE",JSON.stringify(t)),localStorage.removeItem(d)}}async saveToLocalStorage(e){let t=await this.getFromLocalStorage();localStorage.setItem(this.storageKey,JSON.stringify({...t,...e}))}async getFromLocalStorage(e=this.storageKey){return JSON.parse(localStorage.getItem(e)||"{}")}}var u=((o={}).Chat="chat",o.Discover="discover",o.Files="knowledge",o.Image="image",o.Knowledge="knowledge",o.Me="me",o.Setting="settings",o),p=((s={}).Chat="chat",s.Meta="meta",s.Modal="modal",s.Opening="opening",s.Plugin="plugin",s.Prompt="prompt",s.TTS="tts",s),S=((n={}).Chat="chat",n.Members="members",n.Settings="settings",n),m=((i={}).About="about",i.Agent="agent",i.Common="common",i.Hotkey="hotkey",i.Image="image",i.LLM="llm",i.Provider="provider",i.Proxy="proxy",i.Storage="storage",i.SystemAgent="system-agent",i.TTS="tts",i),h=((l={}).APIKey="apikey",l.Profile="profile",l.Security="security",l.Stats="stats",l.Usage="usage",l);let y={chatInputHeight:64,disabledModelProvidersSortType:"default",disabledModelsSortType:"default",expandInputActionbar:!0,expandSessionGroupKeys:[g.X.Pinned,g.X.Default],fileManagerViewMode:"list",filePanelWidth:320,hideGemini2_5FlashImagePreviewChineseWarning:!1,hidePWAInstaller:!1,hideThreadLimitAlert:!1,imagePanelWidth:320,imageTopicPanelWidth:80,knowledgeBaseModalViewMode:"list",mobileShowTopic:!1,noWideScreen:!0,portalWidth:400,sessionsWidth:320,showChatSideBar:!0,showFilePanel:!0,showHotkeyHelper:!1,showImagePanel:!0,showImageTopicPanel:!0,showSessionPanel:!0,showSystemRole:!1,systemRoleExpandedMap:{},themeMode:"auto",tokenDisplayFormatShort:!0,zenMode:!1},w={initClientDBStage:r.D.Idle,isMobile:!1,isStatusInit:!1,sidebarKey:"chat",status:y,statusStorage:new c("LOBE_SYSTEM_STATUS")}},90563:(e,t,a)=>{a.d(t,{getImageStoreState:()=>o.q});var o=a(81224)},96153:(e,t,a)=>{a.d(t,{v:()=>n});var o=a(77605);class s{constructor(){this.getLatestVersion=async()=>{let e=await fetch("https://registry.npmmirror.com/@lobehub/chat/latest");return(await e.json()).version},this.getGlobalConfig=async()=>o.du.config.getGlobalConfig.query(),this.getDefaultAgentConfig=async()=>o.du.config.getDefaultAgentConfig.query()}}let n=new s}}]);