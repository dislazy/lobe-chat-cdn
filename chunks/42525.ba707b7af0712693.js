"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[42525],{10307:(e,t,o)=>{o.d(t,{A:()=>w});var r,n,l,i,a=o(14654),c=o(65890),s=o(30598),d=o.n(s),u=o(83034),m=o(15447),p=o(51717);function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=(0,o(11577).rU)(function(e){var t=e.prefixCls,o=e.css,a=e.token;return{low:o(r||(r=y(["\n      color: ",";\n    "])),a.colorWarningText),normal:o(n||(n=y(["\n      color: ",";\n    "])),a.colorSuccessText),overload:o(l||(l=y(["\n      color: ",";\n    "])),a.colorErrorText),root:o(i||(i=y(["\n      user-select: none;\n      min-width: fit-content;\n      height: 28px;\n      &.","-btn {\n        padding-block: 12px;\n        &.","-btn-round {\n          padding-inline: 6px 12px;\n        }\n        &.","-btn-square {\n          padding-inline: 6px 12px;\n        }\n      }\n    "])),t,t,t)}}),b=o(54898);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v=["className","shape","mode","maxValue","value","text","unoptimized","hideText","ref"];function g(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function x(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?g(Object(o),!0).forEach(function(t){var r,n,l;r=e,n=t,l=o[t],(n=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=h(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:String(t)}(n))in r?Object.defineProperty(r,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[n]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}var j=function(e){return d()(e).format("0,0")},O=(0,u.memo)(function(e){var t=e.className,o=e.shape,r=e.mode,n=void 0===r?"remained":r,l=e.maxValue,i=e.value,s=e.text,d=e.unoptimized,y=e.hideText,h=e.ref,g=function(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)o=l[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)o=l[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(e,v),O=(0,a.Q)().mobile,w=l-i,k=w/l,S=(0,u.useMemo)(function(){var e,t;return k>.3?(e="normal",t="\uD83D\uDE00"):k>0?(e="low",t="\uD83D\uDE05"):(e="overload",t="\uD83E\uDD2F"),{emoji:t,type:e}},[k]),D=f(),F=D.styles,T=D.cx,P=(0,u.useMemo)(function(){return(0,c.F)(F.root,{defaultVariants:{type:"normal"},variants:{type:{normal:F.normal,low:F.low,overload:F.overload}}})},[F]);return(0,b.jsxs)(m.A,x(x({className:T(P({type:S.type}),t),ref:h,shape:void 0===o?"round":o,variant:"filled"},g),{},{children:[(0,b.jsx)(p.A,{emoji:S.emoji,size:18,unoptimized:d}),w>0?[!y&&!O?"remained"===n?(null==s?void 0:s.remained)||"Remained":(null==s?void 0:s.used)||"Used":"","remained"===n?j(w):j(i)].join(" "):(null==s?void 0:s.overload)||"Overload"]}))});O.displayName="TokenTag";let w=O},26683:(e,t,o)=>{o.d(t,{M:()=>i});var r=o(47878),n=o(83034),l=o(29261);let i=(e="")=>{let[t,o]=(0,n.useState)(0),i=(0,n.useCallback)((0,r.A)(e=>{(0,l.X)(e).then(o).catch(()=>{o(e.length)})},300),[]);return(0,n.useEffect)(()=>((0,n.startTransition)(()=>{i(e||"")}),()=>{i.cancel()}),[e,i]),t}},36362:(e,t,o)=>{o.d(t,{A:()=>u});var r=o(28802),n=o(49875),l=o(11577),i=o(30598),a=o.n(i),c=o(83034),s=o(80457);let d=e=>a()(e).format("0,0"),u=(0,c.memo)(({data:e,showIcon:t,showTotal:o})=>{let i=(0,l.DP)(),a=e.reduce((e,t)=>e+t.value,0);return(0,r.FD)(s.Flexbox,{gap:8,style:{position:"relative"},width:"100%",children:[(0,r.Y)(s.Flexbox,{height:6,horizontal:!0,style:{background:0===a?i.colorFill:void 0,borderRadius:3,overflow:"hidden",position:"relative"},width:"100%",children:e.map(e=>(0,r.Y)(s.Flexbox,{height:"100%",style:{background:e.color,flex:e.value}},e.id))}),(0,r.FD)(s.Flexbox,{children:[e.map(e=>(0,r.FD)(s.Flexbox,{align:"center",gap:4,horizontal:!0,justify:"space-between",children:[(0,r.FD)(s.Flexbox,{align:"center",gap:4,horizontal:!0,children:[t&&(0,r.Y)("div",{style:{background:e.color,borderRadius:"50%",flex:"none",height:6,width:6}}),(0,r.Y)("div",{style:{color:i.colorTextSecondary},children:e.title})]}),(0,r.Y)("div",{style:{fontWeight:500},children:d(e.value)})]},e.id)),o&&(0,r.FD)(r.FK,{children:[(0,r.Y)(n.A,{style:{marginBlock:8}}),(0,r.FD)(s.Flexbox,{align:"center",gap:4,horizontal:!0,justify:"space-between",children:[(0,r.Y)("div",{style:{color:i.colorTextSecondary},children:o}),(0,r.Y)("div",{style:{fontWeight:500},children:d(a)})]})]})]})]})})},42525:(e,t,o)=>{o.r(t),o.d(t,{default:()=>F});var r=o(28802),n=o(37412),l=o(10307),i=o(11577),a=o(30598),c=o.n(a),s=o(83034),d=o(59121),u=o(80457),m=o(20480),p=o(32559),y=o(76301),f=o(82668),b=o(26683),h=o(45541),v=o(88990),g=o(82964),x=o(17068),j=o(11439),O=o(13082),w=o(74038),k=o(35863),S=o(82340),D=o(36362);let F=(0,s.memo)(({total:e})=>{let{t}=(0,d.Bd)(["chat","components"]),o=(0,i.DP)(),[a,F]=(0,x.L)(e=>[e.inputMessage,j.e.currentActiveTopicSummary(e)?.content||""]),[T,P,A]=(0,h.o)(e=>[v.e.currentAgentSystemRole(e),v.e.currentAgentModel(e),v.e.currentAgentModelProvider(e),g.c.historyCount(e),g.c.enableHistoryCount(e)]),[Y,M]=(0,h.o)(e=>[g.c.historyCount(e),g.c.enableHistoryCount(e),g.c.isAgentEnableSearch(e)]),z=(0,y.o)(P,A),E=(0,f.L)(P,A),C=(0,h.o)(v.e.currentAgentPlugins),N=(0,w.j)(e=>{let{tools:t,enabledToolIds:o}=(0,p.wp)({model:P,provider:A}).generateToolsDetailed({model:P,provider:A,toolIds:C}),r=t?.map(e=>JSON.stringify(e)).join("")||"";return k.P.enabledSystemRoles(o)(e)+r}),R=(0,b.M)(E?N:""),W=(0,b.M)(a),I=(0,s.useMemo)(()=>O.E1.activeDbMessages(x.L.getState()).map(e=>e.content).join(""),[e,Y,M]),L=(0,b.M)(I)+W,V=(0,b.M)(T),_=(0,b.M)(F),B=V+_+R+L,H=(0,r.FD)(u.Flexbox,{gap:12,style:{minWidth:200},children:[(0,r.FD)(u.Flexbox,{align:"center",gap:4,horizontal:!0,justify:"space-between",width:"100%",children:[(0,r.Y)("div",{style:{color:o.colorTextDescription},children:t("tokenDetails.title")}),(0,r.Y)(n.A,{styles:{root:{maxWidth:"unset",pointerEvents:"none"}},title:t("ModelSelect.featureTag.tokens",{ns:"components",tokens:c()(z).format("0,0")}),children:(0,r.Y)(m.default,{height:20,paddingInline:4,style:{background:o.colorFillTertiary,borderRadius:4,color:o.colorTextSecondary,fontFamily:o.fontFamilyCode,fontSize:11},children:"TOKEN"})})]}),(0,r.Y)(D.A,{data:[{color:o.magenta,id:"systemRole",title:t("tokenDetails.systemRole"),value:V},{color:o.geekblue,id:"tools",title:t("tokenDetails.tools"),value:R},{color:o.orange,id:"historySummary",title:t("tokenDetails.historySummary"),value:_},{color:o.gold,id:"chats",title:t("tokenDetails.chats"),value:L}],showIcon:!0}),(0,r.Y)(D.A,{data:[{color:o.colorSuccess,id:"used",title:t("tokenDetails.used"),value:B},{color:o.colorFill,id:"rest",title:t("tokenDetails.rest"),value:z-B}],showIcon:!0,showTotal:t("tokenDetails.total")})]});return(0,r.Y)(S.A,{content:H,children:(0,r.Y)(l.A,{maxValue:z,mode:"used",style:{marginLeft:8},text:{overload:t("tokenTag.overload"),remained:t("tokenTag.remained"),used:t("tokenTag.used")},value:B})})})},76301:(e,t,o)=>{o.d(t,{o:()=>l});var r=o(94147),n=o(81196);let l=(e,t)=>(0,r.d)(n.g.modelContextWindowTokens(e,t))}}]);