"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80729],{4650:(e,t,i)=>{i.d(t,{A:()=>en});var l=i(28802),o=i(74551),r=i(70804),a=i(43588),n=i(12389),d=i(67072),s=i(37412),c=i(65018),p=i(42507),m=i(59202),h=i(11577),u=i(85017),g=i(16049),v=i(51997),f=i.n(v),A=i(83034),y=i(59121),x=i(80457),b=i(20480),Y=i(4001),M=i(20434),F=i(27124),w=i(53069),k=i(45355),C=i(59421),z=i(94147),P=i(47260),D=i(77186),S=i(84840),N=i(49602),T=i(22309),B=i(37618),E=i(80122),I=i(91888),$=i(47762),R=i(15447),W=i(87381),K=i(71411),L=i(81196);let O=(0,A.memo)(({error:e})=>{let{t}=(0,y.Bd)("error"),i=(0,W.u)(e.body?.provider);return(0,l.Y)(x.Flexbox,{gap:8,style:{maxWidth:600,width:"100%"},children:(0,l.Y)(E.A,{extra:(0,l.Y)(x.Flexbox,{children:(0,l.Y)(I.A,{actionIconSize:"small",language:"json",variant:"borderless",wrap:!0,children:JSON.stringify(e.body||e,null,2)})}),message:t(`response.${e.type}`,{provider:i}),showIcon:!0,type:"error"})})}),j=(0,A.memo)(({model:e,provider:t,checkErrorRender:i,onBeforeCheck:o,onAfterCheck:r})=>{let{t:a}=(0,y.Bd)("setting"),d=(0,z.d)(P.w.isProviderConfigUpdating(t)),s=(0,z.d)(L.g.aiProviderChatModelListIds),c=(0,z.d)(e=>e.updateAiProviderConfig),p=(0,z.d)(P.w.providerConfigById(t)),[m,g]=(0,A.useState)(!1),[v,f]=(0,A.useState)(!1),[b,Y]=(0,A.useState)(e),M=(0,h.DP)(),[F,w]=(0,A.useState)(),k=async()=>{f(!1),w(void 0);let i=!1;await K.O.fetchPresetTaskResult({onError:(e,t)=>{w(t),f(!1),i=!0},onFinish:async e=>{!i&&e?(w(void 0),f(!0)):(f(!1),w({body:e,message:a("response.ConnectionCheckFailed",{ns:"error"}),type:"ConnectionCheckFailed"}))},onLoadingChange:e=>{g(e)},params:{messages:[{content:"hello",role:"user"}],model:e,provider:t},trace:{sessionId:`connection:${t}`,topicId:e,traceName:T.Fs.ConnectivityChecker}})},C=F?(0,l.Y)(O,{error:F}):null,D=i?(0,l.Y)(i,{defaultError:C,error:F,setError:w}):C;return(0,l.FD)(x.Flexbox,{gap:8,children:[(0,l.FD)(x.Flexbox,{gap:8,horizontal:!0,children:[(0,l.Y)($.A,{listItemHeight:36,onSelect:async e=>{Y(e),await c(t,{...p,checkModel:e})},optionRender:({value:e})=>(0,l.FD)(x.Flexbox,{align:"center",gap:6,horizontal:!0,children:[(0,l.Y)(B.A,{model:e,size:20}),e]}),options:s.map(e=>({label:e,value:e})),style:{flex:1,overflow:"hidden"},suffixIcon:d&&(0,l.Y)(n.default,{icon:u.A,spin:!0}),value:b,virtual:!0}),(0,l.Y)(R.A,{disabled:d,loading:m,onClick:async()=>{await o();try{await k()}finally{await r()}},children:a("llm.checker.button")})]}),v&&(0,l.FD)(x.Flexbox,{gap:4,horizontal:!0,children:[(0,l.Y)(N.A,{style:{color:M.colorSuccess}}),a("llm.checker.pass")]}),F&&D]})});var U=i(18458);let V=(0,h.rU)(({css:e})=>({switchLoading:e`
    width: 44px !important;
    min-width: 44px !important;
    height: 22px !important;
    border-radius: 12px !important;
  `})),_=({id:e,Component:t})=>{let{styles:i}=V(),[o,r,a]=(0,z.d)(t=>[t.toggleProviderEnabled,P.w.isProviderEnabled(e)(t),P.w.isAiProviderConfigLoading(e)(t)]);return a?(0,l.Y)(m.A.Button,{active:!0,className:i.switchLoading}):t?(0,l.Y)(t,{id:e}):(0,l.Y)(U.A,{enabled:r,onChange:async t=>{await o(e,t)}})};var H=i(31021),G=i.n(H),q=i(39196),Z=i(2893),J=i(69033),Q=i(40681),X=i(69904),ee=i(58244),et=i(18223),ei=i(27697),el=i(13735);let eo=(0,A.memo)(({onClose:e,open:t,initialValues:i,id:o})=>{let{t:r}=(0,y.Bd)(["modelProvider","common"]),[a,d]=(0,A.useState)(!1),[s,c]=(0,z.d)(e=>[e.updateAiProvider,e.deleteAiProvider]),{message:p,modal:m}=ee.A.useApp(),h=(0,ei.Zp)(),u=async t=>{d(!0);try{await s(o,t),d(!1),p.success(r("updateAiProvider.updateSuccess")),e?.()}catch(e){console.error(e),d(!1)}},g=[{children:i.id,label:r("createNewAiProvider.id.title"),minWidth:400,rules:[{message:r("createNewAiProvider.id.required"),required:!0}]},{children:(0,l.Y)(J.A,{placeholder:r("createNewAiProvider.name.placeholder"),variant:"filled"}),label:r("createNewAiProvider.name.title"),minWidth:400,name:"name",rules:[{message:r("createNewAiProvider.name.required"),required:!0}]},{children:(0,l.Y)(Q.A,{placeholder:r("createNewAiProvider.description.placeholder"),style:{minHeight:80},variant:"filled"}),label:r("createNewAiProvider.description.title"),minWidth:400,name:"description"},{children:(0,l.Y)(J.A,{allowClear:!0,placeholder:"https://logo-url",variant:"filled"}),label:r("createNewAiProvider.logo.title"),minWidth:400,name:"logo"}],v=[{children:(0,l.Y)($.A,{optionRender:({label:e,value:t})=>(0,l.FD)(x.Flexbox,{align:"center",gap:8,horizontal:!0,children:[(0,l.Y)(Z.A,{provider:t,size:18}),e]}),options:el.m,placeholder:r("createNewAiProvider.sdkType.placeholder"),variant:"filled"}),label:r("createNewAiProvider.sdkType.title"),minWidth:400,name:["settings","sdkType"],rules:[{message:r("createNewAiProvider.sdkType.required"),required:!0}]}];return(0,l.Y)(X.A,{footer:(0,l.FD)(x.Flexbox,{horizontal:!0,justify:"space-between",children:[(0,l.Y)(R.A,{danger:!0,disabled:a,onClick:()=>{m.confirm({okButtonProps:{danger:!0},okText:r("delete",{ns:"common"}),onOk:async()=>{await c(o),h("/settings?active=provider"),e?.(),p.success(r("updateAiProvider.deleteSuccess"))},title:r("updateAiProvider.confirmDelete")})},type:"primary",children:r("delete",{ns:"common"})}),(0,l.Y)(x.Flexbox,{gap:8,horizontal:!0,children:(0,l.Y)(R.A,{htmlType:"submit",loading:a,type:"primary",children:r("update",{ns:"common"})})})]}),initialValues:i,items:[{children:g,title:r("createNewAiProvider.basicTitle")},{children:v,title:r("createNewAiProvider.configTitle")}],onCancel:e,onFinish:u,open:t,scrollToFirstError:{behavior:"instant",block:"end",focus:!0},submitText:r("createNewAiProvider.confirm"),title:(0,l.FD)(x.Flexbox,{gap:8,horizontal:!0,children:[(0,l.Y)(n.default,{icon:et.A}),r("updateCustomAiProvider.title")]})})}),er=(0,A.memo)(()=>{let{t:e}=(0,y.Bd)("modelProvider"),[t,i]=(0,A.useState)(!1),o=(0,z.d)(P.w.activeProviderConfig,G());return(0,l.FD)(l.FK,{children:[(0,l.Y)(s.A,{title:e("updateAiProvider.tooltip"),children:(0,l.Y)(R.A,{icon:q.A,onClick:e=>{e.preventDefault(),e.stopPropagation(),i(!0)},size:"small",type:"text"})}),t&&o&&(0,l.Y)(eo,{id:o.id,initialValues:o,onClose:()=>{i(!1)},open:t})]})}),ea=(0,h.rU)(({css:e,prefixCls:t,responsive:i,token:l})=>({aceGcm:e`
    padding-block: 0 !important;
    .${t}-form-item-label {
      display: none;
    }
    .${t}-form-item-control {
      width: 100%;

      font-size: 12px;
      color: ${l.colorTextSecondary};
      text-align: center;

      opacity: 0.66;

      transition: opacity 0.2s ${l.motionEaseInOut};

      &:hover {
        opacity: 1;
      }
    }
  `,form:e`
    .${t}-form-item-control:has(.${t}-input,.${t}-select) {
      flex: none;
      width: min(70%, 800px);
      min-width: min(70%, 800px) !important;
    }
    ${i.mobile} {
      width: 100%;
      min-width: unset !important;
    }
    .${t}-select-selection-overflow-item {
      font-size: 12px;
    }
  `,help:e`
    border-radius: 50%;

    font-size: 12px;
    font-weight: 500;
    color: ${l.colorTextDescription};

    background: ${l.colorFillTertiary};

    &:hover {
      color: ${l.colorText};
      background: ${l.colorFill};
    }
  `,switchLoading:e`
    width: 44px !important;
    min-width: 44px !important;
    height: 22px !important;
    border-radius: 12px !important;
  `})),en=(0,A.memo)(({apiKeyItems:e,id:t,settings:i,checkModel:h,logo:v,className:N,checkErrorRender:T,name:B,showAceGcm:E=!0,extra:I,source:$=D.Ag.Builtin,apiKeyUrl:R})=>{let{proxyUrl:W,showApiKey:K=!0,defaultShowBrowserRequest:L,disableBrowserRequest:O,showChecker:U=!0,supportResponsesApi:V}=i||{},{t:H}=(0,y.Bd)("modelProvider"),[G]=a.Ay.useForm(),{cx:q,styles:Z,theme:J}=ea(),[Q,X,ee,et,ei,el,eo,en,ed]=(0,z.d)(e=>[P.w.activeProviderConfig(e),e.updateAiProviderConfig,P.w.isProviderEnabled(t)(e),P.w.isAiProviderConfigLoading(t)(e),P.w.isProviderConfigUpdating(t)(e),P.w.isProviderFetchOnClient(t)(e),P.w.isProviderEnableResponseApi(t)(e),P.w.isActiveProviderEndpointNotEmpty(e),P.w.isActiveProviderApiKeyNotEmpty(e)]);(0,A.useLayoutEffect)(()=>{et||G.setFieldsValue(Q)},[et,t,Q]);let es=(0,A.useRef)(!1),ec=(0,A.useCallback)((...e)=>{es.current||X(...e)},[X]),{run:ep}=(0,c.A)(ec,{wait:500}),em=$===D.Ag.Custom,eh=K?e??[{children:et?(0,l.Y)(k._,{}):(0,l.Y)(F.A,{autoComplete:"new-password",placeholder:H("providerModels.config.apiKey.placeholder",{name:B}),suffix:ei&&(0,l.Y)(n.default,{icon:u.A,spin:!0,style:{color:J.colorTextTertiary}})}),desc:R?(0,l.FD)(y.x6,{i18nKey:"providerModels.config.apiKey.descWithUrl",ns:"modelProvider",value:{name:B},children:["请填写你的 ",{name:B}," API Key,",(0,l.Y)(f(),{href:R,target:"_blank",children:"点此获取"})]}):H("providerModels.config.apiKey.desc",{name:B}),label:H("providerModels.config.apiKey.title"),name:[S.Gf,S.FR]}]:[],eu={children:(0,l.FD)(l.FK,{children:[(0,l.Y)(n.default,{icon:g.A,style:{marginRight:4}}),(0,l.FD)(y.x6,{i18nKey:"providerModels.config.aesGcm",ns:"modelProvider",children:["您的秘钥与代理地址等将使用",(0,l.Y)(f(),{href:o.sZ,style:{marginInline:4},target:"_blank",children:"AES-GCM"}),"加密算法进行加密"]})]}),className:Z.aceGcm,minWidth:void 0},eg=!!W||em,ev=eg?{children:et?(0,l.Y)(k._,{}):(0,l.Y)(w.A,{allowClear:!0,placeholder:!!W&&W?.placeholder||H("providerModels.config.baseURL.placeholder"),suffix:ei&&(0,l.Y)(n.default,{icon:u.A,spin:!0,style:{color:J.colorTextTertiary}})}),desc:!!W&&W?.desc||H("providerModels.config.baseURL.desc"),label:!!W&&W?.title||H("providerModels.config.baseURL.title"),name:[S.Gf,S.UR],rules:[{validator:(e,t)=>{if(t)return M.Yj().url().safeParse(t).error?Promise.reject(H("providerModels.config.baseURL.invalid")):Promise.resolve()}}]}:void 0,ef=!o.xl&&!O&&(L||eg&&en||K&&ed)&&{children:et?(0,l.Y)(C.k,{}):(0,l.Y)(p.A,{checked:el,disabled:ei}),desc:H("providerModels.config.fetchOnClient.desc"),label:H("providerModels.config.fetchOnClient.title"),minWidth:void 0,name:"fetchOnClient"},eA=[...eh,ev,V?{children:et?(0,l.Y)(m.A.Button,{active:!0}):(0,l.Y)(p.A,{loading:ei,value:eo}),desc:H("providerModels.config.responsesApi.desc"),label:H("providerModels.config.responsesApi.title"),minWidth:void 0,name:["config","enableResponseApi"]}:void 0,ef,U?{children:et?(0,l.Y)(m.A.Button,{active:!0}):(0,l.Y)(j,{checkErrorRender:T,model:Q?.checkModel||h,onAfterCheck:async()=>{es.current=!1},onBeforeCheck:async()=>{es.current=!0,await X(t,G.getFieldsValue())},provider:t}),desc:H("providerModels.config.checker.desc"),label:H("providerModels.config.checker.title"),minWidth:void 0}:void 0,E&&eu].filter(Boolean),ey=Q?.logo??v,ex={children:eA,defaultActive:!0,extra:(0,l.FD)(x.Flexbox,{align:"center",gap:8,horizontal:!0,children:[I,em&&(0,l.Y)(er,{}),(0,l.Y)(_,{id:t})]}),title:(0,l.Y)(x.Flexbox,{align:"center",gap:4,horizontal:!0,style:{height:24,maxHeight:24,...ee?{}:{filter:"grayscale(100%)",maxHeight:24,opacity:.66}},children:em?(0,l.FD)(x.Flexbox,{align:"center",gap:8,horizontal:!0,children:[ey?(0,l.Y)(d.A,{avatar:ey,shape:"circle",size:32,title:B||t}):(0,l.Y)(r.A,{provider:"not-exist-provider",size:24}),B]}):(0,l.FD)(l.FK,{children:[(0,l.Y)(r.A,{provider:t,size:24}),(0,l.Y)(s.A,{title:H("providerModels.config.helpDoc"),children:(0,l.Y)(f(),{href:(0,Y.A)(o.hZ,t),onClick:e=>e.stopPropagation(),target:"_blank",children:(0,l.Y)(b.default,{className:Z.help,height:20,width:20,children:"?"})})})]})})};return(0,l.Y)(a.Ay,{className:q(Z.form,N),form:G,items:[ex],onValuesChange:(e,i)=>{ep(t,i)},variant:"borderless",...o.pC})})},18458:(e,t,i)=>{i.d(t,{A:()=>a});var l=i(28802),o=i(42507),r=i(83034);let a=(0,r.memo)(({enabled:e,onChange:t,size:i})=>{let[a,n]=(0,r.useState)(e),[d,s]=(0,r.useState)(!1);return(0,l.Y)(o.A,{loading:d,onChange:async e=>{s(!0),n(e),await t(e),s(!1)},size:i,value:a})})},20549:(e,t,i)=>{i.d(t,{a:()=>r});var l=i(14654),o=i(83034);let r=()=>{let{mobile:e}=(0,l.Q)();return(0,o.useMemo)(()=>!!e,[e])}},25598:(e,t,i)=>{i.d(t,{$:()=>C,$z:()=>D,IW:()=>N,TK:()=>S,V7:()=>P});var l=i(28802),o=i(37618),r=i(2893),a=i(37412),n=i(3136),d=i(12389),s=i(75431),c=i(67072),p=i(11577),m=i(14654),h=i(56055),u=i(4562),g=i(10726),v=i(20028),f=i(48019),A=i(10376),y=i(62874),x=i(54565),b=i(30598),Y=i.n(b),M=i(83034),F=i(59121),w=i(80457),k=i(9402);let C="lobe-model-info-tags",z=(0,p.rU)(({css:e,token:t})=>({tag:e`
    cursor: default;

    display: flex;
    align-items: center;
    justify-content: center;

    width: 20px !important;
    height: 20px;
    border-radius: 4px;
  `,token:e`
    width: 36px !important;
    height: 20px;
    border-radius: 4px;

    font-family: ${t.fontFamilyCode};
    font-size: 11px;
    color: ${t.colorTextSecondary};

    background: ${t.colorFillTertiary};
  `})),P=(0,M.memo)(({directionReverse:e,placement:t="right",...i})=>{let{t:o}=(0,F.Bd)("components"),{styles:r}=z();return(0,l.FD)(w.Flexbox,{className:C,direction:e?"horizontal-reverse":"horizontal",gap:4,width:"fit-content",children:[i.files&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:o("ModelSelect.featureTag.file"),children:(0,l.Y)(n.A,{className:r.tag,color:"success",size:"small",children:(0,l.Y)(d.default,{icon:h.A})})}),i.imageOutput&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:o("ModelSelect.featureTag.imageOutput"),children:(0,l.Y)(n.A,{className:r.tag,color:"success",size:"small",children:(0,l.Y)(d.default,{icon:u.A})})}),i.vision&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:o("ModelSelect.featureTag.vision"),children:(0,l.Y)(n.A,{className:r.tag,color:"success",size:"small",children:(0,l.Y)(d.default,{icon:g.A})})}),i.video&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:o("ModelSelect.featureTag.video"),children:(0,l.Y)(n.A,{className:r.tag,color:"magenta",size:"small",children:(0,l.Y)(d.default,{icon:v.A})})}),i.functionCall&&(0,l.Y)(a.A,{placement:t,styles:{root:{maxWidth:"unset",pointerEvents:"none"}},title:o("ModelSelect.featureTag.functionCall"),children:(0,l.Y)(n.A,{className:r.tag,color:"info",size:"small",children:(0,l.Y)(d.default,{icon:f.A})})}),i.reasoning&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:o("ModelSelect.featureTag.reasoning"),children:(0,l.Y)(n.A,{className:r.tag,color:"purple",size:"small",children:(0,l.Y)(d.default,{icon:A.A})})}),i.search&&(0,l.Y)(a.A,{placement:t,styles:{root:{pointerEvents:"none"}},title:o("ModelSelect.featureTag.search"),children:(0,l.Y)(n.A,{className:r.tag,color:"cyan",size:"small",children:(0,l.Y)(d.default,{icon:y.A})})}),"number"==typeof i.contextWindowTokens&&(0,l.Y)(a.A,{placement:t,styles:{root:{maxWidth:"unset",pointerEvents:"none"}},title:o("ModelSelect.featureTag.tokens",{tokens:0===i.contextWindowTokens?"∞":Y()(i.contextWindowTokens).format("0,0")}),children:(0,l.Y)(n.A,{className:r.token,size:"small",children:0===i.contextWindowTokens?(0,l.Y)(x.A,{size:17,strokeWidth:1.6}):(0,k.KT)(i.contextWindowTokens)})})]})}),D=(0,M.memo)(({showInfoTag:e=!0,...t})=>{let{mobile:i}=(0,m.Q)();return(0,l.FD)(w.Flexbox,{align:"center",gap:32,horizontal:!0,justify:"space-between",style:{minWidth:i?"100%":void 0,overflow:"hidden",position:"relative",width:i?"80vw":"auto"},children:[(0,l.FD)(w.Flexbox,{align:"center",gap:8,horizontal:!0,style:{flexShrink:1,minWidth:0,overflow:"hidden"},children:[(0,l.Y)(o.A,{model:t.id,size:20}),(0,l.Y)(s.A,{style:i?{maxWidth:"60vw",overflowX:"auto",whiteSpace:"nowrap"}:{},children:t.displayName||t.id})]}),e&&(0,l.Y)(P,{...t})]})}),S=(0,M.memo)(({provider:e,name:t,source:i,logo:o})=>(0,l.FD)(w.Flexbox,{align:"center",gap:4,horizontal:!0,children:["custom"===i&&o?(0,l.Y)(c.A,{avatar:o,size:20,style:{filter:"grayscale(1)"},title:t}):(0,l.Y)(r.A,{provider:e,size:20,type:"mono"}),t]})),N=(0,M.memo)(({Icon:e,label:t})=>(0,l.FD)(w.Flexbox,{align:"center",gap:8,horizontal:!0,children:[(0,l.Y)(e,{size:20}),(0,l.Y)("span",{children:t})]}))},27124:(e,t,i)=>{i.d(t,{A:()=>n});var l=i(28802),o=i(53860),r=i(83034);let a=(0,r.memo)(({onChange:e,value:t,...i})=>{let a=(0,r.useRef)(null),n=(0,r.useRef)(!1),[d,s]=(0,r.useState)(t);return(0,r.useEffect)(()=>{s(t)},[t]),(0,l.Y)(o.A,{onBlur:()=>{e?.(d)},onChange:e=>{s(e.target.value)},onCompositionEnd:()=>{n.current=!1},onCompositionStart:()=>{n.current=!0},onPressEnter:()=>{n.current||e?.(d)},ref:a,...i,value:d})});a.displayName="FormPassword";let n=a},45355:(e,t,i)=>{i.d(t,{_:()=>r});var l=i(28802),o=i(59202);let r=()=>(0,l.Y)(o.A.Input,{active:!0,block:!0})},53069:(e,t,i)=>{i.d(t,{A:()=>n});var l=i(28802),o=i(69033),r=i(83034);let a=(0,r.memo)(({onChange:e,value:t,...i})=>{let a=(0,r.useRef)(null),n=(0,r.useRef)(!1),[d,s]=(0,r.useState)(t);return(0,r.useEffect)(()=>{s(t)},[t]),(0,l.Y)(o.A,{onBlur:()=>{e?.(d)},onChange:e=>{s(e.target.value)},onCompositionEnd:()=>{n.current=!1},onCompositionStart:()=>{n.current=!0},onPressEnter:()=>{n.current||e?.(d)},ref:a,...i,value:d})});a.displayName="FormInput";let n=a},59421:(e,t,i)=>{i.d(t,{k:()=>n});var l=i(28802),o=i(59202),r=i(11577);let a=(0,r.cx)((0,r.AH)`
  width: 44px !important;
  min-width: 44px !important;
  height: 22px !important;
  border-radius: 12px !important;
`),n=()=>(0,l.Y)(o.A.Button,{active:!0,className:a})},74299:(e,t,i)=>{i.d(t,{A:()=>eT});var l,o=i(28802),r=i(12389),a=i(28573),n=i(11577),d=i(31021),s=i.n(d),c=i(13072),p=i(12368),m=i(4562),h=i(22158),u=i(78884),g=i(62827),v=i(83034),f=i(59121),A=i(80457),y=i(20549),x=i(94147),b=i(81196),Y=i(1894),M=i(75431),F=i(38153),w=i(9274),k=i(15447),C=i(6563),z=i(63433),P=i(20439),D=i(5930),S=i(31065),N=i(37618),T=i(47690),B=i(3136),E=i(58244),I=i(42507),$=i(13035),R=i(80201),W=i(80286),K=i(25598),L=i(9402),O=i(63485),j=i(99756),U=i(29703),V=i(69033),_=i(80176),H=i(87508),G=i(60590),q=i(96148),Z=i(3068),J=i(63639);let Q=e=>Math.round(Math.pow(2,e)),X=(0,v.memo)(({value:e,onChange:t,defaultValue:i})=>{let{t:l}=(0,f.Bd)("components"),[r,a]=(0,J.A)(0,{defaultValue:i,onChange:t,value:e}),[n,d]=(0,J.A)(0,{defaultValue:Math.log2(void 0===i?0:i/1024),value:Math.log2(void 0===e?0:e/1024)}),s=(0,y.a)(),c=(0,v.useMemo)(()=>({[Math.log2(2)]:"0",[Math.log2(4)]:s?"4":"4K",[Math.log2(8)]:s?"8":"8K",[Math.log2(16)]:s?"16":"16K",[Math.log2(32)]:s?"32":"32K",[Math.log2(64)]:s?"64":"64K",[Math.log2(125)]:" ",[Math.log2(195.3125)]:s?"200":"200k",[Math.log2(1024)]:"1M",[Math.log2(2048)]:"2M"}),[s]);return(0,o.FD)(A.Flexbox,{align:"center",gap:12,horizontal:!0,children:[(0,o.Y)(A.Flexbox,{flex:1,children:(0,o.Y)(Z.A,{marks:c,max:Math.log2(2048),min:Math.log2(2),onChange:e=>{d(e),a(2>=Q(e)?0:Math.round(1024*Math.pow(2,e)))},step:null,tooltip:{formatter:e=>{if(void 0===e)return;if(e<=Math.log2(2))return l("MaxTokenSlider.unlimited");let t=Q(e);return t<125?t.toFixed(0)+"K":t<1024?(1024*t/1e3).toFixed(0)+"k":(t/1024).toFixed(0)+"M"}},value:n})}),(0,o.Y)("div",{children:(0,o.Y)(q.A,{changeOnWheel:!0,min:0,onChange:e=>{(e||0===e)&&(a(Math.round(e)),d(Math.log2(e/1024)))},step:4096,value:r})})]})}),ee=(0,v.memo)(({showDeployName:e,idEditable:t=!0,onFormInstanceReady:i,initialValues:l})=>{let{t:r}=(0,f.Bd)("modelProvider"),[a]=_.A.useForm(),n=(0,y.a)(),d=(0,v.useMemo)(()=>["chat","embedding","tts","stt","image","realtime"].map(e=>{let t=r(`providerModels.item.modelConfig.type.options.${e}`);return{label:t!==e?`${t} (${e})`:t,value:e}}),[r]);return(0,v.useEffect)(()=>{i(a)},[]),(0,o.Y)("div",{onClick:e=>{e.stopPropagation()},onKeyDown:e=>{e.stopPropagation()},children:(0,o.FD)(_.A,{colon:!1,form:a,initialValues:l,labelCol:{span:4},style:{marginTop:16},wrapperCol:n?{span:18}:{offset:1,span:18},children:[(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.id.extra"),label:r("providerModels.item.modelConfig.id.title"),name:"id",rules:[{required:!0}],children:(0,o.Y)(V.A,{disabled:!t,placeholder:r("providerModels.item.modelConfig.id.placeholder")})}),e&&(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.deployName.extra"),label:r("providerModels.item.modelConfig.deployName.title"),name:["config","deploymentName"],children:(0,o.Y)(V.A,{placeholder:r("providerModels.item.modelConfig.deployName.placeholder")})}),(0,o.Y)(_.A.Item,{label:r("providerModels.item.modelConfig.displayName.title"),name:"displayName",children:(0,o.Y)(V.A,{placeholder:r("providerModels.item.modelConfig.displayName.placeholder")})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.tokens.extra"),label:r("providerModels.item.modelConfig.tokens.title"),name:"contextWindowTokens",children:(0,o.Y)(X,{})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.functionCall.extra"),label:r("providerModels.item.modelConfig.functionCall.title"),name:["abilities","functionCall"],valuePropName:"checked",children:(0,o.Y)(H.A,{})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.vision.extra"),label:r("providerModels.item.modelConfig.vision.title"),name:["abilities","vision"],valuePropName:"checked",children:(0,o.Y)(H.A,{})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.reasoning.extra"),label:r("providerModels.item.modelConfig.reasoning.title"),name:["abilities","reasoning"],valuePropName:"checked",children:(0,o.Y)(H.A,{})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.search.extra"),label:r("providerModels.item.modelConfig.search.title"),name:["abilities","search"],valuePropName:"checked",children:(0,o.Y)(H.A,{})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.imageOutput.extra"),label:r("providerModels.item.modelConfig.imageOutput.title"),name:["abilities","imageOutput"],valuePropName:"checked",children:(0,o.Y)(H.A,{})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.video.extra"),label:r("providerModels.item.modelConfig.video.title"),name:["abilities","video"],valuePropName:"checked",children:(0,o.Y)(H.A,{})}),(0,o.Y)(_.A.Item,{extra:r("providerModels.item.modelConfig.type.extra"),label:r("providerModels.item.modelConfig.type.title"),name:"type",children:(0,o.Y)(G.A,{options:d,placeholder:r("providerModels.item.modelConfig.type.placeholder")})})]})})}),et=(0,v.createContext)({}),ei=(0,v.memo)(({id:e,open:t,setOpen:i})=>{let{t:l}=(0,f.Bd)(["common","setting"]),[r,a]=(0,v.useState)(),[n,d]=(0,v.useState)(!1),[c,p]=(0,x.d)(e=>[e.activeAiProvider,e.updateAiModelsConfig]),m=(0,x.d)(b.g.getAiModelById(e),s()),h=()=>{i(!1)},{showDeployName:u}=(0,v.use)(et);return(0,o.Y)(U.A,{destroyOnHidden:!0,footer:[(0,o.Y)(k.A,{onClick:h,children:l("cancel")},"cancel"),(0,o.Y)(k.A,{loading:n,onClick:async()=>{if(!c||!e||!r)return;let t=r.getFieldsValue();d(!0),await p(e,c,t),d(!1),h()},style:{marginInlineStart:"16px"},type:"primary",children:l("ok")},"ok")],maskClosable:!0,onCancel:h,open:t,styles:{content:{display:"flex",flexDirection:"column",maxHeight:"calc(100vh - 150px)"}},title:l("llm.customModelCards.modelConfig.modalTitle",{ns:"setting"}),zIndex:1251,children:(0,o.Y)(ee,{idEditable:!1,initialValues:m,onFormInstanceReady:a,showDeployName:u,type:m?.type})})}),el=(0,n.rU)(({css:e,token:t,cx:i})=>{let l=e`
    opacity: 0;
    transition: all 100ms ease-in-out;
  `;return{config:l,container:e`
      position: relative;
      border-radius: ${t.borderRadiusLG}px;
      transition: all 200ms ease-in-out;

      &:hover {
        background-color: ${t.colorFillTertiary};

        .${i(l)} {
          opacity: 1;
        }
      }
    `,desc:e`
      flex: 1;
      min-width: 0;

      span {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
    `}}),eo=(0,v.memo)(({displayName:e,id:t,enabled:i,releasedAt:l,pricing:r,source:a,contextWindowTokens:d,abilities:s,type:c})=>{let{styles:p}=el(),{t:m}=(0,f.Bd)(["modelProvider","components","models","common"]),h=(0,n.DP)(),{modelEditable:u}=(0,v.use)(et),[g,Y,F,k]=(0,x.d)(e=>[e.activeAiProvider,b.g.isModelLoading(t)(e),e.toggleModelEnabled,e.removeAiModel]),[C,z]=(0,v.useState)(i),[P,D]=(0,v.useState)(!1),S=[l&&m("providerModels.item.releasedAt",{releasedAt:l}),...(()=>{if(!r)return[];switch(c){case"chat":{let e=(0,O.uE)(r),t=(0,O.H1)(r);return["number"==typeof e&&m("providerModels.item.pricing.inputTokens",{amount:(0,L.$3)(e,r?.currency)}),"number"==typeof t&&m("providerModels.item.pricing.outputTokens",{amount:(0,L.$3)(t,r?.currency)})].filter(Boolean)}case"embedding":{let e=(0,O.uE)(r);return["number"==typeof e&&m("providerModels.item.pricing.inputTokens",{amount:(0,L.$3)(e,r?.currency)})].filter(Boolean)}case"tts":{let e=(0,O.Px)(r);return["number"==typeof e&&m("providerModels.item.pricing.inputCharts",{amount:(0,L.$3)(e,r?.currency)})].filter(Boolean)}case"stt":{let e=(0,O.Px)(r);return["number"==typeof e&&m("providerModels.item.pricing.inputMinutes",{amount:(0,L.$3)(e,r?.currency)})].filter(Boolean)}default:return[]}})()].filter(Boolean),{message:U,modal:V}=E.A.useApp(),_=async()=>{await (0,T.l)(t),U.success({content:m("copySuccess",{ns:"common"})})},H=(0,y.a)(),G=l&&(0,j.GJ)(l)?(0,o.Y)(B.A,{color:"blue",style:{marginLeft:8},children:m("new",{ns:"common"})}):null,q=(0,o.Y)(B.A,{onClick:_,style:{cursor:"pointer",marginRight:0},children:t}),Z=(0,o.Y)(I.A,{checked:C,loading:Y,onChange:async e=>{z(e),await F({enabled:e,id:t,source:a,type:c})},size:"small"}),J=u&&(i=>(0,o.FD)(A.Flexbox,{className:p.config,horizontal:!0,style:i,children:[(0,o.Y)(w.A,{icon:$.A,onClick:e=>{e.stopPropagation(),D(!0)},size:"small",title:m("providerModels.item.config")}),a!==W.AiModelSourceEnum.Builtin&&(0,o.Y)(w.A,{icon:R.A,onClick:()=>{V.confirm({centered:!0,okButtonProps:{danger:!0,type:"primary"},onOk:async()=>{await k(t,g),U.success(m("providerModels.item.delete.success"))},title:m("providerModels.item.delete.confirm",{displayName:e||t})})},size:"small",title:m("providerModels.item.delete.title")})]})),Q=H?(0,o.FD)(A.Flexbox,{align:"center",gap:12,horizontal:!0,justify:"space-between",padding:"12px 6px",width:"100%",children:[(0,o.FD)(A.Flexbox,{align:"center",flex:1,gap:16,horizontal:!0,style:{minWidth:0},children:[(0,o.Y)(N.A,{model:t,size:32}),(0,o.FD)(A.Flexbox,{flex:1,gap:4,style:{minWidth:0},children:[(0,o.FD)(A.Flexbox,{align:"center",gap:8,horizontal:!0,children:[e||t,(0,o.Y)(A.Flexbox,{align:"center",gap:8,horizontal:!0,children:(0,o.Y)(K.V7,{placement:"top",...s,contextWindowTokens:d})})]}),(0,o.FD)("div",{children:[q,G]})]})]}),(0,o.FD)(A.Flexbox,{align:"center",gap:4,horizontal:!0,children:[J&&J({opacity:1}),Z]})]}):(0,o.FD)(A.Flexbox,{align:"center",className:p.container,gap:24,horizontal:!0,justify:"space-between",padding:12,width:"100%",children:[(0,o.FD)(A.Flexbox,{align:"center",flex:1,gap:8,horizontal:!0,style:{minWidth:0},children:[(0,o.Y)(N.A,{model:t,size:32}),(0,o.FD)(A.Flexbox,{flex:1,gap:2,style:{minWidth:0},children:[(0,o.FD)(A.Flexbox,{align:"center",gap:8,horizontal:!0,children:[e||t,q,G,J&&J()]}),(0,o.Y)(A.Flexbox,{align:"baseline",gap:8,horizontal:!0,children:S.length>0&&(0,o.Y)(M.A,{style:{color:h.colorTextSecondary,fontSize:12,marginBottom:0},children:S.join(" \xb7 ")})})]})]}),(0,o.FD)(A.Flexbox,{align:"center",gap:8,horizontal:!0,children:[(0,o.Y)(K.V7,{placement:"top",...s,contextWindowTokens:d}),Z]})]});return(0,o.FD)(o.FK,{children:[Q,P&&(0,o.Y)(ei,{id:t,open:P,setOpen:D})]})});var er=((l=er||{}).Alphabetical="alphabetical",l.AlphabeticalDesc="alphabeticalDesc",l.Default="default",l.ReleasedAt="releasedAt",l.ReleasedAtDesc="releasedAtDesc",l);let ea=(0,v.memo)(({activeTab:e})=>{let{t}=(0,f.Bd)("modelProvider"),[i,l]=(0,v.useState)(!1),[a,n]=(0,D.o)(e=>[S.I.disabledModelsSortType(e),e.updateSystemStatus]),d=(0,v.useCallback)(e=>{n({disabledModelsSortType:e})},[n]),c=(0,x.d)(b.g.disabledAiProviderModelList,s()),p=(0,v.useMemo)(()=>"all"===e?c:c.filter(t=>t.type===e),[c,e]),m=(0,v.useMemo)(()=>{let e=[...p];switch(a){case"alphabetical":return e.sort((e,t)=>{let i=(e.displayName||e.id).localeCompare(t.displayName||t.id);return 0!==i?i:e.id.localeCompare(t.id)});case"alphabeticalDesc":return e.sort((e,t)=>{let i=(t.displayName||t.id).localeCompare(e.displayName||e.id);return 0!==i?i:t.id.localeCompare(e.id)});case"releasedAt":return e.sort((e,t)=>{let i=!!e.releasedAt,l=!!t.releasedAt;return i&&!l?-1:!i&&l?1:i||l?e.releasedAt.localeCompare(t.releasedAt):0});case"releasedAtDesc":return e.sort((e,t)=>{let i=!!e.releasedAt,l=!!t.releasedAt;return i&&!l?-1:!i&&l?1:i||l?t.releasedAt.localeCompare(e.releasedAt):0});default:return e}},[p,a]),h=i?m:m.slice(0,10);return p.length>0&&(0,o.FD)(A.Flexbox,{children:[(0,o.FD)(A.Flexbox,{align:"center",horizontal:!0,justify:"space-between",children:[(0,o.Y)(M.A,{style:{fontSize:12,marginTop:8},type:"secondary",children:t("providerModels.list.disabled")}),p.length>1&&(0,o.Y)(F.A,{menu:{items:[{icon:"default"===a?(0,o.Y)(r.default,{icon:C.A}):(0,o.Y)("div",{}),key:"default",label:t("providerModels.list.disabledActions.sortDefault"),onClick:()=>d("default")},{type:"divider"},{icon:"alphabetical"===a?(0,o.Y)(r.default,{icon:C.A}):(0,o.Y)("div",{}),key:"alphabetical",label:t("providerModels.list.disabledActions.sortAlphabetical"),onClick:()=>d("alphabetical")},{icon:"alphabeticalDesc"===a?(0,o.Y)(r.default,{icon:C.A}):(0,o.Y)("div",{}),key:"alphabeticalDesc",label:t("providerModels.list.disabledActions.sortAlphabeticalDesc"),onClick:()=>d("alphabeticalDesc")},{type:"divider"},{icon:"releasedAt"===a?(0,o.Y)(r.default,{icon:C.A}):(0,o.Y)("div",{}),key:"releasedAt",label:t("providerModels.list.disabledActions.sortReleasedAt"),onClick:()=>d("releasedAt")},{icon:"releasedAtDesc"===a?(0,o.Y)(r.default,{icon:C.A}):(0,o.Y)("div",{}),key:"releasedAtDesc",label:t("providerModels.list.disabledActions.sortReleasedAtDesc"),onClick:()=>d("releasedAtDesc")}]},trigger:["click"],children:(0,o.Y)(w.A,{icon:z.A,size:"small",title:t("providerModels.list.disabledActions.sort")})})]}),h.map(e=>(0,Y.n)(eo,{...e,key:e.id})),!i&&m.length>10&&(0,o.Y)(k.A,{block:!0,icon:P.A,onClick:()=>{l(!0)},size:"small",children:t("providerModels.list.disabledActions.showMore")})]})});var en=i(18223),ed=i(90897),es=i(66056),ec=i(20480);let ep=(0,v.memo)(({open:e,setOpen:t})=>{let{t:i}=(0,f.Bd)(["modelProvider","common"]),[l,r]=(0,v.useState)(),[a,n]=(0,v.useState)(!1),[d,s]=(0,x.d)(e=>[e.activeAiProvider,e.createNewAiModel]),c=()=>{t(!1)},{showDeployName:p}=(0,v.use)(et);return(0,o.Y)(U.A,{destroyOnHidden:!0,footer:[(0,o.Y)(k.A,{onClick:c,children:i("cancel",{ns:"common"})},"cancel"),(0,o.Y)(k.A,{loading:a,onClick:async()=>{if(!d||!l)return;let e=l.getFieldsValue();n(!0);try{await l.validateFields(),await s({...e,providerId:d}),n(!1),c()}catch{n(!1)}},style:{marginInlineStart:"16px"},type:"primary",children:i("ok",{ns:"common"})},"ok")],maskClosable:!0,onCancel:c,open:e,styles:{content:{display:"flex",flexDirection:"column",maxHeight:"calc(100vh - 150px)"}},title:i("providerModels.createNew.title"),zIndex:1251,children:(0,o.Y)(ee,{onFormInstanceReady:r,showDeployName:p})})}),em=(0,n.rU)(({css:e,token:t})=>({circle:e`
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: ${t.colorFillSecondary};
  `,container:e`
    width: 100%;
    border: 1px dashed ${t.colorBorder};
    border-radius: 12px;
    background: ${t.colorBgContainer};
  `,description:e`
    max-width: 280px;

    font-size: ${t.fontSize}px;
    color: ${t.colorTextDescription};
    text-align: center;
    text-wrap: balance;
  `,iconWrapper:e`
    position: relative;
    width: 64px;
    height: 64px;
  `,sparklesIcon:e`
    font-size: 40px;
    color: ${t.colorText};
  `,title:e`
    font-size: ${t.fontSizeLG}px;
    font-weight: 500;
  `})),eh=(0,v.memo)(({provider:e})=>{let{t}=(0,f.Bd)("modelProvider"),{styles:i}=em(),[l]=(0,x.d)(e=>[e.fetchRemoteModelList]),[a,n]=(0,v.useState)(!1),[d,s]=(0,v.useState)(!1);return(0,o.FD)(ec.default,{className:i.container,gap:24,paddingBlock:40,children:[(0,o.Y)(ec.default,{className:i.circle,children:(0,o.Y)(r.default,{className:i.sparklesIcon,icon:en.A})}),(0,o.FD)(A.Flexbox,{align:"center",gap:8,children:[(0,o.Y)("div",{className:i.title,children:t("providerModels.list.empty.title")}),(0,o.Y)("div",{className:i.description,children:t("providerModels.list.empty.desc")})]}),(0,o.FD)(A.Flexbox,{gap:8,horizontal:!0,children:[(0,o.Y)(k.A,{icon:ed.A,onClick:()=>{s(!0)},children:t("providerModels.list.addNew")}),(0,o.Y)(ep,{open:d,setOpen:s}),(0,o.Y)(k.A,{icon:(0,o.Y)(r.default,{icon:es.A}),loading:a,onClick:async()=>{n(!0);try{await l(e)}catch(e){console.error(e)}n(!1)},type:"primary",children:t(a?"providerModels.list.fetcher.fetching":"providerModels.list.fetcher.fetch")})]})]})});var eu=i(19757),eg=i(2460);let ev=(0,v.memo)(({id:e,displayName:t})=>(0,o.FD)(o.FK,{children:[(0,o.FD)(A.Flexbox,{gap:8,horizontal:!0,children:[(0,o.Y)(N.A,{model:e,size:24,type:"avatar"}),t||e]}),(0,o.Y)(eg.A.DragHandle,{})]})),ef=(0,n.rU)(({css:e,token:t})=>({container:e`
    height: 36px;
    padding-inline: 8px;
    border-radius: ${t.borderRadius}px;
    transition: background 0.2s ease-in-out;

    &:hover {
      background: ${t.colorFillTertiary};
    }
  `})),eA=(0,v.memo)(({open:e,onCancel:t,defaultItems:i})=>{let{t:l}=(0,f.Bd)("modelProvider"),{styles:r}=ef(),[a,n]=(0,x.d)(e=>[e.activeAiProvider,e.updateAiModelsSort]),[d,s]=(0,v.useState)(!1),{message:c}=E.A.useApp(),[p,m]=(0,v.useState)(i);return(0,o.Y)(U.A,{allowFullscreen:!0,footer:null,onCancel:t,open:e,title:l("sortModal.title"),width:400,children:(0,o.FD)(A.Flexbox,{gap:16,children:[(0,o.Y)(eg.A,{items:p,onChange:async e=>{m(e)},renderItem:e=>(0,o.Y)(eg.A.Item,{align:"center",className:r.container,gap:4,horizontal:!0,id:e.id,justify:"space-between",children:(0,o.Y)(ev,{...e})})}),(0,o.Y)(k.A,{block:!0,loading:d,onClick:async()=>{if(!a)return;let e=p.map((e,t)=>({id:e.id,sort:t,type:e.type}));s(!0),await n(a,e),s(!1),c.success(l("sortModal.success")),t()},type:"primary",children:l("sortModal.update")})]})})}),ey=({activeTab:e})=>{let{t}=(0,f.Bd)("modelProvider"),i=(0,x.d)(b.g.enabledAiProviderModelList,s()),l=(0,x.d)(e=>e.batchToggleAiModels),[r,a]=(0,v.useState)(!1),[n,d]=(0,v.useState)(!1),c=0===i.length,p=(0,v.useMemo)(()=>"all"===e?i:i.filter(t=>t.type===e),[i,e]),m=0===p.length;return(0,o.FD)(o.FK,{children:[(0,o.FD)(A.Flexbox,{horizontal:!0,justify:"space-between",children:[(0,o.Y)(M.A,{style:{fontSize:12,marginTop:8},type:"secondary",children:t("providerModels.list.enabled")}),!c&&(0,o.FD)(A.Flexbox,{horizontal:!0,children:[(0,o.Y)(w.A,{icon:eu.A,loading:n,onClick:async()=>{d(!0),await l(i.map(e=>e.id),!1),d(!1)},size:"small",title:t("providerModels.list.enabledActions.disableAll")}),(0,o.Y)(w.A,{icon:z.A,onClick:()=>{a(!0)},size:"small",title:t("providerModels.list.enabledActions.sort")})]}),r&&(0,o.Y)(eA,{defaultItems:i,onCancel:()=>{a(!1)},open:r})]}),c?(0,o.Y)(ec.default,{padding:12,children:(0,o.Y)(M.A,{style:{fontSize:12},type:"secondary",children:t("providerModels.list.enabledEmpty")})}):m?(0,o.Y)(ec.default,{padding:12,children:(0,o.Y)(M.A,{style:{fontSize:12},type:"secondary",children:t("providerModels.list.noModelsInCategory")})}):(0,o.Y)(A.Flexbox,{gap:2,children:p.map(({displayName:e,id:t,...i})=>{let l=e||t;return(0,o.Y)(eo,{displayName:l,id:t,...i},t)})})]})};var ex=i(59202),eb=i(89098),eY=i(76124),eM=i(575),eF=i(44452);let ew=(0,v.memo)(({value:e,onChange:t,variant:i})=>{let{t:l}=(0,f.Bd)("modelProvider");return(0,o.Y)(eF.A,{allowClear:!0,defaultValue:e,onSearch:e=>t(e),placeholder:l("providerModels.list.search"),size:"small",variant:i})}),ek=(0,v.memo)(({provider:e,showAddNewModel:t=!0,showModelFetcher:i=!0})=>{let l=(0,n.DP)(),{t:r}=(0,f.Bd)("modelProvider"),{modal:a,message:d}=E.A.useApp(),[s,c,p,m,h,u,g,Y]=(0,x.d)(e=>[e.modelSearchKeyword,b.g.totalAiProviderModelList(e),b.g.isEmptyAiProviderModelList(e),b.g.hasRemoteModels(e),e.fetchRemoteModelList,e.clearRemoteModels,e.clearModelsByProvider,e.useFetchAiProviderModels]),{isLoading:C}=Y(e),[z,P]=(0,v.useState)(!1),[D,S]=(0,v.useState)(!1),[N,T]=(0,v.useState)(!1),B=(0,y.a)();return(0,o.FD)(A.Flexbox,{gap:12,paddingBlock:8,style:{background:l.colorBgContainer,marginTop:B?0:-12,paddingTop:20*!B,position:"sticky",top:B?-2:-32,zIndex:15},children:[(0,o.FD)(A.Flexbox,{align:"center",gap:0,horizontal:!0,justify:"space-between",children:[(0,o.FD)(A.Flexbox,{align:"center",gap:8,horizontal:!0,children:[(0,o.Y)(M.A,{strong:!0,style:{fontSize:16},children:r("providerModels.list.title")}),C?(0,o.Y)(ex.A.Button,{active:!0,style:{height:22}}):(0,o.Y)(M.A,{style:{fontSize:12},type:"secondary",children:(0,o.FD)("div",{style:{display:"flex",lineHeight:"24px"},children:[r("providerModels.list.total",{count:c}),m&&(0,o.Y)(w.A,{icon:eY.A,loading:D,onClick:async()=>{S(!0),await u(e),S(!1)},size:"small",title:r("providerModels.list.fetcher.clear")})]})})]}),C?(0,o.Y)(ex.A.Button,{active:!0,size:"small",style:{width:120}}):p?null:(0,o.FD)(A.Flexbox,{gap:8,horizontal:!0,children:[!B&&(0,o.Y)(ew,{onChange:e=>{x.d.setState({modelSearchKeyword:e})},value:s}),(0,o.FD)(eb.A.Compact,{children:[i&&(0,o.Y)(k.A,{icon:es.A,loading:z,onClick:async()=>{P(!0);try{await h(e)}catch(e){console.error(e)}P(!1)},size:"small",children:z?r("providerModels.list.fetcher.fetching"):r("providerModels.list.fetcher.fetch")}),t&&(0,o.FD)(o.FK,{children:[(0,o.Y)(k.A,{icon:ed.A,onClick:()=>{T(!0)},size:"small"}),(0,o.Y)(ep,{open:N,setOpen:T})]}),(0,o.Y)(F.A,{menu:{items:[{key:"reset",label:r("providerModels.list.resetAll.title"),onClick:async()=>{a.confirm({content:r("providerModels.list.resetAll.conform"),onOk:async()=>{await g(e),d.success(r("providerModels.list.resetAll.success"))},title:r("providerModels.list.resetAll.title")})}}]},children:(0,o.Y)(k.A,{icon:eM.A,size:"small"})})]})]})]}),B&&(0,o.Y)(ew,{onChange:e=>{x.d.setState({modelSearchKeyword:e})},value:s,variant:"filled"})]})});var eC=i(60494);let ez=(0,v.memo)(()=>{let{t:e}=(0,f.Bd)("modelProvider"),t=(0,x.d)(e=>e.modelSearchKeyword),i=(0,x.d)(e=>e.batchToggleAiModels),l=(0,x.d)(b.g.filteredAiProviderModelList,s());console.log("filteredModels:",l);let[r,a]=(0,v.useState)(!1),n=0===l.length;return(0,o.FD)(o.FK,{children:[(0,o.FD)(A.Flexbox,{horizontal:!0,justify:"space-between",children:[(0,o.Y)(M.A,{style:{fontSize:12,marginTop:8},type:"secondary",children:e("providerModels.list.searchResult",{count:l.length})}),!n&&(0,o.Y)(A.Flexbox,{horizontal:!0,children:(0,o.Y)(w.A,{icon:eC.A,loading:r,onClick:async()=>{a(!0),await i(l.map(e=>e.id),!0),a(!1)},size:"small",title:e("providerModels.list.enabledActions.enableAll")})})]}),t&&n?(0,o.Y)(A.Flexbox,{align:"center",justify:"center",padding:16,children:e("providerModels.searchNotFound")}):(0,o.Y)(A.Flexbox,{gap:4,children:l.map(e=>(0,Y.n)(eo,{...e,key:`${e.id}-${e.enabled}`}))})]})}),eP=(0,n.rU)(({css:e,prefixCls:t})=>({avatar:e`
    width: 32px !important;
    height: 32px !important;
  `,container:e`
    display: flex;
    align-items: center;
    justify-content: center;

    height: 56px;
    padding: 12px;

    .${t}-skeleton-content {
      display: flex;
      flex-direction: column;
    }
  `,paragraph:e`
    > li {
      height: 22px !important;
    }
  `})),eD=(0,v.memo)(()=>{let{styles:e}=eP();return(0,o.FD)(A.Flexbox,{align:"center",horizontal:!0,justify:"space-between",children:[(0,o.Y)(ex.A,{active:!0,avatar:{className:e.avatar},className:e.container,paragraph:{className:e.paragraph,rows:1,style:{marginBottom:0},width:"40%"},title:!1}),(0,o.Y)(ex.A.Button,{active:!0,size:"small"})]})}),eS=(0,v.memo)(()=>(0,o.Y)(A.Flexbox,{gap:4,style:{paddingTop:26},children:Array.from({length:6}).map((e,t)=>(0,o.Y)(eD,{},t))})),eN=(0,v.memo)(({id:e})=>{let{t}=(0,f.Bd)("modelProvider"),[i,l]=(0,v.useState)("all"),[n,d,y]=(0,x.d)(e=>[!!e.modelSearchKeyword,b.g.isEmptyAiProviderModelList(e),e.useFetchAiProviderModels]),Y=(0,x.d)(b.g.filteredAiProviderModelList,s()),{isLoading:M}=y(e),F=(0,v.useMemo)(()=>{let e={all:Y.length,chat:0,embedding:0,image:0,stt:0,tts:0};return Y.forEach(t=>{let i=t.type;i&&Object.prototype.hasOwnProperty.call(e,i)&&e[i]++}),e},[Y]),w=(0,v.useMemo)(()=>{let e=(e,t)=>t>0?`${e} (${t})`:e;return[{count:F.all,icon:(0,o.Y)(r.default,{icon:c.A,size:16}),key:"all",label:e(t("providerModels.tabs.all"),F.all)},{count:F.chat,icon:(0,o.Y)(r.default,{icon:p.A,size:16}),key:"chat",label:e(t("providerModels.tabs.chat"),F.chat)},{count:F.image,icon:(0,o.Y)(r.default,{icon:m.A,size:16}),key:"image",label:e(t("providerModels.tabs.image"),F.image)},{count:F.embedding,icon:(0,o.Y)(r.default,{icon:h.A,size:16}),key:"embedding",label:e(t("providerModels.tabs.embedding"),F.embedding)},{count:F.stt,icon:(0,o.Y)(r.default,{icon:u.A,size:16}),key:"stt",label:e(t("providerModels.tabs.stt"),F.stt)},{count:F.tts,icon:(0,o.Y)(r.default,{icon:g.A,size:16}),key:"tts",label:e(t("providerModels.tabs.tts"),F.tts)}].filter(e=>"all"===e.key||e.count>0)},[F]),k=w.map(e=>e.key).includes(i)?i:"all";return M?(0,o.Y)(eS,{}):n?(0,o.Y)(ez,{}):d?(0,o.Y)(eh,{provider:e}):(0,o.FD)(A.Flexbox,{children:[(0,o.Y)(a.A,{activeKey:k,items:w,onChange:l,size:"small",style:{marginBottom:12}}),(0,o.Y)(ey,{activeTab:k}),(0,o.Y)(ea,{activeTab:k})]})}),eT=(0,v.memo)(({id:e,showModelFetcher:t,sdkType:i,showAddNewModel:l,showDeployName:r,modelEditable:a=!0})=>{let d=(0,y.a)(),s=(0,n.DP)();return(0,o.Y)(et,{value:{modelEditable:a,sdkType:i,showAddNewModel:l,showDeployName:r,showModelFetcher:t},children:(0,o.FD)(A.Flexbox,{gap:16,paddingInline:12*!!d,style:{background:d?s.colorBgContainer:void 0,paddingBottom:16,paddingTop:8},children:[(0,o.Y)(ek,{provider:e,showAddNewModel:l,showModelFetcher:t}),(0,o.Y)(v.Suspense,{fallback:(0,o.Y)(eS,{}),children:(0,o.Y)(eN,{id:e})})]})})})},80729:(e,t,i)=>{i.d(t,{A:()=>c});var l=i(28802),o=i(83034),r=i(80457),a=i(94147),n=i(62326),d=i(74299),s=i(4650);let c=(0,o.memo)(({showConfig:e=!0,...t})=>{let i=(0,a.d)(e=>e.useFetchAiProviderItem);return(0,a.d)(e=>e.useFetchAiProviderList)({enabled:(0,n.wo)(e=>e.isMobile)}),i(t.id),(0,l.FD)(r.Flexbox,{gap:24,paddingBlock:8,children:[e&&(0,l.Y)(s.A,{...t}),(0,l.Y)(d.A,{id:t.id,...t.settings})]})})},87381:(e,t,i)=>{i.d(t,{u:()=>o});var l=i(67400);let o=e=>{let t=l.DEFAULT_MODEL_PROVIDER_LIST.find(t=>t.id===e);return t?.name||e}},99756:(e,t,i)=>{i.d(t,{Ec:()=>r,GJ:()=>n,ZG:()=>a});var l=i(2644),o=i.n(l);let r=()=>o()().startOf("day"),a=()=>o()().subtract(1,"month").startOf("month").endOf("month"),n=(e,t=14)=>o()().diff(o()(e),"day")<t}}]);