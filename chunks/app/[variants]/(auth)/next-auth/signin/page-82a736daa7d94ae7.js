(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86577],{12684:(e,t,r)=>{Promise.resolve().then(r.bind(r,47029)),Promise.resolve().then(r.t.bind(r,92899,23)),Promise.resolve().then(r.bind(r,72981)),Promise.resolve().then(r.bind(r,8756)),Promise.resolve().then(r.bind(r,40695)),Promise.resolve().then(r.bind(r,67958)),Promise.resolve().then(r.bind(r,23289)),Promise.resolve().then(r.bind(r,12389)),Promise.resolve().then(r.bind(r,10048)),Promise.resolve().then(r.bind(r,20480)),Promise.resolve().then(r.bind(r,80457)),Promise.resolve().then(r.bind(r,92697)),Promise.resolve().then(r.bind(r,27384))},27384:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a=r(28802),i=r(12389),s=r(75431),n=r(85017),o=r(59121),l=r(20480),d=r(80457);let c=()=>{let{t:e}=(0,o.Bd)("common");return(0,a.Y)(l.default,{height:"100%",width:"100%",children:(0,a.FD)(d.Flexbox,{align:"center",gap:8,children:[(0,a.Y)("div",{children:(0,a.Y)(i.default,{icon:n.A,size:"large",spin:!0})}),(0,a.Y)(s.A,{style:{letterSpacing:"0.1em"},type:"secondary",children:e("loading")})]})})}},38759:(e,t,r)=>{"use strict";r.d(t,{c:()=>O,k:()=>_});var a=r(14308),i=r(50786),s=r(23993),n=r(41734),o=r(89872);let l={preference:o.I},d={...{defaultSettings:r(74551).a$,settings:{}},...l,...{},...{isOnboard:!1,isShowPWAGuide:!1,isUserCanEnableTrace:!1,isUserHasConversation:!1,isUserStateInit:!1}};var c=r(96773),u=r(70674),h=r(64911),g=r(85366),p=r(46265),m=r(55582),b=r(67095),S=r(61497),f=r(71457);let v=(0,S.K)("common"),y="initUserState",A=(0,S.K)("preference");var U=r(31021),w=r.n(U),P=r(19530),k=r(45628);class C{constructor(){this.createShareSettingsUrl=e=>`/?${k.N}=${encodeURI(JSON.stringify(e))}`,this.decodeShareSettings=e=>{try{return{data:JSON.parse(e)}}catch(e){return{message:JSON.stringify(e)}}}}}let N=new C;var x=r(34743),I=r(1866),Y=r(28074);let T=(0,n.t)("user"),_=(0,s.h)()((0,a.eh)(T((...e)=>({...d,...((e,t)=>({addToolToAllowList:async e=>{let r=t().settings.tool?.humanIntervention?.allowList||[];r.includes(e)||await t().setSettings({tool:{humanIntervention:{allowList:[...r,e]}}})},importAppSettings:async e=>{let{setSettings:r}=t();await r(e)},importUrlShareSettings:async e=>{if(e){let r=N.decodeShareSettings(e);!r?.message&&r?.data&&await t().setSettings(r.data)}},internal_createSignal:()=>{let r=t().updateSettingsSignal;r&&!r.signal.aborted&&r.abort(P.ve);let a=new AbortController;return e({updateSettingsSignal:a},!1,"signalForUpdateSettings"),a},resetSettings:async()=>{await m.W.resetUserSettings(),await t().refreshUserState()},setSettings:async r=>{let a,{settings:i,defaultSettings:s}=t(),n=(0,b.h)(i,r);if(w()(i,n))return;let o=(a=(e,t)=>(0,x.A)(e,(e,r,i)=>{(0,I.A)(r)&&(0,I.A)(t[i])?w()(r,t[i])||(e[i]=r):w()(r,t[i])||(e[i]=(0,Y.A)(r)&&(0,Y.A)(t[i])?a(r,t[i]):r)}))(n,s);e({settings:o},!1,"optimistic_updateSettings");let l=t().internal_createSignal();await m.W.updateUserSettings(o,l.signal),await t().refreshUserState()},updateDefaultAgent:async e=>{await t().setSettings({defaultAgent:e})},updateGeneralConfig:async e=>{await t().setSettings({general:e})},updateHumanIntervention:async e=>{let r=t().settings.tool?.humanIntervention||{};await t().setSettings({tool:{humanIntervention:{...r,...e}}})},updateKeyVaults:async e=>{await t().setSettings({keyVaults:e})},updateSystemAgent:async(e,r)=>{await t().setSettings({systemAgent:{[e]:{...r}}})}}))(...e),...((e,t)=>({updateGuideState:async e=>{let{updatePreference:r}=t(),a=(0,b.h)(t().preference.guide,e);await r({guide:a})},updateLab:async e=>{let{updatePreference:r}=t(),a=(0,b.h)(t().preference.lab,e);await r({lab:a},A("updateLab"))},updatePreference:async(r,a)=>{let i=(0,b.h)(t().preference,r);e({preference:i},!1,a||A("updatePreference")),await m.W.updatePreference(i)}}))(...e),...((e,t)=>({enableAuth:()=>c.S4,logout:async()=>{if(c.Nd)return void t().clerkSignOut?.({redirectUrl:location.toString()});if(c.J_){let{signOut:e}=await r.e(4975).then(r.bind(r,4975));e()}},openLogin:async()=>{if(c.Nd){let e=location.toString();t().clerkSignIn?.({fallbackRedirectUrl:e,signUpForceRedirectUrl:e,signUpUrl:"/signup"});return}if(c.J_){let{signIn:e}=await r.e(4975).then(r.bind(r,4975)),a=t()?.oAuthSSOProviders;if(a&&1===a.length)return void e(a[0]);e()}}}))(...e),...((e,t)=>({refreshUserState:async()=>{await (0,h.j)(y)},updateAvatar:async e=>{await m.W.updateAvatar(e),await t().refreshUserState()},updateKeyVaultConfig:async(e,r)=>{await t().setSettings({keyVaults:{[e]:r}})},useCheckTrace:e=>(0,g.Ay)(e?"checkTrace":null,()=>"boolean"==typeof f.U.userAllowTrace(t())?Promise.resolve(!1):Promise.resolve(t().isUserCanEnableTrace),{revalidateOnFocus:!1}),useInitUserState:(r,a,i)=>(0,p.Ju)(r?y:null,()=>m.W.getUserState(),{onError:e=>{i?.onError?.(e)},onSuccess:r=>{if(i?.onSuccess?.(r),r){let i={defaultAgent:a.defaultAgent,image:a.image,systemAgent:a.systemAgent},s=(0,b.h)(t().defaultSettings,i),n=0===Object.keys(r.preference||{}).length?o.I:r.preference,l=r.avatar||r.userId?(0,b.h)(t().user,{avatar:r.avatar,email:r.email,firstName:r.firstName,fullName:r.fullName,id:r.userId,latestName:r.lastName,username:r.username}):t().user;e({defaultSettings:s,isOnboard:r.isOnboard,isShowPWAGuide:r.canEnablePWAGuide,isUserCanEnableTrace:r.canEnableTrace,isUserHasConversation:r.hasConversation,isUserStateInit:!0,preference:n,settings:r.settings||{},subscriptionPlan:r.subscriptionPlan,user:l},!1,v("initUserState"));let d=(0,u.wZ)();d?.identify(r.userId||"",{email:r.email,firstName:r.firstName,lastName:r.lastName,username:r.username})}}})}))(...e)}))),i.x),O=()=>_.getState()},44268:(e,t,r)=>{"use strict";r.d(t,{A:()=>b});var a=r(28802),i=r(41675),s=r(13286),n=r(91055),o=r(54819),l=r(95225),d=r(31031),c=r(69233),u=r(48727),h=r(52771),g=r(73576),p=r(3543);r(83034);let m={auth0:s.A,authelia:n.A.Color,authentik:o.A.Color,casdoor:l.A.Color,cloudflare:d.A.Color,default:c.A.Color,github:u.A,google:i.A.Color,logto:h.A.Color,"microsoft-entra-id":g.A.Color,zitadel:p.A.Color},b=(e,t=36)=>{let r=m[e]||m.default;return(0,a.Y)(r,{size:t})}},52702:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var a=r(28802),i=r(8756),s=r(11577),n=r(51997),o=r.n(n),l=r(83034),d=r(80457),c=r(98724),u=r(45628),h=r(64861);let g=(0,s.rU)(({token:e,css:t})=>({logoLink:t`
    line-height: 1;
    color: inherit;

    &:hover {
      color: ${e.colorLink};
    }
  `})),p=(0,l.memo)(({style:e,...t})=>{let{styles:r,theme:s}=g();return(0,a.FD)(d.Flexbox,{align:"center",dir:"ltr",flex:"none",gap:4,horizontal:!0,style:{color:s.colorTextDescription,fontSize:12,...e},...t,children:[(0,a.Y)("span",{children:"Powered by"}),h.Eb?(0,a.Y)("span",{children:c.dS}):(0,a.Y)(o(),{className:r.logoLink,href:`https://lobehub.com?utm_source=${u.VU}&utm_content=brand_watermark`,target:"_blank",children:(0,a.Y)(i.default,{size:20,type:"text"})})]})})},55582:(e,t,r)=>{"use strict";r.d(t,{W:()=>s});var a=r(77605);class i{constructor(){this.getUserRegistrationDuration=async()=>a.du.user.getUserRegistrationDuration.query(),this.getUserState=async()=>a.du.user.getUserState.query(),this.getUserSSOProviders=async()=>a.du.user.getUserSSOProviders.query(),this.unlinkSSOProvider=async(e,t)=>a.du.user.unlinkSSOProvider.mutate({provider:e,providerAccountId:t}),this.makeUserOnboarded=async()=>a.du.user.makeUserOnboarded.mutate(),this.updateAvatar=async e=>a.du.user.updateAvatar.mutate(e),this.updatePreference=async e=>a.du.user.updatePreference.mutate(e),this.updateGuide=async e=>a.du.user.updateGuide.mutate(e),this.updateUserSettings=async(e,t)=>a.du.user.updateSettings.mutate(e,{signal:t}),this.resetUserSettings=async()=>a.du.user.resetSettings.mutate()}}let s=new i},64861:(e,t,r)=>{"use strict";r.d(t,{Eb:()=>d,V_:()=>n,fF:()=>l,xl:()=>o});var a=r(80239),i=r(98724),s=r(55036);let n=a.rE,o="1"===s.env.NEXT_PUBLIC_IS_DESKTOP_APP,l="LobeHub"!==i.Se,d="LobeHub"!==i.dS},71457:(e,t,r)=>{"use strict";r.d(t,{U:()=>i});var a=r(74551);let i={hideSettingsMoveGuide:e=>e.preference.guide?.moveSettingsToAvatar,hideSyncAlert:e=>e.preference.hideSyncAlert,isPreferenceInit:e=>e.isUserStateInit,shouldTriggerFileInKnowledgeBaseTip:e=>"boolean"!=typeof e.preference.guide?.moveSettingsToAvatar,showUploadFileInKnowledgeBaseTip:e=>e.preference.guide?.uploadFileInKnowledgeBase,topicDisplayMode:e=>e.preference.topicDisplayMode||a.I4.topicDisplayMode,useCmdEnterToSend:e=>e.preference.useCmdEnterToSend||!1,userAllowTrace:e=>e.preference.telemetry}},80239:e=>{"use strict";e.exports=JSON.parse('{"rE":"2.0.0-next.98","TB":"https://github.com/lobehub/lobe-chat"}')},92697:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var a=r(28802),i=r(74551),s=r(75431),n=r(15447),o=r(8756),l=r(23624),d=r(59202),c=r(99584),u=r(69982),h=r(11577),g=r(43088),p=r(4975),m=r(50718),b=r(83034),S=r(59121),f=r(52702),v=r(44268),y=r(38759);let A=(0,h.rU)(({css:e,token:t})=>({button:e`
    text-transform: capitalize;
  `,container:e`
    min-width: 360px;
    border: 1px solid ${t.colorBorder};
    border-radius: ${t.borderRadiusLG}px;
    background: ${t.colorBgContainer};
  `,contentCard:e`
    padding-block: 2.5rem;
    padding-inline: 2rem;
  `,description:e`
    margin: 0;
    color: ${t.colorTextSecondary};
  `,footer:e`
    padding: 1rem;
    border-block-start: 1px solid ${t.colorBorder};
    border-radius: 0 0 8px 8px;

    color: ${t.colorTextDescription};

    background: ${t.colorBgElevated};
  `,text:e`
    text-align: center;
  `,title:e`
    margin: 0;
    color: ${t.colorTextHeading};
  `})),U=(0,b.memo)(()=>(0,a.FD)(l.A,{gap:"small",vertical:!0,children:[(0,a.Y)(d.A.Button,{active:!0,style:{minWidth:300}}),(0,a.Y)(d.A.Button,{active:!0,style:{minWidth:300}}),(0,a.Y)(d.A.Button,{active:!0,style:{minWidth:300}})]})),w=(0,b.memo)(()=>{let{styles:e}=A(),{t}=(0,S.Bd)("clerk"),r=(0,m.useRouter)(),[d,h]=(0,b.useState)(null),w=(0,y.k)(e=>e.oAuthSSOProviders),P=(0,m.useSearchParams)().get("callbackUrl")??"/",k=async e=>{h(e);try{await (0,p.signIn)(e,{redirectTo:P})}catch(e){if(h(null),e instanceof g.lR)return r.push(`/next-auth/?error=${e.type}`);throw e}},C=[{href:i.Qs,id:0,label:t("footerPageLink__help")},{href:i.pk,id:1,label:t("footerPageLink__privacy")},{href:i.gu,id:2,label:t("footerPageLink__terms")}];return(0,a.FD)("div",{className:e.container,children:[(0,a.Y)("div",{className:e.contentCard,children:(0,a.FD)(l.A,{gap:"large",vertical:!0,children:[(0,a.FD)("div",{className:e.text,children:[(0,a.FD)(s.A,{as:"h4",className:e.title,children:[(0,a.Y)("div",{children:(0,a.Y)(o.default,{size:48})}),t("signIn.start.title",{applicationName:i.Se})]}),(0,a.Y)(s.A,{as:"p",className:e.description,children:t("signIn.start.subtitle")})]}),(0,a.Y)(l.A,{gap:"small",vertical:!0,children:w?w.map(t=>(0,a.Y)(n.A,{className:e.button,icon:(0,v.A)(t,16),loading:d===t,onClick:()=>k(t),children:t},t)):(0,a.Y)(U,{})})]})}),(0,a.Y)("div",{className:e.footer,children:(0,a.FD)(c.A,{children:[(0,a.Y)(u.A,{span:12,children:(0,a.Y)(l.A,{justify:"left",style:{height:"100%"},children:(0,a.Y)(f.A,{})})}),(0,a.Y)(u.A,{offset:4,span:8,children:(0,a.Y)(l.A,{justify:"right",children:C.map(e=>(0,a.Y)(n.A,{onClick:()=>r.push(e.href),size:"small",type:"text",children:e.label},e.id))})})]})})]})})},98724:(e,t,r)=>{"use strict";r.d(t,{IS:()=>a,Se:()=>i,UE:()=>s,dS:()=>n,kX:()=>l,sP:()=>o,tU:()=>d});let a="LobeHub Cloud",i="LobeHub",s="",n="LobeHub",o={help:void 0,privacy:void 0,terms:void 0},l={discord:"https://discord.gg/AYFPHvv2jT",github:"https://github.com/lobehub",medium:"https://medium.com/@lobehub",x:"https://x.com/lobehub",youtube:"https://www.youtube.com/@lobehub"},d={business:"hello@lobehub.com",support:"support@lobehub.com"}}},e=>{e.O(0,[50838,25065,88440,48727,66304,6312,80176,39016,60590,99663,70949,27596,80812,87508,29883,31031,88612,53809,84663,57755,76181,2049,73750,51053,28162,79643,41952,30791,59744,14453,75927,49615,75431,40371,41490,13985,10048,44974,91165,21221,62393,5010,69668,1921,77358],()=>e(e.s=12684)),_N_E=e.O()}]);