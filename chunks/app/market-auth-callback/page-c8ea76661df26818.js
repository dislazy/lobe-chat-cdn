(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41276],{24559:(e,r,t)=>{Promise.resolve().then(t.bind(t,38238))},38238:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>g});var s=t(28802),o=t(12389),a=t(2608),c=t(38141),n=t(81671),i=t(41073),l=t(7481),u=t(83034),d=t(59121),w=t(20480);let g=()=>{let{t:e}=(0,d.Bd)("marketAuth"),[r,t]=(0,u.useState)("loading"),[g,h]=(0,u.useState)(""),[p,k]=(0,u.useState)(3);return(0,u.useEffect)(()=>{console.log("[MarketAuthCallback] Processing authorization callback");let r=new URLSearchParams(window.location.search),s=r.get("code"),o=r.get("state"),a=r.get("error"),c=r.get("error_description");if(a){console.error("[MarketAuthCallback] Authorization error:",a,c),t("error"),h(e("callback.messages.authFailed",{error:c||a})),window.opener&&window.opener.postMessage({error:c||a,type:"MARKET_AUTH_ERROR"},window.location.origin);return}if(s&&o){console.log("[MarketAuthCallback] Authorization successful, code received"),t("success"),h(e("callback.messages.successWithRedirect")),window.opener&&window.opener.postMessage({code:s,state:o,type:"MARKET_AUTH_SUCCESS"},window.location.origin);let r=3;k(3);let a=setInterval(()=>{k(r-=1),r<=0&&(clearInterval(a),window.close())},1e3)}else console.error("[MarketAuthCallback] Missing code or state parameter"),t("error"),h(e("callback.messages.missingParams")),window.opener&&window.opener.postMessage({error:"Missing authorization parameters",type:"MARKET_AUTH_ERROR"},window.location.origin)},[e]),(0,s.Y)(w.default,{height:"100vh",children:(0,s.Y)(a.A,{style:{alignItems:"center",display:"flex",justifyContent:"center",minHeight:280,minWidth:500,width:"100%"},children:(0,s.Y)(c.Ay,{extra:(()=>{if("error"===r)return(0,s.Y)("button",{onClick:()=>window.close(),style:{backgroundColor:"#ff4d4f",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",fontSize:"14px",padding:"8px 16px"},type:"button",children:e("callback.buttons.close")})})(),icon:(()=>{switch(r){case"success":return(0,s.Y)(o.default,{icon:n.A});case"error":return(0,s.Y)(o.default,{icon:i.A});default:return(0,s.Y)(o.default,{icon:l.A})}})(),status:(()=>{switch(r){case"success":return"success";case"error":return"error";default:return"info"}})(),style:{padding:0},subTitle:"loading"===r?e("callback.messages.processing"):"success"===r?e("callback.messages.successWithCountdown",{countdown:p,message:g}):g,title:(()=>{switch(r){case"loading":return e("callback.titles.loading");case"success":return e("callback.titles.success");case"error":return e("callback.titles.error")}})()})})})}}},e=>{e.O(0,[88440,66304,99663,2049,73750,79643,38141,91743,69668,1921,77358],()=>e(e.s=24559)),_N_E=e.O()}]);