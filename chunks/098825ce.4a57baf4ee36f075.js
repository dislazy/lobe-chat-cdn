"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[99049],{13718:(e,t,n)=>{let s;n.d(t,{D:()=>Aq,t:()=>ga});var a,o,l,h,c,d,u,p,f,g,m,v,y,b,w,A,x,_,S,k,E,C,M,R,T,P,L,I,D,F,N,O,W,j,B,$,z,H,U,V,G,q,X,Y,K,J,Q,Z,ee,et,ei,en,er,es,ea,eo,el,eh,ec,ed,eu,ep,ef,eg,em,ev,ey,eb,ew,eA,ex,e_,eS,ek,eE,eC,eM,eR,eT,eP,eL,eI,eD,eF,eN,eO,eW,ej,eB,e$,ez,eH,eU,eV,eG,eq,eX,eY,eK,eJ,eQ,eZ,e0,e1,e2,e3,e5,e4,e6,e8,e7,e9,te,tt,ti,tn,tr,ts,ta,to,tl,th,tc,td,tu,tp,tf,tg,tm,tv,ty,tb,tw,tA,tx,t_,tS,tk,tE,tC,tM,tR,tT,tP,tL,tI,tD,tF,tN,tO,tW,tj,tB,t$,tz,tH,tU,tV,tG,tq,tX,tY,tK,tJ,tQ,tZ,t0,t1,t2,t3,t5,t4,t6,t8,t7,t9,ie,it,ii,ir,is,ia,io,il,ih,ic,id,iu,ip,ig,im,iv,iy,ib,iw,iA,ix,i_,iS,ik,iE,iC,iM,iR,iT,iP,iL,iI,iD,iF,iN,iO,iW,ij,iB,i$,iz,iH,iU,iV,iG,iq,iX,iY,iK,iJ,iQ,iZ,i0,i1,i2,i3,i5,i4,i6,i8,i7,i9,ne,nt,ni,nn,nr,ns,na,no,nl,nh,nc,nd,nu,np,nf,ng,nm,nv,ny,nb,nw,nA,nx,n_,nS,nk,nE,nC,nM,nR,nT,nP,nL,nI,nD,nF,nN,nO,nW,nj,nB,n$,nz,nH,nU,nV,nG,nq,nX,nY,nK,nJ,nQ,nZ,n0,n1,n2,n3,n5,n4,n6,n8,n7,n9,re,rt,ri,rn,rr,rs,ra,ro,rl,rh,rc,rd,ru,rp,rf,rg,rm,rv,ry,rb,rw,rA,rx,r_,rS,rk,rE,rC,rM,rR,rT,rP,rL,rI,rD,rF,rN,rO,rW,rj,rB,r$,rz,rH,rU,rV,rG,rq,rX,rY,rK,rJ,rQ,rZ,r0,r1,r2,r3,r5,r4,r6,r8,r7,r9,se,st,si,sn,sr,ss,sa,so,sl,sh,sc,sd,su,sp,sf,sg,sm,sv,sy,sb,sw,sA,sx,s_,sS,sk,sE,sC,sM,sR,sT,sP,sL,sI,sD,sF,sN,sO,sW,sj,sB,s$,sz,sH,sU,sV,sG,sq,sX,sY,sK,sJ,sQ,sZ,s0,s1,s2,s3,s5,s4,s6,s8,s7,s9,ae,at,ai,an,ar,as,aa,ao,al,ah,ac,ad,au,ap,af,ag,am,av,ay,ab,aw,aA,ax,a_,aS,ak,aE,aC,aM,aR,aT,aP,aL,aI,aD,aF,aN,aO,aW,aj,aB,a$,az,aH,aU,aV,aG,aq,aX,aY,aK,aJ,aQ,aZ,a0,a1,a2,a3,a5,a4,a6,a8,a7,a9,oe,ot,oi,on,or,os,oa,oo,ol,oh,oc,od,ou,op,of,og,om,ov,oy,ob,ow,oA,ox,o_,oS,ok,oE,oC,oM,oR,oT,oP,oL,oI,oD,oF,oN,oO,oW,oj,oB,o$,oz,oH,oU,oV,oG,oq,oX,oY,oK,oJ,oQ,oZ,o0,o1,o2,o3,o5,o4,o6,o8,o7,o9,le,lt,li,ln,lr,ls,la,lo,ll,lh,lc,ld,lu,lp,lf,lg,lm,lv,ly,lb,lw,lA,lx,l_,lS,lk,lE,lC,lM,lR,lT,lP,lL,lI,lD,lF,lN,lO,lW,lj,lB,l$,lz,lH,lU,lV,lG,lq,lX,lY,lK,lJ,lQ,lZ,l0,l1,l2,l3,l5,l4,l6,l8,l7,l9,he,ht,hi,hn,hr,hs,ha,ho,hl,hh,hc,hd,hu,hp,hf,hg,hm,hv,hy,hb,hw,hA,hx,h_,hS,hk,hE,hC,hM,hR=n(54898),hT=n(83034),hP=Object.defineProperty,hL=(e,t,n)=>{let s;return(s="symbol"!=typeof t?t+"":t)in e?hP(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,n},hI=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},hD=(e,t,n)=>(hI(e,t,"read from private field"),n?n.call(e):t.get(e)),hF=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},hN=(e,t,n,s)=>(hI(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),hO=(e,t,n,s)=>({set _(i){hN(e,t,i,n)},get _(){return hD(e,t,s)}}),hW=(e,t,n)=>(hI(e,t,"access private method"),n),hj="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof n.g?n.g:"u">typeof self?self:{};function hB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var h$=function(e){return e&&e.Math===Math&&e},hz=h$("object"==typeof globalThis&&globalThis)||h$("object"==typeof window&&window)||h$("object"==typeof self&&self)||h$("object"==typeof hj&&hj)||h$("object"==typeof hj&&hj)||function(){return this}()||Function("return this")(),hH={},hU=function(e){try{return!!e()}catch{return!0}},hV=!hU(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}),hG=!hU(function(){var e=(function(){}).bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}),hq=Function.prototype.call,hX=hG?hq.bind(hq):function(){return hq.apply(hq,arguments)},hY={},hK={}.propertyIsEnumerable,hJ=Object.getOwnPropertyDescriptor;hY.f=hJ&&!hK.call({1:2},1)?function(e){var t=hJ(this,e);return!!t&&t.enumerable}:hK;var hQ,hZ,h0=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},h1=Function.prototype,h2=h1.call,h3=hG&&h1.bind.bind(h2,h2),h5=hG?h3:function(e){return function(){return h2.apply(e,arguments)}},h4=h5({}.toString),h6=h5("".slice),h8=Object,h7=h5("".split),h9=hU(function(){return!h8("z").propertyIsEnumerable(0)})?function(e){return"String"===h6(h4(e),8,-1)?h7(e,""):h8(e)}:h8,ce=function(e){return null==e},ct=TypeError,ci=function(e){if(ce(e))throw new ct("Can't call method on "+e);return e},cn=function(e){return h9(ci(e))},cr="object"==typeof document&&document.all,cs=typeof cr>"u"&&void 0!==cr?function(e){return"function"==typeof e||e===cr}:function(e){return"function"==typeof e},ca=function(e){return"object"==typeof e?null!==e:cs(e)},co=function(e,t){var n;return arguments.length<2?cs(n=hz[e])?n:void 0:hz[e]&&hz[e][t]},cl=h5({}.isPrototypeOf),ch="u">typeof navigator&&String(navigator.userAgent)||"",cc=hz.process,cd=hz.Deno,cu=cc&&cc.versions||cd&&cd.version,cp=cu&&cu.v8;cp&&(hZ=(hQ=cp.split("."))[0]>0&&hQ[0]<4?1:+(hQ[0]+hQ[1])),!hZ&&ch&&(!(hQ=ch.match(/Edge\/(\d+)/))||hQ[1]>=74)&&(hQ=ch.match(/Chrome\/(\d+)/))&&(hZ=+hQ[1]);var cf=hZ,cg=hz.String,cm=!!Object.getOwnPropertySymbols&&!hU(function(){var e=Symbol("symbol detection");return!cg(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&cf&&cf<41}),cv=cm&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,cy=Object,cb=cv?function(e){return"symbol"==typeof e}:function(e){var t=co("Symbol");return cs(t)&&cl(t.prototype,cy(e))},cw=String,cA=function(e){try{return cw(e)}catch{return"Object"}},cx=TypeError,c_=function(e){if(cs(e))return e;throw new cx(cA(e)+" is not a function")},cS=TypeError,ck={exports:{}},cE=Object.defineProperty,cC=function(e,t){try{cE(hz,e,{value:t,configurable:!0,writable:!0})}catch{hz[e]=t}return t},cM="__core-js_shared__",cR=ck.exports=hz[cM]||cC(cM,{});(cR.versions||(cR.versions=[])).push({version:"3.37.1",mode:"global",copyright:"\xa9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"});var cT=ck.exports,cP=function(e,t){return cT[e]||(cT[e]=t||{})},cL=Object,cI=h5({}.hasOwnProperty),cD=Object.hasOwn||function(e,t){return cI(cL(ci(e)),t)},cF=0,cN=Math.random(),cO=h5(1..toString),cW=function(e){return"Symbol("+(void 0===e?"":e)+")_"+cO(++cF+cN,36)},cj=hz.Symbol,cB=cP("wks"),c$=cv?cj.for||cj:cj&&cj.withoutSetter||cW,cz=function(e,t){var n=e[t];return ce(n)?void 0:c_(n)},cH=function(e,t){var n,s;if("string"===t&&cs(n=e.toString)&&!ca(s=hX(n,e))||cs(n=e.valueOf)&&!ca(s=hX(n,e))||"string"!==t&&cs(n=e.toString)&&!ca(s=hX(n,e)))return s;throw new cS("Can't convert object to primitive value")},cU=TypeError,cV=(cD(cB,ds="toPrimitive")||(cB[ds]=cm&&cD(cj,ds)?cj[ds]:c$("Symbol."+ds)),cB[ds]),cG=function(e,t){if(!ca(e)||cb(e))return e;var n,s=cz(e,cV);if(s){if(void 0===t&&(t="default"),!ca(n=hX(s,e,t))||cb(n))return n;throw new cU("Can't convert object to primitive value")}return void 0===t&&(t="number"),cH(e,t)},cq=function(e){var t=cG(e,"string");return cb(t)?t:t+""},cX=hz.document,cY=ca(cX)&&ca(cX.createElement),cK=!hV&&!hU(function(){return 7!==Object.defineProperty(cY?cX.createElement("div"):{},"a",{get:function(){return 7}}).a}),cJ=Object.getOwnPropertyDescriptor;hH.f=hV?cJ:function(e,t){if(e=cn(e),t=cq(t),cK)try{return cJ(e,t)}catch{}if(cD(e,t))return h0(!hX(hY.f,e,t),e[t])};var cQ={},cZ=hV&&hU(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype}),c0=String,c1=TypeError,c2=function(e){if(ca(e))return e;throw new c1(c0(e)+" is not an object")},c3=TypeError,c5=Object.defineProperty,c4=Object.getOwnPropertyDescriptor,c6="enumerable",c8="configurable",c7="writable";cQ.f=hV?cZ?function(e,t,n){if(c2(e),t=cq(t),c2(n),"function"==typeof e&&"prototype"===t&&"value"in n&&c7 in n&&!n[c7]){var s=c4(e,t);s&&s[c7]&&(e[t]=n.value,n={configurable:c8 in n?n[c8]:s[c8],enumerable:c6 in n?n[c6]:s[c6],writable:!1})}return c5(e,t,n)}:c5:function(e,t,n){if(c2(e),t=cq(t),c2(n),cK)try{return c5(e,t,n)}catch{}if("get"in n||"set"in n)throw new c3("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var c9=hV?function(e,t,n){return cQ.f(e,t,h0(1,n))}:function(e,t,n){return e[t]=n,e},de={exports:{}},dt=Function.prototype,di=hV&&Object.getOwnPropertyDescriptor,dn=cD(dt,"name")&&(!hV||hV&&di(dt,"name").configurable),dr=h5(Function.toString);cs(cT.inspectSource)||(cT.inspectSource=function(e){return dr(e)});var ds,da,dl,dh,dc=cT.inspectSource,dd=hz.WeakMap,du=cs(dd)&&/native code/.test(String(dd)),dp=cP("keys"),df={},dg="Object already initialized",dm=hz.TypeError,dv=hz.WeakMap;if(du||cT.state){var dy=cT.state||(cT.state=new dv);dy.get=dy.get,dy.has=dy.has,dy.set=dy.set,da=function(e,t){if(dy.has(e))throw new dm(dg);return t.facade=e,dy.set(e,t),t},dl=function(e){return dy.get(e)||{}},dh=function(e){return dy.has(e)}}else{var db,dw=dp[db="state"]||(dp[db]=cW(db));df[dw]=!0,da=function(e,t){if(cD(e,dw))throw new dm(dg);return t.facade=e,c9(e,dw,t),t},dl=function(e){return cD(e,dw)?e[dw]:{}},dh=function(e){return cD(e,dw)}}var dA=dl,dx=function(e){return dh(e)?dl(e):da(e,{})},d_=String,dS=Object.defineProperty,dk=h5("".slice),dE=h5("".replace),dC=h5([].join),dM=hV&&!hU(function(){return 8!==dS(function(){},"length",{value:8}).length}),dR=String(String).split("String"),dT=de.exports=function(e,t,n){"Symbol("===dk(d_(t),0,7)&&(t="["+dE(d_(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!cD(e,"name")||dn&&e.name!==t)&&(hV?dS(e,"name",{value:t,configurable:!0}):e.name=t),dM&&n&&cD(n,"arity")&&e.length!==n.arity&&dS(e,"length",{value:n.arity});try{n&&cD(n,"constructor")&&n.constructor?hV&&dS(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var s=dx(e);return cD(s,"source")||(s.source=dC(dR,"string"==typeof t?t:"")),e};Function.prototype.toString=dT(function(){return cs(this)&&dA(this).source||dc(this)},"toString");var dP=de.exports,dL={},dI=Math.ceil,dD=Math.floor,dF=Math.trunc||function(e){var t=+e;return(t>0?dD:dI)(t)},dN=function(e){var t=+e;return t!=t||0===t?0:dF(t)},dO=Math.max,dW=Math.min,dj=Math.min,dB=function(e){var t=dN(e);return t>0?dj(t,0x1fffffffffffff):0},d$=function(e,t){var n=dN(e);return n<0?dO(n+t,0):dW(n,t)},dz=function(e){return function(t,n,s){var a=cn(t),o=dB(a.length);if(0===o)return!e&&-1;var l,h=d$(s,o);if(e&&n!=n){for(;o>h;)if((l=a[h++])!=l)return!0}else for(;o>h;h++)if((e||h in a)&&a[h]===n)return e||h||0;return!e&&-1}},dH={includes:dz(!0),indexOf:dz(!1)}.indexOf,dU=h5([].push),dV=function(e,t){var n,s=cn(e),a=0,o=[];for(n in s)!cD(df,n)&&cD(s,n)&&dU(o,n);for(;t.length>a;)cD(s,n=t[a++])&&(~dH(o,n)||dU(o,n));return o},dG=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");dL.f=Object.getOwnPropertyNames||function(e){return dV(e,dG)};var dq={};dq.f=Object.getOwnPropertySymbols;var dX=h5([].concat),dY=co("Reflect","ownKeys")||function(e){var t=dL.f(c2(e)),n=dq.f;return n?dX(t,n(e)):t},dK=/#|\.prototype\./,dJ=function(e,t){var n=dZ[dQ(e)];return n===d1||n!==d0&&(cs(t)?hU(t):!!t)},dQ=dJ.normalize=function(e){return String(e).replace(dK,".").toLowerCase()},dZ=dJ.data={},d0=dJ.NATIVE="N",d1=dJ.POLYFILL="P",d2=hH.f,d3=function(e,t,n,s){s||(s={});var a=s.enumerable,o=void 0!==s.name?s.name:t;if(cs(n)&&dP(n,o,s),s.global)a?e[t]=n:cC(t,n);else{try{s.unsafe?e[t]&&(a=!0):delete e[t]}catch{}a?e[t]=n:cQ.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e},d5=function(e,t,n){for(var s=dY(t),a=cQ.f,o=hH.f,l=0;l<s.length;l++){var h=s[l];cD(e,h)||n&&cD(n,h)||a(e,h,o(t,h))}},d4={},d6=TypeError,d8=function(e){var t,n;this.promise=new e(function(e,s){if(void 0!==t||void 0!==n)throw new d6("Bad Promise constructor");t=e,n=s}),this.resolve=c_(t),this.reject=c_(n)};d4.f=function(e){return new d8(e)},!function(e,t){var n,s,a,o,l,h=e.target,c=e.global,d=e.stat;if(n=c?hz:d?hz[h]||cC(h,{}):hz[h]&&hz[h].prototype)for(s in t){if(o=t[s],a=e.dontCallGetSet?(l=d2(n,s))&&l.value:n[s],!dJ(c?s:h+(d?".":"#")+s,e.forced)&&void 0!==a){if(typeof o==typeof a)continue;d5(o,a)}(e.sham||a&&a.sham)&&c9(o,"sham",!0),d3(n,s,o,e)}}({target:"Promise",stat:!0},{withResolvers:function(){var e=d4.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}});var d7,d9,ue={exports:{}},ut=ue.exports={};function ui(){throw Error("setTimeout has not been defined")}function un(){throw Error("clearTimeout has not been defined")}try{d7="function"==typeof setTimeout?setTimeout:ui}catch{d7=ui}try{d9="function"==typeof clearTimeout?clearTimeout:un}catch{d9=un}function ur(e){if(d7===setTimeout)return setTimeout(e,0);if((d7===ui||!d7)&&setTimeout)return d7=setTimeout,setTimeout(e,0);try{return d7(e,0)}catch{try{return d7.call(null,e,0)}catch{return d7.call(this,e,0)}}}var us,ua=[],uo=!1,ul=-1;function uh(){uo&&us&&(uo=!1,us.length?ua=us.concat(ua):ul=-1,ua.length&&uc())}function uc(){if(!uo){var e=ur(uh);uo=!0;for(var t=ua.length;t;){for(us=ua,ua=[];++ul<t;)us&&us[ul].run();ul=-1,t=ua.length}us=null,uo=!1,function(e){if(d9===clearTimeout)return clearTimeout(e);if((d9===un||!d9)&&clearTimeout)return d9=clearTimeout,clearTimeout(e);try{d9(e)}catch{try{return d9.call(null,e)}catch{return d9.call(this,e)}}}(e)}}function ud(e,t){this.fun=e,this.array=t}function uu(){}ut.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ua.push(new ud(e,t)),1!==ua.length||uo||ur(uc)},ud.prototype.run=function(){this.fun.apply(null,this.array)},ut.title="browser",ut.browser=!0,ut.env={},ut.argv=[],ut.version="",ut.versions={},ut.on=uu,ut.addListener=uu,ut.once=uu,ut.off=uu,ut.removeListener=uu,ut.removeAllListeners=uu,ut.emit=uu,ut.prependListener=uu,ut.prependOnceListener=uu,ut.listeners=function(e){return[]},ut.binding=function(e){throw Error("process.binding is not supported")},ut.cwd=function(){return"/"},ut.chdir=function(e){throw Error("process.chdir is not supported")},ut.umask=function(){return 0};let up=(pl=ue.exports)&&pl.__esModule&&Object.prototype.hasOwnProperty.call(pl,"default")?pl.default:pl;var uf=function(){return(uf=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function ug(e,t,n){if(n||2==arguments.length)for(var s,a=0,o=t.length;a<o;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))}var um=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,uv=(ph=function(e){return um.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)},pc=Object.create(null),function(e){return void 0===pc[e]&&(pc[e]=ph(e)),pc[e]}),uy="-ms-",ub="-moz-",uw="-webkit-",uA="comm",ux="rule",u_="decl",uS="@keyframes",uk=Math.abs,uE=String.fromCharCode,uC=Object.assign;function uM(e,t){return(e=t.exec(e))?e[0]:e}function uR(e,t,n){return e.replace(t,n)}function uT(e,t,n){return e.indexOf(t,n)}function uP(e,t){return 0|e.charCodeAt(t)}function uL(e,t,n){return e.slice(t,n)}function uI(e){return e.length}function uD(e,t){return t.push(e),e}function uF(e,t){return e.filter(function(e){return!uM(e,t)})}var uN=1,uO=1,uW=0,uj=0,uB=0,u$="";function uz(e,t,n,s,a,o,l,h){return{value:e,root:t,parent:n,type:s,props:a,children:o,line:uN,column:uO,length:l,return:"",siblings:h}}function uH(e,t){return uC(uz("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function uU(e){for(;e.root;)e=uH(e.root,{children:[e]});uD(e,e.siblings)}function uV(){return uB=uj<uW?uP(u$,uj++):0,uO++,10===uB&&(uO=1,uN++),uB}function uG(){return uP(u$,uj)}function uq(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function uX(e){var t,n;return(t=uj-1,n=function e(t){for(;uV();)switch(uB){case t:return uj;case 34:case 39:34!==t&&39!==t&&e(uB);break;case 40:41===t&&e(t);break;case 92:uV()}return uj}(91===e?e+2:40===e?e+1:e),uL(u$,t,n)).trim()}function uY(e,t,n,s,a,o,l,h,c,d,u,p){for(var f=a-1,g=0===a?o:[""],m=g.length,v=0,y=0,b=0;v<s;++v)for(var w=0,A=uL(e,f+1,f=uk(y=l[v])),x=e;w<m;++w)(x=(y>0?g[w]+" "+A:uR(A,/&\f/g,g[w])).trim())&&(c[b++]=x);return uz(e,t,n,0===a?ux:h,c,d,u,p)}function uK(e,t,n,s,a){return uz(e,t,n,u_,uL(e,0,s),uL(e,s+1,-1),s,a)}function uJ(e,t){for(var n="",s=0;s<e.length;s++)n+=t(e[s],s,e,t)||"";return n}var uQ={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},uZ="u">typeof up&&void 0!==up.env&&(up.env.REACT_APP_SC_ATTR||up.env.SC_ATTR)||"data-styled",u0="active",u1="data-styled-version",u2="6.1.11",u3=`/*!sc*/
`,u5="u">typeof window&&"HTMLElement"in window,u4=!!("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"u">typeof up&&void 0!==up.env&&void 0!==up.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==up.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==up.env.REACT_APP_SC_DISABLE_SPEEDY&&up.env.REACT_APP_SC_DISABLE_SPEEDY:"u">typeof up&&void 0!==up.env&&void 0!==up.env.SC_DISABLE_SPEEDY&&""!==up.env.SC_DISABLE_SPEEDY?"false"!==up.env.SC_DISABLE_SPEEDY&&up.env.SC_DISABLE_SPEEDY:"production"!==up.env.NODE_ENV),u6=/invalid hook call/i,u8=new Set,u7=function(e,t){if("production"!==up.env.NODE_ENV){var n="The component ".concat(e).concat(t?' with the id of "'.concat(t,'"'):"",` has been created dynamically.
`)+`You may see this warning because you've called styled inside another component.
To resolve this only create new StyledComponents outside of any render method and function component.`,s=console.error;try{var a=!0;console.error=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];u6.test(e)?(a=!1,u8.delete(n)):s.apply(void 0,ug([e],t,!1))},(0,hT.useRef)(),a&&!u8.has(n)&&(console.warn(n),u8.add(n))}catch(e){u6.test(e.message)&&u8.delete(n)}finally{console.error=s}}},u9=Object.freeze([]),pe=Object.freeze({}),pt=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),pi=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,pn=/(^-|-$)/g;function pr(e){return e.replace(pi,"-").replace(pn,"")}var ps=/(a)(d)/gi,pa=function(e){return String.fromCharCode(e+(e>25?39:97))};function po(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=pa(t%52)+n;return(pa(t%52)+n).replace(ps,"$1-$2")}var pl,ph,pc,pd,pu=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},pp=function(e){return pu(5381,e)};function pf(e){return"production"!==up.env.NODE_ENV&&"string"==typeof e&&e||e.displayName||e.name||"Component"}function pg(e){return"string"==typeof e&&("production"===up.env.NODE_ENV||e.charAt(0)===e.charAt(0).toLowerCase())}var pm="function"==typeof Symbol&&Symbol.for,pv=pm?Symbol.for("react.memo"):60115,py=pm?Symbol.for("react.forward_ref"):60112,pb={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},pw={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},pA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},px=((pd={})[py]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},pd[pv]=pA,pd);function p_(e){return("type"in e&&e.type.$$typeof)===pv?pA:"$$typeof"in e?px[e.$$typeof]:pb}var pS=Object.defineProperty,pk=Object.getOwnPropertyNames,pE=Object.getOwnPropertySymbols,pC=Object.getOwnPropertyDescriptor,pM=Object.getPrototypeOf,pR=Object.prototype;function pT(e){return"function"==typeof e}function pP(e){return"object"==typeof e&&"styledComponentId"in e}function pL(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function pI(e,t){if(0===e.length)return"";for(var n=e[0],s=1;s<e.length;s++)n+=e[s];return n}function pD(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function pF(e,t){Object.defineProperty(e,"toString",{value:t})}var pN="production"!==up.env.NODE_ENV?{1:`Cannot create styled-component for component: %s.

`,2:`Can't collect styles once you've consumed a \`ServerStyleSheet\`'s styles! \`ServerStyleSheet\` is a one off instance for each server-side render cycle.

- Are you trying to reuse it across renders?
- Are you accidentally calling collectStyles twice?

`,3:`Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.

`,4:`The \`StyleSheetManager\` expects a valid target or sheet prop!

- Does this error occur on the client and is your target falsy?
- Does this error occur on the server and is the sheet falsy?

`,5:`The clone method cannot be used on the client!

- Are you running in a client-like environment on the server?
- Are you trying to run SSR on the client?

`,6:`Trying to insert a new style tag, but the given Node is unmounted!

- Are you using a custom target that isn't mounted?
- Does your document not have a valid head element?
- Have you accidentally removed a style tag manually?

`,7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:`ThemeProvider: Please make your "theme" prop an object.

`,9:"Missing document `<head>`\n\n",10:`Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021

`,11:`_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.

`,12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:`%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.

`,14:`ThemeProvider: "theme" prop is required.

`,15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:`Reached the limit of how many styled components may be created at group %s.
You may only create up to 1,073,741,824 components. If you're creating components dynamically,
as for instance in your render method then you may be running into this limitation.

`,17:`CSSStyleSheet could not be found on HTMLStyleElement.
Has styled-components' style tag been unmounted or altered by another script?
`,18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function pO(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],s=[],a=1,o=e.length;a<o;a+=1)s.push(e[a]);return s.forEach(function(e){n=n.replace(/%[a-z]/,e)}),n}function pW(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"production"===up.env.NODE_ENV?Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):"")):Error(pO.apply(void 0,ug([pN[e]],t,!1)).trim())}var pj=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,a=s;e>=a;)if((a<<=1)<0)throw pW(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(n),this.length=a;for(var o=s;o<a;o++)this.groupSizes[o]=0}for(var l=this.indexOfGroup(e+1),h=(o=0,t.length);o<h;o++)this.tag.insertRule(l,t[o])&&(this.groupSizes[e]++,l++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),s=n+t;this.groupSizes[e]=0;for(var a=n;a<s;a++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],s=this.indexOfGroup(e),a=s+n,o=s;o<a;o++)t+="".concat(this.tag.getRule(o)).concat(u3);return t},e}(),pB=new Map,p$=new Map,pz=1,pH=function(e){if(pB.has(e))return pB.get(e);for(;p$.has(pz);)pz++;var t=pz++;if("production"!==up.env.NODE_ENV&&((0|t)<0||t>0x40000000))throw pW(16,"".concat(t));return pB.set(e,t),p$.set(t,e),t},pU=function(e,t){pz=t+1,pB.set(e,t),p$.set(t,e)},pV="style[".concat(uZ,"][").concat(u1,'="').concat(u2,'"]'),pG=new RegExp("^".concat(uZ,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),pq=function(e,t,n){for(var s,a=n.split(","),o=0,l=a.length;o<l;o++)(s=a[o])&&e.registerName(t,s)},pX=function(e,t){for(var n,s=(null!=(n=t.textContent)?n:"").split(u3),a=[],o=0,l=s.length;o<l;o++){var h=s[o].trim();if(h){var c=h.match(pG);if(c){var d=0|parseInt(c[1],10),u=c[2];0!==d&&(pU(u,d),pq(e,u,c[3]),e.getTag().insertRules(d,a)),a.length=0}else a.push(h)}}},pY=function(e){var t,s=document.head,a=e||s,o=document.createElement("style"),l=(t=Array.from(a.querySelectorAll("style[".concat(uZ,"]"))))[t.length-1],h=void 0!==l?l.nextSibling:null;o.setAttribute(uZ,u0),o.setAttribute(u1,u2);var c=n.nc;return c&&o.setAttribute("nonce",c),a.insertBefore(o,h),o},pK=function(){function e(e){this.element=pY(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,s=t.length;n<s;n++){var a=t[n];if(a.ownerNode===e)return a}throw pW(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),pJ=function(){function e(e){this.element=pY(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),pQ=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),pZ=u5,p0={isServer:!u5,useCSSOMInjection:!u4},p1=function(){function e(e,t,n){void 0===e&&(e=pe),void 0===t&&(t={});var s=this;this.options=uf(uf({},p0),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&u5&&pZ&&(pZ=!1,function(e){for(var t=document.querySelectorAll(pV),n=0,s=t.length;n<s;n++){var a=t[n];a&&a.getAttribute(uZ)!==u0&&(pX(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this)),pF(this,function(){for(var e=s.getTag(),t=e.length,n="",a=0;a<t;a++)!function(t){var a=p$.get(t);if(void 0===a)return;var o=s.names.get(a),l=e.getGroup(t);if(void 0!==o&&0!==l.length){var h="".concat(uZ,".g").concat(t,'[id="').concat(a,'"]'),c="";void 0!==o&&o.forEach(function(e){e.length>0&&(c+="".concat(e,","))}),n+="".concat(l).concat(h,'{content:"').concat(c,'"}').concat(u3)}}(a);return n})}return e.registerId=function(e){return pH(e)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(uf(uf({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){var e,t,n;return this.tag||(this.tag=(t=(e=this.options).useCSSOMInjection,n=e.target,new pj(e.isServer?new pQ(n):t?new pK(n):new pJ(n))))},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(pH(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(pH(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(pH(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),p2=/&/g,p3=/^\s*\/\/.*$/gm,p5=new p1,p4=(c=void 0===(h=pe.options)?pe:h,u=void 0===(d=pe.plugins)?u9:d,p=function(e,t,n){return n.startsWith(o)&&n.endsWith(o)&&n.replaceAll(o,"").length>0?".".concat(a):e},(f=u.slice()).push(function(e){e.type===ux&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(p2,o).replace(l,p))}),c.prefix&&f.push(function(e,t,n,s){if(e.length>-1&&!e.return)switch(e.type){case u_:e.return=function e(t,n,s){var a;switch(a=n,45^uP(t,0)?(((a<<2^uP(t,0))<<2^uP(t,1))<<2^uP(t,2))<<2^uP(t,3):0){case 5103:return uw+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return uw+t+t;case 4789:return ub+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return uw+t+ub+t+uy+t+t;case 5936:switch(uP(t,n+11)){case 114:return uw+t+uy+uR(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return uw+t+uy+uR(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return uw+t+uy+uR(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return uw+t+uy+t+t;case 6165:return uw+t+uy+"flex-"+t+t;case 5187:return uw+t+uR(t,/(\w+).+(:[^]+)/,uw+"box-$1$2"+uy+"flex-$1$2")+t;case 5443:return uw+t+uy+"flex-item-"+uR(t,/flex-|-self/g,"")+(uM(t,/flex-|baseline/)?"":uy+"grid-row-"+uR(t,/flex-|-self/g,""))+t;case 4675:return uw+t+uy+"flex-line-pack"+uR(t,/align-content|flex-|-self/g,"")+t;case 5548:return uw+t+uy+uR(t,"shrink","negative")+t;case 5292:return uw+t+uy+uR(t,"basis","preferred-size")+t;case 6060:return uw+"box-"+uR(t,"-grow","")+uw+t+uy+uR(t,"grow","positive")+t;case 4554:return uw+uR(t,/([^-])(transform)/g,"$1"+uw+"$2")+t;case 6187:return uR(uR(uR(t,/(zoom-|grab)/,uw+"$1"),/(image-set)/,uw+"$1"),t,"")+t;case 5495:case 3959:return uR(t,/(image-set\([^]*)/,uw+"$1$`$1");case 4968:return uR(uR(t,/(.+:)(flex-)?(.*)/,uw+"box-pack:$3"+uy+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+uw+t+t;case 4200:if(!uM(t,/flex-|baseline/))return uy+"grid-column-align"+uL(t,n)+t;break;case 2592:case 3360:return uy+uR(t,"template-","")+t;case 4384:case 3616:return s&&s.some(function(e,t){return n=t,uM(e.props,/grid-\w+-end/)})?~uT(t+(s=s[n].value),"span",0)?t:uy+uR(t,"-start","")+t+uy+"grid-row-span:"+(~uT(s,"span",0)?uM(s,/\d+/):uM(s,/\d+/)-uM(t,/\d+/))+";":uy+uR(t,"-start","")+t;case 4896:case 4128:return s&&s.some(function(e){return uM(e.props,/grid-\w+-start/)})?t:uy+uR(uR(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return uR(t,/(.+)-inline(.+)/,uw+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(uI(t)-1-n>6)switch(uP(t,n+1)){case 109:if(45!==uP(t,n+4))break;case 102:return uR(t,/(.+:)(.+)-([^]+)/,"$1"+uw+"$2-$3$1"+ub+(108==uP(t,n+3)?"$3":"$2-$3"))+t;case 115:return~uT(t,"stretch",0)?e(uR(t,"stretch","fill-available"),n,s)+t:t}break;case 5152:case 5920:return uR(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(e,n,s,a,o,l,h){return uy+n+":"+s+h+(a?uy+n+"-span:"+(o?l:l-s)+h:"")+t});case 4949:if(121===uP(t,n+6))return uR(t,":",":"+uw)+t;break;case 6444:switch(uP(t,45===uP(t,14)?18:11)){case 120:return uR(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+uw+(45===uP(t,14)?"inline-":"")+"box$3$1"+uw+"$2$3$1"+uy+"$2box$3")+t;case 100:return uR(t,":",":"+uy)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return uR(t,"scroll-","scroll-snap-")+t}return t}(e.value,e.length,n);return;case uS:return uJ([uH(e,{value:uR(e.value,"@","@"+uw)})],s);case ux:if(e.length){var a,o;return a=n=e.props,o=function(t){switch(uM(t,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":uU(uH(e,{props:[uR(t,/:(read-\w+)/,":"+ub+"$1")]})),uU(uH(e,{props:[t]})),uC(e,{props:uF(n,s)});break;case"::placeholder":uU(uH(e,{props:[uR(t,/:(plac\w+)/,":"+uw+"input-$1")]})),uU(uH(e,{props:[uR(t,/:(plac\w+)/,":"+ub+"$1")]})),uU(uH(e,{props:[uR(t,/:(plac\w+)/,uy+"input-$1")]})),uU(uH(e,{props:[t]})),uC(e,{props:uF(n,s)})}return""},a.map(o).join("")}}}),f.push(function(e,t,n,s){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case u_:return e.return=e.return||e.value;case uA:return"";case uS:return e.return=e.value+"{"+uJ(e.children,s)+"}";case ux:if(!uI(e.value=e.props.join(",")))return""}return uI(n=uJ(e.children,s))?e.return=e.value+"{"+n+"}":""}),(g=function(e,t,n,s){void 0===t&&(t=""),void 0===n&&(n=""),void 0===s&&(s="&"),a=s,o=t,l=RegExp("\\".concat(o,"\\b"),"g");var h,d,u,p,g,m,v=e.replace(p3,""),y=(g=function e(t,n,s,a,o,l,h,c,d){for(var u,p,f,g,m=0,v=0,y=h,b=0,w=0,A=0,x=1,_=1,S=1,k=0,E="",C=o,M=l,R=a,T=E;_;)switch(A=k,k=uV()){case 40:if(108!=A&&58==uP(T,y-1)){-1!=uT(T+=uR(uX(k),"&","&\f"),"&\f",uk(m?c[m-1]:0))&&(S=-1);break}case 34:case 39:case 91:T+=uX(k);break;case 9:case 10:case 13:case 32:T+=function(e){for(;(uB=uG())&&uB<33;)uV();return uq(e)>2||uq(uB)>3?"":" "}(A);break;case 92:T+=function(e,t){for(var n;--t&&uV()&&!(uB<48||uB>102||uB>57&&uB<65||uB>70&&uB<97););return n=uj+(t<6&&32==uG()&&32==uV()),uL(u$,e,n)}(uj-1,7);continue;case 47:switch(uG()){case 42:case 47:uD((u=function(e,t){for(;uV()&&e+uB!==57&&(e+uB!==84||47!==uG()););return"/*"+uL(u$,t,uj-1)+"*"+uE(47===e?e:uV())}(uV(),uj),p=n,f=s,g=d,uz(u,p,f,uA,uE(uB),uL(u,2,-2),0,g)),d);break;default:T+="/"}break;case 123*x:c[m++]=uI(T)*S;case 125*x:case 59:case 0:switch(k){case 0:case 125:_=0;case 59+v:-1==S&&(T=uR(T,/\f/g,"")),w>0&&uI(T)-y&&uD(w>32?uK(T+";",a,s,y-1,d):uK(uR(T," ","")+";",a,s,y-2,d),d);break;case 59:T+=";";default:if(uD(R=uY(T,n,s,m,v,o,c,E,C=[],M=[],y,l),l),123===k)if(0===v)e(T,n,R,R,C,l,y,c,M);else switch(99===b&&110===uP(T,3)?100:b){case 100:case 108:case 109:case 115:e(t,R,R,a&&uD(uY(t,R,R,0,0,o,c,E,o,C=[],y,M),M),o,M,y,c,a?C:M);break;default:e(T,R,R,R,[""],M,0,c,M)}}m=v=w=0,x=S=1,E=T="",y=h;break;case 58:y=1+uI(T),w=A;default:if(x<1){if(123==k)--x;else if(125==k&&0==x++&&125==(uB=uj>0?uP(u$,--uj):0,uO--,10===uB&&(uO=1,uN--),uB))continue}switch(T+=uE(k),k*x){case 38:S=v>0?1:(T+="\f",-1);break;case 44:c[m++]=(uI(T)-1)*S,S=1;break;case 64:45===uG()&&(T+=uX(uV())),b=uG(),v=y=uI(E=T+=function(e){for(;!uq(uG());)uV();return uL(u$,e,uj)}(uj)),k++;break;case 45:45===A&&2==uI(T)&&(x=0)}}return l}("",null,null,null,[""],(p=u=n||t?"".concat(n," ").concat(t," { ").concat(v," }"):v,uN=uO=1,uW=uI(u$=p),uj=0,u=[]),0,[0],u),u$="",g);c.namespace&&(y=function e(t,n){return t.map(function(t){return"rule"===t.type&&(t.value="".concat(n," ").concat(t.value),t.value=t.value.replaceAll(",",",".concat(n," ")),t.props=t.props.map(function(e){return"".concat(n," ").concat(e)})),Array.isArray(t.children)&&"@keyframes"!==t.type&&(t.children=e(t.children,n)),t})}(y,c.namespace));var b=[];return uJ(y,(d=(h=f.concat((m=function(e){return b.push(e)},function(e){e.root||(e=e.return)&&m(e)}))).length,function(e,t,n,s){for(var a="",o=0;o<d;o++)a+=h[o](e,t,n,s)||"";return a})),b}).hash=u.length?u.reduce(function(e,t){return t.name||pW(15),pu(e,t.name)},5381).toString():"",g),p6=hT.createContext({shouldForwardProp:void 0,styleSheet:p5,stylis:p4});function p8(){return(0,hT.useContext)(p6)}p6.Consumer,hT.createContext(void 0);var p7=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=p4);var s=n.name+t.hash;e.hasNameForId(n.id,s)||e.insertRules(n.id,s,t(n.rules,s,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,pF(this,function(){throw pW(12,String(n.name))})}return e.prototype.getName=function(e){return void 0===e&&(e=p4),this.name+e.hash},e}();function p9(e){for(var t="",n=0;n<e.length;n++){var s=e[n];if(1===n&&"-"===s&&"-"===e[0])return e;s>="A"&&s<="Z"?t+="-"+s.toLowerCase():t+=s}return t.startsWith("ms-")?"-"+t:t}var fe=function(e){return null==e||!1===e||""===e},ft=function(e){var t=[];for(var n in e){var s=e[n];e.hasOwnProperty(n)&&!fe(s)&&(Array.isArray(s)&&s.isCss||pT(s)?t.push("".concat(p9(n),":"),s,";"):pD(s)?t.push.apply(t,ug(ug(["".concat(n," {")],ft(s),!1),["}"],!1)):t.push("".concat(p9(n),": ").concat(null==s||"boolean"==typeof s||""===s?"":"number"!=typeof s||0===s||n in uQ||n.startsWith("--")?String(s).trim():"".concat(s,"px"),";")))}return t};function fi(e,t,n,s){if(fe(e))return[];if(pP(e))return[".".concat(e.styledComponentId)];if(pT(e)){if(!pT(e)||e.prototype&&e.prototype.isReactComponent||!t)return[e];var a=e(t);return"production"===up.env.NODE_ENV||"object"!=typeof a||Array.isArray(a)||a instanceof p7||pD(a)||null===a||console.error("".concat(pf(e)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),fi(a,t,n,s)}return e instanceof p7?n?(e.inject(n,s),[e.getName(s)]):[e]:pD(e)?ft(e):Array.isArray(e)?Array.prototype.concat.apply(u9,e.map(function(e){return fi(e,t,n,s)})):[e.toString()]}var fn=pp(u2),fr=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic="production"===up.env.NODE_ENV&&(void 0===n||n.isStatic)&&function(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(pT(n)&&!pP(n))return!1}return!0}(e),this.componentId=t,this.baseHash=pu(fn,t),this.baseStyle=n,p1.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))s=pL(s,this.staticRulesId);else{var a=pI(fi(this.rules,e,t,n)),o=po(pu(this.baseHash,a)>>>0);if(!t.hasNameForId(this.componentId,o)){var l=n(a,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,l)}s=pL(s,o),this.staticRulesId=o}else{for(var h=pu(this.baseHash,n.hash),c="",d=0;d<this.rules.length;d++){var u=this.rules[d];if("string"==typeof u)c+=u,"production"!==up.env.NODE_ENV&&(h=pu(h,u));else if(u){var p=pI(fi(u,e,t,n));h=pu(h,p+d),c+=p}}if(c){var f=po(h>>>0);t.hasNameForId(this.componentId,f)||t.insertRules(this.componentId,f,n(c,".".concat(f),void 0,this.componentId)),s=pL(s,f)}}return s},e}(),fs=hT.createContext(void 0);function fa(e){var t=hT.useContext(fs),n=(0,hT.useMemo)(function(){var n=e.theme;if(!n)throw pW(14);if(pT(n)){var s=n(t);if("production"!==up.env.NODE_ENV&&(null===s||Array.isArray(s)||"object"!=typeof s))throw pW(7);return s}if(Array.isArray(n)||"object"!=typeof n)throw pW(8);return t?uf(uf({},t),n):n},[e.theme,t]);return e.children?hT.createElement(fs.Provider,{value:n},e.children):null}fs.Consumer;var fo={},fl=new Set;function fh(e,t,n){var s,a,o,l,h,c,d=pP(e),u=!pg(e),p=t.attrs,f=void 0===p?u9:p,g=t.componentId,m=void 0===g?(s=t.displayName,a=t.parentComponentId,fo[o="string"!=typeof s?"sc":pr(s)]=(fo[o]||0)+1,l="".concat(o,"-").concat(po(pp(u2+o+fo[o])>>>0)),a?"".concat(a,"-").concat(l):l):g,v=t.displayName,y=void 0===v?pg(e)?"styled.".concat(e):"Styled(".concat(pf(e),")"):v,b=t.displayName&&t.componentId?"".concat(pr(t.displayName),"-").concat(t.componentId):t.componentId||m,w=d&&e.attrs?e.attrs.concat(f).filter(Boolean):f,A=t.shouldForwardProp;if(d&&e.shouldForwardProp){var x=e.shouldForwardProp;if(t.shouldForwardProp){var _=t.shouldForwardProp;A=function(e,t){return x(e,t)&&_(e,t)}}else A=x}var S=new fr(n,b,d?e.componentStyle:void 0);function k(e,t){return function(e,t,n){var s,a,o,l=e.attrs,h=e.componentStyle,c=e.defaultProps,d=e.foldedComponentIds,u=e.styledComponentId,p=e.target,f=hT.useContext(fs),g=p8(),m=e.shouldForwardProp||g.shouldForwardProp;"production"!==up.env.NODE_ENV&&(0,hT.useDebugValue)(u);var v=(void 0===(s=c)&&(s=pe),t.theme!==s.theme&&t.theme||f||s.theme||pe),y=function(e,t,n){for(var s,a=uf(uf({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var l=pT(s=e[o])?s(a):s;for(var h in l)a[h]="className"===h?pL(a[h],l[h]):"style"===h?uf(uf({},a[h]),l[h]):l[h]}return t.className&&(a.className=pL(a.className,t.className)),a}(l,t,v),b=y.as||p,w={};for(var A in y)void 0===y[A]||"$"===A[0]||"as"===A||"theme"===A&&y.theme===v||("forwardedAs"===A?w.as=y.forwardedAs:m&&!m(A,b)||(w[A]=y[A],m||"development"!==up.env.NODE_ENV||uv(A)||fl.has(A)||!pt.has(b)||(fl.add(A),console.warn('styled-components: it looks like an unknown prop "'.concat(A,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var x=(a=p8(),o=h.generateAndInjectStyles(y,a.styleSheet,a.stylis),"production"!==up.env.NODE_ENV&&(0,hT.useDebugValue)(o),o);"production"!==up.env.NODE_ENV&&e.warnTooManyClasses&&e.warnTooManyClasses(x);var _=pL(d,u);return x&&(_+=" "+x),y.className&&(_+=" "+y.className),w[pg(b)&&!pt.has(b)?"class":"className"]=_,w.ref=n,(0,hT.createElement)(b,w)}(E,e,t)}k.displayName=y;var E=hT.forwardRef(k);return E.attrs=w,E.componentStyle=S,E.displayName=y,E.shouldForwardProp=A,E.foldedComponentIds=d?pL(e.foldedComponentIds,e.styledComponentId):"",E.styledComponentId=b,E.target=d?e.target:e,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=d?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var s=0;s<t.length;s++)!function e(t,n,s){if(void 0===s&&(s=!1),!s&&!pD(t)&&!Array.isArray(t))return n;if(Array.isArray(n))for(var a=0;a<n.length;a++)t[a]=e(t[a],n[a]);else if(pD(n))for(var a in n)t[a]=e(t[a],n[a]);return t}(e,t[s],!0);return e}({},e.defaultProps,t):t}}),"production"!==up.env.NODE_ENV&&(u7(y,b),h={},c=!1,E.warnTooManyClasses=function(e){!c&&(h[e]=!0,Object.keys(h).length>=200)&&(console.warn("Over ".concat(200," classes were generated for component ").concat(y).concat(b?' with the id of "'.concat(b,'"'):"",`.
`)+`Consider using the attrs method, together with a style object for frequently changed styles.
Example:
  const Component = styled.div.attrs(props => ({
    style: {
      background: props.background,
    },
  }))\`width: 100%;\`

  <Component />`),c=!0,h={})}),pF(E,function(){return".".concat(E.styledComponentId)}),u&&function e(t,n,s){if("string"!=typeof n){if(pR){var a=pM(n);a&&a!==pR&&e(t,a,s)}var o=pk(n);pE&&(o=o.concat(pE(n)));for(var l=p_(t),h=p_(n),c=0;c<o.length;++c){var d=o[c];if(!(d in pw||s&&s[d]||h&&d in h||l&&d in l)){var u=pC(n,d);try{pS(t,d,u)}catch{}}}}return t}(E,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function fc(e,t){for(var n=[e[0]],s=0,a=t.length;s<a;s+=1)n.push(t[s],e[s+1]);return n}var fd=function(e){return Object.assign(e,{isCss:!0})};function fu(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return pT(e)||pD(e)?fd(fi(fc(u9,ug([e],t,!0)))):0===t.length&&1===e.length&&"string"==typeof e[0]?fi(e):fd(fi(fc(e,t)))}var fp=function(e){return function e(t,n,s){if(void 0===s&&(s=pe),!n)throw pW(1,n);var a=function(e){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return t(n,s,fu.apply(void 0,ug([e],a,!1)))};return a.attrs=function(a){return e(t,n,uf(uf({},s),{attrs:Array.prototype.concat(s.attrs,a).filter(Boolean)}))},a.withConfig=function(a){return e(t,n,uf(uf({},s),a))},a}(fh,e)};pt.forEach(function(e){fp[e]=fp(e)}),"production"!==up.env.NODE_ENV&&"u">typeof navigator&&"ReactNative"===navigator.product&&console.warn(`It looks like you've imported 'styled-components' on React Native.
Perhaps you're looking to import 'styled-components/native'?
Read more about this at https://www.styled-components.com/docs/basics#react-native`);var ff="__sc-".concat(uZ,"__");"production"!==up.env.NODE_ENV&&"test"!==up.env.NODE_ENV&&"u">typeof window&&(window[ff]||(window[ff]=0),1===window[ff]&&console.warn(`It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.

See https://s-c.sh/2BAXzed for more info.`),window[ff]+=1);let fg={en:{documentNavInfo:"Document {{ currentFileNo }} of {{ allFilesCount }}",noRendererMessage:"No renderer for file type: {{{ fileType }}}",downloadButtonLabel:"Download file",brokenFile:"Your file is broken. Please check it on your machine.",msgPluginRecipients:"Recipients",msgPluginSender:"Sender",pdfPluginLoading:"Loading...",pdfPluginPageNumber:"Page {{ currentPage }}/{{ allPagesCount }}"},pl:{documentNavInfo:"Dokument {{ currentFileNo }} z {{ allFilesCount }}",noRendererMessage:"Brak funckji renderujcej dla: {{{ fileType }}}",downloadButtonLabel:"Pobierz plik",brokenFile:"Tw\xf3j plik jest uszkodzony. Sprawd go na swoim komputerze.",msgPluginRecipients:"Odbiorcy",msgPluginSender:"Nadawca",pdfPluginLoading:"Wczytywanie...",pdfPluginPageNumber:"Strona {{ currentPage }}/{{ allPagesCount }}"},es:{documentNavInfo:"Documento {{ currentFileNo }} de {{ allFilesCount }}",noRendererMessage:"No hay procesador para el tipo de archivo: {{{ fileType }}}",downloadButtonLabel:"Descargar archivo",brokenFile:"Tu archivo est\xe1 roto. Compru\xe9balo en tu m\xe1quina.",msgPluginRecipients:"Destinatarios",msgPluginSender:"Remitente",pdfPluginLoading:"Cargando...",pdfPluginPageNumber:"P\xe1gina {{ currentPage }}/{{ allPagesCount }}"},de:{documentNavInfo:"Dokument {{ currentFileNo }} von {{ allFilesCount }}",noRendererMessage:"Kein Renderer f\xfcr Dateityp: {{{ fileType }}}",downloadButtonLabel:"Datei herunterladen",brokenFile:"Ihre Datei ist defekt. Bitte \xfcberpr\xfcfen Sie sie auf Ihrem Rechner.",msgPluginRecipients:"Empf\xe4nger",msgPluginSender:"Absender",pdfPluginLoading:"Wird geladen...",pdfPluginPageNumber:"Seite {{ currentPage }}/{{ allPagesCount }}"},it:{documentNavInfo:"Documento {{ currentFileNo }} di {{ allFilesCount }}",noRendererMessage:"Nessun renderer per il tipo di file: {{{ fileType }}}",downloadButtonLabel:"Scarica file",brokenFile:"Il tuo file \xe8 danneggiato. Controllalo sul tuo computer.",msgPluginRecipients:"Destinatari",msgPluginSender:"Mittente",pdfPluginLoading:"Caricamento in corso...",pdfPluginPageNumber:"Pagina {{ currentPage }}/{{ allPagesCount }}"},pt:{documentNavInfo:"Documento {{ currentFileNo }} de {{ allFilesCount }}",noRendererMessage:"Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",downloadButtonLabel:"Baixar arquivo",brokenFile:"Seu arquivo est\xe1 quebrado. Por favor, verifique-o em sua m\xe1quina.",msgPluginRecipients:"Destinat\xe1rios",msgPluginSender:"Remetente",pdfPluginLoading:"Carregando...",pdfPluginPageNumber:"P\xe1gina {{ currentPage }}/{{ allPagesCount }}"},fr:{documentNavInfo:"Document {{ currentFileNo }} de {{ allFilesCount }}",noRendererMessage:"Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",downloadButtonLabel:"T\xe9l\xe9charger le fichier",brokenFile:"Votre fichier est cass\xe9. Veuillez le v\xe9rifier sur votre machine.",msgPluginRecipients:"Destinataires",msgPluginSender:"Exp\xe9diteur",pdfPluginLoading:"Chargement...",pdfPluginPageNumber:"Page {{ currentPage }}/{{ allPagesCount }}"},ar:{documentNavInfo:" {{ currentFileNo }}  {{ allFilesCount }}",noRendererMessage:"{{{ fileType }}} :       ",downloadButtonLabel:" ",brokenFile:"       .",msgPluginRecipients:"",msgPluginSender:"",pdfPluginLoading:" ...",pdfPluginPageNumber:" {{ allPagesCount }} \\ {{ currentPage }}  "},sr:{documentNavInfo:"Dokument {{ currentFileNo }} od {{ allFilesCount }}",noRendererMessage:"Ne postoji pregleda za tip fajla: {{ fileType }}",downloadButtonLabel:"Preuzimanje fajla",brokenFile:"Va fajl nije dobar. Molimo Vas da probate da ga otvorite na vaem raunaru.",msgPluginRecipients:"Primaoci",msgPluginSender:"Poiljalac",pdfPluginLoading:"Uitavanje...",pdfPluginPageNumber:"Strana {{ currentPage }}/{{ allPagesCount }}"},sr_cyr:{documentNavInfo:" {{ currentFileNo }} od {{ allFilesCount }}",noRendererMessage:"     : {{ fileType }}",downloadButtonLabel:" ",brokenFile:"   .          .",msgPluginRecipients:"",msgPluginSender:"",pdfPluginLoading:"...",pdfPluginPageNumber:" {{ currentPage }}/{{ allPagesCount }}"},ja:{documentNavInfo:" {{ currentFileNo }} / {{ allFilesCount }}",noRendererMessage:": {{ fileType }}",downloadButtonLabel:"",brokenFile:"",msgPluginRecipients:"",msgPluginSender:"",pdfPluginLoading:"...",pdfPluginPageNumber:" {{ currentPage }}/{{ allPagesCount }}"},ru:{documentNavInfo:" {{ currentFileNo }}  {{ allFilesCount }}",noRendererMessage:"     : {{{ fileType }}}",downloadButtonLabel:" ",brokenFile:"  . ,     .",msgPluginRecipients:"",msgPluginSender:"",pdfPluginLoading:"...",pdfPluginPageNumber:" {{ currentPage }}/{{ allPagesCount }}"},se:{documentNavInfo:"Dokument {{ currentFileNo }} av {{ allFilesCount }}",noRendererMessage:"Ingen renderare f\xf6r filtypen: {{{ fileType }}}",downloadButtonLabel:"Ladda ner",brokenFile:"Filen \xe4r trasig. Var v\xe4nlig kontrollera den p\xe5 din maskin.",msgPluginRecipients:"Mottagare",msgPluginSender:"Avs\xe4ndare",pdfPluginLoading:"Laddar...",pdfPluginPageNumber:"Sida {{ currentPage }}/{{ allPagesCount }}"},tr:{documentNavInfo:"Belge {{ currentFileNo }} / {{ allFilesCount }}",noRendererMessage:"Dosya t\xfcr\xfc i\xe7in g\xf6r\xfcnt\xfcleyici bulunamad: {{{ fileType }}}",downloadButtonLabel:"Dosyay indir",brokenFile:"Dosyanz bozuk. L\xfctfen kendi cihaznzda kontrol edin.",msgPluginRecipients:"Alclar",msgPluginSender:"G\xf6nderen",pdfPluginLoading:"Y\xfckleniyor...",pdfPluginPageNumber:"Sayfa {{ currentPage }}/{{ allPagesCount }}"}},fm=(Object.keys(fg),"SET_ALL_DOCUMENTS"),fv="SET_DOCUMENT_LOADING",fy="NEXT_DOCUMENT",fb="PREVIOUS_DOCUMENT",fw="UPDATE_CURRENT_DOCUMENT",fA="SET_RENDERER_RECT",fx="SET_MAIN_CONFIG",f_=e=>({type:fv,value:e}),fS=()=>({type:fy}),fk=()=>({type:fb}),fE=e=>({type:fw,document:e}),fC={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:"en"},fM=(e=fC,t)=>{switch(t.type){case fm:{let{documents:n,initialActiveDocument:s}=t;return{...e,documents:n,currentDocument:s||n[0]||null,currentFileNo:s&&n.includes(s)?n.indexOf(s):fC.currentFileNo}}case fv:{let{value:n}=t;return{...e,documentLoading:n}}case fy:{if(e.currentFileNo>=e.documents.length-1)return e;let t=e.currentFileNo+1;return e.onDocumentChange&&e.onDocumentChange(e.documents[t]),{...e,currentFileNo:t,currentDocument:e.documents[t],documentLoading:!0}}case fb:{if(e.currentFileNo<=0)return e;let t=e.currentFileNo-1;return e.onDocumentChange&&e.onDocumentChange(e.documents[t]),{...e,currentFileNo:e.currentFileNo-1,currentDocument:e.documents[t],documentLoading:!0}}case fw:{let{document:n}=t;return{...e,currentDocument:n,currentFileNo:e.documents.findIndex(e=>e.uri===n.uri)}}case fA:{let{rect:n}=t;return{...e,rendererRect:n}}case fx:{let{config:n}=t;return{...e,config:n}}default:return e}},fR=(0,hT.createContext)({state:fC,dispatch:()=>null}),fT=(0,hT.forwardRef)((e,t)=>{let{children:n,documents:s,config:a,pluginRenderers:o,prefetchMethod:l,requestHeaders:h,initialActiveDocument:c,language:d,activeDocument:u,onDocumentChange:p}=e,[f,g]=(0,hT.useReducer)(fM,{...fC,documents:s||[],currentDocument:s&&s.length?c||s[0]:void 0,config:a,pluginRenderers:o,prefetchMethod:l,requestHeaders:h,currentFileNo:c?s.findIndex(e=>e===c)??0:0,language:d&&fg[d]?d:"en",activeDocument:u,onDocumentChange:p});return(0,hT.useEffect)(()=>{g({type:fm,documents:s,initialActiveDocument:c}),a&&g({type:fx,config:a})},[s,a,c]),(0,hT.useEffect)(()=>{u&&g(fE(u))},[u]),(0,hT.useImperativeHandle)(t,()=>({prev(){g(fk())},next(){g(fS())}}),[g]),(0,hR.jsx)(fR.Provider,{value:{state:f,dispatch:g},children:n})}),fP=fu`
  background-color: ${e=>e.theme.primary};
  color: ${e=>e.theme.textPrimary};
`,fL=fu`
  background-color: ${e=>e.theme.secondary};
  color: ${e=>e.theme.textSecondary};
`,fI=fp.button`
  ${fP}
  display: flex;
  justify-content: center;
  align-items: center;
  width: 35px;
  height: 35px;
  padding: 0;
  margin: 0 0 0 5px;
  text-align: center;
  font-size: 18px;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  opacity: ${e=>e.disabled?.4:1};
  pointer-events: ${e=>e.disabled?"none":"all"};
  box-shadow: 2px 2px 3px #00000033;

  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`,fD=fp.a`
  display: flex;
  justify-content: center;
  align-items: center;
  border: 0;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  border-radius: 35px;
  background-color: ${e=>e.theme.primary};
  color: ${e=>e.theme.textPrimary};
  box-shadow: 2px 2px 3px #00000033;

  width: 35px;
  height: 35px;
  font-size: 18px;
  @media (max-width: 768px) {
    width: 30px;
    height: 30px;
    font-size: 15px;
  }
`;fp(fI)``;let fF=fp(fI)`
  ${fL}
`,fN=e=>(0,hR.jsx)(fW,{...e}),fO=e=>(0,hR.jsx)(fW,{...e,reverse:!0}),fW=({color:e,size:t,reverse:n})=>(0,hR.jsx)("svg",{width:t||"100%",height:t||"100%",style:{transform:`${n?"rotate(180deg)":""}`},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:(0,hR.jsx)("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:e||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})}),fj=e=>{let{color:t,size:n}=e;return(0,hR.jsx)("svg",{width:n||"100%",height:n||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:(0,hR.jsxs)("g",{children:[(0,hR.jsx)("path",{fill:t||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),(0,hR.jsx)("path",{fill:t||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),(0,hR.jsx)("path",{fill:t||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),(0,hR.jsx)("path",{fill:t||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),(0,hR.jsx)("path",{fill:t||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),(0,hR.jsx)("path",{fill:t||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),(0,hR.jsx)("path",{fill:t||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),(0,hR.jsx)("path",{fill:t||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})]})})};var fB=Object.prototype.toString,f$=Array.isArray||function(e){return"[object Array]"===fB.call(e)};function fz(e){return"function"==typeof e}function fH(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function fU(e,t){return null!=e&&"object"==typeof e&&t in e}var fV=RegExp.prototype.test,fG=/\S/,fq={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},fX=/\s*/,fY=/\s+/,fK=/\s*=/,fJ=/\s*\}/,fQ=/#|\^|\/|>|\{|&|=|!/;function fZ(e){this.string=e,this.tail=e,this.pos=0}function f0(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function f1(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}fZ.prototype.eos=function(){return""===this.tail},fZ.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},fZ.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case -1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},f0.prototype.push=function(e){return new f0(e,this)},f0.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var s,a,o,l,h,c=this,d=!1;c;){if(e.indexOf(".")>0)for(o=c.view,l=e.split("."),h=0;null!=o&&h<l.length;)h===l.length-1&&(d=fU(o,l[h])||(s=o,a=l[h],null!=s&&"object"!=typeof s&&s.hasOwnProperty&&s.hasOwnProperty(a))),o=o[l[h++]];else o=c.view[e],d=fU(c.view,e);if(d){t=o;break}c=c.parent}n[e]=t}return fz(t)&&(t=t.call(this.view)),t},f1.prototype.clearCache=function(){"u">typeof this.templateCache&&this.templateCache.clear()},f1.prototype.parse=function(e,t){var n=this.templateCache,s=e+":"+(t||f2.tags).join(":"),a="u">typeof n,o=a?n.get(s):void 0;return null==o&&(o=function(e,t){if(!e)return[];var n=!1,s=[],a=[],o=[],l=!1,h=!1,c="",d=0;function u(){if(l&&!h)for(;o.length;)delete a[o.pop()];else o=[];l=!1,h=!1}function p(e){if("string"==typeof e&&(e=e.split(fY,2)),!f$(e)||2!==e.length)throw Error("Invalid tags: "+e);f=RegExp(fH(e[0])+"\\s*"),g=RegExp("\\s*"+fH(e[1])),m=RegExp("\\s*"+fH("}"+e[1]))}p(t||f2.tags);for(var f,g,m,v,y,b,w,A,x,_=new fZ(e);!_.eos();){if(v=_.pos,b=_.scanUntil(f))for(var S=0,k=b.length;S<k;++S)!function(e){return!fV.call(fG,e)}(w=b.charAt(S))?(h=!0,n=!0,c+=" "):(o.push(a.length),c+=w),a.push(["text",w,v,v+1]),v+=1,w===`
`&&(u(),c="",d=0,n=!1);if(!_.scan(f))break;if(l=!0,y=_.scan(fQ)||"name",_.scan(fX),"="===y?(b=_.scanUntil(fK),_.scan(fK),_.scanUntil(g)):"{"===y?(b=_.scanUntil(m),_.scan(fJ),_.scanUntil(g),y="&"):b=_.scanUntil(g),!_.scan(g))throw Error("Unclosed tag at "+_.pos);if(A=">"==y?[y,b,v,_.pos,c,d,n]:[y,b,v,_.pos],d++,a.push(A),"#"===y||"^"===y)s.push(A);else if("/"===y){if(!(x=s.pop()))throw Error('Unopened section "'+b+'" at '+v);if(x[1]!==b)throw Error('Unclosed section "'+x[1]+'" at '+v)}else"name"===y||"{"===y||"&"===y?h=!0:"="===y&&p(b)}if(u(),x=s.pop())throw Error('Unclosed section "'+x[1]+'" at '+_.pos);return function(e){for(var t,n=[],s=n,a=[],o=0,l=e.length;o<l;++o)switch((t=e[o])[0]){case"#":case"^":s.push(t),a.push(t),s=t[4]=[];break;case"/":a.pop()[5]=t[2],s=a.length>0?a[a.length-1][4]:n;break;default:s.push(t)}return n}(function(e){for(var t,n,s=[],a=0,o=e.length;a<o;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(s.push(t),n=t));return s}(a))}(e,t),a&&n.set(s,o)),o},f1.prototype.render=function(e,t,n,s){var a=this.getConfigTags(s),o=this.parse(e,a),l=t instanceof f0?t:new f0(t,void 0);return this.renderTokens(o,l,n,e,s)},f1.prototype.renderTokens=function(e,t,n,s,a){for(var o,l,h,c="",d=0,u=e.length;d<u;++d)h=void 0,"#"===(l=(o=e[d])[0])?h=this.renderSection(o,t,n,s,a):"^"===l?h=this.renderInverted(o,t,n,s,a):">"===l?h=this.renderPartial(o,t,n,a):"&"===l?h=this.unescapedValue(o,t):"name"===l?h=this.escapedValue(o,t,a):"text"===l&&(h=this.rawValue(o)),void 0!==h&&(c+=h);return c},f1.prototype.renderSection=function(e,t,n,s,a){var o=this,l="",h=t.lookup(e[1]);if(h){if(f$(h))for(var c=0,d=h.length;c<d;++c)l+=this.renderTokens(e[4],t.push(h[c]),n,s,a);else if("object"==typeof h||"string"==typeof h||"number"==typeof h)l+=this.renderTokens(e[4],t.push(h),n,s,a);else if(fz(h)){if("string"!=typeof s)throw Error("Cannot use higher-order sections without the original template");null!=(h=h.call(t.view,s.slice(e[3],e[5]),function(e){return o.render(e,t,n,a)}))&&(l+=h)}else l+=this.renderTokens(e[4],t,n,s,a);return l}},f1.prototype.renderInverted=function(e,t,n,s,a){var o=t.lookup(e[1]);if(!o||f$(o)&&0===o.length)return this.renderTokens(e[4],t,n,s,a)},f1.prototype.indentPartial=function(e,t,n){for(var s=t.replace(/[^ \t]/g,""),a=e.split(`
`),o=0;o<a.length;o++)a[o].length&&(o>0||!n)&&(a[o]=s+a[o]);return a.join(`
`)},f1.prototype.renderPartial=function(e,t,n,s){if(n){var a=this.getConfigTags(s),o=fz(n)?n(e[1]):n[e[1]];if(null!=o){var l=e[6],h=e[5],c=e[4],d=o;0==h&&c&&(d=this.indentPartial(o,c,l));var u=this.parse(d,a);return this.renderTokens(u,t,n,d,s)}}},f1.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},f1.prototype.escapedValue=function(e,t,n){var s=this.getConfigEscape(n)||f2.escape,a=t.lookup(e[1]);if(null!=a)return"number"==typeof a&&s===f2.escape?String(a):s(a)},f1.prototype.rawValue=function(e){return e[1]},f1.prototype.getConfigTags=function(e){return f$(e)?e:e&&"object"==typeof e?e.tags:void 0},f1.prototype.getConfigEscape=function(e){if(e&&"object"==typeof e&&!f$(e))return e.escape};var f2={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){f3.templateCache=r},get templateCache(){return f3.templateCache}},f3=new f1;f2.clearCache=function(){return f3.clearCache()},f2.parse=function(e,t){return f3.parse(e,t)},f2.render=function(e,t,n,s){if("string"!=typeof e)throw TypeError('Invalid template! Template should be a "string" but "'+(f$(e)?"array":typeof e)+'" was given as the first argument for mustache#render(template, view, partials)');return f3.render(e,t,n,s)},f2.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return fq[e]})},f2.Scanner=fZ,f2.Context=f0,f2.Writer=f1;let f5=()=>{let{state:{language:e}}=(0,hT.useContext)(fR),t=fg.en;return{t:(0,hT.useCallback)((n,s)=>{let a=fg[e];return a[n]?f2.render(a[n],s):t[n]?f2.render(t[n],s):n},[e,t])}},f4=()=>{let{state:{currentDocument:e,currentFileNo:t,documents:n},dispatch:s}=(0,hT.useContext)(fR),{t:a}=f5();if(n.length<=1||!e)return null;let o=e.uri||"",l=null==o?void 0:o.split("/");return l.length&&(o=l[l.length-1]),(0,hR.jsxs)(f6,{id:"doc-nav",children:[(0,hR.jsx)("p",{id:"doc-nav-info",children:a("documentNavInfo",{currentFileNo:t+1,allFilesCount:n.length})}),(0,hR.jsx)(f8,{id:"doc-nav-prev",onClick:()=>s(fk()),disabled:0===t,children:(0,hR.jsx)(fN,{color:"#fff",size:"60%"})}),(0,hR.jsx)(f7,{id:"doc-nav-next",onClick:()=>s(fS()),disabled:t>=n.length-1,children:(0,hR.jsx)(fO,{color:"#fff",size:"60%"})})]})},f6=fp.div`
  min-width: 150px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-end;
  margin: 0 10px;
  color: ${e=>e.theme.textPrimary};
`,f8=fp(fF)`
  width: 30px;
  height: 30px;
  margin: 0 5px 0 10px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,f7=fp(f8)`
  margin: 0 5px;
`,f9=(e,t)=>{var n;if(!e)return"";let s="";if(e.fileName)s=e.fileName;else{s=decodeURI(s=e.uri||""),t||(s=null==(n=null==s?void 0:s.split("?"))?void 0:n[0]);let a=null==s?void 0:s.split("/");a.length&&(s=a[a.length-1])}return s},ge=()=>{var e,t;let{state:{config:n,currentDocument:s}}=(0,hT.useContext)(fR);if(!s||null!=(e=null==n?void 0:n.header)&&e.disableFileName)return null;let a=f9(s,(null==(t=null==n?void 0:n.header)?void 0:t.retainURLParams)||!1);return(0,hR.jsx)(gt,{id:"file-name","data-testid":"file-name",children:a})},gt=fp.div`
  flex: 1;
  text-align: left;
  color: ${e=>e.theme.textPrimary};
  font-weight: bold;
  margin: 0 10px;
  overflow: hidden;
`,gi=()=>{var e,t,n;let{state:s,dispatch:a}=(0,hT.useContext)(fR),{config:o}=s;return null!=(e=null==o?void 0:o.header)&&e.disableHeader?null:(null==(n=null==(t=null==o?void 0:o.header)?void 0:t.overrideComponent)?void 0:n.call(t,s,()=>a(fk()),()=>a(fS())))||(0,hR.jsxs)(gn,{id:"header-bar","data-testid":"header-bar",children:[(0,hR.jsx)(ge,{}),(0,hR.jsx)(f4,{})]})},gn=fp.div`
  display: flex;
  justify-content: flex-end;
  align-items: center;
  z-index: 1;
  padding: 0 10px;
  background-color: ${e=>e.theme.primary};
  font-size: 16px;
  min-height: 50px;

  @media (max-width: 768px) {
    min-height: 30px;
    padding: 5px;
    font-size: 10px;
  }
`,gr=({documentURI:e,signal:t,fileLoaderComplete:n,readerTypeFunction:s,headers:a})=>fetch(e,{signal:t,headers:a}).then(async e=>{let t=await e.blob(),a=new FileReader;switch(a.addEventListener("loadend",()=>n(a)),s){case"arrayBuffer":a.readAsArrayBuffer(t);break;case"binaryString":a.readAsBinaryString(t);break;case"dataURL":a.readAsDataURL(t);break;case"text":a.readAsText(t)}}).catch(e=>e),gs=e=>gr({...e,readerTypeFunction:"dataURL"}),ga=e=>gr({...e,readerTypeFunction:"text"}),go=({children:e})=>{var t,n;let{state:s}=(0,hT.useContext)(fR),{config:a}=s,[o,l]=(0,hT.useState)((null==(t=null==a?void 0:a.loadingRenderer)?void 0:t.showLoadingTimeout)===!1);return(0,hT.useEffect)(()=>{var e;setTimeout(()=>{l(!0)},"number"==typeof(null==(e=null==a?void 0:a.loadingRenderer)?void 0:e.showLoadingTimeout)?a.loadingRenderer.showLoadingTimeout:500)},[null==(n=null==a?void 0:a.loadingRenderer)?void 0:n.showLoadingTimeout]),o?(0,hR.jsx)(hR.Fragment,{children:e}):null},gl=({documents:e,documentLoading:t,config:n,currentDocument:s,fileName:a,CurrentRenderer:o,state:l,t:h})=>{var c,d;if(!e.length)return(0,hR.jsx)("div",{id:"no-documents"});if(t){if(n&&null!=(c=null==n?void 0:n.loadingRenderer)&&c.overrideComponent){let e=n.loadingRenderer.overrideComponent;return(0,hR.jsx)(go,{children:(0,hR.jsx)(e,{document:s,fileName:a})})}return(0,hR.jsx)(go,{children:(0,hR.jsx)(gc,{id:"loading-renderer","data-testid":"loading-renderer",children:(0,hR.jsx)(gu,{children:(0,hR.jsx)(fj,{color:"#444",size:40})})})})}if(o)return(0,hR.jsx)(o,{mainState:l});if(void 0===o)return null;if(n&&null!=(d=null==n?void 0:n.noRenderer)&&d.overrideComponent){let e=n.noRenderer.overrideComponent;return(0,hR.jsx)(e,{document:s,fileName:a})}return(0,hR.jsxs)("div",{id:"no-renderer","data-testid":"no-renderer",children:[h("noRendererMessage",{fileType:(null==s?void 0:s.fileType)??""}),(0,hR.jsx)(gp,{id:"no-renderer-download",href:null==s?void 0:s.uri,download:null==s?void 0:s.uri,children:h("downloadButtonLabel")})]})},gh=()=>{var e;let{state:t,dispatch:n,CurrentRenderer:s}=(()=>{let{state:e,dispatch:t}=(0,hT.useContext)(fR),{currentFileNo:n,currentDocument:s,prefetchMethod:a}=e,{CurrentRenderer:o}=(()=>{let{state:{currentDocument:e,pluginRenderers:t}}=(0,hT.useContext)(fR),[n,s]=(0,hT.useState)();return(0,hT.useEffect)(()=>{if(!e)return;if(!e.fileType)return void s(void 0);let n=[];null==t||t.forEach(t=>{void 0!==e.fileType&&t.fileTypes.indexOf(e.fileType)>=0&&n.push(t)});let[a]=n.sort((e,t)=>t.weight-e.weight);s(a&&void 0!==a?()=>a:null)},[e,t]),{CurrentRenderer:n}})(),l=(null==s?void 0:s.uri)||"";return(0,hT.useEffect)(()=>{if(!s||void 0!==s.fileType)return;let n=new AbortController,{signal:o}=n;return fetch(l,{method:a||l.startsWith("blob:")?"GET":"HEAD",signal:o,headers:null==e?void 0:e.requestHeaders}).then(e=>{let n=e.headers.get("content-type"),a=(null==n?void 0:n.split(";"))||[],o=a.length?a[0]:void 0;t(fE({...s,fileType:o||void 0}))}).catch(e=>{if((null==e?void 0:e.name)!=="AbortError")throw e}),()=>{n.abort()}},[n,l,s]),(0,hT.useEffect)(()=>{var n;if(!s||void 0===o)return;let a=new AbortController,{signal:h}=a,c={documentURI:l,signal:h,fileLoaderComplete:e=>{if(!s||!e)return void t(f_(!1));let n={...s};null!==e.result&&(n.fileData=e.result),t(fE(n)),t(f_(!1))},headers:null==e?void 0:e.requestHeaders};return null===o?t(f_(!1)):void 0!==o.fileLoader?null==(n=o.fileLoader)||n.call(o,c):gs(c),()=>{a.abort()}},[o,n]),{state:e,dispatch:t,CurrentRenderer:o}})(),{documents:a,documentLoading:o,currentDocument:l,config:h}=t,c=(()=>{let[e,t]=(0,hT.useState)({width:void 0,height:void 0});return(0,hT.useEffect)(()=>{function e(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e})(),{t:d}=f5(),u=(0,hT.useCallback)(e=>{e&&n({type:fA,rect:null==e?void 0:e.getBoundingClientRect()})},[c,n]),p=f9(l,(null==(e=null==h?void 0:h.header)?void 0:e.retainURLParams)||!1);return(0,hR.jsx)("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:u,children:(0,hR.jsx)(gl,{state:t,documents:a,documentLoading:o,config:h,currentDocument:l,fileName:p,CurrentRenderer:s,t:d})})},gc=fp.div`
  display: flex;
  flex: 1;
  height: 75px;
  align-items: center;
  justify-content: center;
`,gd=(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];"production"!==up.env.NODE_ENV&&"u">typeof navigator&&"ReactNative"===navigator.product&&console.warn("`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.");var s=pI(fu.apply(void 0,ug([e],t,!1)));return new p7(po(pp(s)>>>0),s)})`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,gu=fp.div`
  animation-name: ${gd};
  animation-duration: 4s;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
`,gp=fp(fD)`
  width: 130px;
  height: 30px;
  background-color: ${e=>e.theme.primary};
  @media (max-width: 768px) {
    width: 125px;
    height: 25px;
  }
`,gf={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},gg=({mainState:{currentDocument:e},children:t,...n})=>e?(0,hR.jsx)(gm,{id:"image-renderer",...n,children:t||(0,hR.jsx)(gv,{id:"image-img",src:e.fileData})}):null;gg.fileTypes=[],gg.weight=0;let gm=fp.div`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  background-color: #fff;
`,gv=fp.img`
  max-width: 95%;
  max-height: 95%;
`,gy=e=>(0,hR.jsx)(gg,{...e});gy.fileTypes=["bmp","image/bmp"],gy.weight=0;let gb=({mainState:{currentDocument:e}})=>((0,hT.useEffect)(()=>{let t=null==e?void 0:e.fileData,n="",s=null==t?void 0:t.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,(e,t)=>(n=t||"utf-8","")),a=window.atob(s),o=Uint8Array.from(a,e=>e.charCodeAt(0));a=new TextDecoder(n).decode(o);let l=document.getElementById("html-body"),h=(null==l?void 0:l.contentWindow)&&l.contentWindow;if(!h)return;let c=h.document;c.open(),c.write(`${a}`),c.close()},[e]),(0,hR.jsx)(gw,{id:"html-renderer",children:(0,hR.jsx)(gA,{id:"html-body",sandbox:"allow-same-origin"})}));gb.fileTypes=["htm","html","text/htm","text/html"],gb.weight=0,gb.fileLoader=gs;let gw=fp.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 0 30px;
`,gA=fp.iframe`
  height: 100%;
  padding: 15px;
  margin: 20px 0 20px 0;
  border: 1px solid ${e=>e.theme.secondary};
`,gx=e=>(0,hR.jsx)(gg,{...e});gx.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"],gx.weight=0;let g_=({mainState:{currentDocument:e}})=>e?(0,hR.jsx)(gS,{id:"msdoc-renderer",children:(0,hR.jsx)(gk,{id:"msdoc-iframe",title:"msdoc-iframe",src:`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.uri)}`,frameBorder:"0"})}):null;g_.fileTypes=["odt","application/vnd.oasis.opendocument.text","doc","application/msword","docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream","xls","application/vnd.ms-excel","xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","ppt","application/vnd.ms-powerpoint","pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],g_.weight=0,g_.fileLoader=({fileLoaderComplete:e})=>e();let gS=fp.div`
  width: 100%;
`,gk=fp.iframe`
  width: 100%;
  height: 100%;
  border: 0;
`;var gE={},gC={};gC.byteLength=function(e){var t=gD(e),n=t[0],s=t[1];return(n+s)*3/4-s},gC.toByteArray=function(e){var t,n,s=gD(e),a=s[0],o=s[1],l=new gT((a+o)*3/4-o),h=0,c=o>0?a-4:a;for(n=0;n<c;n+=4)t=gR[e.charCodeAt(n)]<<18|gR[e.charCodeAt(n+1)]<<12|gR[e.charCodeAt(n+2)]<<6|gR[e.charCodeAt(n+3)],l[h++]=t>>16&255,l[h++]=t>>8&255,l[h++]=255&t;return 2===o&&(t=gR[e.charCodeAt(n)]<<2|gR[e.charCodeAt(n+1)]>>4,l[h++]=255&t),1===o&&(t=gR[e.charCodeAt(n)]<<10|gR[e.charCodeAt(n+1)]<<4|gR[e.charCodeAt(n+2)]>>2,l[h++]=t>>8&255,l[h++]=255&t),l},gC.fromByteArray=function(e){for(var t,n=e.length,s=n%3,a=[],o=0,l=n-s;o<l;o+=16383)a.push(function(e,t,n){for(var s,a=[],o=t;o<n;o+=3)a.push(gM[(s=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+gM[s>>12&63]+gM[s>>6&63]+gM[63&s]);return a.join("")}(e,o,o+16383>l?l:o+16383));return 1===s?a.push(gM[(t=e[n-1])>>2]+gM[t<<4&63]+"=="):2===s&&a.push(gM[(t=(e[n-2]<<8)+e[n-1])>>10]+gM[t>>4&63]+gM[t<<2&63]+"="),a.join("")};for(var gM=[],gR=[],gT="u">typeof Uint8Array?Uint8Array:Array,gP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gL=0,gI=gP.length;gL<gI;++gL)gM[gL]=gP[gL],gR[gP.charCodeAt(gL)]=gL;function gD(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var s=n===t?0:4-n%4;return[n,s]}gR[45]=62,gR[95]=63;var gF={};gF.read=function(e,t,n,s,a){var o,l,h=8*a-s-1,c=(1<<h)-1,d=c>>1,u=-7,p=n?a-1:0,f=n?-1:1,g=e[t+p];for(p+=f,o=g&(1<<-u)-1,g>>=-u,u+=h;u>0;o=256*o+e[t+p],p+=f,u-=8);for(l=o&(1<<-u)-1,o>>=-u,u+=s;u>0;l=256*l+e[t+p],p+=f,u-=8);if(0===o)o=1-d;else{if(o===c)return l?NaN:1/0*(g?-1:1);l+=Math.pow(2,s),o-=d}return(g?-1:1)*l*Math.pow(2,o-s)},gF.write=function(e,t,n,s,a,o){var l,h,c,d=8*o-a-1,u=(1<<d)-1,p=u>>1,f=5960464477539062e-23*(23===a),g=s?0:o-1,m=s?1:-1,v=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(h=+!!isNaN(t),l=u):(l=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-l))<1&&(l--,c*=2),l+p>=1?t+=f/c:t+=f*Math.pow(2,1-p),t*c>=2&&(l++,c/=2),l+p>=u?(h=0,l=u):l+p>=1?(h=(t*c-1)*Math.pow(2,a),l+=p):(h=t*Math.pow(2,p-1)*Math.pow(2,a),l=0));a>=8;e[n+g]=255&h,g+=m,h/=256,a-=8);for(l=l<<a|h,d+=a;d>0;e[n+g]=255&l,g+=m,l/=256,d-=8);e[n+g-m]|=128*v},function(e){let t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},e.INSPECT_MAX_BYTES=50,e.kMaxLength=0x7fffffff;let{Uint8Array:n,ArrayBuffer:s,SharedArrayBuffer:a}=globalThis;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new n(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return d(e)}return h(e,t,n)}function h(e,t,h){if("string"==typeof e){var c=e,d=t;if(("string"!=typeof d||""===d)&&(d="utf8"),!l.isEncoding(d))throw TypeError("Unknown encoding: "+d);let n=0|g(c,d),s=o(n),a=s.write(c,d);return a!==n&&(s=s.slice(0,a)),s}if(s.isView(e)){var m=e;if(W(m,n)){let e=new n(m);return p(e.buffer,e.byteOffset,e.byteLength)}return u(m)}if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,s)||e&&W(e.buffer,s)||"u">typeof a&&(W(e,a)||e&&W(e.buffer,a)))return p(e,t,h);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let v=e.valueOf&&e.valueOf();if(null!=v&&v!==e)return l.from(v,t,h);let y=function(e){if(l.isBuffer(e)){let t=0|f(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(y)return y;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,h);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return c(e),o(e<0?0:0|f(e))}function u(e){let t=e.length<0?0:0|f(e.length),n=o(t);for(let s=0;s<t;s+=1)n[s]=255&e[s];return n}function p(e,t,s){let a;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(s||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(a=void 0===t&&void 0===s?new n(e):void 0===s?new n(e,t):new n(e,t,s),l.prototype),a}function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(s.isView(e)||W(e,s))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,a=arguments.length>2&&!0===arguments[2];if(!a&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return N(e).length;default:if(o)return a?-1:F(e).length;t=(""+t).toLowerCase(),o=!0}}function m(e,t,n){let s=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){let s=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>s)&&(n=s);let a="";for(let s=t;s<n;++s)a+=j[e[s]];return a}(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return function(e,t,n){let s="";n=Math.min(e.length,n);for(let a=t;a<n;++a)s+=String.fromCharCode(127&e[a]);return s}(this,t,n);case"latin1":case"binary":return function(e,t,n){let s="";n=Math.min(e.length,n);for(let a=t;a<n;++a)s+=String.fromCharCode(e[a]);return s}(this,t,n);case"base64":var a,o,l;return a=this,o=t,l=n,0===o&&l===a.length?gC.fromByteArray(a):gC.fromByteArray(a.slice(o,l));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){let s=e.slice(t,n),a="";for(let e=0;e<s.length-1;e+=2)a+=String.fromCharCode(s[e]+256*s[e+1]);return a}(this,t,n);default:if(s)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function v(e,t,n){let s=e[t];e[t]=e[n],e[n]=s}function y(e,t,s,a,o){var h;if(0===e.length)return -1;if("string"==typeof s?(a=s,s=0):s>0x7fffffff?s=0x7fffffff:s<-0x80000000&&(s=-0x80000000),(h=s*=1)!=h&&(s=o?0:e.length-1),s<0&&(s=e.length+s),s>=e.length){if(o)return -1;s=e.length-1}else if(s<0)if(!o)return -1;else s=0;if("string"==typeof t&&(t=l.from(t,a)),l.isBuffer(t))return 0===t.length?-1:b(e,t,s,a,o);if("number"==typeof t)return t&=255,"function"==typeof n.prototype.indexOf?o?n.prototype.indexOf.call(e,t,s):n.prototype.lastIndexOf.call(e,t,s):b(e,[t],s,a,o);throw TypeError("val must be string, number or Buffer")}function b(e,t,n,s,a){let o,l=1,h=e.length,c=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return -1;l=2,h/=2,c/=2,n/=2}function d(e,t){return 1===l?e[t]:e.readUInt16BE(t*l)}if(a){let s=-1;for(o=n;o<h;o++)if(d(e,o)===d(t,-1===s?0:o-s)){if(-1===s&&(s=o),o-s+1===c)return s*l}else -1!==s&&(o-=o-s),s=-1}else for(n+c>h&&(n=h-c),o=n;o>=0;o--){let n=!0;for(let s=0;s<c;s++)if(d(e,o+s)!==d(t,s)){n=!1;break}if(n)return o}return -1}function w(e,t,n){n=Math.min(e.length,n);let s=[],a=t;for(;a<n;){let t=e[a],o=null,l=t>239?4:t>223?3:t>191?2:1;if(a+l<=n){let n,s,h,c;switch(l){case 1:t<128&&(o=t);break;case 2:(192&(n=e[a+1]))==128&&(c=(31&t)<<6|63&n)>127&&(o=c);break;case 3:n=e[a+1],s=e[a+2],(192&n)==128&&(192&s)==128&&(c=(15&t)<<12|(63&n)<<6|63&s)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:n=e[a+1],s=e[a+2],h=e[a+3],(192&n)==128&&(192&s)==128&&(192&h)==128&&(c=(15&t)<<18|(63&n)<<12|(63&s)<<6|63&h)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,l=1):o>65535&&(o-=65536,s.push(o>>>10&1023|55296),o=56320|1023&o),s.push(o),a+=l}var o=s;let l=o.length;if(l<=4096)return String.fromCharCode.apply(String,o);let h="",c=0;for(;c<l;)h+=String.fromCharCode.apply(String,o.slice(c,c+=4096));return h}function A(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function x(e,t,n,s,a,o){if(!l.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw RangeError('"value" argument is out of bounds');if(n+s>e.length)throw RangeError("Index out of range")}function _(e,t,n,s,a){P(t,s,a,e,n,7);let o=Number(t&BigInt(0xffffffff));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let l=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n++]=l,l>>=8,e[n++]=l,l>>=8,e[n++]=l,l>>=8,e[n++]=l,n}function S(e,t,n,s,a){P(t,s,a,e,n,7);let o=Number(t&BigInt(0xffffffff));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let l=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[n+3]=l,l>>=8,e[n+2]=l,l>>=8,e[n+1]=l,l>>=8,e[n]=l,n+8}function k(e,t,n,s,a,o){if(n+s>e.length||n<0)throw RangeError("Index out of range")}function E(e,t,n,s,a){return t*=1,n>>>=0,a||k(e,t,n,4),gF.write(e,t,n,s,23,4),n+4}function C(e,t,n,s,a){return t*=1,n>>>=0,a||k(e,t,n,8),gF.write(e,t,n,s,52,8),n+8}l.TYPED_ARRAY_SUPPORT=function(){try{let e=new n(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,n.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch{return!1}}(),!l.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return h(e,t,n)},Object.setPrototypeOf(l.prototype,n.prototype),Object.setPrototypeOf(l,n),l.alloc=function(e,t,n){return c(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(W(e,n)&&(e=l.from(e,e.offset,e.byteLength)),W(t,n)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let s=e.length,a=t.length;for(let n=0,o=Math.min(s,a);n<o;++n)if(e[n]!==t[n]){s=e[n],a=t[n];break}return s<a?-1:+(a<s)},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){let s;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(t=0,s=0;s<e.length;++s)t+=e[s].length;let a=l.allocUnsafe(t),o=0;for(s=0;s<e.length;++s){let t=e[s];if(W(t,n))o+t.length>a.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(a,o)):n.prototype.set.call(a,t,o);else if(l.isBuffer(t))t.copy(a,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=t.length}return a},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},l.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},l.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},l.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?w(this,0,e):m.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},t&&(l.prototype[t]=l.prototype.inspect),l.prototype.compare=function(e,t,s,a,o){if(W(e,n)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===s&&(s=e?e.length:0),void 0===a&&(a=0),void 0===o&&(o=this.length),t<0||s>e.length||a<0||o>this.length)throw RangeError("out of range index");if(a>=o&&t>=s)return 0;if(a>=o)return -1;if(t>=s)return 1;if(t>>>=0,s>>>=0,a>>>=0,o>>>=0,this===e)return 0;let h=o-a,c=s-t,d=Math.min(h,c),u=this.slice(a,o),p=e.slice(t,s);for(let e=0;e<d;++e)if(u[e]!==p[e]){h=u[e],c=p[e];break}return h<c?-1:+(c<h)},l.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,s){var a,o,l,h,c,d,u,p;if(void 0===t)s="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)s=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===s&&(s="utf8")):(s=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-t;if((void 0===n||n>f)&&(n=f),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let g=!1;for(;;)switch(s){case"hex":return function(e,t,n,s){let a;n=Number(n)||0;let o=e.length-n;s?(s=Number(s))>o&&(s=o):s=o;let l=t.length;for(s>l/2&&(s=l/2),a=0;a<s;++a){var h;let s=parseInt(t.substr(2*a,2),16);if((h=s)!=h)break;e[n+a]=s}return a}(this,e,t,n);case"utf8":case"utf-8":return a=t,o=n,O(F(e,this.length-a),this,a,o);case"ascii":case"latin1":case"binary":return l=t,h=n,O(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),this,l,h);case"base64":return c=t,d=n,O(N(e),this,c,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,p=n,O(function(e,t){let n,s,a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)s=(n=e.charCodeAt(o))>>8,a.push(n%256),a.push(s);return a}(e,this.length-u),this,u,p);default:if(g)throw TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),g=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(e,t){let n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let s=this.subarray(e,t);return Object.setPrototypeOf(s,l.prototype),s},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let s=this[e],a=1,o=0;for(;++o<t&&(a*=256);)s+=this[e+o]*a;return s},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let s=this[e+--t],a=1;for(;t>0&&(a*=256);)s+=this[e+--t]*a;return s},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=B(function(e){L(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&I(e,this.length-8);let s=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],a=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*n;return BigInt(s)+(BigInt(a)<<BigInt(32))}),l.prototype.readBigUInt64BE=B(function(e){L(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&I(e,this.length-8);let s=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],a=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(s)<<BigInt(32))+BigInt(a)}),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let s=this[e],a=1,o=0;for(;++o<t&&(a*=256);)s+=this[e+o]*a;return s>=(a*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||A(e,t,this.length);let s=t,a=1,o=this[e+--s];for(;s>0&&(a*=256);)o+=this[e+--s]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-((255-this[e]+1)*1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||A(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?0xffff0000|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||A(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?0xffff0000|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=B(function(e){L(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&I(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),l.prototype.readBigInt64BE=B(function(e){L(e>>>=0,"offset");let t=this[e],n=this[e+7];return(void 0===t||void 0===n)&&I(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+n)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),gF.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),gF.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),gF.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),gF.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,s){if(e*=1,t>>>=0,n>>>=0,!s){let s=Math.pow(2,8*n)-1;x(this,e,t,n,s,0)}let a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,s){if(e*=1,t>>>=0,n>>>=0,!s){let s=Math.pow(2,8*n)-1;x(this,e,t,n,s,0)}let a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=B(function(e,t=0){return _(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=B(function(e,t=0){return S(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,n,s){if(e*=1,t>>>=0,!s){let s=Math.pow(2,8*n-1);x(this,e,t,n,s-1,-s)}let a=0,o=1,l=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===l&&0!==this[t+a-1]&&(l=1),this[t+a]=(e/o|0)-l&255;return t+n},l.prototype.writeIntBE=function(e,t,n,s){if(e*=1,t>>>=0,!s){let s=Math.pow(2,8*n-1);x(this,e,t,n,s-1,-s)}let a=n-1,o=1,l=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===l&&0!==this[t+a+1]&&(l=1),this[t+a]=(e/o|0)-l&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e*=1,t>>>=0,n||x(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=B(function(e,t=0){return _(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=B(function(e,t=0){return S(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,n){return E(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return E(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return C(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return C(this,e,t,!1,n)},l.prototype.copy=function(e,t,s,a){if(!l.isBuffer(e))throw TypeError("argument should be a Buffer");if(s||(s=0),a||0===a||(a=this.length),t>=e.length&&(t=e.length),t||(t=0),a>0&&a<s&&(a=s),a===s||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(s<0||s>=this.length)throw RangeError("Index out of range");if(a<0)throw RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),e.length-t<a-s&&(a=e.length-t+s);let o=a-s;return this===e&&"function"==typeof n.prototype.copyWithin?this.copyWithin(t,s,a):n.prototype.set.call(e,this.subarray(s,a),t),o},l.prototype.fill=function(e,t,n,s){let a;if("string"==typeof e){if("string"==typeof t?(s=t,t=0,n=this.length):"string"==typeof n&&(s=n,n=this.length),void 0!==s&&"string"!=typeof s)throw TypeError("encoding must be a string");if("string"==typeof s&&!l.isEncoding(s))throw TypeError("Unknown encoding: "+s);if(1===e.length){let t=e.charCodeAt(0);("utf8"===s&&t<128||"latin1"===s)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{let o=l.isBuffer(e)?e:l.from(e,s),h=o.length;if(0===h)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%h]}return this};let M={};function R(e,t,n){M[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function T(e){let t="",n=e.length,s=+("-"===e[0]);for(;n>=s+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function P(e,t,n,s,a,o){if(e>n||e<t){let n,s="bigint"==typeof t?"n":"";throw n=0===t||t===BigInt(0)?`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`,new M.ERR_OUT_OF_RANGE("value",n,e)}L(a,"offset"),(void 0===s[a]||void 0===s[a+o])&&I(a,s.length-(o+1))}function L(e,t){if("number"!=typeof e)throw new M.ERR_INVALID_ARG_TYPE(t,"number",e)}function I(e,t,n){throw Math.floor(e)!==e?(L(e,n),new M.ERR_OUT_OF_RANGE("offset","an integer",e)):t<0?new M.ERR_BUFFER_OUT_OF_BOUNDS:new M.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}R("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),R("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),R("ERR_OUT_OF_RANGE",function(e,t,n){let s=`The value of "${e}" is out of range.`,a=n;return Number.isInteger(n)&&Math.abs(n)>0x100000000?a=T(String(n)):"bigint"==typeof n&&(a=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(a=T(a)),a+="n"),s+=` It must be ${t}. Received ${a}`},RangeError);let D=/[^+/0-9A-Za-z-_]/g;function F(e,t){let n;t=t||1/0;let s=e.length,a=null,o=[];for(let l=0;l<s;++l){if((n=e.charCodeAt(l))>55295&&n<57344){if(!a){if(n>56319||l+1===s){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return o}function N(e){return gC.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function O(e,t,n,s){let a;for(a=0;a<s&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let j=function(){let e="0123456789abcdef",t=Array(256);for(let n=0;n<16;++n){let s=16*n;for(let a=0;a<16;++a)t[s+a]=e[n]+e[a]}return t}();function B(e){return typeof BigInt>"u"?$:e}function $(){throw Error("BigInt not supported")}}(gE);let gN=gE.Buffer;gE.Blob,gE.BlobOptions,gE.Buffer,gE.File,gE.FileOptions,gE.INSPECT_MAX_BYTES,gE.SlowBuffer,gE.TranscodeEncoding,gE.atob,gE.btoa,gE.constants,gE.isAscii,gE.isUtf8,gE.kMaxLength,gE.kStringMaxLength,gE.resolveObjectURL,gE.transcode;var gO={};gO.d=(e,t)=>{for(var n in t)gO.o(t,n)&&!gO.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},gO.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var gW=globalThis.pdfjsLib={};gO.d(gW,{AbortException:()=>mt,AnnotationEditorLayer:()=>bh,AnnotationEditorParamsType:()=>gU,AnnotationEditorType:()=>gH,AnnotationEditorUIManager:()=>mJ,AnnotationLayer:()=>y4,AnnotationMode:()=>gz,CMapCompressionType:()=>gX,ColorPicker:()=>br,DOMSVGFactory:()=>mk,DrawLayer:()=>bd,FeatureTest:()=>ms,GlobalWorkerOptions:()=>vR,ImageKind:()=>gG,InvalidPDFException:()=>g8,MissingPDFException:()=>g7,OPS:()=>gY,Outliner:()=>y7,PDFDataRangeTransport:()=>yc,PDFDateString:()=>mN,PDFWorker:()=>ym,PasswordResponses:()=>gK,PermissionFlag:()=>gV,PixelsPerInch:()=>mb,RenderingCancelledException:()=>mC,TextLayer:()=>v7,UnexpectedResponseException:()=>g9,Util:()=>mo,VerbosityLevel:()=>gq,XfaLayer:()=>yM,build:()=>yS,createValidAbsoluteUrl:()=>g2,fetchData:()=>mx,getDocument:()=>ya,getFilenameFromUrl:()=>mT,getPdfFilenameFromUrl:()=>mP,getXfaPageViewport:()=>mO,isDataScheme:()=>mM,isPdfFile:()=>mR,noContextMenu:()=>mD,normalizeUnicode:()=>mc,renderTextLayer:()=>v9,setLayerDimensions:()=>m$,shadow:()=>g3,updateTextLayer:()=>ye,version:()=>y_});let gj="object"==typeof up&&up+""=="[object process]"&&!up.versions.nw&&!(up.versions.electron&&up.type&&"browser"!==up.type),gB=[1,0,0,1,0,0],g$=[.001,0,0,.001,0,0],gz={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},gH={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},gU={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},gV={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},gG={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},gq={ERRORS:0,WARNINGS:1,INFOS:5},gX={NONE:0,BINARY:1},gY={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},gK={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},gJ=gq.WARNINGS;function gQ(e){gJ>=gq.INFOS&&console.log(`Info: ${e}`)}function gZ(e){gJ>=gq.WARNINGS&&console.log(`Warning: ${e}`)}function g0(e){throw Error(e)}function g1(e,t){e||g0(t)}function g2(e,t=null,n=null){if(!e)return null;try{if(n&&"string"==typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){let t=e.match(/\./g);(null==t?void 0:t.length)>=2&&(e=`http://${e}`)}if(n.tryConvertEncoding)try{var s;s=e,e=decodeURIComponent(escape(s))}catch{}}let a=t?new URL(e,t):new URL(e);if(function(e){switch(null==e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch{}return null}function g3(e,t,n,s=!1){return Object.defineProperty(e,t,{value:n,enumerable:!s,configurable:!0,writable:!1}),n}let g5=function(){function e(t,n){this.constructor===e&&g0("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=Error(),e.constructor=e,e}();class g4 extends g5{constructor(e,t){super(e,"PasswordException"),this.code=t}}class g6 extends g5{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class g8 extends g5{constructor(e){super(e,"InvalidPDFException")}}class g7 extends g5{constructor(e){super(e,"MissingPDFException")}}class g9 extends g5{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class me extends g5{constructor(e){super(e,"FormatError")}}class mt extends g5{constructor(e){super(e,"AbortException")}}function mi(e){("object"!=typeof e||(null==e?void 0:e.length)===void 0)&&g0("Invalid argument for bytesToString");let t=e.length;if(t<8192)return String.fromCharCode.apply(null,e);let n=[];for(let s=0;s<t;s+=8192){let a=Math.min(s+8192,t),o=e.subarray(s,a);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function mn(e){"string"!=typeof e&&g0("Invalid argument for stringToBytes");let t=e.length,n=new Uint8Array(t);for(let s=0;s<t;++s)n[s]=255&e.charCodeAt(s);return n}function mr(e){let t=Object.create(null);for(let[n,s]of e)t[n]=s;return t}class ms{static get isLittleEndian(){let e;return g3(this,"isLittleEndian",((e=new Uint8Array(4))[0]=1,1===new Uint32Array(e.buffer,0,1)[0]))}static get isEvalSupported(){return g3(this,"isEvalSupported",function(){try{return Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return g3(this,"isOffscreenCanvasSupported","u">typeof OffscreenCanvas)}static get platform(){return"u">typeof navigator&&"string"==typeof(null==navigator?void 0:navigator.platform)?g3(this,"platform",{isMac:navigator.platform.includes("Mac")}):g3(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return g3(this,"isCSSRoundSupported",null==(t=null==(e=globalThis.CSS)?void 0:e.supports)?void 0:t.call(e,"width: round(1.5px, 1px)"))}}let ma=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class mo{static makeHexColor(e,t,n){return`#${ma[e]}${ma[t]}${ma[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){let n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){let n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),a=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],a[0],o[0]),Math.min(n[1],s[1],a[1],o[1]),Math.max(n[0],s[0],a[0],o[0]),Math.max(n[1],s[1],a[1],o[1])]}static inverseTransform(e){let t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){let t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],a=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],l=(n+o)/2,h=Math.sqrt((n+o)**2-4*(n*o-a*s))/2;return[Math.sqrt(l+h||1),Math.sqrt(l-h||1)]}static normalizeRect(e){let t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){let n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;let a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>o?null:[n,a,s,o]}static bezierBoundingBox(e,t,n,s,a,o,l,h,c){return c?(c[0]=Math.min(c[0],e,l),c[1]=Math.min(c[1],t,h),c[2]=Math.max(c[2],e,l),c[3]=Math.max(c[3],t,h)):c=[Math.min(e,l),Math.min(t,h),Math.max(e,l),Math.max(t,h)],hW(this,y,b).call(this,e,n,a,l,t,s,o,h,3*(-e+3*(n-a)+l),6*(e-2*n+a),3*(n-e),c),hW(this,y,b).call(this,e,n,a,l,t,s,o,h,3*(-t+3*(s-o)+h),6*(t-2*s+o),3*(s-t),c),c}}m=new WeakSet,v=function(e,t,n,s,a,o,l,h,c,d){if(c<=0||c>=1)return;let u=1-c,p=c*c,f=p*c,g=u*(u*(u*e+3*c*t)+3*p*n)+f*s,m=u*(u*(u*a+3*c*o)+3*p*l)+f*h;d[0]=Math.min(d[0],g),d[1]=Math.min(d[1],m),d[2]=Math.max(d[2],g),d[3]=Math.max(d[3],m)},y=new WeakSet,b=function(e,t,n,s,a,o,l,h,c,d,u,p){if(1e-12>Math.abs(c)){Math.abs(d)>=1e-12&&hW(this,m,v).call(this,e,t,n,s,a,o,l,h,-u/d,p);return}let f=d**2-4*u*c;if(f<0)return;let g=Math.sqrt(f),y=2*c;hW(this,m,v).call(this,e,t,n,s,a,o,l,h,(-d+g)/y,p),hW(this,m,v).call(this,e,t,n,s,a,o,l,h,(-d-g)/y,p)},hF(mo,m),hF(mo,y);let ml=null,mh=null;function mc(e){return ml||(ml=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,mh=new Map([["","t"]])),e.replaceAll(ml,(e,t,n)=>t?t.normalize("NFKC"):mh.get(n))}let md="pdfjs_internal_id_";class mu{constructor(){this.constructor===mu&&g0("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,a){return"none"}destroy(e=!1){}}class mp{constructor(){this.constructor===mp&&g0("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw Error("Invalid canvas size");let n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw Error("Canvas is not specified");if(t<=0||n<=0)throw Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){g0("Abstract method `_createCanvas` called.")}}class mf{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===mf&&g0("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw Error("CMap name must be specified.");let t=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?gX.BINARY:gX.NONE;return this._fetchData(t,n).catch(e=>{throw Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){g0("Abstract method `_fetchData` called.")}}class mg{constructor({baseUrl:e=null}){this.constructor===mg&&g0("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw Error("Font filename must be specified.");let t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(e=>{throw Error(`Unable to load font data at: ${t}`)})}_fetchData(e){g0("Abstract method `_fetchData` called.")}}class mm{constructor(){this.constructor===mm&&g0("Cannot initialize BaseSVGFactory.")}create(e,t,n=!1){if(e<=0||t<=0)throw Error("Invalid SVG dimensions");let s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if("string"!=typeof e)throw Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){g0("Abstract method `_createSVG` called.")}}let mv="http://www.w3.org/2000/svg",my=class{};hL(my,"CSS",96),hL(my,"PDF",72),hL(my,"PDF_TO_CSS_UNITS",my.CSS/my.PDF);let mb=my;class mw extends mu{constructor({docId:e,ownerDocument:t=globalThis.document}={}){super(),hF(this,E),hF(this,M),hF(this,T),hF(this,L),hF(this,D),hF(this,N),hF(this,W),hF(this,B),hF(this,z),hF(this,U),hF(this,G),hF(this,w,void 0),hF(this,A,void 0),hF(this,x,void 0),hF(this,_,void 0),hF(this,S,void 0),hF(this,k,0),hN(this,x,e),hN(this,_,t)}addFilter(e){if(!e)return"none";let t=hD(this,E,C).get(e);if(t)return t;let[n,s,a]=hW(this,L,I).call(this,e),o=1===e.length?n:`${n}${s}${a}`;if(t=hD(this,E,C).get(o))return hD(this,E,C).set(e,t),t;let l=`g_${hD(this,x)}_transfer_map_${hO(this,k)._++}`,h=`url(#${l})`;hD(this,E,C).set(e,h),hD(this,E,C).set(o,h);let c=hW(this,W,j).call(this,l);return hW(this,z,H).call(this,n,s,a,c),h}addHCMFilter(e,t){var n;let s=`${e}-${t}`,a="base",o=hD(this,M,R).get(a);if((null==o?void 0:o.key)===s||(o?(null==(n=o.filter)||n.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},hD(this,M,R).set(a,o)),!e||!t))return o.url;let l=hW(this,G,q).call(this,e);e=mo.makeHexColor(...l);let h=hW(this,G,q).call(this,t);if(t=mo.makeHexColor(...h),hD(this,T,P).style.color="","#000000"===e&&"#ffffff"===t||e===t)return o.url;let c=Array(256);for(let e=0;e<=255;e++){let t=e/255;c[e]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}let d=c.join(","),u=`g_${hD(this,x)}_hcm_filter`,p=o.filter=hW(this,W,j).call(this,u);hW(this,z,H).call(this,d,d,d,p),hW(this,N,O).call(this,p);let f=(e,t)=>{let n=l[e]/255,s=h[e]/255,a=Array(t+1);for(let e=0;e<=t;e++)a[e]=n+e/t*(s-n);return a.join(",")};return hW(this,z,H).call(this,f(0,5),f(1,5),f(2,5),p),o.url=`url(#${u})`,o.url}addAlphaFilter(e){let t=hD(this,E,C).get(e);if(t)return t;let[n]=hW(this,L,I).call(this,[e]),s=`alpha_${n}`;if(t=hD(this,E,C).get(s))return hD(this,E,C).set(e,t),t;let a=`g_${hD(this,x)}_alpha_map_${hO(this,k)._++}`,o=`url(#${a})`;hD(this,E,C).set(e,o),hD(this,E,C).set(s,o);let l=hW(this,W,j).call(this,a);return hW(this,U,V).call(this,n,l),o}addLuminosityFilter(e){let t,n,s=hD(this,E,C).get(e||"luminosity");if(s)return s;if(e?([t]=hW(this,L,I).call(this,[e]),n=`luminosity_${t}`):n="luminosity",s=hD(this,E,C).get(n))return hD(this,E,C).set(e,s),s;let a=`g_${hD(this,x)}_luminosity_map_${hO(this,k)._++}`,o=`url(#${a})`;hD(this,E,C).set(e,o),hD(this,E,C).set(n,o);let l=hW(this,W,j).call(this,a);return hW(this,D,F).call(this,l),e&&hW(this,U,V).call(this,t,l),o}addHighlightHCMFilter(e,t,n,s,a){var o;let l=`${t}-${n}-${s}-${a}`,h=hD(this,M,R).get(e);if((null==h?void 0:h.key)===l||(h?(null==(o=h.filter)||o.remove(),h.key=l,h.url="none",h.filter=null):(h={key:l,url:"none",filter:null},hD(this,M,R).set(e,h)),!t||!n))return h.url;let[c,d]=[t,n].map(hW(this,G,q).bind(this)),u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,g]=[s,a].map(hW(this,G,q).bind(this));p<u&&([u,p,f,g]=[p,u,g,f]),hD(this,T,P).style.color="";let m=(e,t,n)=>{let s=Array(256),a=(p-u)/n,o=e/255,l=(t-e)/(255*n),h=0;for(let e=0;e<=n;e++){let t=Math.round(u+e*a),n=o+e*l;for(let e=h;e<=t;e++)s[e]=n;h=t+1}for(let e=h;e<256;e++)s[e]=s[h-1];return s.join(",")},v=`g_${hD(this,x)}_hcm_${e}_filter`,y=h.filter=hW(this,W,j).call(this,v);return hW(this,N,O).call(this,y),hW(this,z,H).call(this,m(f[0],g[0],5),m(f[1],g[1],5),m(f[2],g[2],5),y),h.url=`url(#${v})`,h.url}destroy(e=!1){e&&0!==hD(this,M,R).size||(hD(this,A)&&(hD(this,A).parentNode.parentNode.remove(),hN(this,A,null)),hD(this,w)&&(hD(this,w).clear(),hN(this,w,null)),hN(this,k,0))}}w=new WeakMap,A=new WeakMap,x=new WeakMap,_=new WeakMap,S=new WeakMap,k=new WeakMap,E=new WeakSet,C=function(){return hD(this,w)||hN(this,w,new Map)},M=new WeakSet,R=function(){return hD(this,S)||hN(this,S,new Map)},T=new WeakSet,P=function(){if(!hD(this,A)){let e=hD(this,_).createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;let n=hD(this,_).createElementNS(mv,"svg");n.setAttribute("width",0),n.setAttribute("height",0),hN(this,A,hD(this,_).createElementNS(mv,"defs")),e.append(n),n.append(hD(this,A)),hD(this,_).body.append(e)}return hD(this,A)},L=new WeakSet,I=function(e){if(1===e.length){let t=e[0],n=Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;let s=n.join(",");return[s,s,s]}let[t,n,s]=e,a=Array(256),o=Array(256),l=Array(256);for(let e=0;e<256;e++)a[e]=t[e]/255,o[e]=n[e]/255,l[e]=s[e]/255;return[a.join(","),o.join(","),l.join(",")]},D=new WeakSet,F=function(e){let t=hD(this,_).createElementNS(mv,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)},N=new WeakSet,O=function(e){let t=hD(this,_).createElementNS(mv,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)},W=new WeakSet,j=function(e){let t=hD(this,_).createElementNS(mv,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),hD(this,T,P).append(t),t},B=new WeakSet,$=function(e,t,n){let s=hD(this,_).createElementNS(mv,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),e.append(s)},z=new WeakSet,H=function(e,t,n,s){let a=hD(this,_).createElementNS(mv,"feComponentTransfer");s.append(a),hW(this,B,$).call(this,a,"feFuncR",e),hW(this,B,$).call(this,a,"feFuncG",t),hW(this,B,$).call(this,a,"feFuncB",n)},U=new WeakSet,V=function(e,t){let n=hD(this,_).createElementNS(mv,"feComponentTransfer");t.append(n),hW(this,B,$).call(this,n,"feFuncA",e)},G=new WeakSet,q=function(e){return hD(this,T,P).style.color=e,mW(getComputedStyle(hD(this,T,P)).getPropertyValue("color"))};class mA extends mp{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){let n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function mx(e,t="text"){if(mI(e,document.baseURI)){let n=await fetch(e);if(!n.ok)throw Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,s)=>{let a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(200===a.status||0===a.status){switch(t){case"arraybuffer":case"blob":case"json":n(a.response);return}n(a.responseText);return}s(Error(a.statusText))}},a.send(null)})}class m_ extends mf{_fetchData(e,t){return mx(e,this.isCompressed?"arraybuffer":"text").then(e=>({cMapData:e instanceof ArrayBuffer?new Uint8Array(e):mn(e),compressionType:t}))}}class mS extends mg{_fetchData(e){return mx(e,"arraybuffer").then(e=>new Uint8Array(e))}}class mk extends mm{_createSVG(e){return document.createElementNS(mv,e)}}class mE{constructor({viewBox:e,scale:t,rotation:n,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){let l,h,c,d,u,p,f,g;this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=s,this.offsetY=a;const m=(e[2]+e[0])/2,v=(e[3]+e[1])/2;switch((n%=360)<0&&(n+=360),n){case 180:l=-1,h=0,c=0,d=1;break;case 90:l=0,h=1,c=1,d=0;break;case 270:l=0,h=-1,c=-1,d=0;break;case 0:l=1,h=0,c=0,d=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(c=-c,d=-d),0===l?(u=Math.abs(v-e[1])*t+s,p=Math.abs(m-e[0])*t+a,f=(e[3]-e[1])*t,g=(e[2]-e[0])*t):(u=Math.abs(m-e[0])*t+s,p=Math.abs(v-e[1])*t+a,f=(e[2]-e[0])*t,g=(e[3]-e[1])*t),this.transform=[l*t,h*t,c*t,d*t,u-l*t*m-c*t*v,p-h*t*m-d*t*v],this.width=f,this.height=g}get rawDims(){let{viewBox:e}=this;return g3(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new mE({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(e,t){return mo.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){let t=mo.applyTransform([e[0],e[1]],this.transform),n=mo.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return mo.applyInverseTransform([e,t],this.transform)}}class mC extends g5{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function mM(e){let t=e.length,n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function mR(e){return"string"==typeof e&&/\.pdf$/i.test(e)}function mT(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)}function mP(e,t="document.pdf"){if("string"!=typeof e)return t;if(mM(e))return gZ('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e),a=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(a&&(a=a[0]).includes("%"))try{a=n.exec(decodeURIComponent(a))[0]}catch{}return a||t}class mL{constructor(){hL(this,"started",Object.create(null)),hL(this,"times",[])}time(e){e in this.started&&gZ(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||gZ(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){let e=[],t=0;for(let{name:e}of this.times)t=Math.max(e.length,t);for(let{name:n,start:s,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-s}ms
`);return e.join("")}}function mI(e,t){try{let{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch{return!1}}function mD(e){e.preventDefault()}function mF(e){console.log("Deprecated API usage: "+e)}class mN{static toDateObject(e){if(!e||"string"!=typeof e)return null;s||(s=RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let t=s.exec(e);if(!t)return null;let n=parseInt(t[1],10),a=parseInt(t[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(t[4],10);l=l>=0&&l<=23?l:0;let h=parseInt(t[5],10);h=h>=0&&h<=59?h:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;let d=t[7]||"Z",u=parseInt(t[8],10);u=u>=0&&u<=23?u:0;let p=parseInt(t[9],10)||0;return p=p>=0&&p<=59?p:0,"-"===d?(l+=u,h+=p):"+"===d&&(l-=u,h-=p),new Date(Date.UTC(n,a,o,l,h,c))}}function mO(e,{scale:t=1,rotation:n=0}){let{width:s,height:a}=e.attributes.style;return new mE({viewBox:[0,0,parseInt(s),parseInt(a)],scale:t,rotation:n})}function mW(e){if(e.startsWith("#")){let t=parseInt(e.slice(1),16);return[(0xff0000&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(gZ(`Not a valid color format: "${e}"`),[0,0,0])}function mj(e){let{a:t,b:n,c:s,d:a,e:o,f:l}=e.getTransform();return[t,n,s,a,o,l]}function mB(e){let{a:t,b:n,c:s,d:a,e:o,f:l}=e.getTransform().invertSelf();return[t,n,s,a,o,l]}function m$(e,t,n=!1,s=!0){if(t instanceof mE){let{pageWidth:s,pageHeight:a}=t.rawDims,{style:o}=e,l=ms.isCSSRoundSupported,h=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${a}px`,d=l?`round(${h}, 1px)`:`calc(${h})`,u=l?`round(${c}, 1px)`:`calc(${c})`;n&&t.rotation%180!=0?(o.width=u,o.height=d):(o.width=d,o.height=u)}s&&e.setAttribute("data-main-rotation",t.rotation)}let mz=class e{constructor(e){hF(this,ee),hF(this,ei),hF(this,er),hF(this,ea),hF(this,el),hF(this,X,null),hF(this,Y,null),hF(this,K,void 0),hF(this,J,null),hN(this,K,e)}render(){let t=hN(this,X,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",mD),t.addEventListener("pointerdown",hW(e,Q,Z));let n=hN(this,J,document.createElement("div"));n.className="buttons",t.append(n);let s=hD(this,K).toolbarPosition;if(s){let{style:e}=t,n="ltr"===hD(this,K)._uiManager.direction?1-s[0]:s[0];e.insetInlineEnd=`${100*n}%`,e.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return hW(this,ea,eo).call(this),t}hide(){var e;hD(this,X).classList.add("hidden"),null==(e=hD(this,Y))||e.hideDropdown()}show(){hD(this,X).classList.remove("hidden")}addAltTextButton(e){hW(this,er,es).call(this,e),hD(this,J).prepend(e,hD(this,el,eh))}addColorPicker(e){hN(this,Y,e);let t=e.renderButton();hW(this,er,es).call(this,t),hD(this,J).prepend(t,hD(this,el,eh))}remove(){var e;hD(this,X).remove(),null==(e=hD(this,Y))||e.destroy(),hN(this,Y,null)}};X=new WeakMap,Y=new WeakMap,K=new WeakMap,J=new WeakMap,Q=new WeakSet,Z=function(e){e.stopPropagation()},ee=new WeakSet,et=function(e){hD(this,K)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},ei=new WeakSet,en=function(e){hD(this,K)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},er=new WeakSet,es=function(e){e.addEventListener("focusin",hW(this,ee,et).bind(this),{capture:!0}),e.addEventListener("focusout",hW(this,ei,en).bind(this),{capture:!0}),e.addEventListener("contextmenu",mD)},ea=new WeakSet,eo=function(){let e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${hD(this,K).editorType}-button`),hW(this,er,es).call(this,e),e.addEventListener("click",e=>{hD(this,K)._uiManager.delete()}),hD(this,J).append(e)},el=new WeakSet,eh=function(){let e=document.createElement("div");return e.className="divider",e},hF(mz,Q);class mH{constructor(e){hF(this,ep),hF(this,eg),hF(this,ev),hF(this,ec,null),hF(this,ed,null),hF(this,eu,void 0),hN(this,eu,e)}show(e,t,n){let[s,a]=hW(this,eg,em).call(this,t,n),{style:o}=hD(this,ed)||hN(this,ed,hW(this,ep,ef).call(this));e.append(hD(this,ed)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){hD(this,ed).remove()}}function mU(e,t,n){for(let s of n)t.addEventListener(s,e[s].bind(e))}ec=new WeakMap,ed=new WeakMap,eu=new WeakMap,ep=new WeakSet,ef=function(){let e=hN(this,ed,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",mD);let t=hN(this,ec,document.createElement("div"));return t.className="buttons",e.append(t),hW(this,ev,ey).call(this),e},eg=new WeakSet,em=function(e,t){let n=0,s=0;for(let a of e){let e=a.y+a.height;if(e<n)continue;let o=a.x+(t?a.width:0);if(e>n){s=o,n=e;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,n]},ev=new WeakSet,ey=function(){let e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");let t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),e.addEventListener("contextmenu",mD),e.addEventListener("click",()=>{hD(this,eu).highlightSelection("floating_button")}),hD(this,ec).append(e)};class mV{constructor(){hF(this,eb,0)}get id(){return`pdfjs_internal_editor_${hO(this,eb)._++}`}}eb=new WeakMap;let mG=class{constructor(){hF(this,e_),hF(this,ew,function(){if("u">typeof crypto&&"function"==typeof(null==crypto?void 0:crypto.randomUUID))return crypto.randomUUID();let e=new Uint8Array(32);if("u">typeof crypto&&"function"==typeof(null==crypto?void 0:crypto.getRandomValues))crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(255*Math.random());return mi(e)}()),hF(this,eA,0),hF(this,ex,null)}static get _isSVGFittingCanvas(){let e=new OffscreenCanvas(1,3).getContext("2d"),t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',g3(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){let{lastModified:t,name:n,size:s,type:a}=e;return hW(this,e_,eS).call(this,`${t}_${n}_${s}_${a}`,e)}async getFromUrl(e){return hW(this,e_,eS).call(this,e,e)}async getFromId(e){hD(this,ex)||hN(this,ex,new Map);let t=hD(this,ex).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){let t=hD(this,ex).get(e);return null!=t&&t.isSvg?t.svgUrl:null}deleteId(e){hD(this,ex)||hN(this,ex,new Map);let t=hD(this,ex).get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${hD(this,ew)}_`)}};ew=new WeakMap,eA=new WeakMap,ex=new WeakMap,e_=new WeakSet,eS=async function(e,t){hD(this,ex)||hN(this,ex,new Map);let n=hD(this,ex).get(e);if(null===n)return null;if(null!=n&&n.bitmap)return n.refCounter+=1,n;try{let e;if(n||(n={bitmap:null,id:`image_${hD(this,ew)}_${hO(this,eA)._++}`,refCounter:0,isSvg:!1}),"string"==typeof t?(n.url=t,e=await mx(t,"blob")):e=n.file=t,"image/svg+xml"===e.type){let t=mG._isSVGFittingCanvas,s=new FileReader,a=new Image,o=new Promise((e,o)=>{a.onload=()=>{n.bitmap=a,n.isSvg=!0,e()},s.onload=async()=>{let e=n.svgUrl=s.result;a.src=await t?`${e}#svgView(preserveAspectRatio(none))`:e},a.onerror=s.onerror=o});s.readAsDataURL(e),await o}else n.bitmap=await createImageBitmap(e);n.refCounter=1}catch(e){console.error(e),n=null}return hD(this,ex).set(e,n),n&&hD(this,ex).set(n.id,n),n};class mq{constructor(e=128){hF(this,ek,[]),hF(this,eE,!1),hF(this,eC,void 0),hF(this,eM,-1),hN(this,eC,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&e(),hD(this,eE))return;let h={cmd:e,undo:t,post:n,type:a};if(-1===hD(this,eM)){hD(this,ek).length>0&&(hD(this,ek).length=0),hN(this,eM,0),hD(this,ek).push(h);return}if(o&&hD(this,ek)[hD(this,eM)].type===a){l&&(h.undo=hD(this,ek)[hD(this,eM)].undo),hD(this,ek)[hD(this,eM)]=h;return}let c=hD(this,eM)+1;c===hD(this,eC)?hD(this,ek).splice(0,1):(hN(this,eM,c),c<hD(this,ek).length&&hD(this,ek).splice(c)),hD(this,ek).push(h)}undo(){if(-1===hD(this,eM))return;hN(this,eE,!0);let{undo:e,post:t}=hD(this,ek)[hD(this,eM)];e(),null==t||t(),hN(this,eE,!1),hN(this,eM,hD(this,eM)-1)}redo(){if(hD(this,eM)<hD(this,ek).length-1){hN(this,eM,hD(this,eM)+1),hN(this,eE,!0);let{cmd:e,post:t}=hD(this,ek)[hD(this,eM)];e(),null==t||t(),hN(this,eE,!1)}}hasSomethingToUndo(){return -1!==hD(this,eM)}hasSomethingToRedo(){return hD(this,eM)<hD(this,ek).length-1}destroy(){hN(this,ek,null)}}ek=new WeakMap,eE=new WeakMap,eC=new WeakMap,eM=new WeakMap;class mX{constructor(e){hF(this,eR),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=ms.platform;for(const[n,s,a={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:s,options:a}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:s,options:a}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;let n=this.callbacks.get(hW(this,eR,eT).call(this,t));if(!n)return;let{callback:s,options:{bubbles:a=!1,args:o=[],checker:l=null}}=n;l&&!l(e,t)||(s.bind(e,...o,t)(),a||(t.stopPropagation(),t.preventDefault()))}}eR=new WeakSet,eT=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);let t=this.buffer.join("+");return this.buffer.length=0,t};let mY=class e{get _colors(){let e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){let t=document.createElement("span");for(let n of(t.style.visibility="hidden",document.body.append(t),e.keys())){t.style.color=n;let s=window.getComputedStyle(t).color;e.set(n,mW(s))}t.remove()}(e),g3(this,"_colors",e)}convert(t){let n=mW(t);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(let[t,s]of this._colors)if(s.every((e,t)=>e===n[t]))return e._colorsMapping.get(t);return n}getHexCode(e){let t=this._colors.get(e);return t?mo.makeHexColor(...t):e}};hL(mY,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let mK=class e{constructor(e,t,n,s,a,o,l,h,c){hF(this,tp),hF(this,tg),hF(this,tv),hF(this,tb),hF(this,tA),hF(this,t_),hF(this,tk),hF(this,tC),hF(this,tR),hF(this,tP),hF(this,tI),hF(this,tF),hF(this,tO),hF(this,tj),hF(this,t$),hF(this,tH),hF(this,tV),hF(this,tq),hF(this,tY),hF(this,tJ),hF(this,eP,null),hF(this,eL,new Map),hF(this,eI,new Map),hF(this,eD,null),hF(this,eF,null),hF(this,eN,null),hF(this,eO,new mq),hF(this,eW,0),hF(this,ej,new Set),hF(this,eB,null),hF(this,e$,null),hF(this,ez,new Set),hF(this,eH,!1),hF(this,eU,null),hF(this,eV,null),hF(this,eG,null),hF(this,eq,!1),hF(this,eX,null),hF(this,eY,new mV),hF(this,eK,!1),hF(this,eJ,!1),hF(this,eQ,null),hF(this,eZ,null),hF(this,e0,null),hF(this,e1,gH.NONE),hF(this,e2,new Set),hF(this,e3,null),hF(this,e5,null),hF(this,e4,null),hF(this,e6,this.blur.bind(this)),hF(this,e8,this.focus.bind(this)),hF(this,e7,this.copy.bind(this)),hF(this,e9,this.cut.bind(this)),hF(this,te,this.paste.bind(this)),hF(this,tt,this.keydown.bind(this)),hF(this,ti,this.keyup.bind(this)),hF(this,tn,this.onEditingAction.bind(this)),hF(this,tr,this.onPageChanging.bind(this)),hF(this,ts,this.onScaleChanging.bind(this)),hF(this,ta,hW(this,tv,ty).bind(this)),hF(this,to,this.onRotationChanging.bind(this)),hF(this,tl,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),hF(this,th,[0,0]),hF(this,tc,null),hF(this,td,null),hF(this,tu,null),hN(this,td,e),hN(this,tu,t),hN(this,eD,n),this._eventBus=s,this._eventBus._on("editingaction",hD(this,tn)),this._eventBus._on("pagechanging",hD(this,tr)),this._eventBus._on("scalechanging",hD(this,ts)),this._eventBus._on("rotationchanging",hD(this,to)),hW(this,tA,tx).call(this),hW(this,tR,tT).call(this),hN(this,eF,a.annotationStorage),hN(this,eU,a.filterFactory),hN(this,e5,o),hN(this,eG,l||null),hN(this,eH,h),hN(this,e0,c||null),this.viewParameters={realScale:mb.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){let t=e.prototype,n=e=>hD(e,td).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),s=(e,{target:t})=>{if(t instanceof HTMLInputElement){let{type:e}=t;return"text"!==e&&"number"!==e}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return g3(this,"_keyboardManager",new mX([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&hD(e,td).contains(t)&&!e.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(e,{target:t})=>!(t instanceof HTMLButtonElement)&&hD(e,td).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:n}]]))}destroy(){var e,t;for(let e of(hW(this,tP,tL).call(this),hW(this,tC,tM).call(this),this._eventBus._off("editingaction",hD(this,tn)),this._eventBus._off("pagechanging",hD(this,tr)),this._eventBus._off("scalechanging",hD(this,ts)),this._eventBus._off("rotationchanging",hD(this,to)),hD(this,eI).values()))e.destroy();hD(this,eI).clear(),hD(this,eL).clear(),hD(this,ez).clear(),hN(this,eP,null),hD(this,e2).clear(),hD(this,eO).destroy(),null==(e=hD(this,eD))||e.destroy(),null==(t=hD(this,eX))||t.hide(),hN(this,eX,null),hD(this,eV)&&(clearTimeout(hD(this,eV)),hN(this,eV,null)),hD(this,tc)&&(clearTimeout(hD(this,tc)),hN(this,tc,null)),hW(this,t_,tS).call(this)}async mlGuess(e){var t;return(null==(t=hD(this,e0))?void 0:t.guess(e))||null}get hasMLManager(){return!!hD(this,e0)}get hcmFilter(){return g3(this,"hcmFilter",hD(this,e5)?hD(this,eU).addHCMFilter(hD(this,e5).foreground,hD(this,e5).background):"none")}get direction(){return g3(this,"direction",getComputedStyle(hD(this,td)).direction)}get highlightColors(){return g3(this,"highlightColors",hD(this,eG)?new Map(hD(this,eG).split(",").map(e=>e.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return g3(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){hN(this,eZ,e)}editAltText(e){var t;null==(t=hD(this,eD))||t.editAltText(this,e)}onPageChanging({pageNumber:e}){hN(this,eW,e-1)}focusMainContainer(){hD(this,td).focus()}findParent(e,t){for(let n of hD(this,eI).values()){let{x:s,y:a,width:o,height:l}=n.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=a&&t<=a+l)return n}return null}disableUserSelect(e=!1){hD(this,tu).classList.toggle("noUserSelect",e)}addShouldRescale(e){hD(this,ez).add(e)}removeShouldRescale(e){hD(this,ez).delete(e)}onScaleChanging({scale:e}){for(let t of(this.commitOrRemove(),this.viewParameters.realScale=e*mb.PDF_TO_CSS_UNITS,hD(this,ez)))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){let t=document.getSelection();if(!t||t.isCollapsed)return;let{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o}=t,l=t.toString(),h=hW(this,tp,tf).call(this,t).closest(".textLayer"),c=this.getSelectionBoxes(h);if(c){for(let d of(t.empty(),hD(this,e1)===gH.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:gH.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0)),hD(this,eI).values()))if(d.hasTextLayer(h)){d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:o,text:l});break}}}addToAnnotationStorage(e){!e.isEmpty()&&hD(this,eF)&&!hD(this,eF).has(e.id)&&hD(this,eF).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,hD(this,eq)&&(hN(this,eq,!1),hW(this,tb,tw).call(this,"main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let t of hD(this,e2))if(t.div.contains(e)){hN(this,eQ,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!hD(this,eQ))return;let[e,t]=hD(this,eQ);hN(this,eQ,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}addEditListeners(){hW(this,tR,tT).call(this),hW(this,tI,tD).call(this)}removeEditListeners(){hW(this,tP,tL).call(this),hW(this,tF,tN).call(this)}copy(e){var t;if(e.preventDefault(),null==(t=hD(this,eP))||t.commitOrRemove(),!this.hasSelection)return;let n=[];for(let e of hD(this,e2)){let t=e.serialize(!0);t&&n.push(t)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();let{clipboardData:t}=e;for(let e of t.items)for(let t of hD(this,e$))if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(e){gZ(`paste: "${e.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let s=this.currentLayer;try{let e=[];for(let t of n){let n=s.deserialize(t);if(!n)return;e.push(n)}let t=()=>{for(let t of e)hW(this,tV,tG).call(this,t);hW(this,tJ,tQ).call(this,e)};this.addCommands({cmd:t,undo:()=>{for(let t of e)t.remove()},mustExec:!0})}catch(e){gZ(`paste: "${e.message}".`)}}keydown(t){this.isShiftKeyDown||"Shift"!==t.key||(this.isShiftKeyDown=!0),hD(this,e1)===gH.NONE||this.isEditorHandlingKeyboard||e._keyboardManager.exec(this,t)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,hD(this,eq)&&(hN(this,eq,!1),hW(this,tb,tw).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu")}}setEditingState(e){e?(hW(this,tk,tE).call(this),hW(this,tI,tD).call(this),hW(this,tO,tW).call(this,{isEditing:hD(this,e1)!==gH.NONE,isEmpty:hW(this,tY,tK).call(this),hasSomethingToUndo:hD(this,eO).hasSomethingToUndo(),hasSomethingToRedo:hD(this,eO).hasSomethingToRedo(),hasSelectedEditor:!1})):(hW(this,tC,tM).call(this),hW(this,tF,tN).call(this),hW(this,tO,tW).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!hD(this,e$))for(let t of(hN(this,e$,e),hD(this,e$)))hW(this,tj,tB).call(this,t.defaultPropertiesToUpdate)}getId(){return hD(this,eY).id}get currentLayer(){return hD(this,eI).get(hD(this,eW))}getLayer(e){return hD(this,eI).get(e)}get currentPageIndex(){return hD(this,eW)}addLayer(e){hD(this,eI).set(e.pageIndex,e),hD(this,eK)?e.enable():e.disable()}removeLayer(e){hD(this,eI).delete(e.pageIndex)}updateMode(e,t=null,n=!1){if(hD(this,e1)!==e){if(hN(this,e1,e),e===gH.NONE){this.setEditingState(!1),hW(this,tH,tU).call(this);return}for(let t of(this.setEditingState(!0),hW(this,t$,tz).call(this),this.unselectAll(),hD(this,eI).values()))t.updateMode(e);if(!t&&n)return void this.addNewEditorFromKeyboard();if(t){for(let e of hD(this,eL).values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==hD(this,e1)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(hD(this,e$)){switch(e){case gU.CREATE:this.currentLayer.addNewEditor();return;case gU.HIGHLIGHT_DEFAULT_COLOR:null==(n=hD(this,eZ))||n.updateColor(t);break;case gU.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(hD(this,e4)||hN(this,e4,new Map)).set(e,t),this.showAllEditors("highlight",t)}for(let n of hD(this,e2))n.updateParams(e,t);for(let n of hD(this,e$))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(let n of hD(this,eL).values())n.editorType===e&&n.show(t);((null==(s=hD(this,e4))?void 0:s.get(gU.HIGHLIGHT_SHOW_ALL))??!0)!==t&&hW(this,tj,tB).call(this,[[gU.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(hD(this,eJ)!==e)for(let t of(hN(this,eJ,e),hD(this,eI).values()))e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}getEditors(e){let t=[];for(let n of hD(this,eL).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return hD(this,eL).get(e)}addEditor(e){hD(this,eL).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(hD(this,eV)&&clearTimeout(hD(this,eV)),hN(this,eV,setTimeout(()=>{this.focusMainContainer(),hN(this,eV,null)},0))),hD(this,eL).delete(e.id),this.unselect(e),e.annotationElementId&&hD(this,ej).has(e.annotationElementId)||null==(t=hD(this,eF))||t.remove(e.id)}addDeletedAnnotationElement(e){hD(this,ej).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return hD(this,ej).has(e)}removeDeletedAnnotationElement(e){hD(this,ej).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){hD(this,eP)!==e&&(hN(this,eP,e),e&&hW(this,tj,tB).call(this,e.propertiesToUpdate))}updateUI(e){hD(this,tq,tX)===e&&hW(this,tj,tB).call(this,e.propertiesToUpdate)}toggleSelected(e){if(hD(this,e2).has(e)){hD(this,e2).delete(e),e.unselect(),hW(this,tO,tW).call(this,{hasSelectedEditor:this.hasSelection});return}hD(this,e2).add(e),e.select(),hW(this,tj,tB).call(this,e.propertiesToUpdate),hW(this,tO,tW).call(this,{hasSelectedEditor:!0})}setSelected(e){for(let t of hD(this,e2))t!==e&&t.unselect();hD(this,e2).clear(),hD(this,e2).add(e),e.select(),hW(this,tj,tB).call(this,e.propertiesToUpdate),hW(this,tO,tW).call(this,{hasSelectedEditor:!0})}isSelected(e){return hD(this,e2).has(e)}get firstSelectedEditor(){return hD(this,e2).values().next().value}unselect(e){e.unselect(),hD(this,e2).delete(e),hW(this,tO,tW).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==hD(this,e2).size}get isEnterHandled(){return 1===hD(this,e2).size&&this.firstSelectedEditor.isEnterHandled}undo(){hD(this,eO).undo(),hW(this,tO,tW).call(this,{hasSomethingToUndo:hD(this,eO).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:hW(this,tY,tK).call(this)})}redo(){hD(this,eO).redo(),hW(this,tO,tW).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:hD(this,eO).hasSomethingToRedo(),isEmpty:hW(this,tY,tK).call(this)})}addCommands(e){hD(this,eO).add(e),hW(this,tO,tW).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:hW(this,tY,tK).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let e=[...hD(this,e2)],t=()=>{for(let t of e)hW(this,tV,tG).call(this,t)};this.addCommands({cmd:()=>{for(let t of e)t.remove()},undo:t,mustExec:!0})}commitOrRemove(){var e;null==(e=hD(this,eP))||e.commitOrRemove()}hasSomethingToControl(){return hD(this,eP)||this.hasSelection}selectAll(){for(let e of hD(this,e2))e.commit();hW(this,tJ,tQ).call(this,hD(this,eL).values())}unselectAll(){if(!(hD(this,eP)&&(hD(this,eP).commitOrRemove(),hD(this,e1)!==gH.NONE))&&this.hasSelection){for(let e of hD(this,e2))e.unselect();hD(this,e2).clear(),hW(this,tO,tW).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;hD(this,th)[0]+=e,hD(this,th)[1]+=t;let[s,a]=hD(this,th),o=[...hD(this,e2)];for(let n of(hD(this,tc)&&clearTimeout(hD(this,tc)),hN(this,tc,setTimeout(()=>{hN(this,tc,null),hD(this,th)[0]=hD(this,th)[1]=0,this.addCommands({cmd:()=>{for(let e of o)hD(this,eL).has(e.id)&&e.translateInPage(s,a)},undo:()=>{for(let e of o)hD(this,eL).has(e.id)&&e.translateInPage(-s,-a)},mustExec:!1})},1e3)),o))n.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection)for(let e of(this.disableUserSelect(!0),hN(this,eB,new Map),hD(this,e2)))hD(this,eB).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}endDragSession(){if(!hD(this,eB))return!1;this.disableUserSelect(!1);let e=hD(this,eB);hN(this,eB,null);let t=!1;for(let[{x:n,y:s,pageIndex:a},o]of e)o.newX=n,o.newY=s,o.newPageIndex=a,t||(t=n!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;let n=(e,t,n,s)=>{if(hD(this,eL).has(e.id)){let a=hD(this,eI).get(s);a?e._setParentAndPosition(a,t,n):(e.pageIndex=s,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(let[t,{newX:s,newY:a,newPageIndex:o}]of e)n(t,s,a,o)},undo:()=>{for(let[t,{savedX:s,savedY:a,savedPageIndex:o}]of e)n(t,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(hD(this,eB))for(let n of hD(this,eB).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){let t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null==(e=this.getActive())?void 0:e.shouldGetKeyboardEvents())||1===hD(this,e2).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return hD(this,eP)===e}getActive(){return hD(this,eP)}getMode(){return hD(this,e1)}get imageManager(){return g3(this,"imageManager",new mG)}getSelectionBoxes(e){let t;if(!e)return null;let n=document.getSelection();for(let t=0,s=n.rangeCount;t<s;t++)if(!e.contains(n.getRangeAt(t).commonAncestorContainer))return null;let{x:s,y:a,width:o,height:l}=e.getBoundingClientRect();switch(e.getAttribute("data-main-rotation")){case"90":t=(e,t,n,h)=>({x:(t-a)/l,y:1-(e+n-s)/o,width:h/l,height:n/o});break;case"180":t=(e,t,n,h)=>({x:1-(e+n-s)/o,y:1-(t+h-a)/l,width:n/o,height:h/l});break;case"270":t=(e,t,n,h)=>({x:1-(t+h-a)/l,y:(e-s)/o,width:h/l,height:n/o});break;default:t=(e,t,n,h)=>({x:(e-s)/o,y:(t-a)/l,width:n/o,height:h/l})}let h=[];for(let e=0,s=n.rangeCount;e<s;e++){let s=n.getRangeAt(e);if(!s.collapsed)for(let{x:e,y:n,width:a,height:o}of s.getClientRects())0===a||0===o||h.push(t(e,n,a,o))}return 0===h.length?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(hD(this,eN)||hN(this,eN,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;null==(t=hD(this,eN))||t.delete(e)}renderAnnotationElement(e){var t;let n=null==(t=hD(this,eN))?void 0:t.get(e.data.id);if(!n)return;let s=hD(this,eF).getRawValue(n);s&&(hD(this,e1)!==gH.NONE||s.hasBeenModified)&&s.renderAnnotationElement(e)}};eP=new WeakMap,eL=new WeakMap,eI=new WeakMap,eD=new WeakMap,eF=new WeakMap,eN=new WeakMap,eO=new WeakMap,eW=new WeakMap,ej=new WeakMap,eB=new WeakMap,e$=new WeakMap,ez=new WeakMap,eH=new WeakMap,eU=new WeakMap,eV=new WeakMap,eG=new WeakMap,eq=new WeakMap,eX=new WeakMap,eY=new WeakMap,eK=new WeakMap,eJ=new WeakMap,eQ=new WeakMap,eZ=new WeakMap,e0=new WeakMap,e1=new WeakMap,e2=new WeakMap,e3=new WeakMap,e5=new WeakMap,e4=new WeakMap,e6=new WeakMap,e8=new WeakMap,e7=new WeakMap,e9=new WeakMap,te=new WeakMap,tt=new WeakMap,ti=new WeakMap,tn=new WeakMap,tr=new WeakMap,ts=new WeakMap,ta=new WeakMap,to=new WeakMap,tl=new WeakMap,th=new WeakMap,tc=new WeakMap,td=new WeakMap,tu=new WeakMap,tp=new WeakSet,tf=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},tg=new WeakSet,tm=function(){let e=document.getSelection();if(!e||e.isCollapsed)return;let t=hW(this,tp,tf).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(hD(this,eX)||hN(this,eX,new mH(this)),hD(this,eX).show(t,n,"ltr"===this.direction))},tv=new WeakSet,ty=function(){var e,t,n;let s=document.getSelection();if(!s||s.isCollapsed){hD(this,e3)&&(null==(e=hD(this,eX))||e.hide(),hN(this,e3,null),hW(this,tO,tW).call(this,{hasSelectedText:!1}));return}let{anchorNode:a}=s;if(a!==hD(this,e3)){if(!hW(this,tp,tf).call(this,s).closest(".textLayer")){hD(this,e3)&&(null==(t=hD(this,eX))||t.hide(),hN(this,e3,null),hW(this,tO,tW).call(this,{hasSelectedText:!1}));return}if(null==(n=hD(this,eX))||n.hide(),hN(this,e3,a),hW(this,tO,tW).call(this,{hasSelectedText:!0}),(hD(this,e1)===gH.HIGHLIGHT||hD(this,e1)===gH.NONE)&&(hD(this,e1)===gH.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),hN(this,eq,this.isShiftKeyDown),!this.isShiftKeyDown)){let e=t=>{"pointerup"===t.type&&0!==t.button||(window.removeEventListener("pointerup",e),window.removeEventListener("blur",e),"pointerup"===t.type&&hW(this,tb,tw).call(this,"main_toolbar"))};window.addEventListener("pointerup",e),window.addEventListener("blur",e)}}},tb=new WeakSet,tw=function(e=""){hD(this,e1)===gH.HIGHLIGHT?this.highlightSelection(e):hD(this,eH)&&hW(this,tg,tm).call(this)},tA=new WeakSet,tx=function(){document.addEventListener("selectionchange",hD(this,ta))},t_=new WeakSet,tS=function(){document.removeEventListener("selectionchange",hD(this,ta))},tk=new WeakSet,tE=function(){window.addEventListener("focus",hD(this,e8)),window.addEventListener("blur",hD(this,e6))},tC=new WeakSet,tM=function(){window.removeEventListener("focus",hD(this,e8)),window.removeEventListener("blur",hD(this,e6))},tR=new WeakSet,tT=function(){window.addEventListener("keydown",hD(this,tt)),window.addEventListener("keyup",hD(this,ti))},tP=new WeakSet,tL=function(){window.removeEventListener("keydown",hD(this,tt)),window.removeEventListener("keyup",hD(this,ti))},tI=new WeakSet,tD=function(){document.addEventListener("copy",hD(this,e7)),document.addEventListener("cut",hD(this,e9)),document.addEventListener("paste",hD(this,te))},tF=new WeakSet,tN=function(){document.removeEventListener("copy",hD(this,e7)),document.removeEventListener("cut",hD(this,e9)),document.removeEventListener("paste",hD(this,te))},tO=new WeakSet,tW=function(e){Object.entries(e).some(([e,t])=>hD(this,tl)[e]!==t)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(hD(this,tl),e)}),hD(this,e1)===gH.HIGHLIGHT&&!1===e.hasSelectedEditor&&hW(this,tj,tB).call(this,[[gU.HIGHLIGHT_FREE,!0]]))},tj=new WeakSet,tB=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},t$=new WeakSet,tz=function(){if(!hD(this,eK)){for(let e of(hN(this,eK,!0),hD(this,eI).values()))e.enable();for(let e of hD(this,eL).values())e.enable()}},tH=new WeakSet,tU=function(){if(this.unselectAll(),hD(this,eK)){for(let e of(hN(this,eK,!1),hD(this,eI).values()))e.disable();for(let e of hD(this,eL).values())e.disable()}},tV=new WeakSet,tG=function(e){let t=hD(this,eI).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},tq=new WeakSet,tX=function(){let e=null;for(e of hD(this,e2));return e},tY=new WeakSet,tK=function(){if(0===hD(this,eL).size)return!0;if(1===hD(this,eL).size)for(let e of hD(this,eL).values())return e.isEmpty();return!1},tJ=new WeakSet,tQ=function(e){for(let e of hD(this,e2))e.unselect();for(let t of(hD(this,e2).clear(),e))t.isEmpty()||(hD(this,e2).add(t),t.select());hW(this,tO,tW).call(this,{hasSelectedEditor:this.hasSelection})},hL(mK,"TRANSLATE_SMALL",1),hL(mK,"TRANSLATE_BIG",10);let mJ=mK,mQ=class e{constructor(e){hF(this,t6),hF(this,tZ,""),hF(this,t0,!1),hF(this,t1,null),hF(this,t2,null),hF(this,t3,null),hF(this,t5,!1),hF(this,t4,null),hN(this,t4,e)}static initialize(t){e._l10nPromise||(e._l10nPromise=t)}async render(){let t=hN(this,t1,document.createElement("button"));t.className="altText";let n=await e._l10nPromise.get("pdfjs-editor-alt-text-button-label");t.textContent=n,t.setAttribute("aria-label",n),t.tabIndex="0",t.addEventListener("contextmenu",mD),t.addEventListener("pointerdown",e=>e.stopPropagation());let s=e=>{e.preventDefault(),hD(this,t4)._uiManager.editAltText(hD(this,t4))};return t.addEventListener("click",s,{capture:!0}),t.addEventListener("keydown",e=>{e.target===t&&"Enter"===e.key&&(hN(this,t5,!0),s(e))}),await hW(this,t6,t8).call(this),t}finish(){hD(this,t1)&&(hD(this,t1).focus({focusVisible:hD(this,t5)}),hN(this,t5,!1))}isEmpty(){return!hD(this,tZ)&&!hD(this,t0)}get data(){return{altText:hD(this,tZ),decorative:hD(this,t0)}}set data({altText:e,decorative:t}){hD(this,tZ)===e&&hD(this,t0)===t||(hN(this,tZ,e),hN(this,t0,t),hW(this,t6,t8).call(this))}toggle(e=!1){hD(this,t1)&&(!e&&hD(this,t3)&&(clearTimeout(hD(this,t3)),hN(this,t3,null)),hD(this,t1).disabled=!e)}destroy(){var e;null==(e=hD(this,t1))||e.remove(),hN(this,t1,null),hN(this,t2,null)}};tZ=new WeakMap,t0=new WeakMap,t1=new WeakMap,t2=new WeakMap,t3=new WeakMap,t5=new WeakMap,t4=new WeakMap,t6=new WeakSet,t8=async function(){var e;let t=hD(this,t1);if(!t)return;if(!hD(this,tZ)&&!hD(this,t0)){t.classList.remove("done"),null==(e=hD(this,t2))||e.remove();return}t.classList.add("done"),mQ._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(e=>{t.setAttribute("aria-label",e)});let n=hD(this,t2);if(!n){hN(this,t2,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip");let e=n.id=`alt-text-tooltip-${hD(this,t4).id}`;t.setAttribute("aria-describedby",e),t.addEventListener("mouseenter",()=>{hN(this,t3,setTimeout(()=>{hN(this,t3,null),hD(this,t2).classList.add("show"),hD(this,t4)._reportTelemetry({action:"alt_text_tooltip"})},100))}),t.addEventListener("mouseleave",()=>{var e;hD(this,t3)&&(clearTimeout(hD(this,t3)),hN(this,t3,null)),null==(e=hD(this,t2))||e.classList.remove("show")})}n.innerText=hD(this,t0)?await mQ._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):hD(this,tZ),n.parentNode||t.append(n);let s=hD(this,t4).getImageForAltText();null==s||s.setAttribute("aria-describedby",n.id)},hL(mQ,"_l10nPromise",null);let mZ=class e{constructor(t){hF(this,iA),hF(this,ik),hF(this,iC),hF(this,iR),hF(this,iP),hF(this,iI),hF(this,iF),hF(this,iO),hF(this,ij),hF(this,i$),hF(this,iH),hF(this,iV),hF(this,iq),hF(this,t7,null),hF(this,t9,null),hF(this,ie,!1),hF(this,it,!1),hF(this,ii,null),hF(this,ir,null),hF(this,is,this.focusin.bind(this)),hF(this,ia,this.focusout.bind(this)),hF(this,io,null),hF(this,il,""),hF(this,ih,!1),hF(this,ic,null),hF(this,id,!1),hF(this,iu,!1),hF(this,ip,!1),hF(this,ig,null),hF(this,im,0),hF(this,iv,0),hF(this,iy,null),hL(this,"_initialOptions",Object.create(null)),hL(this,"_isVisible",!0),hL(this,"_uiManager",null),hL(this,"_focusEventsAllowed",!0),hL(this,"_l10nPromise",null),hF(this,ib,!1),hF(this,iw,e._zIndex++),this.constructor===e&&g0("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:n,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[h,c]=this.parentDimensions;this.x=t.x/h,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){let t=e.prototype._resizeWithKeyboard,n=mJ.TRANSLATE_SMALL,s=mJ.TRANSLATE_BIG;return g3(this,"_resizerKeyboardManager",new mX([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],e.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return g3(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){let t=new m1({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(t,n,s){if(e._l10nPromise||(e._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(e=>[e,t.get(e.replaceAll(/([A-Z])/g,e=>`-${e.toLowerCase()}`))]))),null!=s&&s.strings)for(let n of s.strings)e._l10nPromise.set(n,t.get(n));-1!==e._borderLineWidth||(e._borderLineWidth=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--outline-width"))||0)}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){g0("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return hD(this,ib)}set _isDraggable(e){var t;hN(this,ib,e),null==(t=this.div)||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){let[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=hD(this,iw)}setParent(e){null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):hW(this,iq,iX).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(hD(this,ih)?hN(this,ih,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;let n=e.relatedTarget;null!=n&&n.closest(`#${this.id}`)||(e.preventDefault(),null!=(t=this.parent)&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){let[a,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/a,this.y=(t+s)/o,this.fixAndSetPosition()}translate(e,t){hW(this,iA,ix).call(this,this.parentDimensions,e,t)}translateInPage(e,t){hD(this,ic)||hN(this,ic,[this.x,this.y]),hW(this,iA,ix).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){hD(this,ic)||hN(this,ic,[this.x,this.y]);let[n,s]=this.parentDimensions;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this,[l,h]=this.getBaseTranslation();a+=l,o+=h,this.div.style.left=`${(100*a).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!hD(this,ic)&&(hD(this,ic)[0]!==this.x||hD(this,ic)[1]!==this.y)}getBaseTranslation(){let[t,n]=this.parentDimensions,{_borderLineWidth:s}=e,a=s/t,o=s/n;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){let[t,n]=this.pageDimensions,{x:s,y:a,width:o,height:l}=this;if(o*=t,l*=n,s*=t,a*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-o,s)),a=Math.max(0,Math.min(n-l,a));break;case 90:s=Math.max(0,Math.min(t-l,s)),a=Math.min(n,Math.max(o,a));break;case 180:s=Math.min(t,Math.max(o,s)),a=Math.min(n,Math.max(l,a));break;case 270:s=Math.min(t,Math.max(l,s)),a=Math.max(0,Math.min(n-o,a))}this.x=s/=t,this.y=a/=n;let[h,c]=this.getBaseTranslation();s+=h,a+=c;let{style:d}=this.div;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,n){return hW(e,i_,iS).call(e,t,n,this.parentRotation)}pageTranslationToScreen(t,n){return hW(e,i_,iS).call(e,t,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:e,pageDimensions:[t,n]}=this,s=t*e,a=n*e;return ms.isCSSRoundSupported?[Math.round(s),Math.round(a)]:[s,a]}setDims(e,t){let[n,s]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,hD(this,it)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){let{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),a=!hD(this,it)&&t.endsWith("%");if(s&&a)return;let[o,l]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),hD(this,it)||a||(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;null==(e=hD(this,t9))||e.finish()}async addEditToolbar(){return hD(this,io)||hD(this,iu)||(hN(this,io,new mz(this)),this.div.append(hD(this,io).render()),hD(this,t9)&&hD(this,io).addAltTextButton(await hD(this,t9).render())),hD(this,io)}removeEditToolbar(){var e;hD(this,io)&&(hD(this,io).remove(),hN(this,io,null),null==(e=hD(this,t9))||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){hD(this,t9)||(mQ.initialize(e._l10nPromise),hN(this,t9,new mQ(this)),await this.addEditToolbar())}get altTextData(){var e;return null==(e=hD(this,t9))?void 0:e.data}set altTextData(e){hD(this,t9)&&(hD(this,t9).data=e)}hasAltText(){var e;return!(null!=(e=hD(this,t9))&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=hD(this,ie)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",hD(this,is)),this.div.addEventListener("focusout",hD(this,ia));let[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);let[n,s]=this.getInitialTranslation();return this.translate(n,s),mU(this,this.div,["pointerdown"]),this.div}pointerdown(e){let{isMac:t}=ms.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(hN(this,ih,!0),this._isDraggable)?hW(this,iO,iW).call(this,e):hW(this,iF,iN).call(this,e)}moveInDOM(){hD(this,ig)&&clearTimeout(hD(this,ig)),hN(this,ig,setTimeout(()=>{var e;hN(this,ig,null),null==(e=this.parent)||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){let s=this.parentScale,[a,o]=this.pageDimensions,[l,h]=this.pageTranslation,c=e/s,d=t/s,u=this.x*a,p=this.y*o,f=this.width*a,g=this.height*o;switch(n){case 0:return[u+c+l,o-p-d-g+h,u+c+f+l,o-p-d+h];case 90:return[u+d+l,o-p+c+h,u+d+g+l,o-p+c+f+h];case 180:return[u-c-f+l,o-p+d+h,u-c+l,o-p+d+g+h];case 270:return[u-d-g+l,o-p-c-f+h,u-d+l,o-p-c+h];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(e,t){let[n,s,a,o]=e,l=a-n,h=o-s;switch(this.rotation){case 0:return[n,t-o,l,h];case 90:return[n,t-s,h,l];case 180:return[a,t-s,l,h];case 270:return[a,t-o,h,l];default:throw Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){hN(this,iu,!0)}disableEditMode(){hN(this,iu,!1)}isInEditMode(){return hD(this,iu)}shouldGetKeyboardEvents(){return hD(this,ip)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;null==(e=this.div)||e.addEventListener("focusin",hD(this,is)),null==(t=this.div)||t.addEventListener("focusout",hD(this,ia))}rotate(e){}serialize(e=!1,t=null){g0("An editor must be serializable")}static deserialize(e,t,n){let s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation;let[a,o]=s.pageDimensions,[l,h,c,d]=s.getRectInCurrentCoords(e.rect,o);return s.x=l/a,s.y=h/o,s.width=c/a,s.height=d/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){if(this.div.removeEventListener("focusin",hD(this,is)),this.div.removeEventListener("focusout",hD(this,ia)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),hD(this,ig)&&(clearTimeout(hD(this,ig)),hN(this,ig,null)),hW(this,iq,iX).call(this),this.removeEditToolbar(),hD(this,iy)){for(let e of hD(this,iy).values())clearTimeout(e);hN(this,iy,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(hW(this,iC,iM).call(this),hD(this,ii).classList.remove("hidden"),mU(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||"Enter"!==t.key)return;this._uiManager.setSelected(this),hN(this,ir,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});let n=hD(this,ii).children;if(!hD(this,t7)){hN(this,t7,Array.from(n));let t=hW(this,ij,iB).bind(this),s=hW(this,i$,iz).bind(this);for(let n of hD(this,t7)){let a=n.getAttribute("data-resizer-name");n.setAttribute("role","spinbutton"),n.addEventListener("keydown",t),n.addEventListener("blur",s),n.addEventListener("focus",hW(this,iH,iU).bind(this,a)),e._l10nPromise.get(`pdfjs-editor-resizer-label-${a}`).then(e=>n.setAttribute("aria-label",e))}}let s=hD(this,t7)[0],a=0;for(let e of n){if(e===s)break;a++}let o=(360-this.rotation+this.parentRotation)%360/90*(hD(this,t7).length/4);if(o!==a){if(o<a)for(let e=0;e<a-o;e++)hD(this,ii).append(hD(this,ii).firstChild);else if(o>a)for(let e=0;e<o-a;e++)hD(this,ii).firstChild.before(hD(this,ii).lastChild);let t=0;for(let s of n){let n=hD(this,t7)[t++].getAttribute("data-resizer-name");e._l10nPromise.get(`pdfjs-editor-resizer-label-${n}`).then(e=>s.setAttribute("aria-label",e))}}hW(this,iV,iG).call(this,0),hN(this,ip,!0),hD(this,ii).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(e,t){hD(this,ip)&&hW(this,iI,iD).call(this,hD(this,il),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){hW(this,iq,iX).call(this),this.div.focus()}select(){var e,t;(this.makeResizable(),null==(e=this.div)||e.classList.add("selectedEditor"),hD(this,io))?null==(t=hD(this,io))||t.show():this.addEditToolbar().then(()=>{var e,t;null!=(e=this.div)&&e.classList.contains("selectedEditor")&&(null==(t=hD(this,io))||t.show())})}unselect(){var e,t,n,s;null==(e=hD(this,ii))||e.classList.add("hidden"),null==(t=this.div)||t.classList.remove("selectedEditor"),null!=(n=this.div)&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null==(s=hD(this,io))||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return hD(this,id)}set isEditing(e){hN(this,id,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){hN(this,it,!0);let{style:n}=this.div;n.aspectRatio=e/t,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,n=!1){if(n){hD(this,iy)||hN(this,iy,new Map);let{action:n}=t,s=hD(this,iy).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),hD(this,iy).delete(n),0===hD(this,iy).size&&hN(this,iy,null)},e._telemetryTimeout),hD(this,iy).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),hN(this,ie,!1)}disable(){this.div&&(this.div.tabIndex=-1),hN(this,ie,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){let e=t;(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.before(t)}}else(t=document.createElement("div")).classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){let{firstChild:t}=e.container;"DIV"===t.nodeName&&t.classList.contains("annotationContent")&&t.remove()}};t7=new WeakMap,t9=new WeakMap,ie=new WeakMap,it=new WeakMap,ii=new WeakMap,ir=new WeakMap,is=new WeakMap,ia=new WeakMap,io=new WeakMap,il=new WeakMap,ih=new WeakMap,ic=new WeakMap,id=new WeakMap,iu=new WeakMap,ip=new WeakMap,ig=new WeakMap,im=new WeakMap,iv=new WeakMap,iy=new WeakMap,ib=new WeakMap,iw=new WeakMap,iA=new WeakSet,ix=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this.fixAndSetPosition()},i_=new WeakSet,iS=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},ik=new WeakSet,iE=function(e){switch(e){case 90:{let[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}},iC=new WeakSet,iM=function(){if(!hD(this,ii)){for(let e of(hN(this,ii,document.createElement("div")),hD(this,ii).classList.add("resizers"),this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"])){let t=document.createElement("div");hD(this,ii).append(t),t.classList.add("resizer",e),t.setAttribute("data-resizer-name",e),t.addEventListener("pointerdown",hW(this,iR,iT).bind(this,e)),t.addEventListener("contextmenu",mD),t.tabIndex=-1}this.div.prepend(hD(this,ii))}},iR=new WeakSet,iT=function(e,t){var n;t.preventDefault();let{isMac:s}=ms.platform;if(0!==t.button||t.ctrlKey&&s)return;null==(n=hD(this,t9))||n.toggle(!1);let a=hW(this,iI,iD).bind(this,e),o=this._isDraggable;this._isDraggable=!1;let l={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",a,l),window.addEventListener("contextmenu",mD);let h=this.x,c=this.y,d=this.width,u=this.height,p=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;let g=()=>{var e;this.parent.togglePointerEvents(!0),null==(e=hD(this,t9))||e.toggle(!0),this._isDraggable=o,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",a,l),window.removeEventListener("contextmenu",mD),this.parent.div.style.cursor=p,this.div.style.cursor=f,hW(this,iP,iL).call(this,h,c,d,u)};window.addEventListener("pointerup",g),window.addEventListener("blur",g)},iP=new WeakSet,iL=function(e,t,n,s){let a=this.x,o=this.y,l=this.width,h=this.height;a===e&&o===t&&l===n&&h===s||this.addCommands({cmd:()=>{this.width=l,this.height=h,this.x=a,this.y=o;let[e,t]=this.parentDimensions;this.setDims(e*l,t*h),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=e,this.y=t;let[a,o]=this.parentDimensions;this.setDims(a*n,o*s),this.fixAndSetPosition()},mustExec:!0})},iI=new WeakSet,iD=function(e,t){let n,s,[a,o]=this.parentDimensions,l=this.x,h=this.y,c=this.width,d=this.height,u=mZ.MIN_SIZE/a,p=mZ.MIN_SIZE/o,f=e=>Math.round(1e4*e)/1e4,g=hW(this,ik,iE).call(this,this.rotation),m=(e,t)=>[g[0]*e+g[2]*t,g[1]*e+g[3]*t],v=hW(this,ik,iE).call(this,360-this.rotation),y,b,w=!1,A=!1;switch(e){case"topLeft":w=!0,y=(e,t)=>[0,0],b=(e,t)=>[e,t];break;case"topMiddle":y=(e,t)=>[e/2,0],b=(e,t)=>[e/2,t];break;case"topRight":w=!0,y=(e,t)=>[e,0],b=(e,t)=>[0,t];break;case"middleRight":A=!0,y=(e,t)=>[e,t/2],b=(e,t)=>[0,t/2];break;case"bottomRight":w=!0,y=(e,t)=>[e,t],b=(e,t)=>[0,0];break;case"bottomMiddle":y=(e,t)=>[e/2,t],b=(e,t)=>[e/2,0];break;case"bottomLeft":w=!0,y=(e,t)=>[0,t],b=(e,t)=>[e,0];break;case"middleLeft":A=!0,y=(e,t)=>[0,t/2],b=(e,t)=>[e,t/2]}let x=y(c,d),_=b(c,d),S=m(..._),k=f(l+S[0]),E=f(h+S[1]),C=1,M=1,[R,T]=this.screenToPageTranslation(t.movementX,t.movementY);if([R,T]=(n=R/a,s=T/o,[v[0]*n+v[2]*s,v[1]*n+v[3]*s]),w){let e=Math.hypot(c,d);C=M=Math.max(Math.min(Math.hypot(_[0]-x[0]-R,_[1]-x[1]-T)/e,1/c,1/d),u/c,p/d)}else A?C=Math.max(u,Math.min(1,Math.abs(_[0]-x[0]-R)))/c:M=Math.max(p,Math.min(1,Math.abs(_[1]-x[1]-T)))/d;let P=f(c*C),L=f(d*M),I=k-(S=m(...b(P,L)))[0],D=E-S[1];this.width=P,this.height=L,this.x=I,this.y=D,this.setDims(a*P,o*L),this.fixAndSetPosition()},iF=new WeakSet,iN=function(e){let{isMac:t}=ms.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},iO=new WeakSet,iW=function(e){let t,n,s=this._uiManager.isSelected(this);this._uiManager.setUpDragSession(),s&&(this.div.classList.add("moving"),t={passive:!0,capture:!0},hN(this,im,e.clientX),hN(this,iv,e.clientY),n=e=>{let{clientX:t,clientY:n}=e,[s,a]=this.screenToPageTranslation(t-hD(this,im),n-hD(this,iv));hN(this,im,t),hN(this,iv,n),this._uiManager.dragSelectedEditors(s,a)},window.addEventListener("pointermove",n,t));let a=()=>{window.removeEventListener("pointerup",a),window.removeEventListener("blur",a),s&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,t)),hN(this,ih,!1),this._uiManager.endDragSession()||hW(this,iF,iN).call(this,e)};window.addEventListener("pointerup",a),window.addEventListener("blur",a)},ij=new WeakSet,iB=function(e){mZ._resizerKeyboardManager.exec(this,e)},i$=new WeakSet,iz=function(e){var t;hD(this,ip)&&(null==(t=e.relatedTarget)?void 0:t.parentNode)!==hD(this,ii)&&hW(this,iq,iX).call(this)},iH=new WeakSet,iU=function(e){hN(this,il,hD(this,ip)?e:"")},iV=new WeakSet,iG=function(e){if(hD(this,t7))for(let t of hD(this,t7))t.tabIndex=e},iq=new WeakSet,iX=function(){if(hN(this,ip,!1),hW(this,iV,iG).call(this,-1),hD(this,ir)){let{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=hD(this,ir);hW(this,iP,iL).call(this,e,t,n,s),hN(this,ir,null)}},hF(mZ,i_),hL(mZ,"_borderLineWidth",-1),hL(mZ,"_colorManager",new mY),hL(mZ,"_zIndex",1),hL(mZ,"_telemetryTimeout",1e3);let m0=mZ;class m1 extends m0{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}class m2{constructor(e){this.h1=e?0|e:0xc3d2e1f0,this.h2=e?0|e:0xc3d2e1f0}update(e){let t,n;if("string"==typeof e){t=new Uint8Array(2*e.length),n=0;for(let s=0,a=e.length;s<a;s++){let a=e.charCodeAt(s);a<=255?t[n++]=a:(t[n++]=a>>>8,t[n++]=255&a)}}else if(ArrayBuffer.isView(e))n=(t=e.slice()).byteLength;else throw Error("Invalid data format, must be a string or TypedArray.");let s=n>>2,a=n-4*s,o=new Uint32Array(t.buffer,0,s),l=0,h=0,c=this.h1,d=this.h2;for(let e=0;e<s;e++)1&e?(c^=l=0x1b873593*(l=(l=0xcc9e2d51*(l=o[e])&0xffff0000|11601*l&65535)<<15|l>>>17)&0xffff0000|13715*l&65535,c=5*(c=c<<13|c>>>19)+0xe6546b64):(d^=h=0x1b873593*(h=(h=0xcc9e2d51*(h=o[e])&0xffff0000|11601*h&65535)<<15|h>>>17)&0xffff0000|13715*h&65535,d=5*(d=d<<13|d>>>19)+0xe6546b64);switch(l=0,a){case 3:l^=t[4*s+2]<<16;case 2:l^=t[4*s+1]<<8;case 1:l^=t[4*s],l=0x1b873593*(l=(l=0xcc9e2d51*l&0xffff0000|11601*l&65535)<<15|l>>>17)&0xffff0000|13715*l&65535,1&s?c^=l:d^=l}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,t=0xff51afd7*t&0xffff0000|((t<<16|(e=0xed558ccd*e&0xffff0000|36045*e&65535)>>>16)*0xafd7ed55&0xffff0000)>>>16,e^=t>>>1,t=0xc4ceb9fe*t&0xffff0000|((t<<16|(e=0x1a85ec53*e&0xffff0000|60499*e&65535)>>>16)*0xb9fe1a85&0xffff0000)>>>16,((e^=t>>>1)>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}let m3=Object.freeze({map:null,hash:"",transfer:void 0});class m5{constructor(){hF(this,iJ),hF(this,iY,!1),hF(this,iK,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){let n=hD(this,iK).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return hD(this,iK).get(e)}remove(e){if(hD(this,iK).delete(e),0===hD(this,iK).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let e of hD(this,iK).values())if(e instanceof m0)return;this.onAnnotationEditor(null)}}setValue(e,t){let n=hD(this,iK).get(e),s=!1;if(void 0!==n)for(let[e,a]of Object.entries(t))n[e]!==a&&(s=!0,n[e]=a);else s=!0,hD(this,iK).set(e,t);s&&hW(this,iJ,iQ).call(this),t instanceof m0&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return hD(this,iK).has(e)}getAll(){return hD(this,iK).size>0?mr(hD(this,iK)):null}setAll(e){for(let[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return hD(this,iK).size}resetModified(){hD(this,iY)&&(hN(this,iY,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new m4(this)}get serializable(){if(0===hD(this,iK).size)return m3;let e=new Map,t=new m2,n=[],s=Object.create(null),a=!1;for(let[n,o]of hD(this,iK)){let l=o instanceof m0?o.serialize(!1,s):o;l&&(e.set(n,l),t.update(`${n}:${JSON.stringify(l)}`),a||(a=!!l.bitmap))}if(a)for(let t of e.values())t.bitmap&&n.push(t.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:m3}get editorStats(){let e=null,t=new Map;for(let n of hD(this,iK).values()){if(!(n instanceof m0))continue;let s=n.telemetryFinalData;if(!s)continue;let{type:a}=s;t.has(a)||t.set(a,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));let o=e[a]||(e[a]=new Map);for(let[e,t]of Object.entries(s)){if("type"===e)continue;let n=o.get(e);n||(n=new Map,o.set(e,n));let s=n.get(t)??0;n.set(t,s+1)}}for(let[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}}iY=new WeakMap,iK=new WeakMap,iJ=new WeakSet,iQ=function(){hD(this,iY)||(hN(this,iY,!0),"function"==typeof this.onSetModified&&this.onSetModified())};class m4 extends m5{constructor(e){super(),hF(this,iZ,void 0);const{map:t,hash:n,transfer:s}=e.serializable,a=structuredClone(t,s?{transfer:s}:null);hN(this,iZ,{map:a,hash:n,transfer:s})}get print(){g0("Should not call PrintAnnotationStorage.print")}get serializable(){return hD(this,iZ)}}iZ=new WeakMap;class m6{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){hF(this,i0,new Set),this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(let e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),hD(this,i0).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||hD(this,i0).has(e.loadedName))){if(g1(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:n,src:s,style:a}=e,o=new FontFace(n,s,a);this.addNativeFontFace(o);try{await o.load(),hD(this,i0).add(n),null==t||t(e)}catch{gZ(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}g0("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){let t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw gZ(`Failed to load font '${t.family}': '${n}'.`),e.disableFontFace=!0,n}}return}let t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{let n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return g3(this,"isFontLoadingAPISupported",!!(null!=(e=this._document)&&e.fonts))}get isSyncFontLoadingSupported(){let e=!1;return(gj||"u">typeof navigator&&"string"==typeof(null==navigator?void 0:navigator.userAgent)&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),g3(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){let{loadingRequests:t}=this,n={done:!1,complete:function(){for(g1(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;)setTimeout(t.shift().callback,0)},callback:e};return t.push(n),n}get _loadTestFont(){return g3(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){var n;let s,a;function o(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function l(e,t,n,s){return e.substring(0,t)+s+e.substring(t+n)}let h=this._document.createElement("canvas");h.width=1,h.height=1;let c=h.getContext("2d"),d=0,u=`lt${Date.now()}${this.loadTestFontId++}`,p=this._loadTestFont,f=o(p=l(p,976,u.length,u),16);for(s=0,a=u.length-3;s<a;s+=4)f=f-0x58585858+o(u,s)|0;s<u.length&&(f=f-0x58585858+o(u+"XXX",s)|0),p=l(p,16,4,String.fromCharCode((n=f)>>24&255,n>>16&255,n>>8&255,255&n));let g=`url(data:font/opentype;base64,${btoa(p)});`,m=`@font-face {font-family:"${u}";src:${g}}`;this.insertRule(m);let v=this._document.createElement("div");for(let t of(v.style.visibility="hidden",v.style.width=v.style.height="10px",v.style.position="absolute",v.style.top=v.style.left="0px",[e.loadedName,u])){let e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,v.append(e)}this._document.body.append(v),function e(t,n){if(++d>30){gZ("Load test font never loaded."),n();return}(c.font="30px "+t,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0)?n():setTimeout(e.bind(null,t,n))}(u,()=>{v.remove(),t.complete()})}}i0=new WeakMap;class m8{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){for(const t in this.compiledGlyphs=Object.create(null),e)this[t]=e[t];this.disableFontFace=!0===t,this._inspectFont=n}createNativeFontFace(){var e;let t;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null==(e=this._inspectFont)||e.call(this,this),t}createFontFaceRule(){var e;let t;if(!this.data||this.disableFontFace)return null;let n=mi(this.data),s=`url(data:${this.mimetype};base64,${btoa(n)});`;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${s}}`}else t=`@font-face {font-family:"${this.loadedName}";src:${s}}`;return null==(e=this._inspectFont)||e.call(this,this,s),t}getPathGenerator(e,t){let n;if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];try{n=e.get(this.loadedName+"_path_"+t)}catch(e){gZ(`getPathGenerator - ignoring character: "${e}".`)}if(!Array.isArray(n)||0===n.length)return this.compiledGlyphs[t]=function(e,t){};let s=[];for(let e=0,t=n.length;e<t;)switch(n[e++]){case 0:{let[t,a,o,l,h,c]=n.slice(e,e+6);s.push(e=>e.bezierCurveTo(t,a,o,l,h,c)),e+=6}break;case 1:{let[t,a]=n.slice(e,e+2);s.push(e=>e.moveTo(t,a)),e+=2}break;case 2:{let[t,a]=n.slice(e,e+2);s.push(e=>e.lineTo(t,a)),e+=2}break;case 3:{let[t,a,o,l]=n.slice(e,e+4);s.push(e=>e.quadraticCurveTo(t,a,o,l)),e+=4}break;case 4:s.push(e=>e.restore());break;case 5:s.push(e=>e.save());break;case 6:g1(2===s.length,"Scale command is only valid at the third position.");break;case 7:{let[t,a,o,l,h,c]=n.slice(e,e+6);s.push(e=>e.transform(t,a,o,l,h,c)),e+=6}break;case 8:{let[t,a]=n.slice(e,e+2);s.push(e=>e.translate(t,a)),e+=2}}return this.compiledGlyphs[t]=function(e,t){s[0](e),s[1](e),e.scale(t,-t);for(let t=2,n=s.length;t<n;t++)s[t](e)}}}if(gj){var m7=Promise.withResolvers(),m9=null;(async()=>{let e,t;return new Map(Object.entries({fs:await import("./empty-GlqisfcO.js"),http:await import("./index-B0Gk_P0t.js").then(e=>e.i),https:await import("./index-rMqNZYyA.js").then(e=>e.i),url:await import("./url-Bs332b_7.js").then(e=>e.u),canvas:e,path2d:t}))})().then(e=>{m9=e,m7.resolve()},e=>{gZ(`loadPackages: ${e}`),m9=new Map,m7.resolve()})}class ve{static get promise(){return m7.promise}static get(e){return null==m9?void 0:m9.get(e)}}let vt=function(e){return ve.get("fs").promises.readFile(e).then(e=>new Uint8Array(e))};class vi extends mu{}class vn extends mp{_createCanvas(e,t){return ve.get("canvas").createCanvas(e,t)}}class vr extends mf{_fetchData(e,t){return vt(e).then(e=>({cMapData:e,compressionType:t}))}}class vs extends mg{_fetchData(e){return vt(e)}}let va="Fill",vo="Stroke",vl="Shading";function vh(e,t){if(!t)return;let n=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],n,s),e.clip(a)}class vc{constructor(){this.constructor===vc&&g0("Cannot initialize BaseShadingPattern.")}getPattern(){g0("Abstract method `getPattern` called.")}}class vd extends vc{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;for(let n of("axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let a;if(s===vo||s===va){let o=t.current.getClippedPathBoundingBox(s,mj(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",l,h,!0),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),n=mo.transform(n,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),vh(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),a=e.createPattern(c.canvas,"no-repeat");let u=new DOMMatrix(n);a.setTransform(u)}else vh(e,this._bbox),a=this._createGradient(e);return a}}function vu(e,t,n,s,a,o,l,h){let c,d,u,p,f,g,m,v,y,b=t.coords,w=t.colors,A=e.data,x=4*e.width;b[n+1]>b[s+1]&&(c=n,n=s,s=c,c=o,o=l,l=c),b[s+1]>b[a+1]&&(c=s,s=a,a=c,c=l,l=h,h=c),b[n+1]>b[s+1]&&(c=n,n=s,s=c,c=o,o=l,l=c);let _=(b[n]+t.offsetX)*t.scaleX,S=(b[n+1]+t.offsetY)*t.scaleY,k=(b[s]+t.offsetX)*t.scaleX,E=(b[s+1]+t.offsetY)*t.scaleY,C=(b[a]+t.offsetX)*t.scaleX,M=(b[a+1]+t.offsetY)*t.scaleY;if(S>=M)return;let R=w[o],T=w[o+1],P=w[o+2],L=w[l],I=w[l+1],D=w[l+2],F=w[h],N=w[h+1],O=w[h+2],W=Math.round(S),j=Math.round(M);for(let e=W;e<=j;e++){let t;if(e<E){let t=e<S?0:(S-e)/(S-E);d=_-(_-k)*t,u=R-(R-L)*t,p=T-(T-I)*t,f=P-(P-D)*t}else{let t;d=k-(k-C)*(t=e>M?1:E===M?0:(E-e)/(E-M)),u=L-(L-F)*t,p=I-(I-N)*t,f=D-(D-O)*t}g=_-(_-C)*(t=e<S?0:e>M?1:(S-e)/(S-M)),m=R-(R-F)*t,v=T-(T-N)*t,y=P-(P-O)*t;let n=Math.round(Math.min(d,g)),s=Math.round(Math.max(d,g)),a=x*e+4*n;for(let e=n;e<=s;e++)(t=(d-e)/(d-g))<0?t=0:t>1&&(t=1),A[a++]=u-(u-m)*t|0,A[a++]=p-(p-v)*t|0,A[a++]=f-(f-y)*t|0,A[a++]=255}}class vp extends vc{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){let s=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),o=Math.ceil(this._bounds[2])-s,l=Math.ceil(this._bounds[3])-a,h=Math.min(Math.ceil(Math.abs(o*e[0]*1.1)),3e3),c=Math.min(Math.ceil(Math.abs(l*e[1]*1.1)),3e3),d=o/h,u=l/c,p={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-a,scaleX:1/d,scaleY:1/u},f=h+4,g=c+4,m=n.getCanvas("mesh",f,g,!1),v=m.context,y=v.createImageData(h,c);if(t){let e=y.data;for(let n=0,s=e.length;n<s;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(let e of this._figures)!function(e,t,n){let s,a,o=t.coords,l=t.colors;switch(t.type){case"lattice":let h=t.verticesPerRow,c=Math.floor(o.length/h)-1,d=h-1;for(s=0;s<c;s++){let t=s*h;for(let s=0;s<d;s++,t++)vu(e,n,o[t],o[t+1],o[t+h],l[t],l[t+1],l[t+h]),vu(e,n,o[t+h+1],o[t+1],o[t+h],l[t+h+1],l[t+1],l[t+h])}break;case"triangles":for(s=0,a=o.length;s<a;s+=3)vu(e,n,o[s],o[s+1],o[s+2],l[s],l[s+1],l[s+2]);break;default:throw Error("illegal figure")}}(y,e,p);return v.putImageData(y,2,2),{canvas:m.canvas,offsetX:s-2*d,offsetY:a-2*u,scaleX:d,scaleY:u}}getPattern(e,t,n,s){let a;if(vh(e,this._bbox),s===vl)a=mo.singularValueDecompose2dScale(mj(e));else if(a=mo.singularValueDecompose2dScale(t.baseTransform),this.matrix){let e=mo.singularValueDecompose2dScale(this.matrix);a=[a[0]*e[0],a[1]*e[1]]}let o=this._createMeshCanvas(a,s===vl?null:this._background,t.cachedCanvases);return s!==vl&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class vf extends vc{getPattern(){return"hotpink"}}let vg=class e{constructor(e,t,n,s,a){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(e){let t=this.operatorList,n=this.bbox,s=this.xstep,a=this.ystep,o=this.paintType,l=this.tilingType,h=this.color,c=this.canvasGraphicsFactory;gQ("TilingType: "+l);let d=n[0],u=n[1],p=n[2],f=n[3],g=mo.singularValueDecompose2dScale(this.matrix),m=mo.singularValueDecompose2dScale(this.baseTransform),v=[g[0]*m[0],g[1]*m[1]],y=this.getSizeAndScale(s,this.ctx.canvas.width,v[0]),b=this.getSizeAndScale(a,this.ctx.canvas.height,v[1]),w=e.cachedCanvases.getCanvas("pattern",y.size,b.size,!0),A=w.context,x=c.createCanvasGraphics(A);x.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(x,o,h);let _=d,S=u,k=p,E=f;return d<0&&(_=0,k+=Math.abs(d)),u<0&&(S=0,E+=Math.abs(u)),A.translate(-(y.scale*_),-(b.scale*S)),x.transform(y.scale,0,0,b.scale,0,0),A.save(),this.clipBbox(x,_,S,k,E),x.baseTransform=mj(x.ctx),x.executeOperatorList(t),x.endDrawing(),{canvas:w.canvas,scaleX:y.scale,scaleY:b.scale,offsetX:_,offsetY:S}}getSizeAndScale(t,n,s){t=Math.abs(t);let a=Math.max(e.MAX_PATTERN_SIZE,n),o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(e,t,n,s,a){let o=s-t,l=a-n;e.ctx.rect(t,n,o,l),e.current.updateRectMinMax(mj(e.ctx),[t,n,s,a]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){let s=e.ctx,a=e.current;switch(t){case 1:let o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,a.fillColor=o.fillStyle,a.strokeColor=o.strokeStyle;break;case 2:let l=mo.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,a.fillColor=l,a.strokeColor=l;break;default:throw new me(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let a=n;s!==vl&&(a=mo.transform(a,t.baseTransform),this.matrix&&(a=mo.transform(a,this.matrix)));let o=this.createPatternCanvas(t),l=new DOMMatrix(a);l=(l=l.translate(o.offsetX,o.offsetY)).scale(1/o.scaleX,1/o.scaleY);let h=e.createPattern(o.canvas,"repeat");return h.setTransform(l),h}};hL(vg,"MAX_PATTERN_SIZE",3e3);class vm{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return void 0!==this.cache[e]?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(let e in this.cache){let t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function vv(e,t,n,s,a,o,l,h,c,d){let[u,p,f,g,m,v]=mj(e);if(0===p&&0===f){let y=Math.round(l*u+m),b=Math.round(h*g+v),w=Math.abs(Math.round((l+c)*u+m)-y)||1,A=Math.abs(Math.round((h+d)*g+v)-b)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(g),y,b),e.drawImage(t,n,s,a,o,0,0,w,A),e.setTransform(u,p,f,g,m,v),[w,A]}if(0===u&&0===g){let y=Math.round(h*f+m),b=Math.round(l*p+v),w=Math.abs(Math.round((h+d)*f+m)-y)||1,A=Math.abs(Math.round((l+c)*p+v)-b)||1;return e.setTransform(0,Math.sign(p),Math.sign(f),0,y,b),e.drawImage(t,n,s,a,o,0,0,A,w),e.setTransform(u,p,f,g,m,v),[A,w]}return e.drawImage(t,n,s,a,o,l,h,c,d),[Math.hypot(u,p)*c,Math.hypot(f,g)*d]}class vy{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=gB,this.textMatrixScale=1,this.fontMatrix=g$,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=0,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){let e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=mo.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){let n=mo.applyTransform(t,e),s=mo.applyTransform(t.slice(2),e),a=mo.applyTransform([t[0],t[3]],e),o=mo.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],a[0],o[0]),this.minY=Math.min(this.minY,n[1],s[1],a[1],o[1]),this.maxX=Math.max(this.maxX,n[0],s[0],a[0],o[0]),this.maxY=Math.max(this.maxY,n[1],s[1],a[1],o[1])}updateScalingPathMinMax(e,t){mo.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,a,o,l,h,c,d){let u=mo.bezierBoundingBox(t,n,s,a,o,l,h,c,d);d||this.updateRectMinMax(e,u)}getPathBoundingBox(e=va,t=null){let n=[this.minX,this.minY,this.maxX,this.maxY];if(e===vo){t||g0("Stroke bounding box must include transform.");let e=mo.singularValueDecompose2dScale(t),s=e[0]*this.lineWidth/2,a=e[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){let e=mo.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=va,t=null){return mo.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function vb(e,t){let n,s,a,o;if("u">typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);let l=t.height,h=t.width,c=l%16,d=(l-c)/16,u=0===c?d:d+1,p=e.createImageData(h,16),f=0,g,m=t.data,v=p.data;if(t.kind===gG.GRAYSCALE_1BPP){let t=m.byteLength,o=new Uint32Array(v.buffer,0,v.byteLength>>2),l=o.length,y=h+7>>3,b=ms.isLittleEndian?0xff000000:255;for(n=0;n<u;n++){for(a=n<d?16:c,g=0,s=0;s<a;s++){let e=t-f,n=0,s=e>y?h:8*e-7,a=-8&s,l=0,c=0;for(;n<a;n+=8)c=m[f++],o[g++]=128&c?0xffffffff:b,o[g++]=64&c?0xffffffff:b,o[g++]=32&c?0xffffffff:b,o[g++]=16&c?0xffffffff:b,o[g++]=8&c?0xffffffff:b,o[g++]=4&c?0xffffffff:b,o[g++]=2&c?0xffffffff:b,o[g++]=1&c?0xffffffff:b;for(;n<s;n++)0===l&&(c=m[f++],l=128),o[g++]=c&l?0xffffffff:b,l>>=1}for(;g<l;)o[g++]=0;e.putImageData(p,0,16*n)}}else if(t.kind===gG.RGBA_32BPP){for(s=0,o=16*h*4,n=0;n<d;n++)v.set(m.subarray(f,f+o)),f+=o,e.putImageData(p,0,s),s+=16;n<u&&(o=h*c*4,v.set(m.subarray(f,f+o)),e.putImageData(p,0,s))}else if(t.kind===gG.RGB_24BPP)for(o=h*(a=16),n=0;n<u;n++){for(n>=d&&(o=h*(a=c)),g=0,s=o;s--;)v[g++]=m[f++],v[g++]=m[f++],v[g++]=m[f++],v[g++]=255;e.putImageData(p,0,16*n)}else throw Error(`bad image kind: ${t.kind}`)}function vw(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);let n=t.height,s=t.width,a=n%16,o=(n-a)/16,l=0===a?o:o+1,h=e.createImageData(s,16),c=0,d=t.data,u=h.data;for(let t=0;t<l;t++){let n=t<o?16:a;({srcPos:c}=function({src:e,srcPos:t=0,dest:n,width:s,height:a,nonBlackColor:o=0xffffffff,inverseDecode:l=!1}){let h=ms.isLittleEndian?0xff000000:255,[c,d]=l?[o,h]:[h,o],u=s>>3,p=7&s,f=e.length;n=new Uint32Array(n.buffer);let g=0;for(let s=0;s<a;s++){for(let s=t+u;t<s;t++){let s=t<f?e[t]:255;n[g++]=128&s?d:c,n[g++]=64&s?d:c,n[g++]=32&s?d:c,n[g++]=16&s?d:c,n[g++]=8&s?d:c,n[g++]=4&s?d:c,n[g++]=2&s?d:c,n[g++]=1&s?d:c}if(0===p)continue;let s=t<f?e[t++]:255;for(let e=0;e<p;e++)n[g++]=s&1<<7-e?d:c}return{srcPos:t,destPos:g}}({src:d,srcPos:c,dest:u,width:s,height:n,nonBlackColor:0})),e.putImageData(h,0,16*t)}}function vA(e,t){for(let n of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==e[n]&&(t[n]=e[n]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function vx(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!gj){let{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function v_(e,t){if(t)return!0;let n=mo.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);let s=Math.fround((globalThis.devicePixelRatio||1)*mb.PDF_TO_CSS_UNITS);return n[0]<=s&&n[1]<=s}let vS=["butt","round","square"],vk=["miter","round","bevel"],vE={},vC={},vM=class e{constructor(e,t,n,s,a,{optionalContentConfig:o,markedContentStack:l=null},h,c){hF(this,i1),hF(this,i3),this.ctx=e,this.current=new vy(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new vm(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){let a=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=l,n){let e=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...mj(this.compositeCtx))}this.ctx.save(),vx(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=mj(this.ctx)}executeOperatorList(e,t,n,s){let a,o=e.argsArray,l=e.fnArray,h=t||0,c=o.length;if(c===h)return h;let d=c-h>10&&"function"==typeof n,u=d?Date.now()+15:0,p=0,f=this.commonObjs,g=this.objs;for(;;){if(void 0!==s&&h===s.nextBreakPoint)return s.breakIt(h,n),h;if((a=l[h])!==gY.dependency)this[a].apply(this,o[h]);else for(let e of o[h]){let t=e.startsWith("g_")?f:g;if(!t.has(e))return t.get(e,n),h}if(++h===c)return h;if(d&&++p>10){if(Date.now()>u)return n(),h;p=0}}}endDrawing(){for(let e of(hW(this,i1,i2).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let t of e.values())"u">typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),hW(this,i3,i5).call(this)}_scaleImage(e,t){let n=e.width,s=e.height,a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=n,h=s,c="prescale1",d,u;for(;a>2&&l>1||o>2&&h>1;){let t=l,n=h;a>2&&l>1&&(t=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/t),o>2&&h>1&&(n=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/n),(u=(d=this.cachedCanvases.getCanvas(c,t,n)).context).clearRect(0,0,t,n),u.drawImage(e,0,0,l,h,0,0,t,n),e=d.canvas,l=t,h=n,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:h}}_createMaskCanvas(e){let t,n,s,a,o=this.ctx,{width:l,height:h}=e,c=this.current.fillColor,d=this.current.patternFill,u=mj(o);if((e.bitmap||e.data)&&e.count>1){let a=e.bitmap||e.data.buffer;n=JSON.stringify(d?u:[u.slice(0,4),c]),(t=this._cachedBitmapsMap.get(a))||(t=new Map,this._cachedBitmapsMap.set(a,t));let o=t.get(n);if(o&&!d)return{canvas:o,offsetX:Math.round(Math.min(u[0],u[2])+u[4]),offsetY:Math.round(Math.min(u[1],u[3])+u[5])};s=o}s||vw((a=this.cachedCanvases.getCanvas("maskCanvas",l,h)).context,e);let p=mo.transform(u,[1/l,0,0,-1/h,0,0]);p=mo.transform(p,[1,0,0,1,0,-h]);let[f,g,m,v]=mo.getAxialAlignedBoundingBox([0,0,l,h],p),y=Math.round(m-f)||1,b=Math.round(v-g)||1,w=this.cachedCanvases.getCanvas("fillCanvas",y,b),A=w.context;A.translate(-f,-g),A.transform(...p),s||(s=(s=this._scaleImage(a.canvas,mB(A))).img,t&&d&&t.set(n,s)),A.imageSmoothingEnabled=v_(mj(A),e.interpolate),vv(A,s,0,0,s.width,s.height,0,0,l,h),A.globalCompositeOperation="source-in";let x=mo.transform(mB(A),[1,0,0,1,-f,-g]);return A.fillStyle=d?c.getPattern(o,this,x,va):c,A.fillRect(0,0,l,h),t&&!d&&(this.cachedCanvases.delete("fillCanvas"),t.set(n,w.canvas)),{canvas:w.canvas,offsetX:Math.round(f),offsetY:Math.round(g)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=vS[e]}setLineJoin(e){this.ctx.lineJoin=vk[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){let n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;let a=this.ctx;a.setTransform(...mj(this.suspendedCtx)),vA(this.suspendedCtx,a),function(e,t){if(e._removeMirroring)throw Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,s,a,o,l){t.transform(e,n,s,a,o,l),this.__originalTransform(e,n,s,a,o,l)},e.setTransform=function(e,n,s,a,o,l){t.setTransform(e,n,s,a,o,l),this.__originalSetTransform(e,n,s,a,o,l)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,s,a,o,l){t.bezierCurveTo(e,n,s,a,o,l),this.__originalBezierCurveTo(e,n,s,a,o,l)},e.rect=function(e,n,s,a){t.rect(e,n,s,a),this.__originalRect(e,n,s,a)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(a,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),vA(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){let a=s[0],o=s[1],l=s[2]-a,h=s[3]-o;0===l||0===h||(this.genericComposeSMask(t.context,n,l,h,t.subtype,t.backdrop,t.transferMap,a,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,a,o,l,h,c,d,u){let p=e.canvas,f=h-d,g=c-u;if(o){if(f<0||g<0||f+n>p.width||g+s>p.height){let e=this.cachedCanvases.getCanvas("maskExtension",n,s),t=e.context;t.drawImage(p,-f,-g),o.some(e=>0!==e)&&(t.globalCompositeOperation="destination-atop",t.fillStyle=mo.makeHexColor(...o),t.fillRect(0,0,n,s),t.globalCompositeOperation="source-over"),p=e.canvas,f=g=0}else if(o.some(e=>0!==e)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);let t=new Path2D;t.rect(f,g,n,s),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=mo.makeHexColor(...o),e.fillRect(f,g,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===a&&l?t.filter=this.filterFactory.addAlphaFilter(l):"Luminosity"===a&&(t.filter=this.filterFactory.addLuminosityFilter(l));let m=new Path2D;m.rect(h,c,n,s),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(p,f,g,n,s,h,c,n,s),t.restore()}save(){this.inSMaskMode?(vA(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),vA(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,a,o){this.ctx.transform(e,t,n,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){let s=this.ctx,a=this.current,o=a.x,l=a.y,h,c,d=mj(s),u=0===d[0]&&0===d[3]||0===d[1]&&0===d[2],p=u?n.slice(0):null;for(let n=0,f=0,g=e.length;n<g;n++)switch(0|e[n]){case gY.rectangle:o=t[f++],l=t[f++];let g=t[f++],m=t[f++],v=o+g,y=l+m;s.moveTo(o,l),0===g||0===m?s.lineTo(v,y):(s.lineTo(v,l),s.lineTo(v,y),s.lineTo(o,y)),u||a.updateRectMinMax(d,[o,l,v,y]),s.closePath();break;case gY.moveTo:o=t[f++],l=t[f++],s.moveTo(o,l),u||a.updatePathMinMax(d,o,l);break;case gY.lineTo:o=t[f++],l=t[f++],s.lineTo(o,l),u||a.updatePathMinMax(d,o,l);break;case gY.curveTo:h=o,c=l,o=t[f+4],l=t[f+5],s.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],o,l),a.updateCurvePathMinMax(d,h,c,t[f],t[f+1],t[f+2],t[f+3],o,l,p),f+=6;break;case gY.curveTo2:h=o,c=l,s.bezierCurveTo(o,l,t[f],t[f+1],t[f+2],t[f+3]),a.updateCurvePathMinMax(d,h,c,o,l,t[f],t[f+1],t[f+2],t[f+3],p),o=t[f+2],l=t[f+3],f+=4;break;case gY.curveTo3:h=o,c=l,o=t[f+2],l=t[f+3],s.bezierCurveTo(t[f],t[f+1],o,l,o,l),a.updateCurvePathMinMax(d,h,c,t[f],t[f+1],o,l,o,l,p),f+=4;break;case gY.closePath:s.closePath()}u&&a.updateScalingPathMinMax(d,p),a.setCurrentPoint(o,l)}closePath(){this.ctx.closePath()}stroke(e=!0){let t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof n&&null!=n&&n.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,mB(t),vo),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){let t=this.ctx,n=this.current.fillColor,s=this.current.patternFill,a=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,mB(t),va),a=!0);let o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=vE}eoClip(){this.pendingClip=vC}beginText(){this.current.textMatrix=gB,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let e=this.pendingTextPaths,t=this.ctx;if(void 0===e)return void t.beginPath();for(let n of(t.save(),t.beginPath(),e))t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var n;let s=this.commonObjs.get(e),a=this.current;if(!s)throw Error(`Can't find font for ${e}`);if(a.fontMatrix=s.fontMatrix||g$,(0===a.fontMatrix[0]||0===a.fontMatrix[3])&&gZ("Invalid font matrix for font "+e),t<0?(t=-t,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;let o=s.loadedName||"sans-serif",l=(null==(n=s.systemFontInfo)?void 0:n.css)||`"${o}", ${s.fallbackName}`,h="normal";s.black?h="900":s.bold&&(h="bold");let c=s.italic?"italic":"normal",d=t;t<16?d=16:t>100&&(d=100),this.current.fontSizeScale=t/d,this.ctx.font=`${c} ${h} ${d}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,a,o){this.current.textMatrix=[e,t,n,s,a,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){let a,o=this.ctx,l=this.current,h=l.font,c=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,u=3&c,p=!!(4&c),f=l.patternFill&&!h.missingFile;(h.disableFontFace||p||f)&&(a=h.getPathGenerator(this.commonObjs,e)),h.disableFontFace||f?(o.save(),o.translate(t,n),o.beginPath(),a(o,d),s&&o.setTransform(...s),(0===u||2===u)&&o.fill(),(1===u||2===u)&&o.stroke(),o.restore()):((0===u||2===u)&&o.fillText(e,t,n),(1===u||2===u)&&o.strokeText(e,t,n)),p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:mj(o),x:t,y:n,fontSize:d,addToPath:a})}get isFontSubpixelAAEnabled(){let{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);let t=e.getImageData(0,0,10,10).data,n=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){n=!0;break}return g3(this,"isFontSubpixelAAEnabled",n)}showText(e){let t,n=this.current,s=n.font;if(s.isType3Font)return this.showType3Text(e);let a=n.fontSize;if(0===a)return;let o=this.ctx,l=n.fontSizeScale,h=n.charSpacing,c=n.wordSpacing,d=n.fontDirection,u=n.textHScale*d,p=e.length,f=s.vertical,g=f?1:-1,m=s.defaultVMetrics,v=a*n.fontMatrix[0],y=0===n.textRenderingMode&&!s.disableFontFace&&!n.patternFill;if(o.save(),o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),d>0?o.scale(u,-1):o.scale(u,1),n.patternFill){o.save();let e=n.fillColor.getPattern(o,this,mB(o),va);t=mj(o),o.restore(),o.fillStyle=e}let b=n.lineWidth,w=n.textMatrixScale;if(0===w||0===b){let e=3&n.textRenderingMode;(1===e||2===e)&&(b=this.getSinglePixelWidth())}else b/=w;if(1!==l&&(o.scale(l,l),b/=l),o.lineWidth=b,s.isInvalidPDFjsFont){let t=[],s=0;for(let n of e)t.push(n.unicode),s+=n.width;o.fillText(t.join(""),0,0),n.x+=s*v*u,o.restore(),this.compose();return}let A=0,x;for(x=0;x<p;++x){let n=e[x];if("number"==typeof n){A+=g*n*a/1e3;continue}let u=!1,p=(n.isSpace?c:0)+h,b=n.fontChar,w=n.accent,_,S,k=n.width;if(f){let e=n.vmetric||m,t=-(n.vmetric?e[1]:.5*k)*v,s=e[2]*v;k=e?-e[0]:k,_=t/l,S=(A+s)/l}else _=A/l,S=0;if(s.remeasure&&k>0){let e=1e3*o.measureText(b).width/a*l;if(k<e&&this.isFontSubpixelAAEnabled){let t=k/e;u=!0,o.save(),o.scale(t,1),_/=t}else k!==e&&(_+=(k-e)/2e3*a/l)}if(this.contentVisible&&(n.isInFont||s.missingFile)){if(y&&!w)o.fillText(b,_,S);else if(this.paintChar(b,_,S,t),w){let e=_+a*w.offset.x/l,n=S-a*w.offset.y/l;this.paintChar(w.fontChar,e,n,t)}}A+=f?k*v-p*d:k*v+p*d,u&&o.restore()}f?n.y-=A:n.x+=A*u,o.restore(),this.compose()}showType3Text(e){let t,n,s,a,o=this.ctx,l=this.current,h=l.font,c=l.fontSize,d=l.fontDirection,u=h.vertical?1:-1,p=l.charSpacing,f=l.wordSpacing,g=l.textHScale*d,m=l.fontMatrix||g$,v=e.length;if(3!==l.textRenderingMode&&0!==c){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,o.save(),o.transform(...l.textMatrix),o.translate(l.x,l.y),o.scale(g,d),t=0;t<v;++t){if("number"==typeof(n=e[t])){a=u*n*c/1e3,this.ctx.translate(a,0),l.x+=a*g;continue}let d=(n.isSpace?f:0)+p,v=h.charProcOperatorList[n.operatorListId];if(!v){gZ(`Type3 character "${n.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=n,this.save(),o.scale(c,c),o.transform(...m),this.executeOperatorList(v),this.restore()),s=mo.applyTransform([n.width,0],m)[0]*c+d,o.translate(s,0),l.x+=s*g}o.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,a,o){this.ctx.rect(n,s,a-n,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let n;if("TilingPattern"===t[0]){let s=t[1],a=this.baseTransform||mj(this.ctx);n=new vg(t,s,this.ctx,{createCanvasGraphics:t=>new e(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})},a)}else n=this._getPattern(t[1],t[2]);return n}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){let s=mo.makeHexColor(e,t,n);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,n){let s=mo.makeHexColor(e,t,n);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=function(e){switch(e[0]){case"RadialAxial":return new vd(e);case"Mesh":return new vp(e);case"Dummy":return new vf}throw Error(`Unknown IR type: ${e[0]}`)}(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;let t=this.ctx;this.save(),t.fillStyle=this._getPattern(e).getPattern(t,this,mB(t),vl);let n=mB(t);if(n){let{width:e,height:s}=t.canvas,[a,o,l,h]=mo.getAxialAlignedBoundingBox([0,0,e,s],n);this.ctx.fillRect(a,o,l-a,h-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){g0("Should not call beginInlineImage")}beginImageData(){g0("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=mj(this.ctx),t)){let e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax(mj(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let t=this.ctx;e.isolated||gQ("TODO: Support non-isolated groups."),e.knockout&&gZ("Knockout groups not supported.");let n=mj(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw Error("Bounding box is required.");let s=mo.getAxialAlignedBoundingBox(e.bbox,mj(t)),a=[0,0,t.canvas.width,t.canvas.height],o=Math.floor((s=mo.intersect(s,a)||[0,0,0,0])[0]),l=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,h,c]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);let u=this.cachedCanvases.getCanvas(d,h,c),p=u.context;p.translate(-o,-l),p.transform(...n),e.smask?this.smaskStack.push({canvas:u.canvas,context:p,offsetX:o,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,l),t.save()),vA(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;let t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let e=mj(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);let n=mo.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,s,a){if(hW(this,i1,i2).call(this),vx(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){let s=t[2]-t[0],o=t[3]-t[1];if(a&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=s,t[3]=o;let[a,l]=mo.singularValueDecompose2dScale(mj(this.ctx)),{viewportScale:h}=this,c=Math.ceil(s*this.outputScaleX*h),d=Math.ceil(o*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(c,d);let{canvas:u,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,u),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(a,0,0,-l,0,o*l),vx(this.ctx)}else vx(this.ctx),this.ctx.rect(t[0],t[1],s,o),this.ctx.clip(),this.endPath()}this.current=new vy(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),hW(this,i3,i5).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;let t=e.count;(e=this.getObject(e.data,e)).count=t;let n=this.ctx,s=this.processingType3;if(s&&(void 0===s.compiled&&(s.compiled=function(e){let{width:t,height:n}=e;if(t>1e3||n>1e3)return null;let s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),a=t+1,o=new Uint8Array(a*(n+1)),l,h,c,d=t+7&-8,u=new Uint8Array(d*n),p=0;for(let t of e.data){let e=128;for(;e>0;)u[p++]=t&e?0:255,e>>=1}let f=0;for(0!==u[p=0]&&(o[0]=1,++f),h=1;h<t;h++)u[p]!==u[p+1]&&(o[h]=u[p]?2:1,++f),p++;for(0!==u[p]&&(o[h]=2,++f),l=1;l<n;l++){p=l*d,c=l*a,u[p-d]!==u[p]&&(o[c]=u[p]?1:8,++f);let e=4*!!u[p]+8*!!u[p-d];for(h=1;h<t;h++)s[e=(e>>2)+4*!!u[p+1]+8*!!u[p-d+1]]&&(o[c+h]=s[e],++f),p++;if(u[p-d]!==u[p]&&(o[c+h]=u[p]?2:4,++f),f>1e3)return null}for(p=d*(n-1),c=l*a,0!==u[p]&&(o[c]=8,++f),h=1;h<t;h++)u[p]!==u[p+1]&&(o[c+h]=u[p]?4:8,++f),p++;if(0!==u[p]&&(o[c+h]=4,++f),f>1e3)return null;let g=new Int32Array([0,a,-1,0,-a,0,0,0,1]),m=new Path2D;for(l=0;f&&l<=n;l++){let e=l*a,n=e+t;for(;e<n&&!o[e];)e++;if(e===n)continue;m.moveTo(e%a,l);let s=e,h=o[e];do{let t=g[h];do e+=t;while(!o[e]);let n=o[e];5!==n&&10!==n?(h=n,o[e]=0):(h=n&51*h>>4,o[e]&=h>>2|h<<2),m.lineTo(e%a,e/a|0),o[e]||--f}while(s!==e);--l}return u=null,o=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(m),e.beginPath(),e.restore()}}(e)),s.compiled))return void s.compiled(n);let a=this._createMaskCanvas(e),o=a.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,a.offsetX,a.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,a,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);let l=this.ctx;l.save();let h=mj(l);l.transform(t,n,s,a,0,0);let c=this._createMaskCanvas(e);l.setTransform(1,0,0,1,c.offsetX-h[4],c.offsetY-h[5]);for(let e=0,d=o.length;e<d;e+=2){let d=mo.transform(h,[t,n,s,a,o[e],o[e+1]]),[u,p]=mo.applyTransform([0,0],d);l.drawImage(c.canvas,u,p)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;let t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(let a of e){let{data:e,width:o,height:l,transform:h}=a,c=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=c.context;d.save(),vw(d,this.getObject(e,a)),d.globalCompositeOperation="source-in",d.fillStyle=s?n.getPattern(d,this,mB(t),va):n,d.fillRect(0,0,o,l),d.restore(),t.save(),t.transform(...h),t.scale(1,-1),vv(t,c.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;let t=this.getObject(e);t?this.paintInlineImageXObject(t):gZ("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;let a=this.getObject(e);if(!a)return void gZ("Dependent image isn't ready yet");let o=a.width,l=a.height,h=[];for(let e=0,a=s.length;e<a;e+=2)h.push({transform:[t,0,0,n,s[e],s[e+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(a,h)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;let{bitmap:t,width:n,height:s}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,s),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e){let t;if(!this.contentVisible)return;let n=e.width,s=e.height,a=this.ctx;if(this.save(),!gj){let{filter:e}=a;"none"!==e&&""!==e&&(a.filter="none")}if(a.scale(1/n,-1/s),e.bitmap)t=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)t=e;else{let a=this.cachedCanvases.getCanvas("inlineImage",n,s).context;vb(a,e),t=this.applyTransferMapsToCanvas(a)}let o=this._scaleImage(t,mB(a));a.imageSmoothingEnabled=v_(mj(a),e.interpolate),vv(a,o.img,0,0,o.paintWidth,o.paintHeight,0,-s,n,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){let n;if(!this.contentVisible)return;let s=this.ctx;if(e.bitmap)n=e.bitmap;else{let t=e.width,s=e.height,a=this.cachedCanvases.getCanvas("inlineImage",t,s).context;vb(a,e),n=this.applyTransferMapsToCanvas(a)}for(let e of t)s.save(),s.transform(...e.transform),s.scale(1,-1),vv(s,n,e.x,e.y,e.w,e.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){let t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);let n=this.ctx;this.pendingClip&&(t||(this.pendingClip===vC?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let e=mj(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{let t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){let e,t,{lineWidth:n}=this.current,{a:s,b:a,c:o,d:l}=this.ctx.getTransform();if(0===a&&0===o){let a=Math.abs(s),o=Math.abs(l);if(a===o)if(0===n)e=t=1/a;else{let s=a*n;e=t=s<1?1/s:1}else if(0===n)e=1/a,t=1/o;else{let s=a*n,l=o*n;e=s<1?1/s:1,t=l<1?1/l:1}}else{let h=Math.abs(s*l-a*o),c=Math.hypot(s,a),d=Math.hypot(o,l);if(0===n)e=d/h,t=c/h;else{let s=n*h;e=d>s?d/s:1,t=c>s?c/s:1}}this._cachedScaleForStroking[0]=e,this._cachedScaleForStroking[1]=t}return this._cachedScaleForStroking}rescaleAndStroke(e){let{ctx:t}=this,{lineWidth:n}=this.current,[s,a]=this.getScaleForStroking();if(t.lineWidth=n||1,1===s&&1===a)return void t.stroke();let o=t.getLineDash();if(e&&t.save(),t.scale(s,a),o.length>0){let e=Math.max(s,a);t.setLineDash(o.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};for(let e in i1=new WeakSet,i2=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},i3=new WeakSet,i5=function(){if(this.pageColors){let e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){let t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},gY)void 0!==vM.prototype[e]&&(vM.prototype[gY[e]]=vM.prototype[e]);class vR{static get workerPort(){return hD(this,i4)}static set workerPort(e){if(!("u">typeof Worker&&e instanceof Worker)&&null!==e)throw Error("Invalid `workerPort` type.");hN(this,i4,e)}static get workerSrc(){return hD(this,i6)}static set workerSrc(e){if("string"!=typeof e)throw Error("Invalid `workerSrc` type.");hN(this,i6,e)}}i4=new WeakMap,i6=new WeakMap,hF(vR,i4,null),hF(vR,i6,"");function vT(e){switch(e instanceof Error||"object"==typeof e&&null!==e||g0('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new mt(e.message);case"MissingPDFException":return new g7(e.message);case"PasswordException":return new g4(e.message,e.code);case"UnexpectedResponseException":return new g9(e.message,e.status);case"UnknownErrorException":return new g6(e.message,e.details);default:return new g6(e.message,e.toString())}}class vP{constructor(e,t,n){hF(this,i8),hF(this,i9),hF(this,nt),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{let t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void hW(this,i9,ne).call(this,t);if(t.callback){let e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===t.callback)n.resolve(t.data);else if(2===t.callback)n.reject(vT(t.reason));else throw Error("Unexpected callback case");return}let s=this.actionHandler[t.action];if(!s)throw Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let e=this.sourceName,a=t.sourceName;new Promise(function(e){e(s(t.data))}).then(function(s){n.postMessage({sourceName:e,targetName:a,callback:1,callbackId:t.callbackId,data:s})},function(s){n.postMessage({sourceName:e,targetName:a,callback:2,callbackId:t.callbackId,reason:vT(s)})});return}t.streamId?hW(this,i8,i7).call(this,t):s(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){let n=this.actionHandler;if(n[e])throw Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){let s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(e){a.reject(e)}return a.promise}sendWithStream(e,t,n,s){let a=this.streamId++,o=this.sourceName,l=this.targetName,h=this.comObj;return new ReadableStream({start:n=>{let c=Promise.withResolvers();return this.streamControllers[a]={controller:n,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:l,action:e,streamId:a,data:t,desiredSize:n.desiredSize},s),c.promise},pull:e=>{let t=Promise.withResolvers();return this.streamControllers[a].pullCall=t,h.postMessage({sourceName:o,targetName:l,stream:6,streamId:a,desiredSize:e.desiredSize}),t.promise},cancel:e=>{g1(e instanceof Error,"cancel must have a valid reason");let t=Promise.withResolvers();return this.streamControllers[a].cancelCall=t,this.streamControllers[a].isClosed=!0,h.postMessage({sourceName:o,targetName:l,stream:1,streamId:a,reason:vT(e)}),t.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}i8=new WeakSet,i7=function(e){let t=e.streamId,n=this.sourceName,s=e.sourceName,a=this.comObj,o=this,l=this.actionHandler[e.action],h={enqueue(e,o=1,l){if(this.isCancelled)return;let h=this.desiredSize;this.desiredSize-=o,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:4,streamId:t,chunk:e},l)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:3,streamId:t}),delete o.streamSinks[t])},error(e){g1(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:5,streamId:t,reason:vT(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,new Promise(function(t){t(l(e.data,h))}).then(function(){a.postMessage({sourceName:n,targetName:s,stream:8,streamId:t,success:!0})},function(e){a.postMessage({sourceName:n,targetName:s,stream:8,streamId:t,reason:vT(e)})})},i9=new WeakSet,ne=function(e){let t=e.streamId,n=this.sourceName,s=e.sourceName,a=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case 8:e.success?o.startCall.resolve():o.startCall.reject(vT(e.reason));break;case 7:e.success?o.pullCall.resolve():o.pullCall.reject(vT(e.reason));break;case 6:if(!l){a.postMessage({sourceName:n,targetName:s,stream:7,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,new Promise(function(e){var t;e(null==(t=l.onPull)?void 0:t.call(l))}).then(function(){a.postMessage({sourceName:n,targetName:s,stream:7,streamId:t,success:!0})},function(e){a.postMessage({sourceName:n,targetName:s,stream:7,streamId:t,reason:vT(e)})});break;case 4:if(g1(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case 3:if(g1(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),hW(this,nt,ni).call(this,o,t);break;case 5:g1(o,"error should have stream controller"),o.controller.error(vT(e.reason)),hW(this,nt,ni).call(this,o,t);break;case 2:e.success?o.cancelCall.resolve():o.cancelCall.reject(vT(e.reason)),hW(this,nt,ni).call(this,o,t);break;case 1:if(!l)break;new Promise(function(t){var n;t(null==(n=l.onCancel)?void 0:n.call(l,vT(e.reason)))}).then(function(){a.postMessage({sourceName:n,targetName:s,stream:2,streamId:t,success:!0})},function(e){a.postMessage({sourceName:n,targetName:s,stream:2,streamId:t,reason:vT(e)})}),l.sinkCapability.reject(vT(e.reason)),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw Error("Unexpected stream case")}},nt=new WeakSet,ni=async function(e,t){var n,s,a;await Promise.allSettled([null==(n=e.startCall)?void 0:n.promise,null==(s=e.pullCall)?void 0:s.promise,null==(a=e.cancelCall)?void 0:a.promise]),delete this.streamControllers[t]};class vL{constructor({parsedData:e,rawData:t}){hF(this,nn,void 0),hF(this,nr,void 0),hN(this,nn,e),hN(this,nr,t)}getRaw(){return hD(this,nr)}get(e){return hD(this,nn).get(e)??null}getAll(){return mr(hD(this,nn))}has(e){return hD(this,nn).has(e)}}nn=new WeakMap,nr=new WeakMap;let vI=Symbol("INTERNAL");class vD{constructor(e,{name:t,intent:n,usage:s}){hF(this,ns,!1),hF(this,na,!1),hF(this,no,!1),hF(this,nl,!0),hN(this,ns,!!(2&e)),hN(this,na,!!(4&e)),this.name=t,this.intent=n,this.usage=s}get visible(){if(hD(this,no))return hD(this,nl);if(!hD(this,nl))return!1;let{print:e,view:t}=this.usage;return hD(this,ns)?(null==t?void 0:t.viewState)!=="OFF":!hD(this,na)||(null==e?void 0:e.printState)!=="OFF"}_setVisible(e,t,n=!1){e!==vI&&g0("Internal method `_setVisible` called."),hN(this,no,n),hN(this,nl,t)}}ns=new WeakMap,na=new WeakMap,no=new WeakMap,nl=new WeakMap;class vF{constructor(e,t=2){if(hF(this,np),hF(this,nh,null),hF(this,nc,new Map),hF(this,nd,null),hF(this,nu,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){for(const n of(this.name=e.name,this.creator=e.creator,hN(this,nu,e.order),e.groups))hD(this,nc).set(n.id,new vD(t,n));if("OFF"===e.baseState)for(const e of hD(this,nc).values())e._setVisible(vI,!1);for(const t of e.on)hD(this,nc).get(t)._setVisible(vI,!0);for(const t of e.off)hD(this,nc).get(t)._setVisible(vI,!1);hN(this,nd,this.getHash())}}isVisible(e){if(0===hD(this,nc).size)return!0;if(!e)return gQ("Optional content group not defined."),!0;if("OCG"===e.type)return hD(this,nc).has(e.id)?hD(this,nc).get(e.id).visible:(gZ(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return hW(this,np,nf).call(this,e.expression);if(e.policy&&"AnyOn"!==e.policy){if("AllOn"===e.policy){for(let t of e.ids){if(!hD(this,nc).has(t))return gZ(`Optional content group not found: ${t}`),!0;if(!hD(this,nc).get(t).visible)return!1}return!0}else if("AnyOff"===e.policy){for(let t of e.ids){if(!hD(this,nc).has(t))return gZ(`Optional content group not found: ${t}`),!0;if(!hD(this,nc).get(t).visible)return!0}return!1}else if("AllOff"===e.policy){for(let t of e.ids){if(!hD(this,nc).has(t))return gZ(`Optional content group not found: ${t}`),!0;if(hD(this,nc).get(t).visible)return!1}return!0}}else{for(let t of e.ids){if(!hD(this,nc).has(t))return gZ(`Optional content group not found: ${t}`),!0;if(hD(this,nc).get(t).visible)return!0}return!1}return gZ(`Unknown optional content policy ${e.policy}.`),!0}return gZ(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){let n=hD(this,nc).get(e);n?(n._setVisible(vI,!!t,!0),hN(this,nh,null)):gZ(`Optional content group not found: ${e}`)}setOCGState({state:e,preserveRB:t}){let n;for(let t of e){switch(t){case"ON":case"OFF":case"Toggle":n=t;continue}let e=hD(this,nc).get(t);if(e)switch(n){case"ON":e._setVisible(vI,!0);break;case"OFF":e._setVisible(vI,!1);break;case"Toggle":e._setVisible(vI,!e.visible)}}hN(this,nh,null)}get hasInitialVisibility(){return null===hD(this,nd)||this.getHash()===hD(this,nd)}getOrder(){return hD(this,nc).size?hD(this,nu)?hD(this,nu).slice():[...hD(this,nc).keys()]:null}getGroups(){return hD(this,nc).size>0?mr(hD(this,nc)):null}getGroup(e){return hD(this,nc).get(e)||null}getHash(){if(null!==hD(this,nh))return hD(this,nh);let e=new m2;for(let[t,n]of hD(this,nc))e.update(`${t}:${n.visible}`);return hN(this,nh,e.hexdigest())}}nh=new WeakMap,nc=new WeakMap,nd=new WeakMap,nu=new WeakMap,np=new WeakSet,nf=function(e){let t=e.length;if(t<2)return!0;let n=e[0];for(let s=1;s<t;s++){let t,a=e[s];if(Array.isArray(a))t=hW(this,np,nf).call(this,a);else{if(!hD(this,nc).has(a))return gZ(`Optional content group not found: ${a}`),!0;t=hD(this,nc).get(a).visible}switch(n){case"And":if(!t)return!1;break;case"Or":if(t)return!0;break;case"Not":return!t;default:return!0}}return"And"===n};class vN{constructor(e,{disableRange:t=!1,disableStream:n=!1}){g1(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(null==a?void 0:a.length)>0){const e=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){let n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;void 0===e?this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n):g1(this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(n),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}_onProgress(e){var t,n,s,a;void 0===e.total?null==(n=null==(t=this._rangeReaders[0])?void 0:t.onProgress)||n.call(t,{loaded:e.loaded}):null==(a=null==(s=this._fullRequestReader)?void 0:s.onProgress)||a.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null==(e=this._fullRequestReader)||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){let t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){g1(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let e=this._queuedChunks;return this._queuedChunks=null,new vO(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new vW(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeReaders.slice(0)))n.cancel(e);this._pdfDataRangeTransport.abort()}}class vO{constructor(e,t,n=!1,s=null){for(const a of(this._stream=e,this._done=n||!1,this._filename=mR(s)?s:null,this._queuedChunks=t||[],this._loaded=0,this._queuedChunks))this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class vW{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{for(let t of(this._requests.shift().resolve({value:e,done:!1}),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function vj({getResponseHeader:e,isHttp:t,rangeChunkSize:n,disableRange:s}){let a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*n)||s||!t||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(a.allowRangeRequests=!0),a}function vB(e){let t=e("Content-Disposition");if(t){let e=function(e){let t=!0,n=s("filename\\*","i").exec(e);if(n){let e=l(n=n[1]);return o(e=c(e=h(e=unescape(e))))}if(n=function(e){let t,n=[],a=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(t=a.exec(e));){let[,e,s,a]=t;if((e=parseInt(e,10))in n){if(0===e)break;continue}n[e]=[s,a]}let o=[];for(let e=0;e<n.length&&e in n;++e){let[t,s]=n[e];s=l(s),t&&(s=unescape(s),0===e&&(s=h(s))),o.push(s)}return o.join("")}(e))return o(c(n));if(n=s("filename","i").exec(e)){let e=l(n=n[1]);return o(e=c(e))}function s(e,t){return RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function a(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{let s=new TextDecoder(e,{fatal:!0}),a=mn(n);n=s.decode(a),t=!1}catch{}}return n}function o(e){return t&&/[\x80-\xff]/.test(e)&&(e=a("utf-8",e),t&&(e=a("iso-8859-1",e))),e}function l(e){if(e.startsWith('"')){let t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){let n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function h(e){let t=e.indexOf("'");return -1===t?e:a(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function c(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,s){if("q"===n||"Q"===n)return a(t,s=(s=s.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{s=atob(s)}catch{}return a(t,s)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(mR(e))return e}return null}function v$(e,t){return 404===e||0===e&&t.startsWith("file:")?new g7('Missing PDF "'+t+'".'):new g9(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)}function vz(e){return 200===e||206===e}function vH(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function vU(e){let t=new Headers;for(let n in e){let s=e[n];void 0!==s&&t.append(n,s)}return t}function vV(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(gZ(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}class vG{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}getFullReader(){return g1(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new vq(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=new vX(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))n.cancel(e)}}class vq{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=vU(this._stream.httpHeaders);const n=t.url;fetch(n,vH(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!vz(e.status))throw v$(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();let t=t=>e.headers.get(t),{allowRangeRequests:s,suggestedLength:a}=vj({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=vB(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new mt("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;let{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vV(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}}class vX{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=vU(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const a=s.url;fetch(a,vH(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!vz(e.status))throw v$(e.status,a);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;let{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:vV(t),done:!1})}cancel(e){var t;null==(t=this._reader)||t.cancel(e),this._abortController.abort()}}class vY{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){let s={begin:e,end:t};for(let e in n)s[e]=n[e];return this.request(s)}requestFull(e){return this.request(e)}request(e){let t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};for(let e in t.open("GET",this.url),t.withCredentials=this.withCredentials,this.httpHeaders){let n=this.httpHeaders[e];void 0!==n&&t.setRequestHeader(e,n)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=206):s.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;let s=this.pendingRequests[e];s&&(null==(n=s.onProgress)||n.call(s,t))}onStateChange(e,t){var n,s,a;let o,l=this.pendingRequests[e];if(!l)return;let h=l.xhr;if(h.readyState>=2&&l.onHeadersReceived&&(l.onHeadersReceived(),delete l.onHeadersReceived),4!==h.readyState||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===h.status&&this.isHttp){null==(n=l.onError)||n.call(l,h.status);return}let c=h.status||200;if((200!==c||206!==l.expectedStatus)&&c!==l.expectedStatus){null==(s=l.onError)||s.call(l,h.status);return}let d="string"!=typeof(o=h.response)?o:mn(o).buffer;if(206===c){let e=h.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);l.onDone({begin:parseInt(t[1],10),chunk:d})}else d?l.onDone({begin:0,chunk:d}):null==(a=l.onError)||a.call(l,h.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){let t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class vK{constructor(e){this._source=e,this._manager=new vY(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){let t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return g1(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vJ(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){let n=new vQ(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))n.cancel(e)}}class vJ{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:s,suggestedLength:a}=vj({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=vB(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){for(let t of(this._storedError=v$(e,this._url),this._headersReceivedCapability.reject(this._storedError),this._requests))t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let t of(this._done=!0,this._headersReceivedCapability.reject(e),this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vQ{constructor(e,t,n){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){let t=e.chunk;for(let e of(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){for(let t of(this._storedError=v$(e,this._url),this._requests))t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){for(let e of(this._done=!0,this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}let vZ=/^file:\/\/\/[a-zA-Z]:\//;class v0{constructor(e){this.source=e,this.url=function(e){let t=ve.get("url"),n=t.parse(e);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(e)?t.parse(`file:///${e}`):(n.host||(n.protocol="file:"),n)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}getFullReader(){return g1(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new v6(this):new v5(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;let n=this.isFsUrl?new v8(this,e,t):new v4(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;for(let n of(null==(t=this._fullRequestReader)||t.cancel(e),this._rangeRequestReaders.slice(0)))n.cancel(e)}}class v1{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new mt("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class v2{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return null===t?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,null==(e=this.onProgress)||e.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function v3(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class v5 extends v1{constructor(e){super(e);const t=t=>{if(404===t.statusCode){let e=new g7(`Missing PDF "${this._url}".`);this._storedError=e,this._headersCapability.reject(e);return}this._headersCapability.resolve(),this._setReadableStream(t);let n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:s,suggestedLength:a}=vj({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=a||this._contentLength,this._filename=vB(n)};if(this._request=null,"http:"===this._url.protocol){const n=ve.get("http");this._request=n.request(v3(this._url,e.httpHeaders),t)}else{const n=ve.get("https");this._request=n.request(v3(this._url,e.httpHeaders),t)}this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class v4 extends v2{constructor(e,t,n){for(const t in super(e),this._httpHeaders={},e.httpHeaders){const n=e.httpHeaders[t];void 0!==n&&(this._httpHeaders[t]=n)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const s=e=>{if(404===e.statusCode){let e=new g7(`Missing PDF "${this._url}".`);this._storedError=e;return}this._setReadableStream(e)};if(this._request=null,"http:"===this._url.protocol){const e=ve.get("http");this._request=e.request(v3(this._url,this._httpHeaders),s)}else{const e=ve.get("https");this._request=e.request(v3(this._url,this._httpHeaders),s)}this._request.on("error",e=>{this._storedError=e}),this._request.end()}}class v6 extends v1{constructor(e){super(e);let t=decodeURIComponent(this._url.path);vZ.test(this._url.href)&&(t=t.replace(/^\//,""));const n=ve.get("fs");n.promises.lstat(t).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=new g7(`Missing PDF "${t}".`)),this._storedError=e,this._headersCapability.reject(e)})}}class v8 extends v2{constructor(e,t,n){super(e);let s=decodeURIComponent(this._url.path);vZ.test(this._url.href)&&(s=s.replace(/^\//,""));const a=ve.get("fs");this._setReadableStream(a.createReadStream(s,{start:t,end:n-1}))}}let v7=(nD=class{constructor({textContentSource:e,container:t,viewport:n}){if(hF(this,nW),hF(this,nB),hF(this,nz),hF(this,nm,Promise.withResolvers()),hF(this,nv,null),hF(this,ny,!1),hF(this,nb,!!(null!=(ng=globalThis.FontInspector)&&ng.enabled)),hF(this,nw,null),hF(this,nA,null),hF(this,nx,0),hF(this,n_,0),hF(this,nS,null),hF(this,nk,null),hF(this,nE,0),hF(this,nC,0),hF(this,nM,Object.create(null)),hF(this,nR,[]),hF(this,nT,null),hF(this,nP,[]),hF(this,nL,new WeakMap),hF(this,nI,null),e instanceof ReadableStream)hN(this,nT,e);else if("object"==typeof e)hN(this,nT,new ReadableStream({start(t){t.enqueue(e),t.close()}}));else throw Error('No "textContentSource" parameter specified.');hN(this,nv,hN(this,nk,t)),hN(this,nC,n.scale*(globalThis.devicePixelRatio||1)),hN(this,nE,n.rotation),hN(this,nA,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=n.rawDims;hN(this,nI,[1,0,0,-1,-o,l+a]),hN(this,n_,s),hN(this,nx,a),m$(t,n),hD(this,nm).promise.catch(()=>{}).then(()=>{hD(nD,nO).delete(this),hN(this,nA,null),hN(this,nM,null)})}render(){let e=()=>{hD(this,nS).read().then(({value:t,done:n})=>{n?hD(this,nm).resolve():(hD(this,nw)??hN(this,nw,t.lang),Object.assign(hD(this,nM),t.styles),hW(this,nW,nj).call(this,t.items),e())},hD(this,nm).reject)};return hN(this,nS,hD(this,nT).getReader()),hD(nD,nO).add(this),e(),hD(this,nm).promise}update({viewport:e,onBefore:t=null}){var n;let s=e.scale*(globalThis.devicePixelRatio||1),a=e.rotation;if(a!==hD(this,nE)&&(null==t||t(),hN(this,nE,a),m$(hD(this,nk),{rotation:a})),s!==hD(this,nC)){null==t||t(),hN(this,nC,s);let e={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:hW(n=nD,nU,nV).call(n,hD(this,nw))};for(let t of hD(this,nP))e.properties=hD(this,nL).get(t),e.div=t,hW(this,nz,nH).call(this,e)}}cancel(){var e;let t=new mt("TextLayer task cancelled.");null==(e=hD(this,nS))||e.cancel(t).catch(()=>{}),hN(this,nS,null),hD(this,nm).reject(t)}get textDivs(){return hD(this,nP)}get textContentItemsStr(){return hD(this,nR)}static cleanup(){if(!(hD(this,nO).size>0)){for(let{canvas:e}of(hD(this,nF).clear(),hD(this,nN).values()))e.remove();hD(this,nN).clear()}}},nm=new WeakMap,nv=new WeakMap,ny=new WeakMap,nb=new WeakMap,nw=new WeakMap,nA=new WeakMap,nx=new WeakMap,n_=new WeakMap,nS=new WeakMap,nk=new WeakMap,nE=new WeakMap,nC=new WeakMap,nM=new WeakMap,nR=new WeakMap,nT=new WeakMap,nP=new WeakMap,nL=new WeakMap,nI=new WeakMap,nF=new WeakMap,nN=new WeakMap,nO=new WeakMap,nW=new WeakSet,nj=function(e){var t,n;if(hD(this,ny))return;(n=hD(this,nA)).ctx||(n.ctx=hW(t=nD,nU,nV).call(t,hD(this,nw)));let s=hD(this,nP),a=hD(this,nR);for(let t of e){if(s.length>1e5){gZ("Ignoring additional textDivs for performance reasons."),hN(this,ny,!0);return}if(void 0===t.str){if("beginMarkedContentProps"===t.type||"beginMarkedContent"===t.type){let e=hD(this,nv);hN(this,nv,document.createElement("span")),hD(this,nv).classList.add("markedContent"),null!==t.id&&hD(this,nv).setAttribute("id",`${t.id}`),e.append(hD(this,nv))}else"endMarkedContent"===t.type&&hN(this,nv,hD(this,nv).parentNode);continue}a.push(t.str),hW(this,nB,n$).call(this,t)}},nB=new WeakSet,n$=function(e){var t;let n,s,a=document.createElement("span"),o={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};hD(this,nP).push(a);let l=mo.transform(hD(this,nI),e.transform),h=Math.atan2(l[1],l[0]),c=hD(this,nM)[e.fontName];c.vertical&&(h+=Math.PI/2);let d=hD(this,nb)&&c.fontSubstitution||c.fontFamily,u=Math.hypot(l[2],l[3]),p=u*hW(t=nD,nG,nq).call(t,d,hD(this,nw));0===h?(n=l[4],s=l[5]-p):(n=l[4]+p*Math.sin(h),s=l[5]-p*Math.cos(h));let f="calc(var(--scale-factor)*",g=a.style;hD(this,nv)===hD(this,nk)?(g.left=`${(100*n/hD(this,n_)).toFixed(2)}%`,g.top=`${(100*s/hD(this,nx)).toFixed(2)}%`):(g.left=`${f}${n.toFixed(2)}px)`,g.top=`${f}${s.toFixed(2)}px)`),g.fontSize=`${f}${u.toFixed(2)}px)`,g.fontFamily=d,o.fontSize=u,a.setAttribute("role","presentation"),a.textContent=e.str,a.dir=e.dir,hD(this,nb)&&(a.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),0!==h&&(o.angle=180/Math.PI*h);let m=!1;if(e.str.length>1)m=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){let t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(m=!0)}if(m&&(o.canvasWidth=c.vertical?e.height:e.width),hD(this,nL).set(a,o),hD(this,nA).div=a,hD(this,nA).properties=o,hW(this,nz,nH).call(this,hD(this,nA)),o.hasText&&hD(this,nv).append(a),o.hasEOL){let e=document.createElement("br");e.setAttribute("role","presentation"),hD(this,nv).append(e)}},nz=new WeakSet,nH=function(e){let{div:t,properties:n,ctx:s,prevFontSize:a,prevFontFamily:o}=e,{style:l}=t,h="";if(0!==n.canvasWidth&&n.hasText){let{fontFamily:c}=l,{canvasWidth:d,fontSize:u}=n;(a!==u||o!==c)&&(s.font=`${u*hD(this,nC)}px ${c}`,e.prevFontSize=u,e.prevFontFamily=c);let{width:p}=s.measureText(t.textContent);p>0&&(h=`scaleX(${d*hD(this,nC)/p})`)}0!==n.angle&&(h=`rotate(${n.angle}deg) ${h}`),h.length>0&&(l.transform=h)},nU=new WeakSet,nV=function(e=null){let t=hD(this,nN).get(e||(e=""));if(!t){let n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1}),hD(this,nN).set(e,t)}return t},nG=new WeakSet,nq=function(e,t){let n=hD(this,nF).get(e);if(n)return n;let s=hW(this,nU,nV).call(this,t),a=s.font;s.canvas.width=s.canvas.height=30,s.font=`30px ${e}`;let o=s.measureText(""),l=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);if(l){let t=l/(l+h);return hD(this,nF).set(e,t),s.canvas.width=s.canvas.height=0,s.font=a,t}s.strokeStyle="red",s.clearRect(0,0,30,30),s.strokeText("g",0,0);let c=s.getImageData(0,0,30,30).data;h=0;for(let e=c.length-1-3;e>=0;e-=4)if(c[e]>0){h=Math.ceil(e/4/30);break}s.clearRect(0,0,30,30),s.strokeText("A",0,30),c=s.getImageData(0,0,30,30).data,l=0;for(let e=0,t=c.length;e<t;e+=4)if(c[e]>0){l=30-Math.floor(e/4/30);break}s.canvas.width=s.canvas.height=0,s.font=a;let d=l?l/(l+h):.8;return hD(this,nF).set(e,d),d},hF(nD,nU),hF(nD,nG),hF(nD,nF,new Map),hF(nD,nN,new Map),hF(nD,nO,new Set),nD);function v9(){mF("`renderTextLayer`, please use `TextLayer` instead.");let{textContentSource:e,container:t,viewport:n,...s}=arguments[0],a=Object.keys(s);a.length>0&&gZ("Ignoring `renderTextLayer` parameters: "+a.join(", "));let o=new v7({textContentSource:e,container:t,viewport:n}),{textDivs:l,textContentItemsStr:h}=o;return{promise:o.render(),textDivs:l,textContentItemsStr:h}}function ye(){mF("`updateTextLayer`, please use `TextLayer` instead.")}class yt{static textContent(e){let t=[],n={items:t,styles:Object.create(null)};return function e(n){var s;if(!n)return;let a=null,o=n.name;if("#text"===o)a=n.value;else{if(!yt.shouldBuildText(o))return;null!=(s=null==n?void 0:n.attributes)&&s.textContent?a=n.attributes.textContent:n.value&&(a=n.value)}if(null!==a&&t.push({str:a}),n.children)for(let t of n.children)e(t)}(e),n}static shouldBuildText(e){return"textarea"!==e&&"input"!==e&&"option"!==e&&"select"!==e}}let yi=gj?vn:mA,yn=gj?vr:m_,yr=gj?vi:mw,ys=gj?vs:mS;function ya(e){if("string"==typeof e||e instanceof URL?e={url:e}:(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e}),"object"!=typeof e)throw Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw Error("Invalid parameter object: need either .data, .range or .url");let t=new yh,{docId:n}=t,s=e.url?function(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(gj&&"string"==typeof e)return e}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(e.url):null,a=e.data?function(e){if(gj&&"u">typeof gN&&e instanceof gN)throw Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return mn(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"==typeof e&&!isNaN(null==e?void 0:e.length))return new Uint8Array(e);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(e.data):null,o=e.httpHeaders||null,l=!0===e.withCredentials,h=e.password??null,c=e.range instanceof yc?e.range:null,d=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:65536,u=e.worker instanceof ym?e.worker:null,p=e.verbosity,f="string"!=typeof e.docBaseUrl||mM(e.docBaseUrl)?null:e.docBaseUrl,g="string"==typeof e.cMapUrl?e.cMapUrl:null,m=!1!==e.cMapPacked,v=e.CMapReaderFactory||yn,y="string"==typeof e.standardFontDataUrl?e.standardFontDataUrl:null,b=e.StandardFontDataFactory||ys,w=!0!==e.stopAtErrors,A=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,x=!1!==e.isEvalSupported,_="boolean"==typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!gj,S=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,k="boolean"==typeof e.disableFontFace?e.disableFontFace:gj,E=!0===e.fontExtraProperties,C=!0===e.enableXfa,M=e.ownerDocument||globalThis.document,R=!0===e.disableRange,T=!0===e.disableStream,P=!0===e.disableAutoFetch,L=!0===e.pdfBug,I=c?c.length:e.length??NaN,D="boolean"==typeof e.useSystemFonts?e.useSystemFonts:!gj&&!k,F="boolean"==typeof e.useWorkerFetch?e.useWorkerFetch:v===m_&&b===mS&&g&&y&&mI(g,document.baseURI)&&mI(y,document.baseURI),N=e.canvasFactory||new yi({ownerDocument:M}),O=e.filterFactory||new yr({docId:n,ownerDocument:M});Number.isInteger(p)&&(gJ=p);let W={canvasFactory:N,filterFactory:O};if(F||(W.cMapReaderFactory=new v({baseUrl:g,isCompressed:m}),W.standardFontDataFactory=new b({baseUrl:y})),!u){let e={verbosity:p,port:vR.workerPort};t._worker=u=e.port?ym.fromPort(e):new ym(e)}let j={docId:n,apiVersion:"4.3.136",data:a,password:h,disableAutoFetch:P,rangeChunkSize:d,length:I,docBaseUrl:f,enableXfa:C,evaluatorOptions:{maxImageSize:A,disableFontFace:k,ignoreErrors:w,isEvalSupported:x,isOffscreenCanvasSupported:_,canvasMaxAreaInBytes:S,fontExtraProperties:E,useSystemFonts:D,cMapUrl:F?g:null,standardFontDataUrl:F?y:null}},B={disableFontFace:k,fontExtraProperties:E,ownerDocument:M,pdfBug:L,styleElement:null,loadingParams:{disableAutoFetch:P,enableXfa:C}};return u.promise.then(function(){let e,h;if(t.destroyed)throw Error("Loading aborted");if(u.destroyed)throw Error("Worker was destroyed");let p=u.messageHandler.sendWithPromise("GetDocRequest",j,a?[a.buffer]:null);return c?e=new vN(c,{disableRange:R,disableStream:T}):a||(h={url:s,length:I,httpHeaders:o,withCredentials:l,rangeChunkSize:d,disableRange:R,disableStream:T},e=gj?"u">typeof fetch&&"u">typeof Response&&"body"in Response.prototype&&mI(h.url)?new vG(h):new v0(h):mI(h.url)?new vG(h):new vK(h)),p.then(s=>{if(t.destroyed)throw Error("Loading aborted");if(u.destroyed)throw Error("Worker was destroyed");let a=new vP(n,s,u.port),o=new yv(a,t,e,B,W);t._transport=o,a.send("Ready",null)})}).catch(t._capability.reject),t}function yo(e){return"object"==typeof e&&Number.isInteger(null==e?void 0:e.num)&&e.num>=0&&Number.isInteger(null==e?void 0:e.gen)&&e.gen>=0}let yl=class e{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${hO(e,nX)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{null!=(e=this._worker)&&e.port&&(this._worker._pendingDestroy=!0),await (null==(t=this._transport)?void 0:t.destroy())}catch(e){throw null!=(n=this._worker)&&n.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};hF(yl,nX=new WeakMap,0);let yh=yl,yc=class{constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(let n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(let n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){g0("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class yd{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return g3(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class yu{constructor(e,t,n,s=!1){hF(this,nJ),hF(this,nZ),hF(this,nY,null),hF(this,nK,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new mL:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new yb,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new mE({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:e="display"}={}){let{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return g3(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=gz.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:h=null,pageColors:c=null,printAnnotationStorage:d=null}){var u,p;null==(u=this._stats)||u.time("Overall");let f=this._transport.getRenderingIntent(n,s,d),{renderingIntent:g,cacheKey:m}=f;hN(this,nK,!1),hW(this,nZ,n0).call(this),l||(l=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(m);v||(v=Object.create(null),this._intentStates.set(m,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);let y=!!(4&g);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(p=this._stats)||p.time("Page Request"),this._pumpOperatorList(f));let b=e=>{var t;v.renderTasks.delete(w),(this._maybeCleanupAfterRender||y)&&hN(this,nK,!0),hW(this,nJ,nQ).call(this,!y),e?(w.capability.reject(e),this._abortOperatorList({intentState:v,reason:e instanceof Error?e:Error(e)})):w.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!=(t=globalThis.Stats)&&t.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},w=new yx({callback:b,params:{canvasContext:e,viewport:t,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:c});(v.renderTasks||(v.renderTasks=new Set)).add(w);let A=w.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([e,t])=>{var n;if(this.destroyed)return void b();if(null==(n=this._stats)||n.time("Rendering"),!(t.renderingIntent&g))throw Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");w.initializeGraphics({transparency:e,optionalContentConfig:t}),w.operatorListChanged()}).catch(b),A}getOperatorList({intent:e="display",annotationMode:t=gz.ENABLE,printAnnotationStorage:n=null}={}){var s;let a,o=this._transport.getRenderingIntent(e,t,n,!0),l=this._intentStates.get(o.cacheKey);return l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l)),l.opListReadCapability||((a=Object.create(null)).operatorListChanged=function(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(a))},l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(a),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(s=this._stats)||s.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(e=>yt.textContent(e));let t=this.streamTextContent(e);return new Promise(function(e,n){let s=t.getReader(),a={items:[],styles:Object.create(null),lang:null};!function t(){s.read().then(function({value:n,done:s}){s?e(a):(a.lang??(a.lang=n.lang),Object.assign(a.styles,n.styles),a.items.push(...n.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(let n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),hN(this,nK,!1),hW(this,nZ,n0).call(this),Promise.all(e)}cleanup(e=!1){hN(this,nK,!0);let t=hW(this,nJ,nQ).call(this,!1);return e&&t&&this._stats&&(this._stats=new mL),t}_startRenderPage(e,t){var n,s;let a=this._intentStates.get(t);a&&(null==(n=this._stats)||n.timeEnd("Page Request"),null==(s=a.displayReadyCapability)||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);for(let n of(t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots,t.renderTasks))n.operatorListChanged();e.lastChunk&&hW(this,nJ,nQ).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n}){let{map:s,transfer:a}=n,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},a).getReader(),l=this._intentStates.get(t);l.streamReader=o;let h=()=>{o.read().then(({value:e,done:t})=>{if(t){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(e,l),h())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){for(let e of(l.operatorList.lastChunk=!0,l.renderTasks))e.operatorListChanged();hW(this,nJ,nQ).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else if(l.opListReadCapability)l.opListReadCapability.reject(e);else throw e}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof mC){let n=100;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new mt(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[t,n]of this._intentStates)if(n===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}nY=new WeakMap,nK=new WeakMap,nJ=new WeakSet,nQ=function(e=!1){if(hW(this,nZ,n0).call(this),!hD(this,nK)||this.destroyed)return!1;if(e)return hN(this,nY,setTimeout(()=>{hN(this,nY,null),hW(this,nJ,nQ).call(this,!1)},5e3)),!1;for(let{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),hN(this,nK,!1),!0},nZ=new WeakSet,n0=function(){hD(this,nY)&&(clearTimeout(hD(this,nY)),hN(this,nY,null))};class yp{constructor(){hF(this,n1,new Set),hF(this,n2,Promise.resolve())}postMessage(e,t){let n={data:structuredClone(e,t?{transfer:t}:null)};hD(this,n2).then(()=>{for(let e of hD(this,n1))e.call(this,n)})}addEventListener(e,t){hD(this,n1).add(t)}removeEventListener(e,t){hD(this,n1).delete(t)}terminate(){hD(this,n1).clear()}}n1=new WeakMap,n2=new WeakMap;let yf={isWorkerDisabled:!1,fakeWorkerId:0};gj&&(yf.isWorkerDisabled=!0,vR.workerSrc||(vR.workerSrc="./pdf.worker.mjs")),yf.isSameOrigin=function(e,t){let n;try{if(!(n=new URL(e)).origin||"null"===n.origin)return!1}catch{return!1}let s=new URL(t,n);return n.origin===s.origin},yf.createCDNWrapper=function(e){let t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let yg=class e{constructor({name:t=null,port:n=null,verbosity:s=gJ}={}){var a;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,n){if(null!=(a=hD(e,n3))&&a.has(n))throw Error("Cannot use more than one PDFWorker per port.");(hD(e,n3)||hN(e,n3,new WeakMap)).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return gj?Promise.all([ve.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new vP("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!yf.isWorkerDisabled&&!hD(e,n5,n4)){let{workerSrc:t}=e;try{yf.isSameOrigin(window.location.href,t)||(t=yf.createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),n=new vP("main","worker",e),s=()=>{e.removeEventListener("error",a),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||s()};e.addEventListener("error",a),n.on("test",t=>{(e.removeEventListener("error",a),this.destroyed)?s():t?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())}),n.on("ready",t=>{if(e.removeEventListener("error",a),this.destroyed)return void s();try{o()}catch{this._setupFakeWorker()}});let o=()=>{let e=new Uint8Array;n.send("test",e,[e.buffer])};o();return}catch{gQ("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){yf.isWorkerDisabled||(gZ("Setting up fake worker."),yf.isWorkerDisabled=!0),e._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(Error("Worker was destroyed"));let t=new yp;this._port=t;let n=`fake${yf.fakeWorkerId++}`,s=new vP(n+"_worker",n,t);e.setup(s,t);let a=new vP(n,n+"_worker",t);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),null==(t=hD(e,n3))||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(null!=t&&t.port))throw Error("PDFWorker.fromPort - invalid method signature.");let s=null==(n=hD(this,n3))?void 0:n.get(t.port);if(s){if(s._pendingDestroy)throw Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return s}return new e(t)}static get workerSrc(){if(vR.workerSrc)return vR.workerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return g3(this,"_setupFakeWorkerGlobal",(async()=>hD(this,n5,n4)?hD(this,n5,n4):(await import(this.workerSrc)).WorkerMessageHandler)())}};n3=new WeakMap,n5=new WeakSet,n4=function(){var e;try{return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch{return null}},hF(yg,n5),hF(yg,n3,void 0);let ym=yg;class yv{constructor(e,t,n,s,a){hF(this,rt),hF(this,n6,new Map),hF(this,n8,new Map),hF(this,n7,new Map),hF(this,n9,new Map),hF(this,re,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new yb,this.fontLoader=new m6({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return g3(this,"annotationStorage",new m5)}getRenderingIntent(e,t=gz.ENABLE,n=null,s=!1){let a=2,o=m3;switch(e){case"any":a=1;break;case"display":break;case"print":a=4;break;default:gZ(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case gz.DISABLE:a+=64;break;case gz.ENABLE:break;case gz.ENABLE_FORMS:a+=16;break;case gz.ENABLE_STORAGE:a+=32,o=(4&a&&n instanceof m4?n:this.annotationStorage).serializable;break;default:gZ(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(a+=256),{renderingIntent:a,cacheKey:`${a}_${o.hash}`,annotationStorageSerializable:o}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null==(e=hD(this,re))||e.reject(Error("Worker was destroyed during onPassword callback"));let t=[];for(let e of hD(this,n8).values())t.push(e._destroy());hD(this,n8).clear(),hD(this,n7).clear(),hD(this,n9).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e;this.commonObjs.clear(),this.fontLoader.clear(),hD(this,n6).clear(),this.filterFactory.destroy(),v7.cleanup(),null==(e=this._networkStream)||e.cancelAllRequests(new mt("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{g1(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function({value:e,done:n}){n?t.close():(g1(e instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",e=>{let n=Promise.withResolvers(),s=this._fullReader;return s.headersReady.then(()=>{var e;s.isStreamingSupported&&s.isRangeSupported||(this._lastProgress&&(null==(e=t.onProgress)||e.call(t,this._lastProgress)),s.onProgress=e=>{var n;null==(n=t.onProgress)||n.call(t,{loaded:e.loaded,total:e.total})}),n.resolve({isStreamingSupported:s.isStreamingSupported,isRangeSupported:s.isRangeSupported,contentLength:s.contentLength})},n.reject),n.promise}),e.on("GetRangeReader",(e,t)=>{g1(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function({value:e,done:n}){n?t.close():(g1(e instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,t._capability.resolve(new yd(e,this))}),e.on("DocException",function(e){let n;switch(e.name){case"PasswordException":n=new g4(e.message,e.code);break;case"InvalidPDFException":n=new g8(e.message);break;case"MissingPDFException":n=new g7(e.message);break;case"UnexpectedResponseException":n=new g9(e.message,e.status);break;case"UnknownErrorException":n=new g6(e.message,e.details);break;default:g0("DocException - expected a valid Error.")}t._capability.reject(n)}),e.on("PasswordRequest",e=>{if(hN(this,re,Promise.withResolvers()),t.onPassword){let n=e=>{e instanceof Error?hD(this,re).reject(e):hD(this,re).resolve({password:e})};try{t.onPassword(n,e.code)}catch(e){hD(this,re).reject(e)}}else hD(this,re).reject(new g4(e.message,e.code));return hD(this,re).promise}),e.on("DataLoaded",e=>{var n;null==(n=t.onProgress)||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{this.destroyed||hD(this,n8).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",([t,n,s])=>{var a;if(this.destroyed||this.commonObjs.has(t))return null;switch(n){case"Font":let{disableFontFace:o,fontExtraProperties:l,pdfBug:h}=this._params;if("error"in s){let e=s.error;gZ(`Error during font loading: ${e}`),this.commonObjs.resolve(t,e);break}let c=new m8(s,{disableFontFace:o,inspectFont:h&&null!=(a=globalThis.FontInspector)&&a.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null});this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:t})).finally(()=>{!l&&c.data&&(c.data=null),this.commonObjs.resolve(t,c)});break;case"CopyLocalImage":let{imageRef:d}=s;for(let e of(g1(d,"The imageRef must be defined."),hD(this,n8).values()))for(let[,n]of e.objs)if((null==n?void 0:n.ref)===d)return n.dataLen?(this.commonObjs.resolve(t,structuredClone(n)),n.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(t,s);break;default:throw Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([e,t,n,s])=>{var a;if(this.destroyed)return;let o=hD(this,n8).get(t);if(!o.objs.has(e)){if(0===o._intentStates.size){null==(a=null==s?void 0:s.bitmap)||a.close();return}switch(n){case"Image":o.objs.resolve(e,s),(null==s?void 0:s.dataLen)>1e7&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(e,s);break;default:throw Error(`Got unknown object type ${n}`)}}}),e.on("DocProgress",e=>{var n;this.destroyed||null==(n=t.onProgress)||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",e=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",e=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e;this.annotationStorage.size<=0&&gZ("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:(null==(e=this._fullReader)?void 0:e.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(Error("Invalid page request."));let t=e-1,n=hD(this,n7).get(t);if(n)return n;let s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw Error("Transport destroyed");n.refStr&&hD(this,n9).set(n.refStr,e);let s=new yu(t,n,this,this._params.pdfBug);return hD(this,n8).set(t,s),s});return hD(this,n7).set(t,s),s}getPageIndex(e){return yo(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return hW(this,rt,ri).call(this,"GetFieldObjects")}hasJSActions(){return hW(this,rt,ri).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return hW(this,rt,ri).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return hW(this,rt,ri).call(this,"GetOptionalContentConfig").then(t=>new vF(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",t=hD(this,n6).get(e);if(t)return t;let n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n;return{info:e[0],metadata:e[1]?new vL(e[1]):null,contentDispositionFilename:(null==(t=this._fullReader)?void 0:t.filename)??null,contentLength:(null==(n=this._fullReader)?void 0:n.contentLength)??null}});return hD(this,n6).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){for(let e of(await this.messageHandler.sendWithPromise("Cleanup",null),hD(this,n8).values()))if(!e.cleanup())throw Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),hD(this,n6).clear(),this.filterFactory.destroy(!0),v7.cleanup()}}cachedPageNumber(e){if(!yo(e))return null;let t=0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`;return hD(this,n9).get(t)??null}}n6=new WeakMap,n8=new WeakMap,n7=new WeakMap,n9=new WeakMap,re=new WeakMap,rt=new WeakSet,ri=function(e,t=null){let n=hD(this,n6).get(e);if(n)return n;let s=this.messageHandler.sendWithPromise(e,t);return hD(this,n6).set(e,s),s};let yy=Symbol("INITIAL_DATA");class yb{constructor(){hF(this,rr),hF(this,rn,Object.create(null))}get(e,t=null){if(t){let n=hW(this,rr,rs).call(this,e);return n.promise.then(()=>t(n.data)),null}let n=hD(this,rn)[e];if(!n||n.data===yy)throw Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){let t=hD(this,rn)[e];return!!t&&t.data!==yy}resolve(e,t=null){let n=hW(this,rr,rs).call(this,e);n.data=t,n.resolve()}clear(){var e;for(let t in hD(this,rn)){let{data:n}=hD(this,rn)[t];null==(e=null==n?void 0:n.bitmap)||e.close()}hN(this,rn,Object.create(null))}*[Symbol.iterator](){for(let e in hD(this,rn)){let{data:t}=hD(this,rn)[e];t!==yy&&(yield[e,t])}}}rn=new WeakMap,rr=new WeakSet,rs=function(e){var t;return(t=hD(this,rn))[e]||(t[e]={...Promise.withResolvers(),data:yy})};class yw{constructor(e){hF(this,ra,null),hN(this,ra,e),this.onContinue=null}get promise(){return hD(this,ra).capability.promise}cancel(e=0){hD(this,ra).cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=hD(this,ra).operatorList;if(!e)return!1;let{annotationCanvasMap:t}=hD(this,ra);return e.form||e.canvas&&(null==t?void 0:t.size)>0}}ra=new WeakMap;let yA=class e{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:o,pageIndex:l,canvasFactory:h,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:p=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=h,this.filterFactory=c,this._pdfBug=u,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"u">typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new yw(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){var s,a;if(this.cancelled)return;if(this._canvas){if(hD(e,ro).has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");hD(e,ro).add(this._canvas)}this._pdfBug&&null!=(s=globalThis.StepperManager)&&s.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:o,viewport:l,transform:h,background:c}=this.params;this.gfx=new vM(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:h,viewport:l,transparency:t,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,null==(a=this.graphicsReadyCallback)||a.call(this)}cancel(t=null,n=0){var s;this.running=!1,this.cancelled=!0,null==(s=this.gfx)||s.endDrawing(),hD(e,ro).delete(this._canvas),this.callback(t||new mC(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}null==(e=this.stepper)||e.updateOperatorList(this.operatorList),this.running||this._continue()}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),hD(e,ro).delete(this._canvas),this.callback())))}};hF(yA,ro=new WeakMap,new WeakSet);let yx=yA,y_="4.3.136",yS="0cec64437";function yk(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function yE(e){return Math.max(0,Math.min(255,255*e))}class yC{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return[e=yE(e),e,e]}static G_HTML([e]){let t=yk(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(yE)}static RGB_HTML(e){return`#${e.map(yk).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[yE(1-Math.min(1,e+s)),yE(1-Math.min(1,n+s)),yE(1-Math.min(1,t+s))]}static CMYK_HTML(e){let t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){let s=1-e,a=1-t,o=1-n,l=Math.min(s,a,o);return["CMYK",s,a,o,l]}}class yM{static setupStorage(e,t,n,s,a){let o=s.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==o.value&&(e.textContent=o.value),"print"===a)break;e.addEventListener("input",e=>{s.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===a)break;e.addEventListener("change",e=>{s.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==o.value&&e.setAttribute("value",o.value),"print"===a)break;e.addEventListener("input",e=>{s.setValue(t,{value:e.target.value})})}break;case"select":if(null!==o.value)for(let t of(e.setAttribute("value",o.value),n.children))t.attributes.value===o.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected;e.addEventListener("input",e=>{let n=e.target.options,a=-1===n.selectedIndex?"":n[n.selectedIndex].value;s.setValue(t,{value:a})})}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:a}){let{attributes:o}=t,l=e instanceof HTMLAnchorElement;for(let[t,n]of("radio"===o.type&&(o.name=`${o.name}-${s}`),Object.entries(o)))if(null!=n)switch(t){case"class":n.length&&e.setAttribute(t,n.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",n);break;case"style":Object.assign(e.style,n);break;case"textContent":e.textContent=n;break;default:l&&("href"===t||"newWindow"===t)||e.setAttribute(t,n)}l&&a.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var t,n;let s=e.annotationStorage,a=e.linkService,o=e.xfaHtml,l=e.intent||"display",h=document.createElement(o.name);o.attributes&&this.setAttributes({html:h,element:o,intent:l,linkService:a});let c="richText"!==l,d=e.div;if(d.append(h),e.viewport){let t=`matrix(${e.viewport.transform.join(",")})`;d.style.transform=t}c&&d.setAttribute("class","xfaLayer xfaFont");let u=[];if(0===o.children.length){if(o.value){let e=document.createTextNode(o.value);h.append(e),c&&yt.shouldBuildText(o.name)&&u.push(e)}return{textDivs:u}}let p=[[o,-1,h]];for(;p.length>0;){let[e,o,h]=p.at(-1);if(o+1===e.children.length){p.pop();continue}let d=e.children[++p.at(-1)[1]];if(null===d)continue;let{name:f}=d;if("#text"===f){let e=document.createTextNode(d.value);u.push(e),h.append(e);continue}let g=null!=(t=null==d?void 0:d.attributes)&&t.xmlns?document.createElementNS(d.attributes.xmlns,f):document.createElement(f);if(h.append(g),d.attributes&&this.setAttributes({html:g,element:d,storage:s,intent:l,linkService:a}),(null==(n=d.children)?void 0:n.length)>0)p.push([d,-1,g]);else if(d.value){let e=document.createTextNode(d.value);c&&yt.shouldBuildText(f)&&u.push(e),g.append(e)}}for(let e of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){let t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}let yR=new WeakSet;function yT(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class yP{static create(e){switch(e.data.annotationType){case 2:return new yD(e);case 1:return new yF(e);case 20:switch(e.data.fieldType){case"Tx":return new yO(e);case"Btn":return e.data.radioButton?new yB(e):e.data.checkBox?new yj(e):new y$(e);case"Ch":return new yz(e);case"Sig":return new yW(e)}return new yN(e);case 16:return new yH(e);case 3:return new yV(e);case 4:return new yG(e);case 5:return new yq(e);case 6:return new yX(e);case 8:return new yY(e);case 14:return new yJ(e);case 15:return new yQ(e);case 7:return new yK(e);case 9:return new yZ(e);case 10:return new y0(e);case 11:return new y1(e);case 12:return new y2(e);case 13:return new y3(e);case 17:return new y5(e);default:return new yI(e)}}}let yL=class e{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){hF(this,rd),hF(this,rl,null),hF(this,rh,!1),hF(this,rc,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(null!=e&&e.str||null!=t&&t.str||null!=n&&n.str)}get hasPopupData(){return e._hasPopupData(this.data)}updateEdited(e){var t;if(!this.container)return;hD(this,rl)||hN(this,rl,{rect:this.data.rect.slice(0)});let{rect:n}=e;n&&hW(this,rd,ru).call(this,n),null==(t=hD(this,rc))||t.popup.updateEdited(e)}resetEdited(){var e;hD(this,rl)&&(hW(this,rd,ru).call(this,hD(this,rl).rect),null==(e=hD(this,rc))||e.popup.resetEdited(),hN(this,rl,null))}_createContainer(e){let{data:t,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),this instanceof yN||(a.tabIndex=1e3);let{style:o}=a;if(o.zIndex=this.parent.zIndex++,t.popupRef&&a.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof yH){let{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,a),a}let{width:l,height:h}=yT(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;let e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;switch(e>0||n>0?o.borderRadius=`calc(${e}px * var(--scale-factor)) / calc(${n}px * var(--scale-factor))`:this instanceof yB&&(o.borderRadius=`calc(${l}px * var(--scale-factor)) / calc(${h}px * var(--scale-factor))`),t.borderStyle.style){case 1:o.borderStyle="solid";break;case 2:o.borderStyle="dashed";break;case 3:gZ("Unimplemented border style: beveled");break;case 4:gZ("Unimplemented border style: inset");break;case 5:o.borderBottomStyle="solid"}let s=t.borderColor||null;s?(hN(this,rh,!0),o.borderColor=mo.makeHexColor(0|s[0],0|s[1],0|s[2])):o.borderWidth=0}let c=mo.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:u,pageX:p,pageY:f}=s.rawDims;o.left=`${100*(c[0]-p)/d}%`,o.top=`${100*(c[1]-f)/u}%`;let{rotation:g}=t;return t.hasOwnCanvas||0===g?(o.width=`${100*l/d}%`,o.height=`${100*h/u}%`):this.setRotation(g,a),a}setRotation(e,t=this.container){let n,s;if(!this.data.rect)return;let{pageWidth:a,pageHeight:o}=this.parent.viewport.rawDims,{width:l,height:h}=yT(this.data.rect);e%180==0?(n=100*l/a,s=100*h/o):(n=100*h/a,s=100*l/o),t.style.width=`${n}%`,t.style.height=`${s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){let e=(e,t,n)=>{let s=n.detail[e],a=s[0],o=s.slice(1);n.target.style[t]=yC[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[t]:yC[`${a}_rgb`](o)})};return g3(this,"_commonActions",{display:e=>{let{display:t}=e.detail,n=t%2==1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{let t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){let n=this._commonActions;for(let s of Object.keys(t.detail)){let a=e[s]||n[s];null==a||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;let t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;let n=this._commonActions;for(let[s,a]of Object.entries(t)){let o=n[s];o&&(o({detail:{[s]:a},target:e}),delete t[s])}}_createQuadrilaterals(){let e;if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[n,s,a,o]=this.data.rect;if(1===t.length){let[,{x:e,y:l},{x:h,y:c}]=t[0];if(a===e&&o===l&&n===h&&s===c)return}let{style:l}=this.container;if(hD(this,rh)){let{borderColor:t,borderWidth:n}=l;l.borderWidth=0,e=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${n}">`],this.container.classList.add("hasBorder")}let h=a-n,c=o-s,{svgFactory:d}=this,u=d.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);let p=d.createElement("defs");u.append(p);let f=d.createElement("clipPath"),g=`clippath_${this.data.id}`;for(let[,{x:s,y:a},{x:l,y:u}]of(f.setAttribute("id",g),f.setAttribute("clipPathUnits","objectBoundingBox"),p.append(f),t)){let t=d.createElement("rect"),p=(l-n)/h,g=(o-a)/c,m=(s-l)/h,v=(a-u)/c;t.setAttribute("x",p),t.setAttribute("y",g),t.setAttribute("width",m),t.setAttribute("height",v),f.append(t),null==e||e.push(`<rect vector-effect="non-scaling-stroke" x="${p}" y="${g}" width="${m}" height="${v}"/>`)}hD(this,rh)&&(e.push("</g></svg>')"),l.backgroundImage=e.join("")),this.container.append(u),this.container.style.clipPath=`url(#${g})`}_createPopup(){let{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");let n=hN(this,rc,new yH({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){g0("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){let n=[];if(this._fieldObjects){let s=this._fieldObjects[e];if(s)for(let{page:e,id:a,exportValues:o}of s){if(-1===e||a===t)continue;let s="string"==typeof o?o:null,l=document.querySelector(`[data-element-id="${a}"]`);if(l&&!yR.has(l)){gZ(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:s,domElement:l})}return n}for(let s of document.getElementsByName(e)){let{exportValue:e}=s,a=s.getAttribute("data-element-id");a!==t&&yR.has(s)&&n.push({id:a,exportValue:e,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),null==(e=this.popup)||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null==(e=this.popup)||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(let t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null==(n=this.linkService.eventBus)||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};rl=new WeakMap,rh=new WeakMap,rc=new WeakMap,rd=new WeakSet,ru=function(e){let{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:h}}}}=this;null==n||n.splice(0,4,...e);let{width:c,height:d}=yT(e);t.left=`${100*(e[0]-l)/a}%`,t.top=`${100*(o-e[3]+h)/o}%`,0===s?(t.width=`${100*c/a}%`,t.height=`${100*d/o}%`):this.setRotation(s)};let yI=yL;class yD extends yI{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!(null!=t&&t.ignoreBorder),createQuadrilaterals:!0}),hF(this,rp),hF(this,rg),hF(this,rv),this.isTooltipOnly=e.data.isTooltipOnly}render(){let{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(n,e.action),s=!0):e.attachment?(hW(this,rg,rm).call(this,n,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(hW(this,rv,ry).call(this,n,e.setOCGState),s=!0):e.dest?(this._bindLink(n,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),s=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(n),this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&hW(this,rp,rf).call(this)}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),hW(this,rp,rf).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");let n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let s of Object.keys(t.actions)){let a=n.get(s);a&&(e[a]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1})}e.onclick||(e.onclick=()=>!1),hW(this,rp,rf).call(this)}_bindResetFormAction(e,t){let n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),hW(this,rp,rf).call(this),!this._fieldObjects){gZ('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var e;null==n||n();let{fields:s,refs:a,include:o}=t,l=[];if(0!==s.length||0!==a.length){let e=new Set(a);for(let t of s)for(let{id:n}of this._fieldObjects[t]||[])e.add(n);for(let t of Object.values(this._fieldObjects))for(let n of t)e.has(n.id)===o&&l.push(n)}else for(let e of Object.values(this._fieldObjects))l.push(...e);let h=this.annotationStorage,c=[];for(let e of l){let{id:t}=e;switch(c.push(t),e.type){case"text":{let n=e.defaultValue||"";h.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{let n=e.defaultValue===e.exportValues;h.setValue(t,{value:n});break}case"combobox":case"listbox":{let n=e.defaultValue||"";h.setValue(t,{value:n});break}default:continue}let n=document.querySelector(`[data-element-id="${t}"]`);if(n){if(!yR.has(n)){gZ(`_bindResetFormAction - element not allowed: ${t}`);continue}n.dispatchEvent(new Event("resetform"))}}return this.enableScripting&&(null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}rp=new WeakSet,rf=function(){this.container.setAttribute("data-internal-link","")},rg=new WeakSet,rm=function(e,t,n=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>{var e;return null==(e=this.downloadManager)||e.openOrDownloadData(t.content,t.filename,n),!1},hW(this,rp,rf).call(this)},rv=new WeakSet,ry=function(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),hW(this,rp,rf).call(this)};class yF extends yI{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class yN extends yI{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&((null==(t=e.previousSibling)?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ms.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,a){n.includes("mouse")?e.addEventListener(n,e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var o;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}a&&(null==(o=this.linkService.eventBus)||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(e)}}))})}_setEventListeners(e,t,n,s){var a,o,l;for(let[h,c]of n)("Action"===c||null!=(a=this.data.actions)&&a[c])&&(("Focus"===c||"Blur"===c)&&(t||(t={focused:!1})),this._setEventListener(e,t,h,c,s),"Focus"!==c||null!=(o=this.data.actions)&&o.Blur?"Blur"!==c||null!=(l=this.data.actions)&&l.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){let t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":mo.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){let t,{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||9,a=e.style,o=e=>Math.round(10*e)/10;if(this.data.multiLine){let e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),n=Math.round(e/(1.35*s))||1;t=Math.min(s,o(e/n/1.35))}else t=Math.min(s,o(Math.abs(this.data.rect[3]-this.data.rect[1]-2)/1.35));a.fontSize=`calc(${t}px * var(--scale-factor))`,a.color=mo.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(a.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class yO extends yN{constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,s){let a=this.annotationStorage;for(let o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),a.setValue(o.id,{[s]:n})}render(){var e,t;let n=this.annotationStorage,s=this.data.id;this.container.classList.add("textWidgetAnnotation");let a=null;if(this.renderForms){let o=n.getValue(s,{value:this.data.fieldValue}),l=o.value||"",h=n.getValue(s,{charLimit:this.data.maxLen}).charLimit;h&&l.length>h&&(l=l.slice(0,h));let c=o.formattedValue||(null==(e=this.data.textContent)?void 0:e.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));let d={userValue:l,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?((a=document.createElement("textarea")).textContent=c??l,this.data.doNotScroll&&(a.style.overflowY="hidden")):((a=document.createElement("input")).type="text",a.setAttribute("value",c??l),this.data.doNotScroll&&(a.style.overflowX="hidden")),this.data.hasOwnCanvas&&(a.hidden=!0),yR.add(a),a.setAttribute("data-element-id",s),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=1e3,this._setRequired(a,this.data.required),h&&(a.maxLength=h),a.addEventListener("input",e=>{n.setValue(s,{value:e.target.value}),this.setPropertyOnSiblings(a,"value",e.target.value,"value"),d.formattedValue=null}),a.addEventListener("resetform",e=>{let t=this.data.defaultFieldValue??"";a.value=d.userValue=t,d.formattedValue=null});let u=e=>{let{formattedValue:t}=d;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",e=>{var t;if(d.focused)return;let{target:n}=e;d.userValue&&(n.value=d.userValue),d.lastCommittedValue=n.value,d.commitKey=1,null!=(t=this.data.actions)&&t.Focus||(d.focused=!0)}),a.addEventListener("updatefromsandbox",e=>{this.showElementAndHideCanvas(e.target),this._dispatchEventFromSandbox({value(e){d.userValue=e.detail.value??"",n.setValue(s,{value:d.userValue.toString()}),e.target.value=d.userValue},formattedValue(e){let{formattedValue:t}=e.detail;d.formattedValue=t,null!=t&&e.target!==document.activeElement&&(e.target.value=t),n.setValue(s,{formattedValue:t})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:e=>{var t;let{charLimit:a}=e.detail,{target:o}=e;if(0===a)return void o.removeAttribute("maxLength");o.setAttribute("maxLength",a);let l=d.userValue;!l||l.length<=a||(o.value=d.userValue=l=l.slice(0,a),n.setValue(s,{value:l}),null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:l,willCommit:!0,commitKey:1,selStart:o.selectionStart,selEnd:o.selectionEnd}}))}},e)}),a.addEventListener("keydown",e=>{var t;d.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(d.commitKey=3):n=2,-1===n)return;let{value:a}=e.target;d.lastCommittedValue!==a&&(d.lastCommittedValue=a,d.userValue=a,null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:a,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});let e=u;u=null,a.addEventListener("blur",t=>{var n,a;if(!d.focused||!t.relatedTarget)return;null!=(n=this.data.actions)&&n.Blur||(d.focused=!1);let{value:o}=t.target;d.userValue=o,d.lastCommittedValue!==o&&(null==(a=this.linkService.eventBus)||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:o,willCommit:!0,commitKey:d.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})),e(t)}),null!=(t=this.data.actions)&&t.Keystroke&&a.addEventListener("beforeinput",e=>{var t;d.lastCommittedValue=null;let{data:n,target:a}=e,{value:o,selectionStart:l,selectionEnd:h}=a,c=l,u=h;switch(e.inputType){case"deleteWordBackward":{let e=o.substring(0,l).match(/\w*[^\w]*$/);e&&(c-=e[0].length);break}case"deleteWordForward":{let e=o.substring(l).match(/^[^\w]*\w*/);e&&(u+=e[0].length);break}case"deleteContentBackward":l===h&&(c-=1);break;case"deleteContentForward":l===h&&(u+=1)}e.preventDefault(),null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s,name:"Keystroke",value:o,change:n||"",willCommit:!1,selStart:c,selEnd:u}})}),this._setEventListeners(a,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(u&&a.addEventListener("blur",u),this.data.comb){let e=(this.data.rect[2]-this.data.rect[0])/h;a.classList.add("comb"),a.style.letterSpacing=`calc(${e}px * var(--scale-factor) - 1ch)`}}else(a=document.createElement("div")).textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell",this.data.hasOwnCanvas&&(a.hidden=!0);return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class yW extends yN{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class yj extends yN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){let e=this.annotationStorage,t=this.data,n=t.id,s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"==typeof s&&(s="Off"!==s,e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let a=document.createElement("input");return yR.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=1e3,a.addEventListener("change",s=>{let{name:a,checked:o}=s.target;for(let s of this._getElementsByName(a,n)){let n=o&&s.exportValue===t.exportValue;s.domElement&&(s.domElement.checked=n),e.setValue(s.id,{value:n})}e.setValue(n,{value:o})}),a.addEventListener("resetform",e=>{let n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}},t)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class yB extends yN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let e=this.annotationStorage,t=this.data,n=t.id,s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"==typeof s&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(let s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});let a=document.createElement("input");if(yR.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=1e3,a.addEventListener("change",t=>{let{name:s,checked:a}=t.target;for(let t of this._getElementsByName(s,n))e.setValue(t.id,{value:!1});e.setValue(n,{value:a})}),a.addEventListener("resetform",e=>{let n=t.defaultFieldValue;e.target.checked=null!=n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){let s=t.buttonValue;a.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({value:t=>{let a=s===t.detail.value;for(let s of this._getElementsByName(t.target.name)){let t=a&&s.id===n;s.domElement&&(s.domElement.checked=t),e.setValue(s.id,{value:t})}}},t)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class y$ extends yD{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){let e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");let t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class yz extends yN{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");yR.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=1e3;let a=this.data.combo&&this.data.options.length>0;for(let e of(this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",e=>{let t=this.data.defaultFieldValue;for(let e of s.options)e.selected=e.value===t}),this.data.options)){let t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,n.value.includes(e.exportValue)&&(t.setAttribute("selected",!0),a=!1),s.append(t)}let o=null;if(a){let e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),s.prepend(e),o=()=>{e.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}let l=e=>{let t=e?"value":"textContent",{options:n,multiple:a}=s;return a?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]},h=l(!1),c=e=>{let t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({value(n){null==o||o();let a=n.detail.value,c=new Set(Array.isArray(a)?a:[a]);for(let e of s.options)e.selected=c.has(e.value);e.setValue(t,{value:l(!0)}),h=l(!1)},multipleSelection(e){s.multiple=!0},remove(n){let a=s.options,o=n.detail.remove;a[o].selected=!1,s.remove(o),a.length>0&&-1===Array.prototype.findIndex.call(a,e=>e.selected)&&(a[0].selected=!0),e.setValue(t,{value:l(!0),items:c(n)}),h=l(!1)},clear(n){for(;0!==s.length;)s.remove(0);e.setValue(t,{value:null,items:[]}),h=l(!1)},insert(n){let{index:a,displayValue:o,exportValue:d}=n.detail.insert,u=s.children[a],p=document.createElement("option");p.textContent=o,p.value=d,u?u.before(p):s.append(p),e.setValue(t,{value:l(!0),items:c(n)}),h=l(!1)},items(n){let{items:a}=n.detail;for(;0!==s.length;)s.remove(0);for(let e of a){let{displayValue:t,exportValue:n}=e,a=document.createElement("option");a.textContent=t,a.value=n,s.append(a)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:c(n)}),h=l(!1)},indices(n){let s=new Set(n.detail.indices);for(let e of n.target.options)e.selected=s.has(e.index);e.setValue(t,{value:l(!0)}),h=l(!1)},editable(e){e.target.disabled=!e.detail.editable}},n)}),s.addEventListener("input",n=>{var s;let a=l(!0),o=l(!1);e.setValue(t,{value:a}),n.preventDefault(),null==(s=this.linkService.eventBus)||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:o,changeEx:a,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):s.addEventListener("input",function(n){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class yH extends yI{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:yI._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");let e=this.popup=new yU({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(let n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>`${md}${e}`).join(",")),this.container}}class yU{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:a,contentsObj:o,richText:l,parent:h,rect:c,parentRect:d,open:u}){var p;for(const u of(hF(this,rW),hF(this,rB),hF(this,rz),hF(this,rU),hF(this,rG),hF(this,rX),hF(this,rK),hF(this,rQ),hF(this,r0),hF(this,rb,hW(this,rG,rq).bind(this)),hF(this,rw,hW(this,r0,r1).bind(this)),hF(this,rA,hW(this,rQ,rZ).bind(this)),hF(this,rx,hW(this,rK,rJ).bind(this)),hF(this,r_,null),hF(this,rS,null),hF(this,rk,null),hF(this,rE,null),hF(this,rC,null),hF(this,rM,null),hF(this,rR,null),hF(this,rT,!1),hF(this,rP,null),hF(this,rL,null),hF(this,rI,null),hF(this,rD,null),hF(this,rF,null),hF(this,rN,null),hF(this,rO,!1),hN(this,rS,e),hN(this,rF,s),hN(this,rk,o),hN(this,rD,l),hN(this,rM,h),hN(this,r_,t),hN(this,rI,c),hN(this,rR,d),hN(this,rC,n),hN(this,rE,mN.toDateObject(a)),this.trigger=n.flatMap(e=>e.getElementsToTriggerPopup()),this.trigger))u.addEventListener("click",hD(this,rx)),u.addEventListener("mouseenter",hD(this,rA)),u.addEventListener("mouseleave",hD(this,rw)),u.classList.add("popupTriggerArea");for(const e of n)null==(p=e.container)||p.addEventListener("keydown",hD(this,rb));hD(this,rS).hidden=!0,u&&hW(this,rK,rJ).call(this)}render(){if(hD(this,rP))return;let e=hN(this,rP,document.createElement("div"));if(e.className="popup",hD(this,r_)){let t=e.style.outlineColor=mo.makeHexColor(...hD(this,r_));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${t} 30%, white)`:e.style.backgroundColor=mo.makeHexColor(...hD(this,r_).map(e=>Math.floor(.7*(255-e)+e)))}let t=document.createElement("span");t.className="header";let n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=hD(this,rF),e.append(t),hD(this,rE)){let e=document.createElement("span");e.classList.add("popupDate"),e.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),e.setAttribute("data-l10n-args",JSON.stringify({date:hD(this,rE).toLocaleDateString(),time:hD(this,rE).toLocaleTimeString()})),t.append(e)}let s=hD(this,rW,rj);if(s)yM.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{let t=this._formatContents(hD(this,rk));e.append(t)}hD(this,rS).append(e)}_formatContents({str:e,dir:t}){let n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;let s=e.split(/(?:\r\n?|\n)/);for(let e=0,t=s.length;e<t;++e){let a=s[e];n.append(document.createTextNode(a)),e<t-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;hD(this,rN)||hN(this,rN,{contentsObj:hD(this,rk),richText:hD(this,rD)}),e&&hN(this,rL,null),t&&(hN(this,rD,hW(this,rU,rV).call(this,t)),hN(this,rk,null)),null==(n=hD(this,rP))||n.remove(),hN(this,rP,null)}resetEdited(){var e;hD(this,rN)&&({contentsObj:hO(this,rk)._,richText:hO(this,rD)._}=hD(this,rN),hN(this,rN,null),null==(e=hD(this,rP))||e.remove(),hN(this,rP,null),hN(this,rL,null))}forceHide(){hN(this,rO,this.isVisible),hD(this,rO)&&(hD(this,rS).hidden=!0)}maybeShow(){hD(this,rO)&&(hD(this,rP)||hW(this,rQ,rZ).call(this),hN(this,rO,!1),hD(this,rS).hidden=!1)}get isVisible(){return!1===hD(this,rS).hidden}}rb=new WeakMap,rw=new WeakMap,rA=new WeakMap,rx=new WeakMap,r_=new WeakMap,rS=new WeakMap,rk=new WeakMap,rE=new WeakMap,rC=new WeakMap,rM=new WeakMap,rR=new WeakMap,rT=new WeakMap,rP=new WeakMap,rL=new WeakMap,rI=new WeakMap,rD=new WeakMap,rF=new WeakMap,rN=new WeakMap,rO=new WeakMap,rW=new WeakSet,rj=function(){let e=hD(this,rD),t=hD(this,rk);return null!=e&&e.str&&(!(null!=t&&t.str)||t.str===e.str)&&hD(this,rD).html||null},rB=new WeakSet,r$=function(){var e,t,n;return(null==(n=null==(t=null==(e=hD(this,rW,rj))?void 0:e.attributes)?void 0:t.style)?void 0:n.fontSize)||0},rz=new WeakSet,rH=function(){var e,t,n;return(null==(n=null==(t=null==(e=hD(this,rW,rj))?void 0:e.attributes)?void 0:t.style)?void 0:n.color)||null},rU=new WeakSet,rV=function(e){let t=[],n={style:{color:hD(this,rz,rH),fontSize:hD(this,rB,r$)?`calc(${hD(this,rB,r$)}px * var(--scale-factor))`:""}};for(let s of e.split(`
`))t.push({name:"span",value:s,attributes:n});return{str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}}},rG=new WeakSet,rq=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&hD(this,rT))&&hW(this,rK,rJ).call(this)},rX=new WeakSet,rY=function(){if(null!==hD(this,rL))return;let{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:a}}}=hD(this,rM),o=!!hD(this,rR),l=o?hD(this,rR):hD(this,rI);for(let e of hD(this,rC))if(!l||null!==mo.intersect(e.data.rect,l)){l=e.data.rect,o=!0;break}let h=mo.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),c=o?l[2]-l[0]+5:0,d=h[0]+c,u=h[1];hN(this,rL,[100*(d-s)/t,100*(u-a)/n]);let{style:p}=hD(this,rS);p.left=`${hD(this,rL)[0]}%`,p.top=`${hD(this,rL)[1]}%`},rK=new WeakSet,rJ=function(){hN(this,rT,!hD(this,rT)),hD(this,rT)?(hW(this,rQ,rZ).call(this),hD(this,rS).addEventListener("click",hD(this,rx)),hD(this,rS).addEventListener("keydown",hD(this,rb))):(hW(this,r0,r1).call(this),hD(this,rS).removeEventListener("click",hD(this,rx)),hD(this,rS).removeEventListener("keydown",hD(this,rb)))},rQ=new WeakSet,rZ=function(){hD(this,rP)||this.render(),this.isVisible?hD(this,rT)&&hD(this,rS).classList.add("focused"):(hW(this,rX,rY).call(this),hD(this,rS).hidden=!1,hD(this,rS).style.zIndex=parseInt(hD(this,rS).style.zIndex)+1e3)},r0=new WeakSet,r1=function(){hD(this,rS).classList.remove("focused"),hD(this,rT)||!this.isVisible||(hD(this,rS).hidden=!0,hD(this,rS).style.zIndex=parseInt(hD(this,rS).style.zIndex)-1e3)};class yV extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=gH.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let e=document.createElement("div");for(let t of(e.classList.add("annotationTextContent"),e.setAttribute("role","comment"),this.textContent)){let n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class yG extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),hF(this,r2,null)}render(){this.container.classList.add("lineAnnotation");let e=this.data,{width:t,height:n}=yT(e.rect),s=this.svgFactory.create(t,n,!0),a=hN(this,r2,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return hD(this,r2)}addHighlightArea(){this.container.classList.add("highlightArea")}}r2=new WeakMap;class yq extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),hF(this,r3,null)}render(){this.container.classList.add("squareAnnotation");let e=this.data,{width:t,height:n}=yT(e.rect),s=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,o=hN(this,r3,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",t-a),o.setAttribute("height",n-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return hD(this,r3)}addHighlightArea(){this.container.classList.add("highlightArea")}}r3=new WeakMap;class yX extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),hF(this,r5,null)}render(){this.container.classList.add("circleAnnotation");let e=this.data,{width:t,height:n}=yT(e.rect),s=this.svgFactory.create(t,n,!0),a=e.borderStyle.width,o=hN(this,r5,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",t/2),o.setAttribute("cy",n/2),o.setAttribute("rx",t/2-a/2),o.setAttribute("ry",n/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return hD(this,r5)}addHighlightArea(){this.container.classList.add("highlightArea")}}r5=new WeakMap;class yY extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),hF(this,r4,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let e=this.data,{width:t,height:n}=yT(e.rect),s=this.svgFactory.create(t,n,!0),a=[];for(let t of e.vertices){let n=t.x-e.rect[0],s=e.rect[3]-t.y;a.push(n+","+s)}a=a.join(" ");let o=hN(this,r4,this.svgFactory.createElement(this.svgElementName));return o.setAttribute("points",a),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return hD(this,r4)}addHighlightArea(){this.container.classList.add("highlightArea")}}r4=new WeakMap;class yK extends yY{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class yJ extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class yQ extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),hF(this,r6,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=gH.INK}render(){this.container.classList.add(this.containerClassName);let e=this.data,{width:t,height:n}=yT(e.rect),s=this.svgFactory.create(t,n,!0);for(let t of e.inkLists){let n=[];for(let s of t){let t=s.x-e.rect[0],a=e.rect[3]-s.y;n.push(`${t},${a}`)}n=n.join(" ");let a=this.svgFactory.createElement(this.svgElementName);hD(this,r6).push(a),a.setAttribute("points",n),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),s.append(a)}return this.container.append(s),this.container}getElementsToTriggerPopup(){return hD(this,r6)}addHighlightArea(){this.container.classList.add("highlightArea")}}r6=new WeakMap;class yZ extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class y0 extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class y1 extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class y2 extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class y3 extends yI{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class y5 extends yI{constructor(e){var t;super(e,{isRenderable:!0}),hF(this,r7),hF(this,r8,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,...n})}render(){let e;this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:n}=this;n.hasAppearance||0===n.fillAlpha?e=document.createElement("div"):((e=document.createElement("img")).src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(e.style=`filter: opacity(${Math.round(100*n.fillAlpha)}%);`)),e.addEventListener("dblclick",hW(this,r7,r9).bind(this)),hN(this,r8,e);let{isMac:s}=ms.platform;return t.addEventListener("keydown",e=>{"Enter"===e.key&&(s?e.metaKey:e.ctrlKey)&&hW(this,r7,r9).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():e.classList.add("popupTriggerArea"),t.append(e),t}getElementsToTriggerPopup(){return hD(this,r8)}addHighlightArea(){this.container.classList.add("highlightArea")}}r8=new WeakMap,r7=new WeakSet,r9=function(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.content,this.filename)};let y4=(so=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:o}){hF(this,sn),hF(this,ss),hF(this,se,null),hF(this,st,null),hF(this,si,new Map),this.div=e,hN(this,se,t),hN(this,st,n),this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var t;let{annotations:n}=e,s=this.div;m$(s,this.viewport);let a=new Map,o={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new mk,annotationStorage:e.annotationStorage||new m5,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(let e of n){if(e.noHTML)continue;let n=16===e.annotationType;if(n){let t=a.get(e.id);if(!t)continue;o.elements=t}else{let{width:t,height:n}=yT(e.rect);if(t<=0||n<=0)continue}o.data=e;let s=yP.create(o);if(!s.isRenderable)continue;if(!n&&e.popupRef){let t=a.get(e.popupRef);t?t.push(s):a.set(e.popupRef,[s])}let l=s.render();e.hidden&&(l.style.visibility="hidden"),hW(this,sn,sr).call(this,l,e.id),s.annotationEditorType>0&&(hD(this,si).set(s.data.id,s),null==(t=this._annotationEditorUIManager)||t.renderAnnotationElement(s))}hW(this,ss,sa).call(this)}update({viewport:e}){let t=this.div;this.viewport=e,m$(t,{rotation:e.rotation}),hW(this,ss,sa).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(hD(this,si).values())}getEditableAnnotation(e){return hD(this,si).get(e)}},se=new WeakMap,st=new WeakMap,si=new WeakMap,sn=new WeakSet,sr=function(e,t){var n;let s=e.firstChild||e;s.id=`${md}${t}`,this.div.append(e),null==(n=hD(this,se))||n.moveElementInDOM(this.div,e,s,!1)},ss=new WeakSet,sa=function(){if(!hD(this,st))return;let e=this.div;for(let[t,n]of hD(this,st)){let s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";let{firstChild:a}=s;a?"CANVAS"===a.nodeName?a.replaceWith(n):a.classList.contains("annotationContent")?a.after(n):a.before(n):s.append(n)}hD(this,st).clear()},so),y6=/\r\n?|\n/g,y8=class e extends m0{constructor(t){super({...t,name:"freeTextEditor"}),hF(this,sy),hF(this,sw),hF(this,sx),hF(this,sS),hF(this,sM),hF(this,sT),hF(this,sD),hF(this,sl,this.editorDivBlur.bind(this)),hF(this,sh,this.editorDivFocus.bind(this)),hF(this,sc,this.editorDivInput.bind(this)),hF(this,sd,this.editorDivKeydown.bind(this)),hF(this,su,this.editorDivPaste.bind(this)),hF(this,sp,void 0),hF(this,sf,""),hF(this,sg,`${this.id}-editor`),hF(this,sm,void 0),hF(this,sv,null),hN(this,sp,t.color||e._defaultColor||m0._defaultLineColor),hN(this,sm,t.fontSize||e._defaultFontSize)}static get _keyboardManager(){let t=e.prototype,n=e=>e.isEmpty(),s=mJ.TRANSLATE_SMALL,a=mJ.TRANSLATE_BIG;return g3(this,"_keyboardManager",new mX([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(e,t){m0.initialize(e,t,{strings:["pdfjs-free-text-default-content"]});let n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case gU.FREETEXT_SIZE:e._defaultFontSize=n;break;case gU.FREETEXT_COLOR:e._defaultColor=n}}updateParams(e,t){switch(e){case gU.FREETEXT_SIZE:hW(this,sy,sb).call(this,t);break;case gU.FREETEXT_COLOR:hW(this,sw,sA).call(this,t)}}static get defaultPropertiesToUpdate(){return[[gU.FREETEXT_SIZE,e._defaultFontSize],[gU.FREETEXT_COLOR,e._defaultColor||m0._defaultLineColor]]}get propertiesToUpdate(){return[[gU.FREETEXT_SIZE,hD(this,sm)],[gU.FREETEXT_COLOR,hD(this,sp)]]}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){let t=this.parentScale;return[-e._internalPadding*t,-(e._internalPadding+hD(this,sm))*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(gH.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",hD(this,sd)),this.editorDiv.addEventListener("focus",hD(this,sh)),this.editorDiv.addEventListener("blur",hD(this,sl)),this.editorDiv.addEventListener("input",hD(this,sc)),this.editorDiv.addEventListener("paste",hD(this,su)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",hD(this,sg)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",hD(this,sd)),this.editorDiv.removeEventListener("focus",hD(this,sh)),this.editorDiv.removeEventListener("blur",hD(this,sl)),this.editorDiv.removeEventListener("input",hD(this,sc)),this.editorDiv.removeEventListener("paste",hD(this,su)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),null!=(e=this._initialOptions)&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let e=hD(this,sf),t=hN(this,sf,hW(this,sx,s_).call(this).trimEnd());if(e===t)return;let n=e=>{(hN(this,sf,e),e)?(hW(this,sM,sR).call(this),this._uiManager.rebuild(this),hW(this,sS,sk).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),hW(this,sS,sk).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(t){e._keyboardManager.exec(this,t)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let e,t;if(this.div)return this.div;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",hD(this,sg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),m0._l10nPromise.get("pdfjs-free-text-default-content").then(e=>{var t;return null==(t=this.editorDiv)?void 0:t.setAttribute("default-content",e)}),this.editorDiv.contentEditable=!0;let{style:n}=this.editorDiv;if(n.fontSize=`calc(${hD(this,sm)}px * var(--scale-factor))`,n.color=hD(this,sp),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),mU(this,this.div,["dblclick","keydown"]),this.width){let[n,s]=this.parentDimensions;if(this.annotationElementId){let a,o,{position:l}=hD(this,sv),[h,c]=this.getInitialTranslation();[h,c]=this.pageTranslationToScreen(h,c);let[d,u]=this.pageDimensions,[p,f]=this.pageTranslation;switch(this.rotation){case 0:a=e+(l[0]-p)/d,o=t+this.height-(l[1]-f)/u;break;case 90:a=e+(l[0]-p)/d,o=t-(l[1]-f)/u,[h,c]=[c,-h];break;case 180:a=e-this.width+(l[0]-p)/d,o=t-(l[1]-f)/u,[h,c]=[-h,-c];break;case 270:a=e+(l[0]-p-this.height*u)/d,o=t+(l[1]-f-this.width*d)/u,[h,c]=[-c,h]}this.setAt(a*n,o*s,h,c)}else this.setAt(e*n,t*s,this.width*n,this.height*s);hW(this,sM,sR).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){let n=t.clipboardData||window.clipboardData,{types:s}=n;if(1===s.length&&"text/plain"===s[0])return;t.preventDefault();let a=hW(e,sL,sI).call(e,n.getData("text")||"").replaceAll(y6,`
`);if(!a)return;let o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();let l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}let{startContainer:h,startOffset:c}=l,d=[],u=[];if(h.nodeType===Node.TEXT_NODE){let t=h.parentElement;if(u.push(h.nodeValue.slice(c).replaceAll(y6,"")),t!==this.editorDiv){let n=d;for(let s of this.editorDiv.childNodes){if(s===t){n=u;continue}n.push(hW(e,sE,sC).call(e,s))}}d.push(h.nodeValue.slice(0,c).replaceAll(y6,""))}else if(h===this.editorDiv){let t=d,n=0;for(let s of this.editorDiv.childNodes)n++===c&&(t=u),t.push(hW(e,sE,sC).call(e,s))}hN(this,sf,`${d.join(`
`)}${a}${u.join(`
`)}`),hW(this,sM,sR).call(this);let p=new Range,f=d.reduce((e,t)=>e+t.length,0);for(let{firstChild:e}of this.editorDiv.childNodes)if(e.nodeType===Node.TEXT_NODE){let t=e.nodeValue.length;if(f<=t){p.setStart(e,f),p.setEnd(e,f);break}f-=t}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static deserialize(t,n,s){let a=null;if(t instanceof yV){let{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:s,rotation:o,id:l},textContent:h,textPosition:c,parent:{page:{pageNumber:d}}}=t;if(!h||0===h.length)return null;a=t={annotationType:gH.FREETEXT,color:Array.from(n),fontSize:e,value:h.join(`
`),position:c,pageIndex:d-1,rect:s.slice(0),rotation:o,id:l,deleted:!1}}let o=super.deserialize(t,n,s);return hN(o,sm,t.fontSize),hN(o,sp,mo.makeHexColor(...t.color)),hN(o,sf,hW(e,sL,sI).call(e,t.value)),o.annotationElementId=t.id||null,hN(o,sv,a),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let n=e._internalPadding*this.parentScale,s=this.getRect(n,n),a=m0._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:hD(this,sp)),o={annotationType:gH.FREETEXT,color:a,fontSize:hD(this,sm),value:hW(this,sT,sP).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?o:this.annotationElementId&&!hW(this,sD,sF).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(t){let n=super.renderAnnotationElement(t);if(this.deleted)return n;let{style:s}=n;for(let e of(s.fontSize=`calc(${hD(this,sm)}px * var(--scale-factor))`,s.color=hD(this,sp),n.replaceChildren(),hD(this,sf).split(`
`))){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),n.append(t)}let a=e._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(a,a),popupContent:hD(this,sf)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};sl=new WeakMap,sh=new WeakMap,sc=new WeakMap,sd=new WeakMap,su=new WeakMap,sp=new WeakMap,sf=new WeakMap,sg=new WeakMap,sm=new WeakMap,sv=new WeakMap,sy=new WeakSet,sb=function(e){let t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--scale-factor))`,this.translate(0,-(e-hD(this,sm))*this.parentScale),hN(this,sm,e),hW(this,sS,sk).call(this)},n=hD(this,sm);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gU.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},sw=new WeakSet,sA=function(e){let t=e=>{hN(this,sp,this.editorDiv.style.color=e)},n=hD(this,sp);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gU.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},sx=new WeakSet,s_=function(){let e=[];for(let t of(this.editorDiv.normalize(),this.editorDiv.childNodes))e.push(hW(y8,sE,sC).call(y8,t));return e.join(`
`)},sS=new WeakSet,sk=function(){let e,[t,n]=this.parentDimensions;if(this.isAttachedToDOM)e=this.div.getBoundingClientRect();else{let{currentLayer:t,div:n}=this,s=n.style.display,a=n.classList.contains("hidden");n.classList.remove("hidden"),n.style.display="hidden",t.div.append(this.div),e=n.getBoundingClientRect(),n.remove(),n.style.display=s,n.classList.toggle("hidden",a)}this.rotation%180==this.parentRotation%180?(this.width=e.width/t,this.height=e.height/n):(this.width=e.height/t,this.height=e.width/n),this.fixAndSetPosition()},sE=new WeakSet,sC=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(y6,"")},sM=new WeakSet,sR=function(){if(this.editorDiv.replaceChildren(),hD(this,sf))for(let e of hD(this,sf).split(`
`)){let t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}},sT=new WeakSet,sP=function(){return hD(this,sf).replaceAll("\xa0"," ")},sL=new WeakSet,sI=function(e){return e.replaceAll(" ","\xa0")},sD=new WeakSet,sF=function(e){let{value:t,fontSize:n,color:s,pageIndex:a}=hD(this,sv);return this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==s[t])||e.pageIndex!==a},hF(y8,sE),hF(y8,sL),hL(y8,"_freeTextDefaultContent",""),hL(y8,"_internalPadding",0),hL(y8,"_defaultColor",null),hL(y8,"_defaultFontSize",10),hL(y8,"_type","freetext"),hL(y8,"_editorType",gH.FREETEXT);class y7{constructor(e,t=0,n=0,s=!0){hF(this,sj),hF(this,s$),hF(this,sH),hF(this,sV),hF(this,sq),hF(this,sN,void 0),hF(this,sO,[]),hF(this,sW,[]);let a=1/0,o=-1/0,l=1/0,h=-1/0;for(const{x:n,y:s,width:c,height:d}of e){const e=1e-4*Math.floor((n-t)/1e-4),u=1e-4*Math.ceil((n+c+t)/1e-4),p=1e-4*Math.floor((s-t)/1e-4),f=1e-4*Math.ceil((s+d+t)/1e-4),g=[e,p,f,!0],m=[u,p,f,!1];hD(this,sO).push(g,m),a=Math.min(a,e),o=Math.max(o,u),l=Math.min(l,p),h=Math.max(h,f)}const c=o-a+2*n,d=h-l+2*n,u=a-n,p=l-n,f=hD(this,sO).at(s?-1:-2),g=[f[0],f[2]];for(const e of hD(this,sO)){const[t,n,s]=e;e[0]=(t-u)/c,e[1]=(n-p)/d,e[2]=(s-p)/d}hN(this,sN,{x:u,y:p,width:c,height:d,lastPoint:g})}getOutlines(){hD(this,sO).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);let e=[];for(let t of hD(this,sO))t[3]?(e.push(...hW(this,sq,sX).call(this,t)),hW(this,sH,sU).call(this,t)):(hW(this,sV,sG).call(this,t),e.push(...hW(this,sq,sX).call(this,t)));return hW(this,sj,sB).call(this,e)}}sN=new WeakMap,sO=new WeakMap,sW=new WeakMap,sj=new WeakSet,sB=function(e){let t,n=[],s=new Set;for(let t of e){let[e,s,a]=t;n.push([e,s,t],[e,a,t])}n.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let e=0,t=n.length;e<t;e+=2){let t=n[e][2],a=n[e+1][2];t.push(a),a.push(t),s.add(t),s.add(a)}let a=[];for(;s.size>0;){let e=s.values().next().value,[n,o,l,h,c]=e;s.delete(e);let d=n,u=o;for(t=[n,l],a.push(t);;){let e;if(s.has(h))e=h;else if(s.has(c))e=c;else break;s.delete(e),[n,o,l,h,c]=e,d!==n&&(t.push(d,u,n,u===o?o:l),d=n),u=u===o?l:o}t.push(d,u)}return new be(a,hD(this,sN))},s$=new WeakSet,sz=function(e){let t=hD(this,sW),n=0,s=t.length-1;for(;n<=s;){let a=n+s>>1,o=t[a][0];if(o===e)return a;o<e?n=a+1:s=a-1}return s+1},sH=new WeakSet,sU=function([,e,t]){let n=hW(this,s$,sz).call(this,e);hD(this,sW).splice(n,0,[e,t])},sV=new WeakSet,sG=function([,e,t]){let n=hW(this,s$,sz).call(this,e);for(let s=n;s<hD(this,sW).length;s++){let[n,a]=hD(this,sW)[s];if(n!==e)break;if(n===e&&a===t)return void hD(this,sW).splice(s,1)}for(let s=n-1;s>=0;s--){let[n,a]=hD(this,sW)[s];if(n!==e)break;if(n===e&&a===t)return void hD(this,sW).splice(s,1)}},sq=new WeakSet,sX=function(e){let[t,n,s]=e,a=[[t,n,s]],o=hW(this,s$,sz).call(this,s);for(let e=0;e<o;e++){let[n,s]=hD(this,sW)[e];for(let e=0,o=a.length;e<o;e++){let[,l,h]=a[e];if(!(s<=l||h<=n)){if(l>=n){if(h>s)a[e][1]=s;else{if(1===o)return[];a.splice(e,1),e--,o--}continue}a[e][2]=n,h>s&&a.push([t,s,h])}}}return a};class y9{toSVGPath(){throw Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof bi}}class be extends y9{constructor(e,t){super(),hF(this,sY,void 0),hF(this,sK,void 0),hN(this,sK,e),hN(this,sY,t)}toSVGPath(){let e=[];for(let t of hD(this,sK)){let[n,s]=t;e.push(`M${n} ${s}`);for(let a=2;a<t.length;a+=2){let o=t[a],l=t[a+1];o===n?(e.push(`V${l}`),s=l):l===s&&(e.push(`H${o}`),n=o)}e.push("Z")}return e.join(" ")}serialize([e,t,n,s],a){let o=[],l=n-e,h=s-t;for(let t of hD(this,sK)){let n=Array(t.length);for(let a=0;a<t.length;a+=2)n[a]=e+t[a]*l,n[a+1]=s-t[a+1]*h;o.push(n)}return o}get box(){return hD(this,sY)}}sY=new WeakMap,sK=new WeakMap;let bt=class e{constructor({x:t,y:n},s,a,o,l,h=0){hF(this,an),hF(this,sJ,void 0),hF(this,sQ,[]),hF(this,sZ,void 0),hF(this,s0,void 0),hF(this,s1,[]),hF(this,s2,new Float64Array(18)),hF(this,s3,void 0),hF(this,s5,void 0),hF(this,s4,void 0),hF(this,s6,void 0),hF(this,s8,void 0),hF(this,s7,void 0),hF(this,s9,[]),hN(this,sJ,s),hN(this,s7,o*a),hN(this,s0,l),hD(this,s2).set([NaN,NaN,NaN,NaN,t,n],6),hN(this,sZ,h),hN(this,s6,hD(e,ae)*a),hN(this,s4,hD(e,ai)*a),hN(this,s8,a),hD(this,s9).push(t,n)}get free(){return!0}isEmpty(){return isNaN(hD(this,s2)[8])}add({x:e,y:t}){var n;hN(this,s3,e),hN(this,s5,t);let[s,a,o,l]=hD(this,sJ),[h,c,d,u]=hD(this,s2).subarray(8,12),p=e-d,f=t-u,g=Math.hypot(p,f);if(g<hD(this,s4))return!1;let m=g-hD(this,s6),v=m/g,y=v*p,b=v*f,w=h,A=c;h=d,c=u,d+=y,u+=b,null==(n=hD(this,s9))||n.push(e,t);let x=-b/m*hD(this,s7),_=y/m*hD(this,s7);return hD(this,s2).set(hD(this,s2).subarray(2,8),0),hD(this,s2).set([d+x,u+_],4),hD(this,s2).set(hD(this,s2).subarray(14,18),12),hD(this,s2).set([d-x,u-_],16),isNaN(hD(this,s2)[6])?(0===hD(this,s1).length&&(hD(this,s2).set([h+x,c+_],2),hD(this,s1).push(NaN,NaN,NaN,NaN,(h+x-s)/o,(c+_-a)/l),hD(this,s2).set([h-x,c-_],14),hD(this,sQ).push(NaN,NaN,NaN,NaN,(h-x-s)/o,(c-_-a)/l)),hD(this,s2).set([w,A,h,c,d,u],6),!this.isEmpty()):(hD(this,s2).set([w,A,h,c,d,u],6),Math.abs(Math.atan2(A-c,w-h)-Math.atan2(b,y))<Math.PI/2?([h,c,d,u]=hD(this,s2).subarray(2,6),hD(this,s1).push(NaN,NaN,NaN,NaN,((h+d)/2-s)/o,((c+u)/2-a)/l),[h,c,w,A]=hD(this,s2).subarray(14,18),hD(this,sQ).push(NaN,NaN,NaN,NaN,((w+h)/2-s)/o,((A+c)/2-a)/l)):([w,A,h,c,d,u]=hD(this,s2).subarray(0,6),hD(this,s1).push(((w+5*h)/6-s)/o,((A+5*c)/6-a)/l,((5*h+d)/6-s)/o,((5*c+u)/6-a)/l,((h+d)/2-s)/o,((c+u)/2-a)/l),[d,u,h,c,w,A]=hD(this,s2).subarray(12,18),hD(this,sQ).push(((w+5*h)/6-s)/o,((A+5*c)/6-a)/l,((5*h+d)/6-s)/o,((5*c+u)/6-a)/l,((h+d)/2-s)/o,((c+u)/2-a)/l)),!0)}toSVGPath(){if(this.isEmpty())return"";let e=hD(this,s1),t=hD(this,sQ),n=hD(this,s2).subarray(4,6),s=hD(this,s2).subarray(16,18),[a,o,l,h]=hD(this,sJ),[c,d,u,p]=hW(this,an,ar).call(this);if(isNaN(hD(this,s2)[6])&&!this.isEmpty())return`M${(hD(this,s2)[2]-a)/l} ${(hD(this,s2)[3]-o)/h} L${(hD(this,s2)[4]-a)/l} ${(hD(this,s2)[5]-o)/h} L${c} ${d} L${u} ${p} L${(hD(this,s2)[16]-a)/l} ${(hD(this,s2)[17]-o)/h} L${(hD(this,s2)[14]-a)/l} ${(hD(this,s2)[15]-o)/h} Z`;let f=[];f.push(`M${e[4]} ${e[5]}`);for(let t=6;t<e.length;t+=6)isNaN(e[t])?f.push(`L${e[t+4]} ${e[t+5]}`):f.push(`C${e[t]} ${e[t+1]} ${e[t+2]} ${e[t+3]} ${e[t+4]} ${e[t+5]}`);f.push(`L${(n[0]-a)/l} ${(n[1]-o)/h} L${c} ${d} L${u} ${p} L${(s[0]-a)/l} ${(s[1]-o)/h}`);for(let e=t.length-6;e>=6;e-=6)isNaN(t[e])?f.push(`L${t[e+4]} ${t[e+5]}`):f.push(`C${t[e]} ${t[e+1]} ${t[e+2]} ${t[e+3]} ${t[e+4]} ${t[e+5]}`);return f.push(`L${t[4]} ${t[5]} Z`),f.join(" ")}getOutlines(){var e;let t=hD(this,s1),n=hD(this,sQ),s=hD(this,s2),a=s.subarray(4,6),o=s.subarray(16,18),[l,h,c,d]=hD(this,sJ),u=new Float64Array(((null==(e=hD(this,s9))?void 0:e.length)??0)+2);for(let e=0,t=u.length-2;e<t;e+=2)u[e]=(hD(this,s9)[e]-l)/c,u[e+1]=(hD(this,s9)[e+1]-h)/d;u[u.length-2]=(hD(this,s3)-l)/c,u[u.length-1]=(hD(this,s5)-h)/d;let[p,f,g,m]=hW(this,an,ar).call(this);if(isNaN(s[6])&&!this.isEmpty()){let e=new Float64Array(36);return e.set([NaN,NaN,NaN,NaN,(s[2]-l)/c,(s[3]-h)/d,NaN,NaN,NaN,NaN,(s[4]-l)/c,(s[5]-h)/d,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(s[16]-l)/c,(s[17]-h)/d,NaN,NaN,NaN,NaN,(s[14]-l)/c,(s[15]-h)/d],0),new bi(e,u,hD(this,sJ),hD(this,s8),hD(this,sZ),hD(this,s0))}let v=new Float64Array(hD(this,s1).length+24+hD(this,sQ).length),y=t.length;for(let e=0;e<y;e+=2){if(isNaN(t[e])){v[e]=v[e+1]=NaN;continue}v[e]=t[e],v[e+1]=t[e+1]}v.set([NaN,NaN,NaN,NaN,(a[0]-l)/c,(a[1]-h)/d,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(o[0]-l)/c,(o[1]-h)/d],y),y+=24;for(let e=n.length-6;e>=6;e-=6)for(let t=0;t<6;t+=2){if(isNaN(n[e+t])){v[y]=v[y+1]=NaN,y+=2;continue}v[y]=n[e+t],v[y+1]=n[e+t+1],y+=2}return v.set([NaN,NaN,NaN,NaN,n[4],n[5]],y),new bi(v,u,hD(this,sJ),hD(this,s8),hD(this,sZ),hD(this,s0))}};sJ=new WeakMap,sQ=new WeakMap,sZ=new WeakMap,s0=new WeakMap,s1=new WeakMap,s2=new WeakMap,s3=new WeakMap,s5=new WeakMap,s4=new WeakMap,s6=new WeakMap,s8=new WeakMap,s7=new WeakMap,s9=new WeakMap,ae=new WeakMap,at=new WeakMap,ai=new WeakMap,an=new WeakSet,ar=function(){let e=hD(this,s2).subarray(4,6),t=hD(this,s2).subarray(16,18),[n,s,a,o]=hD(this,sJ);return[(hD(this,s3)+(e[0]-t[0])/2-n)/a,(hD(this,s5)+(e[1]-t[1])/2-s)/o,(hD(this,s3)+(t[0]-e[0])/2-n)/a,(hD(this,s5)+(t[1]-e[1])/2-s)/o]},hF(bt,ae,8),hF(bt,at,2),hF(bt,ai,hD(bt,ae)+hD(bt,at));class bi extends y9{constructor(e,t,n,s,a,o){super(),hF(this,au),hF(this,af),hF(this,am),hF(this,as,void 0),hF(this,aa,null),hF(this,ao,void 0),hF(this,al,void 0),hF(this,ah,void 0),hF(this,ac,void 0),hF(this,ad,void 0),hN(this,ad,e),hN(this,ah,t),hN(this,as,n),hN(this,ac,s),hN(this,ao,a),hN(this,al,o),hW(this,am,av).call(this,o);const{x:l,y:h,width:c,height:d}=hD(this,aa);for(let t=0,n=e.length;t<n;t+=2)e[t]=(e[t]-l)/c,e[t+1]=(e[t+1]-h)/d;for(let e=0,n=t.length;e<n;e+=2)t[e]=(t[e]-l)/c,t[e+1]=(t[e+1]-h)/d}toSVGPath(){let e=[`M${hD(this,ad)[4]} ${hD(this,ad)[5]}`];for(let t=6,n=hD(this,ad).length;t<n;t+=6){if(isNaN(hD(this,ad)[t])){e.push(`L${hD(this,ad)[t+4]} ${hD(this,ad)[t+5]}`);continue}e.push(`C${hD(this,ad)[t]} ${hD(this,ad)[t+1]} ${hD(this,ad)[t+2]} ${hD(this,ad)[t+3]} ${hD(this,ad)[t+4]} ${hD(this,ad)[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,n,s],a){let o,l,h=n-e,c=s-t;switch(a){case 0:o=hW(this,au,ap).call(this,hD(this,ad),e,s,h,-c),l=hW(this,au,ap).call(this,hD(this,ah),e,s,h,-c);break;case 90:o=hW(this,af,ag).call(this,hD(this,ad),e,t,h,c),l=hW(this,af,ag).call(this,hD(this,ah),e,t,h,c);break;case 180:o=hW(this,au,ap).call(this,hD(this,ad),n,t,-h,c),l=hW(this,au,ap).call(this,hD(this,ah),n,t,-h,c);break;case 270:o=hW(this,af,ag).call(this,hD(this,ad),n,s,-h,-c),l=hW(this,af,ag).call(this,hD(this,ah),n,s,-h,-c)}return{outline:Array.from(o),points:[Array.from(l)]}}get box(){return hD(this,aa)}getNewOutline(e,t){let{x:n,y:s,width:a,height:o}=hD(this,aa),[l,h,c,d]=hD(this,as),u=a*c,p=o*d,f=n*c+l,g=s*d+h,m=new bt({x:hD(this,ah)[0]*u+f,y:hD(this,ah)[1]*p+g},hD(this,as),hD(this,ac),e,hD(this,al),t??hD(this,ao));for(let e=2;e<hD(this,ah).length;e+=2)m.add({x:hD(this,ah)[e]*u+f,y:hD(this,ah)[e+1]*p+g});return m.getOutlines()}}as=new WeakMap,aa=new WeakMap,ao=new WeakMap,al=new WeakMap,ah=new WeakMap,ac=new WeakMap,ad=new WeakMap,au=new WeakSet,ap=function(e,t,n,s,a){let o=new Float64Array(e.length);for(let l=0,h=e.length;l<h;l+=2)o[l]=t+e[l]*s,o[l+1]=n+e[l+1]*a;return o},af=new WeakSet,ag=function(e,t,n,s,a){let o=new Float64Array(e.length);for(let l=0,h=e.length;l<h;l+=2)o[l]=t+e[l+1]*s,o[l+1]=n+e[l]*a;return o},am=new WeakSet,av=function(e){let t=hD(this,ad),n=t[4],s=t[5],a=n,o=s,l=n,h=s,c=n,d=s,u=e?Math.max:Math.min;for(let e=6,p=t.length;e<p;e+=6){if(isNaN(t[e]))a=Math.min(a,t[e+4]),o=Math.min(o,t[e+5]),l=Math.max(l,t[e+4]),h=Math.max(h,t[e+5]),d<t[e+5]?(c=t[e+4],d=t[e+5]):d===t[e+5]&&(c=u(c,t[e+4]));else{let p=mo.bezierBoundingBox(n,s,...t.slice(e,e+6));a=Math.min(a,p[0]),o=Math.min(o,p[1]),l=Math.max(l,p[2]),h=Math.max(h,p[3]),d<p[3]?(c=p[2],d=p[3]):d===p[3]&&(c=u(c,p[2]))}n=t[e+4],s=t[e+5]}let p=a-hD(this,ao),f=o-hD(this,ao),g=l-a+2*hD(this,ao),m=h-o+2*hD(this,ao);hN(this,aa,{x:p,y:f,width:g,height:m,lastPoint:[c,d]})};let bn=class e{constructor({editor:e=null,uiManager:t=null}){var n;hF(this,aT),hF(this,aL),hF(this,aD),hF(this,aN),hF(this,aW),hF(this,aB),hF(this,ay,hW(this,aD,aF).bind(this)),hF(this,ab,hW(this,aW,aj).bind(this)),hF(this,aw,null),hF(this,aA,null),hF(this,ax,void 0),hF(this,a_,null),hF(this,aS,!1),hF(this,ak,!1),hF(this,aE,null),hF(this,aC,void 0),hF(this,aM,null),hF(this,aR,void 0),e?(hN(this,ak,!1),hN(this,aR,gU.HIGHLIGHT_COLOR),hN(this,aE,e)):(hN(this,ak,!0),hN(this,aR,gU.HIGHLIGHT_DEFAULT_COLOR)),hN(this,aM,(null==e?void 0:e._uiManager)||t),hN(this,aC,hD(this,aM)._eventBus),hN(this,ax,(null==e?void 0:e.color)||(null==(n=hD(this,aM))?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return g3(this,"_keyboardManager",new mX([[["Escape","mac+Escape"],e.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],e.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],e.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],e.prototype._moveToPrevious],[["Home","mac+Home"],e.prototype._moveToBeginning],[["End","mac+End"],e.prototype._moveToEnd]]))}renderButton(){let e=hN(this,aw,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),e.addEventListener("click",hW(this,aN,aO).bind(this)),e.addEventListener("keydown",hD(this,ay));let t=hN(this,aA,document.createElement("span"));return t.className="swatch",t.setAttribute("aria-hidden",!0),t.style.backgroundColor=hD(this,ax),e.append(t),e}renderMainDropdown(){let e=hN(this,a_,hW(this,aT,aP).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===hD(this,aw))return void hW(this,aN,aO).call(this,e);let t=e.target.getAttribute("data-color");t&&hW(this,aL,aI).call(this,t,e)}_moveToNext(e){var t,n;if(!hD(this,aB,a$))return void hW(this,aN,aO).call(this,e);if(e.target===hD(this,aw)){null==(t=hD(this,a_).firstChild)||t.focus();return}null==(n=e.target.nextSibling)||n.focus()}_moveToPrevious(e){var t,n;if(e.target===(null==(t=hD(this,a_))?void 0:t.firstChild)||e.target===hD(this,aw)){hD(this,aB,a$)&&this._hideDropdownFromKeyboard();return}hD(this,aB,a$)||hW(this,aN,aO).call(this,e),null==(n=e.target.previousSibling)||n.focus()}_moveToBeginning(e){var t;hD(this,aB,a$)?null==(t=hD(this,a_).firstChild)||t.focus():hW(this,aN,aO).call(this,e)}_moveToEnd(e){var t;hD(this,aB,a$)?null==(t=hD(this,a_).lastChild)||t.focus():hW(this,aN,aO).call(this,e)}hideDropdown(){var e;null==(e=hD(this,a_))||e.classList.add("hidden"),window.removeEventListener("pointerdown",hD(this,ab))}_hideDropdownFromKeyboard(){var e;if(!hD(this,ak)){if(!hD(this,aB,a$)){null==(e=hD(this,aE))||e.unselect();return}this.hideDropdown(),hD(this,aw).focus({preventScroll:!0,focusVisible:hD(this,aS)})}}updateColor(e){if(hD(this,aA)&&(hD(this,aA).style.backgroundColor=e),!hD(this,a_))return;let t=hD(this,aM).highlightColors.values();for(let n of hD(this,a_).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;null==(e=hD(this,aw))||e.remove(),hN(this,aw,null),hN(this,aA,null),null==(t=hD(this,a_))||t.remove(),hN(this,a_,null)}};ay=new WeakMap,ab=new WeakMap,aw=new WeakMap,aA=new WeakMap,ax=new WeakMap,a_=new WeakMap,aS=new WeakMap,ak=new WeakMap,aE=new WeakMap,aC=new WeakMap,aM=new WeakMap,aR=new WeakMap,aT=new WeakSet,aP=function(){let e=document.createElement("div");for(let[t,n]of(e.addEventListener("contextmenu",mD),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),hD(this,aM).highlightColors)){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=t,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${t}`);let a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=n,s.setAttribute("aria-selected",n===hD(this,ax)),s.addEventListener("click",hW(this,aL,aI).bind(this,n)),e.append(s)}return e.addEventListener("keydown",hD(this,ay)),e},aL=new WeakSet,aI=function(e,t){t.stopPropagation(),hD(this,aC).dispatch("switchannotationeditorparams",{source:this,type:hD(this,aR),value:e})},aD=new WeakSet,aF=function(e){bn._keyboardManager.exec(this,e)},aN=new WeakSet,aO=function(e){if(hD(this,aB,a$))return void this.hideDropdown();if(hN(this,aS,0===e.detail),window.addEventListener("pointerdown",hD(this,ab)),hD(this,a_))return void hD(this,a_).classList.remove("hidden");let t=hN(this,a_,hW(this,aT,aP).call(this));hD(this,aw).append(t)},aW=new WeakSet,aj=function(e){var t;null!=(t=hD(this,a_))&&t.contains(e.target)||this.hideDropdown()},aB=new WeakSet,a$=function(){return hD(this,a_)&&!hD(this,a_).classList.contains("hidden")};let br=bn,bs=class e extends m0{constructor(t){super({...t,name:"highlightEditor"}),hF(this,a8),hF(this,a9),hF(this,ot),hF(this,on),hF(this,os),hF(this,oo),hF(this,oh),hF(this,op),hF(this,og),hF(this,ov),hF(this,ob),hF(this,oA),hF(this,az,null),hF(this,aH,0),hF(this,aU,void 0),hF(this,aV,null),hF(this,aG,null),hF(this,aq,null),hF(this,aX,null),hF(this,aY,0),hF(this,aK,null),hF(this,aJ,null),hF(this,aQ,null),hF(this,aZ,!1),hF(this,a0,hW(this,op,of).bind(this)),hF(this,a1,null),hF(this,a2,void 0),hF(this,a3,null),hF(this,a5,""),hF(this,a4,void 0),hF(this,a6,""),this.color=t.color||e._defaultColor,hN(this,a4,t.thickness||e._defaultThickness),hN(this,a2,t.opacity||e._defaultOpacity),hN(this,aU,t.boxes||null),hN(this,a6,t.methodOfCreation||""),hN(this,a5,t.text||""),this._isDraggable=!1,t.highlightId>-1?(hN(this,aZ,!0),hW(this,a9,oe).call(this,t),hW(this,oh,oc).call(this)):(hN(this,az,t.anchorNode),hN(this,aH,t.anchorOffset),hN(this,aX,t.focusNode),hN(this,aY,t.focusOffset),hW(this,a8,a7).call(this),hW(this,oh,oc).call(this),this.rotate(this.rotation))}static get _keyboardManager(){let t=e.prototype;return g3(this,"_keyboardManager",new mX([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:hD(this,aZ)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:hD(this,a4),methodOfCreation:hD(this,a6)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(t,n){var s;m0.initialize(t,n),e._defaultColor||(e._defaultColor=(null==(s=n.highlightColors)?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case gU.HIGHLIGHT_DEFAULT_COLOR:e._defaultColor=n;break;case gU.HIGHLIGHT_THICKNESS:e._defaultThickness=n}}translateInPage(e,t){}get toolbarPosition(){return hD(this,a1)}updateParams(e,t){switch(e){case gU.HIGHLIGHT_COLOR:hW(this,ot,oi).call(this,t);break;case gU.HIGHLIGHT_THICKNESS:hW(this,on,or).call(this,t)}}static get defaultPropertiesToUpdate(){return[[gU.HIGHLIGHT_DEFAULT_COLOR,e._defaultColor],[gU.HIGHLIGHT_THICKNESS,e._defaultThickness]]}get propertiesToUpdate(){return[[gU.HIGHLIGHT_COLOR,this.color||e._defaultColor],[gU.HIGHLIGHT_THICKNESS,hD(this,a4)||e._defaultThickness],[gU.HIGHLIGHT_FREE,hD(this,aZ)]]}async addEditToolbar(){let e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(hN(this,aG,new br({editor:this})),e.addColorPicker(hD(this,aG))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(hW(this,ov,oy).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,hW(this,ov,oy).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){hW(this,oo,ol).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(hW(this,oh,oc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var t;let n=!1;this.parent&&!e?hW(this,oo,ol).call(this):e&&(hW(this,oh,oc).call(this,e),n=!this.parent&&(null==(t=this.div)?void 0:t.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(t){let n,{drawLayer:s}=this.parent;hD(this,aZ)?(t=(t-this.rotation+360)%360,n=hW(e,od,ou).call(e,hD(this,aJ).box,t)):n=hW(e,od,ou).call(e,this,t),s.rotate(hD(this,aQ),t),s.rotate(hD(this,a3),t),s.updateBox(hD(this,aQ),n),s.updateBox(hD(this,a3),hW(e,od,ou).call(e,hD(this,aq).box,t))}render(){if(this.div)return this.div;let e=super.render();hD(this,a5)&&(e.setAttribute("aria-label",hD(this,a5)),e.setAttribute("role","mark")),hD(this,aZ)?e.classList.add("free"):this.div.addEventListener("keydown",hD(this,a0));let t=hN(this,aK,document.createElement("div"));e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=hD(this,aV);let[n,s]=this.parentDimensions;return this.setDims(this.width*n,this.height*s),mU(this,hD(this,aK),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.parent.drawLayer.addClass(hD(this,a3),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(hD(this,a3),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:hW(this,og,om).call(this,!0);break;case 1:case 3:hW(this,og,om).call(this,!1)}}select(){var e,t;super.select(),hD(this,a3)&&(null==(e=this.parent)||e.drawLayer.removeClass(hD(this,a3),"hovered"),null==(t=this.parent)||t.drawLayer.addClass(hD(this,a3),"selected"))}unselect(){var e;super.unselect(),hD(this,a3)&&(null==(e=this.parent)||e.drawLayer.removeClass(hD(this,a3),"selected"),hD(this,aZ)||hW(this,og,om).call(this,!1))}get _mustFixPosition(){return!hD(this,aZ)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(hD(this,aQ),e),this.parent.drawLayer.show(hD(this,a3),e))}static startHighlighting(e,t,{target:n,x:s,y:a}){let{x:o,y:l,width:h,height:c}=n.getBoundingClientRect(),d=t=>{hW(this,o_,oS).call(this,e,t)},u={capture:!0,passive:!1},p=e=>{e.preventDefault(),e.stopPropagation()},f=t=>{n.removeEventListener("pointermove",d),window.removeEventListener("blur",f),window.removeEventListener("pointerup",f),window.removeEventListener("pointerdown",p,u),window.removeEventListener("contextmenu",mD),hW(this,ok,oE).call(this,e,t)};window.addEventListener("blur",f),window.addEventListener("pointerup",f),window.addEventListener("pointerdown",p,u),window.addEventListener("contextmenu",mD),n.addEventListener("pointermove",d),this._freeHighlight=new bt({x:s,y:a},[o,l,h,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(e,t,n){let s=super.deserialize(e,t,n),{rect:[a,o,l,h],color:c,quadPoints:d}=e;s.color=mo.makeHexColor(...c),hN(s,a2,e.opacity);let[u,p]=s.pageDimensions;s.width=(l-a)/u,s.height=(h-o)/p;let f=hN(s,aU,[]);for(let e=0;e<d.length;e+=8)f.push({x:(d[4]-l)/u,y:(h-(1-d[e+5]))/p,width:(d[e+2]-d[e])/u,height:(d[e+5]-d[e+1])/p});return hW(s,a8,a7).call(s),s}serialize(e=!1){if(this.isEmpty()||e)return null;let t=this.getRect(0,0),n=m0._colorManager.convert(this.color);return{annotationType:gH.HIGHLIGHT,color:n,opacity:hD(this,a2),thickness:hD(this,a4),quadPoints:hW(this,ob,ow).call(this),outlines:hW(this,oA,ox).call(this,t),pageIndex:this.pageIndex,rect:t,rotation:hW(this,ov,oy).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};az=new WeakMap,aH=new WeakMap,aU=new WeakMap,aV=new WeakMap,aG=new WeakMap,aq=new WeakMap,aX=new WeakMap,aY=new WeakMap,aK=new WeakMap,aJ=new WeakMap,aQ=new WeakMap,aZ=new WeakMap,a0=new WeakMap,a1=new WeakMap,a2=new WeakMap,a3=new WeakMap,a5=new WeakMap,a4=new WeakMap,a6=new WeakMap,a8=new WeakSet,a7=function(){let e=new y7(hD(this,aU),.001);hN(this,aJ,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=hD(this,aJ).box;let t=new y7(hD(this,aU),.0025,.001,"ltr"===this._uiManager.direction);hN(this,aq,t.getOutlines());let{lastPoint:n}=hD(this,aq).box;hN(this,a1,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},a9=new WeakSet,oe=function({highlightOutlines:e,highlightId:t,clipPathId:n}){if(hN(this,aJ,e),hN(this,aq,e.getNewOutline(hD(this,a4)/2+1.5,.0025)),t>=0)hN(this,aQ,t),hN(this,aV,n),this.parent.drawLayer.finalizeLine(t,e),hN(this,a3,this.parent.drawLayer.highlightOutline(hD(this,aq)));else if(this.parent){let t=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(hD(this,aQ),e),this.parent.drawLayer.updateBox(hD(this,aQ),hW(bs,od,ou).call(bs,hD(this,aJ).box,(t-this.rotation+360)%360)),this.parent.drawLayer.updateLine(hD(this,a3),hD(this,aq)),this.parent.drawLayer.updateBox(hD(this,a3),hW(bs,od,ou).call(bs,hD(this,aq).box,t))}let{x:s,y:a,width:o,height:l}=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=l;break;case 90:{let[e,t]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*t/e,this.height=l*e/t;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=l;break;case 270:{let[e,t]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*t/e,this.height=l*e/t}}let{lastPoint:h}=hD(this,aq).box;hN(this,a1,[(h[0]-s)/o,(h[1]-a)/l])},ot=new WeakSet,oi=function(e){let t=e=>{var t,n;this.color=e,null==(t=this.parent)||t.drawLayer.changeColor(hD(this,aQ),e),null==(n=hD(this,aG))||n.updateColor(e)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gU.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},on=new WeakSet,or=function(e){let t=hD(this,a4),n=e=>{hN(this,a4,e),hW(this,os,oa).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gU.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},os=new WeakSet,oa=function(e){if(!hD(this,aZ))return;hW(this,a9,oe).call(this,{highlightOutlines:hD(this,aJ).getNewOutline(e/2)}),this.fixAndSetPosition();let[t,n]=this.parentDimensions;this.setDims(this.width*t,this.height*n)},oo=new WeakSet,ol=function(){null!==hD(this,aQ)&&this.parent&&(this.parent.drawLayer.remove(hD(this,aQ)),hN(this,aQ,null),this.parent.drawLayer.remove(hD(this,a3)),hN(this,a3,null))},oh=new WeakSet,oc=function(e=this.parent){null===hD(this,aQ)&&({id:hO(this,aQ)._,clipPathId:hO(this,aV)._}=e.drawLayer.highlight(hD(this,aJ),this.color,hD(this,a2)),hN(this,a3,e.drawLayer.highlightOutline(hD(this,aq))),hD(this,aK)&&(hD(this,aK).style.clipPath=hD(this,aV)))},od=new WeakSet,ou=function({x:e,y:t,width:n,height:s},a){switch(a){case 90:return{x:1-t-s,y:e,width:s,height:n};case 180:return{x:1-e-n,y:1-t-s,width:n,height:s};case 270:return{x:t,y:1-e-n,width:s,height:n}}return{x:e,y:t,width:n,height:s}},op=new WeakSet,of=function(e){bs._keyboardManager.exec(this,e)},og=new WeakSet,om=function(e){if(!hD(this,az))return;let t=window.getSelection();e?t.setPosition(hD(this,az),hD(this,aH)):t.setPosition(hD(this,aX),hD(this,aY))},ov=new WeakSet,oy=function(){return hD(this,aZ)?this.rotation:0},ob=new WeakSet,ow=function(){if(hD(this,aZ))return null;let[e,t]=this.pageDimensions,n=hD(this,aU),s=Array(8*n.length),a=0;for(let{x:o,y:l,width:h,height:c}of n){let n=o*e,d=(1-l-c)*t;s[a]=s[a+4]=n,s[a+1]=s[a+3]=d,s[a+2]=s[a+6]=n+h*e,s[a+5]=s[a+7]=d+c*t,a+=8}return s},oA=new WeakSet,ox=function(e){return hD(this,aJ).serialize(e,hW(this,ov,oy).call(this))},o_=new WeakSet,oS=function(e,t){this._freeHighlight.add(t)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},ok=new WeakSet,oE=function(e,t){this._freeHighlight.isEmpty()?e.drawLayer.removeFreeHighlight(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hF(bs,od),hF(bs,o_),hF(bs,ok),hL(bs,"_defaultColor",null),hL(bs,"_defaultOpacity",1),hL(bs,"_defaultThickness",12),hL(bs,"_l10nPromise"),hL(bs,"_type","highlight"),hL(bs,"_editorType",gH.HIGHLIGHT),hL(bs,"_freeHighlightId",-1),hL(bs,"_freeHighlight",null),hL(bs,"_freeHighlightClipId","");let ba=class e extends m0{constructor(e){super({...e,name:"inkEditor"}),hF(this,oz),hF(this,oU),hF(this,oG),hF(this,oX),hF(this,oK),hF(this,oQ),hF(this,o0),hF(this,o2),hF(this,o5),hF(this,o6),hF(this,o7),hF(this,le),hF(this,li),hF(this,lr),hF(this,la),hF(this,ll),hF(this,lc),hF(this,lu),hF(this,lf),hF(this,lx),hF(this,lS),hF(this,lE),hF(this,lM),hF(this,oC,0),hF(this,oM,0),hF(this,oR,this.canvasPointermove.bind(this)),hF(this,oT,this.canvasPointerleave.bind(this)),hF(this,oP,this.canvasPointerup.bind(this)),hF(this,oL,this.canvasPointerdown.bind(this)),hF(this,oI,null),hF(this,oD,new Path2D),hF(this,oF,!1),hF(this,oN,!1),hF(this,oO,!1),hF(this,oW,null),hF(this,oj,0),hF(this,oB,0),hF(this,o$,null),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,t){m0.initialize(e,t)}static updateDefaultParams(t,n){switch(t){case gU.INK_THICKNESS:e._defaultThickness=n;break;case gU.INK_COLOR:e._defaultColor=n;break;case gU.INK_OPACITY:e._defaultOpacity=n/100}}updateParams(e,t){switch(e){case gU.INK_THICKNESS:hW(this,oz,oH).call(this,t);break;case gU.INK_COLOR:hW(this,oU,oV).call(this,t);break;case gU.INK_OPACITY:hW(this,oG,oq).call(this,t)}}static get defaultPropertiesToUpdate(){return[[gU.INK_THICKNESS,e._defaultThickness],[gU.INK_COLOR,e._defaultColor||m0._defaultLineColor],[gU.INK_OPACITY,Math.round(100*e._defaultOpacity)]]}get propertiesToUpdate(){return[[gU.INK_THICKNESS,this.thickness||e._defaultThickness],[gU.INK_COLOR,this.color||e._defaultColor||m0._defaultLineColor],[gU.INK_OPACITY,Math.round(100*(this.opacity??e._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(hW(this,la,lo).call(this),hW(this,ll,lh).call(this)),this.isAttachedToDOM||(this.parent.add(this),hW(this,lc,ld).call(this)),hW(this,lM,lR).call(this)))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,hD(this,oI)&&(clearTimeout(hD(this,oI)),hN(this,oI,null)),hD(this,oW).disconnect(),hN(this,oW,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){let[e,t]=this.parentDimensions,n=this.width*e,s=this.height*t;this.setDimensions(n,s)}enableEditMode(){hD(this,oF)||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",hD(this,oL)))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",hD(this,oL)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){hD(this,oF)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),hN(this,oF,!0),this.div.classList.add("disabled"),hW(this,lM,lR).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0!==e.button||!this.isInEditMode()||hD(this,oF)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),hW(this,oQ,oZ).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),hW(this,o0,o1).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),hW(this,lr,ls).call(this,e)}canvasPointerleave(e){hW(this,lr,ls).call(this,e)}get isResizable(){return!this.isEmpty()&&hD(this,oF)}render(){let e,t;if(this.div)return this.div;this.width&&(e=this.x,t=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");let[n,s,a,o]=hW(this,oX,oY).call(this);if(this.setAt(n,s,0,0),this.setDims(a,o),hW(this,la,lo).call(this),this.width){let[n,s]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*s),this.setAt(e*n,t*s,this.width*n,this.height*s),hN(this,oO,!0),hW(this,lc,ld).call(this),this.setDims(this.width*n,this.height*s),hW(this,li,ln).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return hW(this,ll,lh).call(this),this.div}setDimensions(e,t){let n=Math.round(e),s=Math.round(t);if(hD(this,oj)===n&&hD(this,oB)===s)return;hN(this,oj,n),hN(this,oB,s),this.canvas.style.visibility="hidden";let[a,o]=this.parentDimensions;this.width=e/a,this.height=t/o,this.fixAndSetPosition(),hD(this,oF)&&hW(this,lu,lp).call(this,e,t),hW(this,lc,ld).call(this),hW(this,li,ln).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,n,s){if(t instanceof yQ)return null;let a=super.deserialize(t,n,s);a.thickness=t.thickness,a.color=mo.makeHexColor(...t.color),a.opacity=t.opacity;let[o,l]=a.pageDimensions,h=a.width*o,c=a.height*l,d=a.parentScale,u=t.thickness/2;hN(a,oF,!0),hN(a,oj,Math.round(h)),hN(a,oB,Math.round(c));let{paths:p,rect:f,rotation:g}=t;for(let{bezier:t}of p){t=hW(e,lw,lA).call(e,t,f,g);let n=[];a.paths.push(n);let s=d*(t[0]-u),o=d*(t[1]-u);for(let e=2,a=t.length;e<a;e+=6){let a=d*(t[e]-u),l=d*(t[e+1]-u),h=d*(t[e+2]-u),c=d*(t[e+3]-u),p=d*(t[e+4]-u),f=d*(t[e+5]-u);n.push([[s,o],[a,l],[h,c],[p,f]]),s=p,o=f}let l=hW(this,lm,lv).call(this,n);a.bezierPath2D.push(l)}let m=hW(a,lS,lk).call(a);return hN(a,oM,Math.max(m0.MIN_SIZE,m[2]-m[0])),hN(a,oC,Math.max(m0.MIN_SIZE,m[3]-m[1])),hW(a,lu,lp).call(a,h,c),a}serialize(){if(this.isEmpty())return null;let e=this.getRect(0,0),t=m0._colorManager.convert(this.ctx.strokeStyle);return{annotationType:gH.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:hW(this,lx,l_).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};oC=new WeakMap,oM=new WeakMap,oR=new WeakMap,oT=new WeakMap,oP=new WeakMap,oL=new WeakMap,oI=new WeakMap,oD=new WeakMap,oF=new WeakMap,oN=new WeakMap,oO=new WeakMap,oW=new WeakMap,oj=new WeakMap,oB=new WeakMap,o$=new WeakMap,oz=new WeakSet,oH=function(e){let t=e=>{this.thickness=e,hW(this,lM,lR).call(this)},n=this.thickness;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gU.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},oU=new WeakSet,oV=function(e){let t=e=>{this.color=e,hW(this,li,ln).call(this)},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gU.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},oG=new WeakSet,oq=function(e){let t=e=>{this.opacity=e,hW(this,li,ln).call(this)};e/=100;let n=this.opacity;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:gU.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},oX=new WeakSet,oY=function(){let{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}},oK=new WeakSet,oJ=function(){let{ctx:e,color:t,opacity:n,thickness:s,parentScale:a,scaleFactor:o}=this;e.lineWidth=s*a/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}`},oQ=new WeakSet,oZ=function(e,t){this.canvas.addEventListener("contextmenu",mD),this.canvas.addEventListener("pointerleave",hD(this,oT)),this.canvas.addEventListener("pointermove",hD(this,oR)),this.canvas.addEventListener("pointerup",hD(this,oP)),this.canvas.removeEventListener("pointerdown",hD(this,oL)),this.isEditing=!0,hD(this,oO)||(hN(this,oO,!0),hW(this,lc,ld).call(this),this.thickness||(this.thickness=ba._defaultThickness),this.color||(this.color=ba._defaultColor||m0._defaultLineColor),this.opacity??(this.opacity=ba._defaultOpacity)),this.currentPath.push([e,t]),hN(this,oN,!1),hW(this,oK,oJ).call(this),hN(this,o$,()=>{hW(this,o6,o8).call(this),hD(this,o$)&&window.requestAnimationFrame(hD(this,o$))}),window.requestAnimationFrame(hD(this,o$))},o0=new WeakSet,o1=function(e,t){let[n,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===s)return;let a=this.currentPath,o=hD(this,oD);if(a.push([e,t]),hN(this,oN,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(e,t);return}3===a.length&&(hN(this,oD,o=new Path2D),o.moveTo(...a[0])),hW(this,o7,o9).call(this,o,...a.at(-3),...a.at(-2),e,t)},o2=new WeakSet,o3=function(){if(0===this.currentPath.length)return;let e=this.currentPath.at(-1);hD(this,oD).lineTo(...e)},o5=new WeakSet,o4=function(e,t){let n;if(hN(this,o$,null),e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),hW(this,o0,o1).call(this,e,t),hW(this,o2,o3).call(this),1!==this.currentPath.length)n=hW(this,le,lt).call(this);else{let s=[e,t];n=[[s,s.slice(),s.slice(),s]]}let s=hD(this,oD),a=this.currentPath;this.currentPath=[],hN(this,oD,new Path2D);let o=()=>{this.allRawPaths.push(a),this.paths.push(n),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(hW(this,la,lo).call(this),hW(this,ll,lh).call(this)),hW(this,lM,lR).call(this))};this.addCommands({cmd:o,undo:l,mustExec:!0})},o6=new WeakSet,o8=function(){if(!hD(this,oN))return;hN(this,oN,!1),this.thickness,this.parentScale;let e=this.currentPath.slice(-3);e.map(e=>e[0]),e.map(e=>e[1]);let{ctx:t}=this;for(let e of(t.save(),t.clearRect(0,0,this.canvas.width,this.canvas.height),this.bezierPath2D))t.stroke(e);t.stroke(hD(this,oD)),t.restore()},o7=new WeakSet,o9=function(e,t,n,s,a,o,l){let h=(t+s)/2,c=(n+a)/2,d=(s+o)/2,u=(a+l)/2;e.bezierCurveTo(h+2*(s-h)/3,c+2*(a-c)/3,d+2*(s-d)/3,u+2*(a-u)/3,d,u)},le=new WeakSet,lt=function(){let e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];let t=[],n,[s,a]=e[0];for(n=1;n<e.length-2;n++){let[o,l]=e[n],[h,c]=e[n+1],d=(o+h)/2,u=(l+c)/2,p=[s+2*(o-s)/3,a+2*(l-a)/3],f=[d+2*(o-d)/3,u+2*(l-u)/3];t.push([[s,a],p,f,[d,u]]),[s,a]=[d,u]}let[o,l]=e[n],[h,c]=e[n+1],d=[s+2*(o-s)/3,a+2*(l-a)/3];return t.push([[s,a],d,[h+2*(o-h)/3,c+2*(l-c)/3],[h,c]]),t},li=new WeakSet,ln=function(){if(this.isEmpty())return void hW(this,lf,lg).call(this);hW(this,oK,oJ).call(this);let{canvas:e,ctx:t}=this;for(let n of(t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),hW(this,lf,lg).call(this),this.bezierPath2D))t.stroke(n)},lr=new WeakSet,ls=function(e){this.canvas.removeEventListener("pointerleave",hD(this,oT)),this.canvas.removeEventListener("pointermove",hD(this,oR)),this.canvas.removeEventListener("pointerup",hD(this,oP)),this.canvas.addEventListener("pointerdown",hD(this,oL)),hD(this,oI)&&clearTimeout(hD(this,oI)),hN(this,oI,setTimeout(()=>{hN(this,oI,null),this.canvas.removeEventListener("contextmenu",mD)},10)),hW(this,o5,o4).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},la=new WeakSet,lo=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},ll=new WeakSet,lh=function(){hN(this,oW,new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)})),hD(this,oW).observe(this.div)},lc=new WeakSet,ld=function(){if(!hD(this,oO))return;let[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),hW(this,lf,lg).call(this)},lu=new WeakSet,lp=function(e,t){let n=hW(this,lE,lC).call(this),s=(e-n)/hD(this,oM),a=(t-n)/hD(this,oC);this.scaleFactor=Math.min(s,a)},lf=new WeakSet,lg=function(){let e=hW(this,lE,lC).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},lm=new WeakSet,lv=function(e){let t=new Path2D;for(let n=0,s=e.length;n<s;n++){let[s,a,o,l]=e[n];0===n&&t.moveTo(...s),t.bezierCurveTo(a[0],a[1],o[0],o[1],l[0],l[1])}return t},ly=new WeakSet,lb=function(e,t,n){let[s,a,o,l]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=s,e[t+1]=l-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){let n=e[t];e[t]=e[t+1]+s,e[t+1]=n+a}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=o-e[t],e[t+1]+=a;break;case 270:for(let t=0,n=e.length;t<n;t+=2){let n=e[t];e[t]=o-e[t+1],e[t+1]=l-n}break;default:throw Error("Invalid rotation")}return e},lw=new WeakSet,lA=function(e,t,n){let[s,a,o,l]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=s,e[t+1]=l-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){let n=e[t];e[t]=e[t+1]-a,e[t+1]=n-s}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=o-e[t],e[t+1]-=a;break;case 270:for(let t=0,n=e.length;t<n;t+=2){let n=e[t];e[t]=l-e[t+1],e[t+1]=o-n}break;default:throw Error("Invalid rotation")}return e},lx=new WeakSet,l_=function(e,t,n,s){let a=[],o=this.thickness/2,l=e*t+o,h=e*n+o;for(let t of this.paths){let n=[],o=[];for(let s=0,a=t.length;s<a;s++){let[c,d,u,p]=t[s];if(c[0]===p[0]&&c[1]===p[1]&&1===a){let t=e*c[0]+l,s=e*c[1]+h;n.push(t,s),o.push(t,s);break}let f=e*c[0]+l,g=e*c[1]+h,m=e*d[0]+l,v=e*d[1]+h,y=e*u[0]+l,b=e*u[1]+h,w=e*p[0]+l,A=e*p[1]+h;0===s&&(n.push(f,g),o.push(f,g)),n.push(m,v,y,b,w,A),o.push(m,v),s===a-1&&o.push(w,A)}a.push({bezier:hW(ba,ly,lb).call(ba,n,s,this.rotation),points:hW(ba,ly,lb).call(ba,o,s,this.rotation)})}return a},lS=new WeakSet,lk=function(){let e=1/0,t=-1/0,n=1/0,s=-1/0;for(let a of this.paths)for(let[o,l,h,c]of a){let a=mo.bezierBoundingBox(...o,...l,...h,...c);e=Math.min(e,a[0]),n=Math.min(n,a[1]),t=Math.max(t,a[2]),s=Math.max(s,a[3])}return[e,n,t,s]},lE=new WeakSet,lC=function(){return hD(this,oF)?Math.ceil(this.thickness*this.parentScale):0},lM=new WeakSet,lR=function(e=!1){if(this.isEmpty())return;if(!hD(this,oF))return void hW(this,li,ln).call(this);let t=hW(this,lS,lk).call(this),n=hW(this,lE,lC).call(this);hN(this,oM,Math.max(m0.MIN_SIZE,t[2]-t[0])),hN(this,oC,Math.max(m0.MIN_SIZE,t[3]-t[1]));let s=Math.ceil(n+hD(this,oM)*this.scaleFactor),a=Math.ceil(n+hD(this,oC)*this.scaleFactor),[o,l]=this.parentDimensions;this.width=s/o,this.height=a/l,this.setAspectRatio(s,a);let h=this.translationX,c=this.translationY;this.translationX=-t[0],this.translationY=-t[1],hW(this,lc,ld).call(this),hW(this,li,ln).call(this),hN(this,oj,s),hN(this,oB,a),this.setDims(s,a);let d=e?n/this.scaleFactor/2:0;this.translate(h-this.translationX-d,c-this.translationY-d)},hF(ba,lm),hF(ba,ly),hF(ba,lw),hL(ba,"_defaultColor",null),hL(ba,"_defaultOpacity",1),hL(ba,"_defaultThickness",1),hL(ba,"_type","ink"),hL(ba,"_editorType",gH.INK);let bo=class extends m0{constructor(e){super({...e,name:"stampEditor"}),hF(this,l$),hF(this,lH),hF(this,lV),hF(this,lq),hF(this,lY),hF(this,lJ),hF(this,lZ),hF(this,l1),hF(this,l3),hF(this,lT,null),hF(this,lP,null),hF(this,lL,null),hF(this,lI,null),hF(this,lD,null),hF(this,lF,""),hF(this,lN,null),hF(this,lO,null),hF(this,lW,null),hF(this,lj,!1),hF(this,lB,!1),hN(this,lI,e.bitmapUrl),hN(this,lD,e.bitmapFile)}static initialize(e,t){m0.initialize(e,t)}static get supportedTypes(){return g3(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return g3(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(gH.STAMP,{bitmapFile:e.getAsFile()})}remove(){var e,t;hD(this,lP)&&(hN(this,lT,null),this._uiManager.imageManager.deleteId(hD(this,lP)),null==(e=hD(this,lN))||e.remove(),hN(this,lN,null),null==(t=hD(this,lO))||t.disconnect(),hN(this,lO,null),hD(this,lW)&&(clearTimeout(hD(this,lW)),hN(this,lW,null))),super.remove()}rebuild(){if(!this.parent){hD(this,lP)&&hW(this,lV,lG).call(this);return}super.rebuild(),null!==this.div&&(hD(this,lP)&&null===hD(this,lN)&&hW(this,lV,lG).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(hD(this,lL)||hD(this,lT)||hD(this,lI)||hD(this,lD)||hD(this,lP))}get isResizable(){return!0}render(){let e,t;if(this.div)return this.div;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),hD(this,lT)?hW(this,lq,lX).call(this):hW(this,lV,lG).call(this),this.width){let[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s)}return this.div}getImageForAltText(){return hD(this,lN)}static deserialize(e,t,n){if(e instanceof y3)return null;let s=super.deserialize(e,t,n),{rect:a,bitmapUrl:o,bitmapId:l,isSvg:h,accessibilityData:c}=e;l&&n.imageManager.isValidId(l)?hN(s,lP,l):hN(s,lI,o),hN(s,lj,h);let[d,u]=s.pageDimensions;return s.width=(a[2]-a[0])/d,s.height=(a[3]-a[1])/u,c&&(s.altTextData=c),s}serialize(e=!1,t=null){if(this.isEmpty())return null;let n={annotationType:gH.STAMP,bitmapId:hD(this,lP),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:hD(this,lj),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=hW(this,l1,l2).call(this,!0),n.accessibilityData=this.altTextData,n;let{decorative:s,altText:a}=this.altTextData;if(!s&&a&&(n.accessibilityData={type:"Figure",alt:a}),null===t)return n;t.stamps||(t.stamps=new Map);let o=hD(this,lj)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(hD(this,lP))){if(hD(this,lj)){let e=t.stamps.get(hD(this,lP));o>e.area&&(e.area=o,e.serialized.bitmap.close(),e.serialized.bitmap=hW(this,l1,l2).call(this,!1))}}else t.stamps.set(hD(this,lP),{area:o,serialized:n}),n.bitmap=hW(this,l1,l2).call(this,!1);return n}};lT=new WeakMap,lP=new WeakMap,lL=new WeakMap,lI=new WeakMap,lD=new WeakMap,lF=new WeakMap,lN=new WeakMap,lO=new WeakMap,lW=new WeakMap,lj=new WeakMap,lB=new WeakMap,l$=new WeakSet,lz=function(e,t=!1){e?(hN(this,lT,e.bitmap),t||(hN(this,lP,e.id),hN(this,lj,e.isSvg)),e.file&&hN(this,lF,e.file.name),hW(this,lq,lX).call(this)):this.remove()},lH=new WeakSet,lU=function(){hN(this,lL,null),this._uiManager.enableWaiting(!1),hD(this,lN)&&this.div.focus()},lV=new WeakSet,lG=function(){if(hD(this,lP)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(hD(this,lP)).then(e=>hW(this,l$,lz).call(this,e,!0)).finally(()=>hW(this,lH,lU).call(this));return}if(hD(this,lI)){let e=hD(this,lI);hN(this,lI,null),this._uiManager.enableWaiting(!0),hN(this,lL,this._uiManager.imageManager.getFromUrl(e).then(e=>hW(this,l$,lz).call(this,e)).finally(()=>hW(this,lH,lU).call(this)));return}if(hD(this,lD)){let e=hD(this,lD);hN(this,lD,null),this._uiManager.enableWaiting(!0),hN(this,lL,this._uiManager.imageManager.getFromFile(e).then(e=>hW(this,l$,lz).call(this,e)).finally(()=>hW(this,lH,lU).call(this)));return}let e=document.createElement("input");e.type="file",e.accept=bo.supportedTypesStr,hN(this,lL,new Promise(t=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);let t=await this._uiManager.imageManager.getFromFile(e.files[0]);hW(this,l$,lz).call(this,t)}else this.remove();t()}),e.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>hW(this,lH,lU).call(this))),e.click()},lq=new WeakSet,lX=function(){let{div:e}=this,{width:t,height:n}=hD(this,lT),[s,a]=this.pageDimensions;if(this.width)t=this.width*s,n=this.height*a;else if(t>.75*s||n>.75*a){let e=Math.min(.75*s/t,.75*a/n);t*=e,n*=e}let[o,l]=this.parentDimensions;this.setDims(t*o/s,n*l/a),this._uiManager.enableWaiting(!1);let h=hN(this,lN,document.createElement("canvas"));e.append(h),e.hidden=!1,hW(this,lZ,l0).call(this,t,n),hW(this,l3,l5).call(this),hD(this,lB)||(this.parent.addUndoableEditor(this),hN(this,lB,!0)),this._reportTelemetry({action:"inserted_image"}),hD(this,lF)&&h.setAttribute("aria-label",hD(this,lF))},lY=new WeakSet,lK=function(e,t){var n;let[s,a]=this.parentDimensions;this.width=e/s,this.height=t/a,this.setDims(e,t),null!=(n=this._initialOptions)&&n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==hD(this,lW)&&clearTimeout(hD(this,lW)),hN(this,lW,setTimeout(()=>{hN(this,lW,null),hW(this,lZ,l0).call(this,e,t)},200))},lJ=new WeakSet,lQ=function(e,t){let{width:n,height:s}=hD(this,lT),a=n,o=s,l=hD(this,lT);for(;a>2*e||o>2*t;){let n=a,s=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));let h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,n,s,0,0,a,o),l=h.transferToImageBitmap()}return l},lZ=new WeakSet,l0=function(e,t){e=Math.ceil(e),t=Math.ceil(t);let n=hD(this,lN);if(!n||n.width===e&&n.height===t)return;n.width=e,n.height=t;let s=hD(this,lj)?hD(this,lT):hW(this,lJ,lQ).call(this,e,t);if(this._uiManager.hasMLManager&&!this.hasAltText()){let n=new OffscreenCanvas(e,t).getContext("2d");n.drawImage(s,0,0,s.width,s.height,0,0,e,t),this._uiManager.mlGuess({service:"image-to-text",request:{data:n.getImageData(0,0,e,t).data,width:e,height:t,channels:4}}).then(e=>{let t=(null==e?void 0:e.output)||"";this.parent&&t&&!this.hasAltText()&&(this.altTextData={altText:t,decorative:!1})})}let a=n.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(s,0,0,s.width,s.height,0,0,e,t)},l1=new WeakSet,l2=function(e){if(e){if(hD(this,lj)){let e=this._uiManager.imageManager.getSvgUrl(hD(this,lP));if(e)return e}let e=document.createElement("canvas");return{width:e.width,height:e.height}=hD(this,lT),e.getContext("2d").drawImage(hD(this,lT),0,0),e.toDataURL()}if(hD(this,lj)){let[e,t]=this.pageDimensions,n=Math.round(this.width*e*mb.PDF_TO_CSS_UNITS),s=Math.round(this.height*t*mb.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(n,s);return a.getContext("2d").drawImage(hD(this,lT),0,0,hD(this,lT).width,hD(this,lT).height,0,0,n,s),a.transferToImageBitmap()}return structuredClone(hD(this,lT))},l3=new WeakSet,l5=function(){hN(this,lO,new ResizeObserver(e=>{let t=e[0].contentRect;t.width&&t.height&&hW(this,lY,lK).call(this,t.width,t.height)})),hD(this,lO).observe(this.div)},hL(bo,"_type","stamp"),hL(bo,"_editorType",gH.STAMP);let bl=class e{constructor({uiManager:t,pageIndex:n,div:s,accessibilityManager:a,annotationLayer:o,drawLayer:l,textLayer:h,viewport:c,l10n:d}){hF(this,hh),hF(this,hd),hF(this,hp),hF(this,hg),hF(this,hv),hF(this,l4,void 0),hF(this,l6,!1),hF(this,l8,null),hF(this,l7,null),hF(this,l9,null),hF(this,he,null),hF(this,ht,null),hF(this,hi,new Map),hF(this,hn,!1),hF(this,hr,!1),hF(this,hs,!1),hF(this,ha,null),hF(this,ho,void 0);const u=[...hD(e,hl).values()];if(!e._initialized)for(const n of(e._initialized=!0,u))n.initialize(d,t);t.registerEditorTypes(u),hN(this,ho,t),this.pageIndex=n,this.div=s,hN(this,l4,a),hN(this,l8,o),this.viewport=c,hN(this,ha,h),this.drawLayer=l,hD(this,ho).addLayer(this)}get isEmpty(){return 0===hD(this,hi).size}get isInvisible(){return this.isEmpty&&hD(this,ho).getMode()===gH.NONE}updateToolbar(e){hD(this,ho).updateToolbar(e)}updateMode(t=hD(this,ho).getMode()){switch(hW(this,hv,hy).call(this),t){case gH.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case gH.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case gH.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:n}=this.div;for(let s of hD(e,hl).values())n.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===(null==(t=hD(this,ha))?void 0:t.div)}addInkEditorIfNeeded(e){if(hD(this,ho).getMode()===gH.INK){if(!e){for(let e of hD(this,hi).values())if(e.isEmpty())return void e.setInBackground()}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){hD(this,ho).setEditingState(e)}addCommands(e){hD(this,ho).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;null==(t=hD(this,l8))||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);let e=new Set;for(let t of hD(this,hi).values())t.enableEditing(),t.show(!0),t.annotationElementId&&(hD(this,ho).removeChangedExistingAnnotation(t),e.add(t.annotationElementId));if(hD(this,l8))for(let t of hD(this,l8).getEditableAnnotations()){if(t.hide(),hD(this,ho).isDeletedAnnotationElement(t.data.id)||e.has(t.data.id))continue;let n=this.deserialize(t);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){var t;hN(this,hs,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);let n=new Map,s=new Map;for(let e of hD(this,hi).values())if(e.disableEditing(),e.annotationElementId){if(null!==e.serialize()){n.set(e.annotationElementId,e);continue}s.set(e.annotationElementId,e),null==(t=this.getEditableAnnotation(e.annotationElementId))||t.show(),e.remove()}if(hD(this,l8))for(let e of hD(this,l8).getEditableAnnotations()){let{id:t}=e.data;if(hD(this,ho).isDeletedAnnotationElement(t))continue;let a=s.get(t);if(a){a.resetAnnotationElement(e),a.show(!1),e.show();continue}(a=n.get(t))&&(hD(this,ho).addChangedExistingAnnotation(a),a.renderAnnotationElement(e),a.show(!1)),e.show()}hW(this,hv,hy).call(this),this.isEmpty&&(this.div.hidden=!0);let{classList:a}=this.div;for(let t of hD(e,hl).values())a.remove(`${t._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),hN(this,hs,!1)}getEditableAnnotation(e){var t;return(null==(t=hD(this,l8))?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){hD(this,ho).getActive()!==e&&hD(this,ho).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,null!=(e=hD(this,ha))&&e.div&&!hD(this,he)&&(hN(this,he,hW(this,hh,hc).bind(this)),hD(this,ha).div.addEventListener("pointerdown",hD(this,he)),hD(this,ha).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,null!=(e=hD(this,ha))&&e.div&&hD(this,he)&&(hD(this,ha).div.removeEventListener("pointerdown",hD(this,he)),hN(this,he,null),hD(this,ha).div.classList.remove("highlighting"))}enableClick(){hD(this,l9)||(hN(this,l9,this.pointerdown.bind(this)),hN(this,l7,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",hD(this,l9)),this.div.addEventListener("pointerup",hD(this,l7)))}disableClick(){hD(this,l9)&&(this.div.removeEventListener("pointerdown",hD(this,l9)),this.div.removeEventListener("pointerup",hD(this,l7)),hN(this,l9,null),hN(this,l7,null))}attach(e){hD(this,hi).set(e.id,e);let{annotationElementId:t}=e;t&&hD(this,ho).isDeletedAnnotationElement(t)&&hD(this,ho).removeDeletedAnnotationElement(e)}detach(e){var t;hD(this,hi).delete(e.id),null==(t=hD(this,l4))||t.removePointerInTextLayer(e.contentDiv),!hD(this,hs)&&e.annotationElementId&&hD(this,ho).addDeletedAnnotationElement(e)}remove(e){this.detach(e),hD(this,ho).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,hD(this,hr)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(hD(this,ho).addDeletedAnnotationElement(e.annotationElementId),m0.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null==(t=e.parent)||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),hD(this,ho).addEditor(e),this.attach(e),!e.isAttachedToDOM){let t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),hD(this,ho).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;let{activeElement:n}=document;e.div.contains(n)&&!hD(this,ht)&&(e._focusEventsAllowed=!1,hN(this,ht,setTimeout(()=>{hN(this,ht,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),n.focus())},0))),e._structTreeParentId=null==(t=hD(this,l4))?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return hD(this,ho).getId()}canCreateNewEmptyEditor(){var e;return null==(e=hD(this,hd,hu))?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){hD(this,ho).updateToolbar(e),hD(this,ho).updateMode(e);let{offsetX:n,offsetY:s}=hW(this,hg,hm).call(this),a=this.getNextId(),o=hW(this,hp,hf).call(this,{parent:this,id:a,x:n,y:s,uiManager:hD(this,ho),isCentered:!0,...t});o&&this.add(o)}deserialize(t){var n;return(null==(n=hD(e,hl).get(t.annotationType??t.annotationEditorType))?void 0:n.deserialize(t,this,hD(this,ho)))||null}createAndAddNewEditor(e,t,n={}){let s=this.getNextId(),a=hW(this,hp,hf).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:hD(this,ho),isCentered:t,...n});return a&&this.add(a),a}addNewEditor(){this.createAndAddNewEditor(hW(this,hg,hm).call(this),!0)}setSelected(e){hD(this,ho).setSelected(e)}toggleSelected(e){hD(this,ho).toggleSelected(e)}isSelected(e){return hD(this,ho).isSelected(e)}unselect(e){hD(this,ho).unselect(e)}pointerup(e){let{isMac:t}=ms.platform;if(!(0!==e.button||e.ctrlKey&&t)&&e.target===this.div&&hD(this,hn)){if(hN(this,hn,!1),!hD(this,l6))return void hN(this,l6,!0);if(hD(this,ho).getMode()===gH.STAMP)return void hD(this,ho).unselectAll();this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(hD(this,ho).getMode()===gH.HIGHLIGHT&&this.enableTextSelection(),hD(this,hn))return void hN(this,hn,!1);let{isMac:t}=ms.platform;if(0!==e.button||e.ctrlKey&&t||e.target!==this.div)return;hN(this,hn,!0);let n=hD(this,ho).getActive();hN(this,l6,!n||n.isEmpty())}findNewParent(e,t,n){let s=hD(this,ho).findParent(t,n);return null!==s&&s!==this&&(s.changeParent(e),!0)}destroy(){var e,t;for(let n of((null==(e=hD(this,ho).getActive())?void 0:e.parent)===this&&(hD(this,ho).commitOrRemove(),hD(this,ho).setActiveEditor(null)),hD(this,ht)&&(clearTimeout(hD(this,ht)),hN(this,ht,null)),hD(this,hi).values()))null==(t=hD(this,l4))||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,hD(this,hi).clear(),hD(this,ho).removeLayer(this)}render({viewport:e}){for(let t of(this.viewport=e,m$(this.div,e),hD(this,ho).getEditors(this.pageIndex)))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){hD(this,ho).commitOrRemove(),hW(this,hv,hy).call(this);let t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,m$(this.div,{rotation:n}),t!==n)for(let e of hD(this,hi).values())e.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){let{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return hD(this,ho).viewParameters.realScale}};l4=new WeakMap,l6=new WeakMap,l8=new WeakMap,l7=new WeakMap,l9=new WeakMap,he=new WeakMap,ht=new WeakMap,hi=new WeakMap,hn=new WeakMap,hr=new WeakMap,hs=new WeakMap,ha=new WeakMap,ho=new WeakMap,hl=new WeakMap,hh=new WeakSet,hc=function(e){if(hD(this,ho).unselectAll(),e.target===hD(this,ha).div){let{isMac:t}=ms.platform;0!==e.button||e.ctrlKey&&t||(hD(this,ho).showAllEditors("highlight",!0,!0),hD(this,ha).div.classList.add("free"),bs.startHighlighting(this,"ltr"===hD(this,ho).direction,e),hD(this,ha).div.addEventListener("pointerup",()=>{hD(this,ha).div.classList.remove("free")},{once:!0}),e.preventDefault())}},hd=new WeakSet,hu=function(){return hD(bl,hl).get(hD(this,ho).getMode())},hp=new WeakSet,hf=function(e){let t=hD(this,hd,hu);return t?new t.prototype.constructor(e):null},hg=new WeakSet,hm=function(){let{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),a=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+n),h=Math.min(window.innerHeight,t+s),c=(a+l)/2-e,d=(o+h)/2-t,[u,p]=this.viewport.rotation%180==0?[c,d]:[d,c];return{offsetX:u,offsetY:p}},hv=new WeakSet,hy=function(){for(let e of(hN(this,hr,!0),hD(this,hi).values()))e.isEmpty()&&e.remove();hN(this,hr,!1)},hL(bl,"_initialized",!1),hF(bl,hl,new Map([y8,ba,bo,bs].map(e=>[e._editorType,e])));let bh=bl,bc=class e{constructor({pageIndex:e}){hF(this,hk),hF(this,hC),hF(this,hb,null),hF(this,hw,0),hF(this,hA,new Map),hF(this,hx,new Map),this.pageIndex=e}setParent(e){if(!hD(this,hb))return void hN(this,hb,e);if(hD(this,hb)!==e){if(hD(this,hA).size>0)for(let t of hD(this,hA).values())t.remove(),e.append(t);hN(this,hb,e)}}static get _svgFactory(){return g3(this,"_svgFactory",new mk)}highlight(t,n,s,a=!1){let o=hO(this,hw)._++,l=hW(this,hk,hE).call(this,t.box);l.classList.add("highlight"),t.free&&l.classList.add("free");let h=e._svgFactory.createElement("defs");l.append(h);let c=e._svgFactory.createElement("path");h.append(c);let d=`path_p${this.pageIndex}_${o}`;c.setAttribute("id",d),c.setAttribute("d",t.toSVGPath()),a&&hD(this,hx).set(o,c);let u=hW(this,hC,hM).call(this,h,d),p=e._svgFactory.createElement("use");return l.append(p),l.setAttribute("fill",n),l.setAttribute("fill-opacity",s),p.setAttribute("href",`#${d}`),hD(this,hA).set(o,l),{id:o,clipPathId:`url(#${u})`}}highlightOutline(t){let n,s=hO(this,hw)._++,a=hW(this,hk,hE).call(this,t.box);a.classList.add("highlightOutline");let o=e._svgFactory.createElement("defs");a.append(o);let l=e._svgFactory.createElement("path");o.append(l);let h=`path_p${this.pageIndex}_${s}`;if(l.setAttribute("id",h),l.setAttribute("d",t.toSVGPath()),l.setAttribute("vector-effect","non-scaling-stroke"),t.free){a.classList.add("free");let t=e._svgFactory.createElement("mask");o.append(t),n=`mask_p${this.pageIndex}_${s}`,t.setAttribute("id",n),t.setAttribute("maskUnits","objectBoundingBox");let l=e._svgFactory.createElement("rect");t.append(l),l.setAttribute("width","1"),l.setAttribute("height","1"),l.setAttribute("fill","white");let c=e._svgFactory.createElement("use");t.append(c),c.setAttribute("href",`#${h}`),c.setAttribute("stroke","none"),c.setAttribute("fill","black"),c.setAttribute("fill-rule","nonzero"),c.classList.add("mask")}let c=e._svgFactory.createElement("use");a.append(c),c.setAttribute("href",`#${h}`),n&&c.setAttribute("mask",`url(#${n})`);let d=c.cloneNode();return a.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),hD(this,hA).set(s,a),s}finalizeLine(e,t){let n=hD(this,hx).get(e);hD(this,hx).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){hD(this,hA).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),hD(this,hx).delete(e)}updatePath(e,t){hD(this,hx).get(e).setAttribute("d",t.toSVGPath())}updateBox(t,n){hW(e,h_,hS).call(e,hD(this,hA).get(t),n)}show(e,t){hD(this,hA).get(e).classList.toggle("hidden",!t)}rotate(e,t){hD(this,hA).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){hD(this,hA).get(e).setAttribute("fill",t)}changeOpacity(e,t){hD(this,hA).get(e).setAttribute("fill-opacity",t)}addClass(e,t){hD(this,hA).get(e).classList.add(t)}removeClass(e,t){hD(this,hA).get(e).classList.remove(t)}remove(e){null!==hD(this,hb)&&(hD(this,hA).get(e).remove(),hD(this,hA).delete(e))}destroy(){for(let e of(hN(this,hb,null),hD(this,hA).values()))e.remove();hD(this,hA).clear()}};hb=new WeakMap,hw=new WeakMap,hA=new WeakMap,hx=new WeakMap,h_=new WeakSet,hS=function(e,{x:t=0,y:n=0,width:s=1,height:a=1}={}){let{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*a}%`},hk=new WeakSet,hE=function(e){let t=bc._svgFactory.create(1,1,!0);return hD(this,hb).append(t),t.setAttribute("aria-hidden",!0),hW(bc,h_,hS).call(bc,t,e),t},hC=new WeakSet,hM=function(e,t){let n=bc._svgFactory.createElement("clipPath");e.append(n);let s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");let a=bc._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),s},hF(bc,h_);let bd=bc;var bu=gW.AbortException,bp=gW.AnnotationEditorLayer,bf=gW.AnnotationEditorParamsType,bg=gW.AnnotationEditorType,bm=gW.AnnotationEditorUIManager,bv=gW.AnnotationLayer,by=gW.AnnotationMode,bb=gW.CMapCompressionType,bw=gW.ColorPicker,bA=gW.DOMSVGFactory,bx=gW.DrawLayer,b_=gW.FeatureTest,bS=gW.GlobalWorkerOptions,bk=gW.ImageKind,bE=gW.InvalidPDFException,bC=gW.MissingPDFException,bM=gW.OPS,bR=gW.Outliner,bT=gW.PDFDataRangeTransport,bP=gW.PDFDateString,bL=gW.PDFWorker,bI=gW.PasswordResponses,bD=gW.PermissionFlag,bF=gW.PixelsPerInch,bN=gW.RenderingCancelledException,bO=gW.TextLayer,bW=gW.UnexpectedResponseException,bj=gW.Util,bB=gW.VerbosityLevel,b$=gW.XfaLayer,bz=gW.build,bH=gW.createValidAbsoluteUrl,bU=gW.fetchData,bV=gW.getDocument,bG=gW.getFilenameFromUrl,bq=gW.getPdfFilenameFromUrl,bX=gW.getXfaPageViewport,bY=gW.isDataScheme,bK=gW.isPdfFile,bJ=gW.noContextMenu,bQ=gW.normalizeUnicode,bZ=gW.renderTextLayer,b0=gW.setLayerDimensions,b1=gW.shadow,b2=gW.updateTextLayer,b3=gW.version;let b5=Object.freeze(Object.defineProperty({__proto__:null,AbortException:bu,AnnotationEditorLayer:bp,AnnotationEditorParamsType:bf,AnnotationEditorType:bg,AnnotationEditorUIManager:bm,AnnotationLayer:bv,AnnotationMode:by,CMapCompressionType:bb,ColorPicker:bw,DOMSVGFactory:bA,DrawLayer:bx,FeatureTest:b_,GlobalWorkerOptions:bS,ImageKind:bk,InvalidPDFException:bE,MissingPDFException:bC,OPS:bM,Outliner:bR,PDFDataRangeTransport:bT,PDFDateString:bP,PDFWorker:bL,PasswordResponses:bI,PermissionFlag:bD,PixelsPerInch:bF,RenderingCancelledException:bN,TextLayer:bO,UnexpectedResponseException:bW,Util:bj,VerbosityLevel:bB,XfaLayer:b$,build:bz,createValidAbsoluteUrl:bH,fetchData:bU,getDocument:bV,getFilenameFromUrl:bG,getPdfFilenameFromUrl:bq,getXfaPageViewport:bX,isDataScheme:bY,isPdfFile:bK,noContextMenu:bJ,normalizeUnicode:bQ,renderTextLayer:bZ,setLayerDimensions:b0,shadow:b1,updateTextLayer:b2,version:b3},Symbol.toStringTag,{value:"Module"}));var b4=function(e,t,n){if(n||2==arguments.length)for(var s,a=0,o=t.length;a<o;a++)!s&&a in t||(s||(s=Array.prototype.slice.call(t,0,a)),s[a]=t[a]);return e.concat(s||Array.prototype.slice.call(t))},b6=b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4(b4([],["onCopy","onCut","onPaste"],!0),["onCompositionEnd","onCompositionStart","onCompositionUpdate"],!0),["onFocus","onBlur"],!0),["onInput","onInvalid","onReset","onSubmit"],!0),["onLoad","onError"],!0),["onKeyDown","onKeyPress","onKeyUp"],!0),["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],!0),["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],!0),["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],!0),["onSelect"],!0),["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],!0),["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],!0),["onScroll"],!0),["onWheel"],!0),["onAnimationStart","onAnimationEnd","onAnimationIteration"],!0),["onTransitionEnd"],!0),["onChange"],!0),["onToggle"],!0);function b8(e,t){var n={};return b6.forEach(function(s){var a=e[s];a&&(t?n[s]=function(e){return a(e,t(s))}:n[s]=a)}),n}function b7(e){var t=!1;return{promise:new Promise(function(n,s){e.then(function(e){return!t&&n(e)}).catch(function(e){return!t&&s(e)})}),cancel:function(){t=!0}}}function b9(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=function e(t){var n,s,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t)if(Array.isArray(t))for(n=0;n<t.length;n++)t[n]&&(s=e(t[n]))&&(a&&(a+=" "),a+=s);else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}(e))&&(s&&(s+=" "),s+=t);return s}var we="production"===up.env.NODE_ENV,wt="Invariant failed";function wi(e,t){if(!e){if(we)throw Error(wt);var n="function"==typeof t?t():t;throw Error(n?"".concat(wt,": ").concat(n):wt)}}var wn="production"!==up.env.NODE_ENV,wr=function(){};if(wn){var ws=function(e,t){var n=arguments.length;t=Array(n>1?n-1:0);for(var s=1;s<n;s++)t[s-1]=arguments[s];var a=0,o="Warning: "+e.replace(/%s/g,function(){return t[a++]});"u">typeof console&&console.error(o);try{throw Error(o)}catch{}};wr=function(e,t,n){var s=arguments.length;n=Array(s>2?s-2:0);for(var a=2;a<s;a++)n[a-2]=arguments[a];if(void 0===t)throw Error("`warning(condition, format, ...args)` requires a warning message argument");e||ws.apply(null,[t].concat(n))}}let wa=hB(wr);var wo=Object.prototype.hasOwnProperty;function wl(e,t,n){for(n of e.keys())if(wh(n,t))return n}function wh(e,t){var n,s,a;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&wh(e[s],t[s]););return -1===s}if(n===Set){if(e.size!==t.size)return!1;for(s of e)if((a=s)&&"object"==typeof a&&!(a=wl(t,a))||!t.has(a))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(s of e)if((a=s[0])&&"object"==typeof a&&!(a=wl(t,a))||!wh(s[1],t.get(a)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((s=e.byteLength)===t.byteLength)for(;s--&&e.getInt8(s)===t.getInt8(s););return -1===s}if(ArrayBuffer.isView(e)){if((s=e.byteLength)===t.byteLength)for(;s--&&e[s]===t[s];);return -1===s}if(!n||"object"==typeof e){for(n in s=0,e)if(wo.call(e,n)&&++s&&!wo.call(t,n)||!(n in t)||!wh(e[n],t[n]))return!1;return Object.keys(t).length===s}}return e!=e&&t!=t}let wc=(0,hT.createContext)(null);function wd({children:e,type:t}){return(0,hR.jsx)("div",{className:`react-pdf__message react-pdf__message--${t}`,children:e})}class wu{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return wi(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){wi(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{wi(this.pdfDocument,"PDF document not loaded."),wi(e,"Destination is not specified."),"string"==typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(e=>{wi(Array.isArray(e),`"${e}" is not a valid destination array.`);let t=e[0];new Promise(e=>{wi(this.pdfDocument,"PDF document not loaded."),t instanceof Object?this.pdfDocument.getPageIndex(t).then(t=>{e(t)}).catch(()=>{wi(!1,`"${t}" is not a valid page reference.`)}):"number"==typeof t?e(t):wi(!1,`"${t}" is not a valid destination reference.`)}).then(t=>{let n=t+1;wi(this.pdfViewer,"PDF viewer is not initialized."),wi(n>=1&&n<=this.pagesCount,`"${n}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){wi(this.pdfViewer,"PDF viewer is not initialized."),wi(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:e-1,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}let wp="u">typeof document,wf=wp&&"file:"===window.location.protocol;function wg(e){return"u">typeof e&&null!==e}function wm(e){return"string"==typeof e&&/^data:/.test(e)}function wv(e){wi(wm(e),"Invalid data URI.");let[t="",n=""]=e.split(",");return -1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}let wy="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function wb(){wa(!wf,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${wy}`)}function ww(e){e&&e.cancel&&e.cancel()}function wA(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}function wx(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function w_(){return(0,hT.useReducer)(wx,{value:void 0,error:void 0})}var wS=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n};let{PDFDataRangeTransport:wk}=b5,wE=(e,t)=>{switch(t){case 1:e(prompt("Enter the password to open this PDF file."));break;case 2:e(prompt("Invalid password. Please try again."))}};function wC(e){return"object"==typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}let wM=(0,hT.forwardRef)(function(e,t){var{children:n,className:s,error:a="Failed to load PDF file.",externalLinkRel:o,externalLinkTarget:l,file:h,inputRef:c,imageResourcesPath:d,loading:u="Loading PDF",noData:p="No PDF file specified.",onItemClick:f,onLoadError:g,onLoadProgress:m,onLoadSuccess:v,onPassword:y=wE,onSourceError:b,onSourceSuccess:w,options:A,renderMode:x,rotate:_}=e,S=wS(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);let[k,E]=w_(),{value:C,error:M}=k,[R,T]=w_(),{value:P,error:L}=R,I=(0,hT.useRef)(new wu),D=(0,hT.useRef)([]),F=(0,hT.useRef)(void 0),N=(0,hT.useRef)(void 0);h&&h!==F.current&&wC(h)&&(wa(!wh(h,F.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),F.current=h),A&&A!==N.current&&(wa(!wh(A,N.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),N.current=A);let O=(0,hT.useRef)({scrollPageIntoView:e=>{let{dest:t,pageNumber:n,pageIndex:s=n-1}=e;if(f)return void f({dest:t,pageIndex:s,pageNumber:n});let a=D.current[s];a?a.scrollIntoView():wa(!1,`An internal link leading to page ${n} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});(0,hT.useImperativeHandle)(t,()=>({linkService:I,pages:D,viewer:O}),[]),(0,hT.useEffect)(function(){E({type:"RESET"})},[h,E]);let W=(0,hT.useCallback)(()=>{var e,t,n,s;return e=this,t=void 0,n=void 0,s=function*(){if(!h)return null;if("string"==typeof h)return wm(h)?{data:wv(h)}:(wb(),{url:h});if(h instanceof wk)return{range:h};if(h instanceof ArrayBuffer)return{data:h};if(wp&&(wi(wp,"isBlob can only be used in a browser environment"),h instanceof Blob))return{data:yield new Promise((e,t)=>{let n=new FileReader;n.onload=()=>{if(!n.result)return t(Error("Error while reading a file."));e(n.result)},n.onerror=e=>{if(!e.target)return t(Error("Error while reading a file."));let{error:n}=e.target;if(!n)return t(Error("Error while reading a file."));switch(n.code){case n.NOT_FOUND_ERR:return t(Error("Error while reading a file: File not found."));case n.SECURITY_ERR:return t(Error("Error while reading a file: Security error."));case n.ABORT_ERR:return t(Error("Error while reading a file: Aborted."));default:return t(Error("Error while reading a file."))}},n.readAsArrayBuffer(h)})};if(wi("object"==typeof h,"Invalid parameter in file, need either Uint8Array, string or a parameter object"),wi(wC(h),"Invalid parameter object: need either .data, .range or .url"),"url"in h&&"string"==typeof h.url){if(wm(h.url)){let{url:e}=h,t=wS(h,["url"]);return Object.assign({data:wv(e)},t)}wb()}return h},new(n||(n=Promise))(function(a,o){function l(e){try{c(s.next(e))}catch(e){o(e)}}function h(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(l,h)}c((s=s.apply(e,t||[])).next())})},[h]);function j(e,t){D.current[e]=t}function B(e){delete D.current[e]}(0,hT.useEffect)(()=>{let e=b7(W());return e.promise.then(e=>{E({type:"RESOLVE",value:e})}).catch(e=>{E({type:"REJECT",error:e})}),()=>{ww(e)}},[W,E]),(0,hT.useEffect)(()=>{if(!(typeof C>"u")){if(!1===C)return void(M&&(wa(!1,M.toString()),b&&b(M)));w&&w()}},[C]),(0,hT.useEffect)(function(){T({type:"RESET"})},[T,C]),(0,hT.useEffect)(function(){if(!C)return;let e=bV(Object.assign(Object.assign({},C),A));return m&&(e.onProgress=m),y&&(e.onPassword=y),e.promise.then(e=>{T({type:"RESOLVE",value:e})}).catch(t=>{e.destroyed||T({type:"REJECT",error:t})}),()=>{e.destroy()}},[A,T,C]),(0,hT.useEffect)(()=>{if(!(typeof P>"u")){if(!1===P)return void(L&&(wa(!1,L.toString()),g&&g(L)));P&&(v&&v(P),D.current=Array(P.numPages),I.current.setDocument(P))}},[P]),(0,hT.useEffect)(function(){I.current.setViewer(O.current),I.current.setExternalLinkRel(o),I.current.setExternalLinkTarget(l)},[o,l]);let $=(0,hT.useMemo)(()=>({imageResourcesPath:d,linkService:I.current,onItemClick:f,pdf:P,registerPage:j,renderMode:x,rotate:_,unregisterPage:B}),[d,f,P,x,_]),z=(0,hT.useMemo)(()=>b8(S,()=>P),[S,P]);return(0,hR.jsx)("div",Object.assign({className:b9("react-pdf__Document",s),ref:c,style:{"--scale-factor":"1"}},z,{children:h?null==P?(0,hR.jsx)(wd,{type:"loading",children:"function"==typeof u?u():u}):!1===P?(0,hR.jsx)(wd,{type:"error",children:"function"==typeof a?a():a}):(0,hR.jsx)(wc.Provider,{value:$,children:n}):(0,hR.jsx)(wd,{type:"no-data",children:"function"==typeof p?p():p})}))});function wR(){return(0,hT.useContext)(wc)}function wT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);return n.length<=1?n[0]||null:function(e){n.forEach(function(t){"function"==typeof t?t(e):t&&(t.current=e)})}}let wP=(0,hT.createContext)(null),wL={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},wI=/^H(\d+)$/;function wD(e){return"children"in e}function wF(e){return!!wD(e)&&1===e.children.length&&0 in e.children&&"id"in e.children[0]}function wN({className:e,node:t}){let n=(0,hT.useMemo)(()=>t?Object.assign(Object.assign({},function(e){let t={};if(wD(e)){let{role:n}=e,s=n.match(wI);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(n in wL){let e=wL[n];e&&(t.role=e)}}return t}(t)),function e(t){let n={};if(wD(t)){if(void 0!==t.alt&&(n["aria-label"]=t.alt),void 0!==t.lang&&(n.lang=t.lang),wF(t)){let[s]=t.children;if(s){let t=e(s);return Object.assign(Object.assign({},n),t)}}}else"id"in t&&(n["aria-owns"]=t.id);return n}(t)):null,[t]),s=(0,hT.useMemo)(()=>!wD(t)||wF(t)?null:t.children.map((e,t)=>(0,hR.jsx)(wN,{node:e},t)),[t]);return(0,hR.jsx)("span",Object.assign({className:e},n,{children:s}))}function wO(){return(0,hT.useContext)(wP)}function wW(){let e=wO();wi(e,"Unable to find Page context.");let{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[s,a]=w_(),{value:o,error:l}=s,{customTextRenderer:h,page:c}=e;return(0,hT.useEffect)(function(){a({type:"RESET"})},[a,c]),(0,hT.useEffect)(function(){if(h||!c)return;let e=b7(c.getStructTree());return e.promise.then(e=>{a({type:"RESOLVE",value:e})}).catch(e=>{a({type:"REJECT",error:e})}),()=>ww(e)},[h,c,a]),(0,hT.useEffect)(()=>{if(void 0!==o){if(!1===o)return void(l&&(wa(!1,l.toString()),t&&t(l)));o&&n&&n(o)}},[o]),o?(0,hR.jsx)(wN,{className:"react-pdf__Page__structTree structTree",node:o}):null}function wj(e){let t=wO();wi(t,"Unable to find Page context.");let{_className:n,canvasBackground:s,devicePixelRatio:a=wp&&window.devicePixelRatio||1,onRenderError:o,onRenderSuccess:l,page:h,renderForms:c,renderTextLayer:d,rotate:u,scale:p}=Object.assign(Object.assign({},t),e),{canvasRef:f}=e;wi(h,"Attempted to render page canvas, but no page was specified.");let g=(0,hT.useRef)(null);function m(e){"RenderingCancelledException"===e.name||(wa(!1,e.toString()),o&&o(e))}let v=(0,hT.useMemo)(()=>h.getViewport({scale:p*a,rotation:u}),[a,h,u,p]),y=(0,hT.useMemo)(()=>h.getViewport({scale:p,rotation:u}),[h,u,p]);(0,hT.useEffect)(function(){if(!h)return;h.cleanup();let{current:e}=g;if(!e)return;e.width=v.width,e.height=v.height,e.style.width=`${Math.floor(y.width)}px`,e.style.height=`${Math.floor(y.height)}px`,e.style.visibility="hidden";let t={annotationMode:c?by.ENABLE_FORMS:by.ENABLE,canvasContext:e.getContext("2d",{alpha:!1}),viewport:v};s&&(t.background=s);let n=h.render(t);return n.promise.then(()=>{e.style.visibility="",h&&l&&l(wA(h,p))}).catch(m),()=>ww(n)},[s,g,a,h,c,v,y]);let b=(0,hT.useCallback)(()=>{let{current:e}=g;e&&(e.width=0,e.height=0)},[g]);return(0,hT.useEffect)(()=>b,[b]),(0,hR.jsx)("canvas",{className:`${n}__canvas`,dir:"ltr",ref:wT(f,g),style:{display:"block",userSelect:"none"},children:d?(0,hR.jsx)(wW,{}):null})}function wB(){let e=wO();wi(e,"Unable to find Page context.");let{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:h,pageNumber:c,rotate:d,scale:u}=e;wi(l,"Attempted to load page text content, but no page was specified.");let[p,f]=w_(),{value:g,error:m}=p,v=(0,hT.useRef)(null),y=(0,hT.useRef)(void 0);wa(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,hT.useEffect)(function(){f({type:"RESET"})},[l,f]),(0,hT.useEffect)(function(){if(!l)return;let e=b7(l.getTextContent());return e.promise.then(e=>{f({type:"RESOLVE",value:e})}).catch(e=>{f({type:"REJECT",error:e})}),()=>ww(e)},[l,f]),(0,hT.useEffect)(()=>{if(void 0!==g){if(!1===g)return void(m&&(wa(!1,m.toString()),n&&n(m)));g&&s&&s(g)}},[g]);let b=(0,hT.useCallback)(()=>{o&&o()},[o]),w=(0,hT.useCallback)(e=>{wa(!1,e.toString()),a&&a(e)},[a]),A=(0,hT.useMemo)(()=>l.getViewport({scale:u,rotation:d}),[l,d,u]);return(0,hT.useLayoutEffect)(function(){if(!l||!g)return;let{current:e}=v;if(!e)return;e.innerHTML="";let n=new bO({container:e,textContentSource:l.streamTextContent({includeMarkedContent:!0}),viewport:A});return n.render().then(()=>{let n=document.createElement("div");n.className="endOfContent",e.append(n),y.current=n;let s=e.querySelectorAll('[role="presentation"]');if(t){let e=0;g.items.forEach((n,a)=>{if(!("str"in n))return;let o=s[e];o&&(o.innerHTML=t(Object.assign({pageIndex:h,pageNumber:c,itemIndex:a},n)),e+=n.str&&n.hasEOL?2:1)})}b()}).catch(w),()=>ww(n)},[t,w,b,l,h,c,g,A]),(0,hR.jsx)("div",{className:b9("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){let e=y.current;e&&e.classList.remove("active")},onMouseDown:function(){let e=y.current;e&&e.classList.add("active")},ref:v})}function w$(){let e=wR(),t=wO();wi(t,"Unable to find Page context.");let{imageResourcesPath:n,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:h,page:c,pdf:d,renderForms:u,rotate:p,scale:f=1}=Object.assign(Object.assign({},e),t);wi(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),wi(c,"Attempted to load page annotations, but no page was specified."),wi(s,"Attempted to load page annotations, but no linkService was specified.");let[g,m]=w_(),{value:v,error:y}=g,b=(0,hT.useRef)(null);wa(1===parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,hT.useEffect)(function(){m({type:"RESET"})},[m,c]),(0,hT.useEffect)(function(){if(!c)return;let e=b7(c.getAnnotations());return e.promise.then(e=>{m({type:"RESOLVE",value:e})}).catch(e=>{m({type:"REJECT",error:e})}),()=>{ww(e)}},[m,c,u]),(0,hT.useEffect)(()=>{if(void 0!==v){if(!1===v)return void(y&&(wa(!1,y.toString()),a&&a(y)));v&&o&&o(v)}},[v]);let w=(0,hT.useMemo)(()=>c.getViewport({scale:f,rotation:p}),[c,p,f]);return(0,hT.useEffect)(function(){if(!d||!c||!s||!v)return;let{current:e}=b;if(!e)return;let t=w.clone({dontFlip:!0}),a={annotations:v,annotationStorage:d.annotationStorage,div:e,imageResourcesPath:n,linkService:s,page:c,renderForms:u,viewport:t};e.innerHTML="";try{new bv({accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:e,l10n:null,page:c,viewport:t}).render(a),h&&h()}catch(e){wa(!1,`${e}`),l&&l(e)}return()=>{}},[v,n,s,c,u,w]),(0,hR.jsx)("div",{className:b9("react-pdf__Page__annotations","annotationLayer"),ref:b})}var wz=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n};function wH(e){let t=Object.assign(Object.assign({},wR()),e),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:a,canvasRef:o,children:l,className:h,customRenderer:c,customTextRenderer:d,devicePixelRatio:u,error:p="Failed to load the page.",height:f,inputRef:g,loading:m="Loading page",noData:v="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:b,onGetStructTreeError:w,onGetStructTreeSuccess:A,onGetTextError:x,onGetTextSuccess:_,onLoadError:S,onLoadSuccess:k,onRenderAnnotationLayerError:E,onRenderAnnotationLayerSuccess:C,onRenderError:M,onRenderSuccess:R,onRenderTextLayerError:T,onRenderTextLayerSuccess:P,pageIndex:L,pageNumber:I,pdf:D,registerPage:F,renderAnnotationLayer:N=!0,renderForms:O=!1,renderMode:W="canvas",renderTextLayer:j=!0,rotate:B,scale:$=1,unregisterPage:z,width:H}=t,U=wz(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[V,G]=w_(),{value:q,error:X}=V,Y=(0,hT.useRef)(null);wi(D,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");let K=wg(I)?I-1:L??null,J=I??(wg(L)?L+1:null),Q=B??(q?q.rotate:null),Z=(0,hT.useMemo)(()=>{if(!q)return null;let e=1,t=$??1;if(H||f){let t=q.getViewport({scale:1,rotation:Q});H?e=H/t.width:f&&(e=f/t.height)}return t*e},[f,q,Q,$,H]);(0,hT.useEffect)(function(){return()=>{wg(K)&&s&&z&&z(K)}},[s,D,K,z]),(0,hT.useEffect)(function(){G({type:"RESET"})},[G,D,K]),(0,hT.useEffect)(function(){if(!D||!J)return;let e=b7(D.getPage(J));return e.promise.then(e=>{G({type:"RESOLVE",value:e})}).catch(e=>{G({type:"REJECT",error:e})}),()=>ww(e)},[G,D,K,J,F]),(0,hT.useEffect)(()=>{if(void 0!==q){if(!1===q)return void(X&&(wa(!1,X.toString()),S&&S(X)));!function(){if(k){if(!q||!Z)return;k(wA(q,Z))}if(s&&F){if(!wg(K)||!Y.current)return;F(K,Y.current)}}()}},[q,Z]);let ee=(0,hT.useMemo)(()=>q&&wg(K)&&J&&wg(Q)&&wg(Z)?{_className:n,canvasBackground:a,customTextRenderer:d,devicePixelRatio:u,onGetAnnotationsError:y,onGetAnnotationsSuccess:b,onGetStructTreeError:w,onGetStructTreeSuccess:A,onGetTextError:x,onGetTextSuccess:_,onRenderAnnotationLayerError:E,onRenderAnnotationLayerSuccess:C,onRenderError:M,onRenderSuccess:R,onRenderTextLayerError:T,onRenderTextLayerSuccess:P,page:q,pageIndex:K,pageNumber:J,renderForms:O,renderTextLayer:j,rotate:Q,scale:Z}:null,[n,a,d,u,y,b,w,A,x,_,E,C,M,R,T,P,q,K,J,O,j,Q,Z]),et=(0,hT.useMemo)(()=>b8(U,()=>q&&(Z?wA(q,Z):void 0)),[U,q,Z]),ei=`${K}@${Z}/${Q}`;return(0,hR.jsx)("div",Object.assign({className:b9(n,h),"data-page-number":J,ref:wT(g,Y),style:{"--scale-factor":`${Z}`,backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},et,{children:J?null===D||null==q?(0,hR.jsx)(wd,{type:"loading",children:"function"==typeof m?m():m}):!1===D||!1===q?(0,hR.jsx)(wd,{type:"error",children:"function"==typeof p?p():p}):(0,hR.jsxs)(wP.Provider,{value:ee,children:[function(){switch(W){case"custom":return wi(c,'renderMode was set to "custom", but no customRenderer was passed.'),(0,hR.jsx)(c,{},`${ei}_custom`);case"none":return null;default:return(0,hR.jsx)(wj,{canvasRef:o},`${ei}_canvas`)}}(),j?(0,hR.jsx)(wB,{},`${ei}_text`):null,N?(0,hR.jsx)(w$,{},`${ei}_annotations`):null,l]}):(0,hR.jsx)(wd,{type:"no-data",children:"function"==typeof v?v():v})}))}wa(!wf,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${wy}`),bS.workerSrc="pdf.worker.mjs";let wU="SET_ZOOM_LEVEL",wV=e=>({type:wU,value:e}),wG="SET_PDF_PAGINATED",wq="SET_NUM_PAGES",wX=e=>({type:wq,value:e}),wY="SET_CURRENT_PAGE",wK="SET_CURRENT_MAIN_STATE",wJ=e=>({type:wY,value:e}),wQ={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1},wZ=(e=wQ,t)=>{switch(t.type){case wU:{let{value:n}=t;return{...e,zoomLevel:n}}case wG:{let{value:n}=t;return{...e,paginated:n}}case wq:{let{value:n}=t;return{...e,numPages:n}}case wY:{let{value:n}=t;return{...e,currentPage:n}}case wK:{let{value:n}=t;return{...e,mainState:n}}default:return e}},w0=(0,hT.createContext)({state:wQ,dispatch:()=>null}),w1=({children:e,mainState:t})=>{var n,s,a,o,l,h,c;let[d,u]=(0,hT.useReducer)(wZ,{...wQ,defaultZoomLevel:(null==(s=null==(n=t.config)?void 0:n.pdfZoom)?void 0:s.defaultZoom)??wQ.defaultZoomLevel,zoomLevel:(null==(o=null==(a=t.config)?void 0:a.pdfZoom)?void 0:o.defaultZoom)??wQ.zoomLevel,zoomJump:(null==(h=null==(l=t.config)?void 0:l.pdfZoom)?void 0:h.zoomJump)??wQ.zoomJump,paginated:(null==(c=t.config)||!c.pdfVerticalScrollByDefault)&&wQ.paginated,mainState:t});return(0,hT.useEffect)(()=>{u({type:wK,value:t})},[t]),(0,hR.jsx)(w0.Provider,{value:{state:d,dispatch:u},children:e})},w2=({pageNum:e})=>{let{state:{mainState:t,paginated:n,zoomLevel:s,numPages:a,currentPage:o}}=(0,hT.useContext)(w0),{t:l}=f5(),h=(null==t?void 0:t.rendererRect)||null,c=e??o;return(0,hR.jsxs)(w3,{id:"pdf-page-wrapper",$lastPage:c>=a,children:[!n&&(0,hR.jsx)(w5,{id:"pdf-page-info",children:l("pdfPluginPageNumber",{currentPage:c,allPagesCount:a})}),(0,hR.jsx)(wH,{pageNumber:c||o,scale:s,height:((null==h?void 0:h.height)??100)-100,width:((null==h?void 0:h.width)??100)-100,loading:l("pdfPluginLoading")})]})},w3=fp.div`
  margin: ${e=>e.$lastPage?"20px 0":void 0};
`,w5=fp.div`
  padding: 0 0 10px 10px;
  color: ${e=>e.theme.textTertiary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,w4=()=>{let{state:{numPages:e}}=(0,hT.useContext)(w0),t=[];for(let n=0;n<e;n++)t.push((0,hR.jsx)(w2,{pageNum:n+1},n+1));return(0,hR.jsx)(hR.Fragment,{children:t})},w6=()=>{let{state:{mainState:e,paginated:t},dispatch:n}=(0,hT.useContext)(w0),{t:s}=f5(),a=(null==e?void 0:e.currentDocument)||null;return(0,hT.useEffect)(()=>{n(wX(wQ.numPages))},[a]),a&&void 0!==a.fileData?(0,hR.jsx)(w8,{file:a.fileData,onLoadSuccess:({numPages:e})=>n(wX(e)),loading:(0,hR.jsx)("span",{children:s("pdfPluginLoading")}),children:t?(0,hR.jsx)(w2,{}):(0,hR.jsx)(w4,{})}):null},w8=fp(wM)`
  display: flex;
  flex-direction: column;
  margin: 0 auto;
`,w7=e=>(0,hR.jsx)(Ae,{...e,reverse:!0}),w9=e=>(0,hR.jsx)(Ae,{...e}),Ae=e=>{let{color:t,size:n,reverse:s}=e;return(0,hR.jsx)("svg",{width:n||"100%",height:n||"100%",style:{transform:`${s?"rotate(180deg)":""}`},viewBox:"0 0 12 12",version:"1.1",children:(0,hR.jsx)("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,hR.jsx)("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)",children:(0,hR.jsx)("g",{id:"AV",transform:"translate(100.000000, 852.000000)",children:(0,hR.jsx)("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)",children:(0,hR.jsxs)("g",{children:[(0,hR.jsx)("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),(0,hR.jsx)("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:t||"#aaa"})]})})})})})})},At=e=>{let{color:t,size:n,reverse:s}=e;return(0,hR.jsxs)("svg",{width:n||"100%",height:n||"100%",style:{transform:`${s?"rotate(180deg)":""}`},id:"Layer_1",viewBox:"0 0 24 24",children:[(0,hR.jsx)("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:t||"#aaa"}),(0,hR.jsx)("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:t||"#aaa"})]})},Ai=e=>(0,hR.jsx)(Ar,{...e}),An=e=>(0,hR.jsx)(Ar,{...e,reverse:!0}),Ar=e=>{let{color:t,size:n,reverse:s}=e;return(0,hR.jsx)("svg",{width:n||"100%",height:n||"100%",viewBox:"0 0 32 32",version:"1.1",children:(0,hR.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:(0,hR.jsx)("g",{id:"search-plus-icon",fill:t||"#aaa",children:(0,hR.jsx)("path",{id:"search-plus",d:s?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"})})})})},As=e=>{let{color:t,size:n}=e;return(0,hR.jsx)("svg",{width:n||"100%",height:n||"100%",viewBox:"0 0 24 24",children:(0,hR.jsx)("path",{fill:t||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"})})},Aa=e=>{let{color:t,size:n,reverse:s}=e;return(0,hR.jsx)("svg",{width:n||"100%",height:n||"100%",style:{transform:`${s?"rotate(90deg)":""}`},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve",children:(0,hR.jsx)("path",{fill:t||"#aaa",d:`M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574
  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98
  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28
  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852
  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z`})})},Ao=()=>{let{state:{currentPage:e,numPages:t},dispatch:n}=(0,hT.useContext)(w0),{t:s}=f5();return(0,hR.jsxs)(Al,{id:"pdf-pagination",children:[(0,hR.jsx)(Ah,{id:"pdf-pagination-prev",onClick:()=>n(wJ(e-1)),disabled:1===e,children:(0,hR.jsx)(w7,{color:"#000",size:"50%"})}),(0,hR.jsx)(Ad,{id:"pdf-pagination-info",children:s("pdfPluginPageNumber",{currentPage:e,allPagesCount:t})}),(0,hR.jsx)(Ac,{id:"pdf-pagination-next",onClick:()=>n(wJ(e+1)),disabled:e>=t,children:(0,hR.jsx)(w9,{color:"#000",size:"50%"})})]})},Al=fp.div`
  display: flex;
  align-items: center;
`,Ah=fp(fI)`
  width: 30px;
  height: 30px;
  margin: 0 5px;

  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,Ac=fp(Ah)`
  margin: 0 20px 0 5px;
`,Ad=fp.div`
  color: ${e=>e.theme.textPrimary};
  font-size: 14px;
  text-align: left;

  @media (max-width: 768px) {
    font-size: 10px;
  }
`,Au=()=>{let{t:e}=f5(),{state:{mainState:t,paginated:n,zoomLevel:s,numPages:a,zoomJump:o,defaultZoomLevel:l},dispatch:h}=(0,hT.useContext)(w0),c=(null==t?void 0:t.currentDocument)||null;return(0,hR.jsxs)(Ap,{id:"pdf-controls",children:[n&&a>1&&(0,hR.jsx)(Ao,{}),(null==c?void 0:c.fileData)&&(0,hR.jsx)(Ag,{id:"pdf-download",href:null==c?void 0:c.fileData,download:(null==c?void 0:c.fileName)||(null==c?void 0:c.uri),title:e("downloadButtonLabel"),children:(0,hR.jsx)(At,{color:"#000",size:"75%"})}),(0,hR.jsx)(Af,{id:"pdf-zoom-out",onMouseDown:()=>h(wV(s-o)),children:(0,hR.jsx)(An,{color:"#000",size:"80%"})}),(0,hR.jsx)(Af,{id:"pdf-zoom-in",onMouseDown:()=>h(wV(s+o)),children:(0,hR.jsx)(Ai,{color:"#000",size:"80%"})}),(0,hR.jsx)(Af,{id:"pdf-zoom-reset",onMouseDown:()=>h(wV(l)),disabled:s===l,children:(0,hR.jsx)(As,{color:"#000",size:"70%"})}),a>1&&(0,hR.jsx)(Af,{id:"pdf-toggle-pagination",onMouseDown:()=>h({type:wG,value:!n}),children:(0,hR.jsx)(Aa,{color:"#000",size:"70%",reverse:n})})]})},Ap=fp.div`
  display: flex;
  position: sticky;
  top: 0;
  left: 0;
  z-index: 1;
  justify-content: flex-end;
  padding: 8px;
  background-color: ${e=>e.theme.tertiary};
  box-shadow: 0px 2px 3px #00000033;

  @media (max-width: 768px) {
    padding: 6px;
  }
`,Af=fp(fI)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`,Ag=fp(fD)`
  width: 30px;
  height: 30px;
  @media (max-width: 768px) {
    width: 25px;
    height: 25px;
  }
`;bS.workerSrc=new URL(`https://unpkg.com/pdfjs-dist@${b3}/build/pdf.worker.min.mjs`).toString();let Am=({mainState:e})=>(0,hR.jsx)(w1,{mainState:e,children:(0,hR.jsxs)(Av,{id:"pdf-renderer","data-testid":"pdf-renderer",children:[(0,hR.jsx)(Au,{}),(0,hR.jsx)(w6,{})]})});Am.fileTypes=["pdf","application/pdf"],Am.weight=0;let Av=fp.div`
  display: flex;
  flex-direction: column;
  flex: 1;

  /* width */
  &::-webkit-scrollbar {
    ${e=>e.theme.disableThemeScrollbar?"":"width: 10px"};
  }
  /* Track */
  &::-webkit-scrollbar-track {
    /* background: ${e=>e.theme.secondary}; */
  }
  /* Handle */
  &::-webkit-scrollbar-thumb {
    background: ${e=>e.theme.tertiary};
  }
  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: ${e=>e.theme.primary};
  }
`,Ay=fp(gg)`
  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;
  height: 100%;
  background-color: white;
  background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(-45deg, #e0e0e0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e0e0e0 75%),
    linear-gradient(-45deg, transparent 75%, #e0e0e0 75%);
  background-size: 20px 20px;
  background-position:
    0 0,
    0 10px,
    10px -10px,
    -10px 0px;
`,Ab=e=>(0,hR.jsx)(Ay,{...e});Ab.fileTypes=["png","image/png"],Ab.weight=0;let Aw,AA,Ax=[],A_=e=>{var t={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"};return e in t?t[e]:"Tag"+e},AS=e=>{var t,n={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"};return e in n&&(t=n[e]),t},Ak=(e,t,n)=>{var s=t+Math.floor((n=n||0)/8),a=n+e;if(a<=0)throw RangeError("No bits requested");if(a<=8)var o=24+n,l=Aw.getUint8(s,AA);else if(a<=16)var o=16+n,l=Aw.getUint16(s,AA);else if(a<=32)var o=n,l=Aw.getUint32(s,AA);else throw RangeError("Too many bits requested");return{bits:l<<o>>>32-e,byteOffset:s+Math.floor(a/8),bitOffset:a%8}},AE=(e,t)=>{if(e<=0)throw RangeError("No bytes requested");if(e<=1)return Aw.getUint8(t,AA);if(e<=2)return Aw.getUint16(t,AA);if(e<=3)return Aw.getUint32(t,AA)>>>8;if(e<=4)return Aw.getUint32(t,AA);throw RangeError("Too many bytes requested")},AC=(e,t,n,s)=>{var a,o=[],l=(-1!==["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(t)?a=1:-1!==["SHORT","SSHORT"].indexOf(t)?a=2:-1!==["LONG","SLONG","FLOAT"].indexOf(t)?a=4:-1!==["RATIONAL","SRATIONAL","DOUBLE"].indexOf(t)&&(a=8),a);if(l*n<=4){if(!1===AA)var h=s>>>(4-l)*8;else var h=s;o.push(h)}else for(var c=0;c<n;c++){var d=l*c;if(l>=8)if(-1!==["RATIONAL","SRATIONAL"].indexOf(t))o.push(AE(4,s+d)),o.push(AE(4,s+d+4));else throw TypeError("Can't handle this field type or size");else o.push(AE(l,s+d))}return"ASCII"===t&&o.forEach(function(e,t,n){n[t]=String.fromCharCode(e)}),o},AM=(e,t)=>{var n=Math.pow(2,8-t);return Math.floor(e*n+(n-1))},AR=(e,t,n,s)=>(typeof s>"u"&&(s=1),"rgba("+e+", "+t+", "+n+", "+s+")"),AT=e=>{for(var t=AE(2,e),n=[],s=e+2,a=0;a<t;s+=12,a++){var o=AE(2,s),l=AE(2,s+2),h=AE(4,s+4),c=AE(4,s+8),d=A_(o),u=AS(l),p=AC(d,u,h,c);n[d]={type:u,values:p}}Ax.push(n);var f=AE(4,s);return 0===f?Ax:AT(f)},AP=e=>{let{mainState:{currentDocument:t}}=e,{t:n}=f5(),[s,a]=(0,hT.useState)(!1),[o,l]=(0,hT.useState)(!1);return(0,hT.useEffect)(()=>{if(!t||s)return;let e=document.getElementById("tiff-img");try{e&&((e,t)=>{let n=t||document.createElement("canvas");if(e&&(Aw=new DataView(e),AA=(()=>{var e=AE(2,0);if(18761===e)AA=!0;else if(19789===e)AA=!1;else throw TypeError("Invalid byte order value.");return AA})(),(()=>{if(42!==AE(2,2))throw RangeError("You forgot your towel!");return!0})())){var s=(Ax=AT(AE(4,4)))[0],a=s.ImageWidth.values[0],o=s.ImageLength.values[0];n.width=a,n.height=o;var l=[],h=s.Compression?s.Compression.values[0]:1,c=s.SamplesPerPixel.values[0],d=[],u=0,p=!1;if(s.BitsPerSample.values.forEach(function(e,t,n){d[t]={bitsPerSample:e,hasBytesPerSample:!1,bytesPerSample:void 0},e%8==0&&(d[t].hasBytesPerSample=!0,d[t].bytesPerSample=e/8),u+=e},void 0),u%8==0){p=!0;var f=u/8}var g=s.StripOffsets.values,m=g.length;if(s.StripByteCounts)var v=s.StripByteCounts.values;else if(1===m)var v=[Math.ceil(a*o*u/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var y=0;y<m;y++){var b=g[y];l[y]=[];for(var w=v[y],A=0,x=0,_=1,S=!0,k=[],E=0,C=0,M=0;A<w;A+=_)switch(h){case 1:for(var R=0,k=[];R<c;R++)if(d[R].hasBytesPerSample){var T=d[R].bytesPerSample*R;k.push(AE(d[R].bytesPerSample,b+A+T))}else{var P=Ak(d[R].bitsPerSample,b+A,x);throw k.push(P.bits),A=P.byteOffset-b,x=P.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(l[y].push(k),p)_=f;else throw _=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:case 3:case 4:case 5:case 6:case 7:break;case 32773:if(S){S=!1;var L=1,I=1,D=Aw.getInt8(b+A,AA);D>=0&&D<=127?L=D+1:D>=-127&&D<=-1?I=-D+1:S=!0}else{for(var F=AE(1,b+A),R=0;R<I;R++){if(d[C].hasBytesPerSample)M=M<<8*E|F,++E===d[C].bytesPerSample&&(k.push(M),M=E=0,C++);else throw RangeError("Cannot handle sub-byte bits per sample");C===c&&(l[y].push(k),k=[],C=0)}0==--L&&(S=!0)}_=1}}if(n.getContext){var N=n.getContext("2d");if(N.fillStyle=AR(255,255,255,0),s.RowsPerStrip)var O=s.RowsPerStrip.values[0];else var O=o;var W=l.length,j=o%O,B=0===j?O:j,$=O,z=0,H=s.PhotometricInterpretation.values[0],U=[],V=0;if(s.ExtraSamples&&(V=(U=s.ExtraSamples.values).length),s.ColorMap)var G=s.ColorMap.values,q=Math.pow(2,d[0].bitsPerSample);for(var y=0;y<W;y++){y+1===W&&($=B);for(var X=l[y].length,Y=z*y,K=0,J=0;J<X;K++)for(var Q=0;Q<a;Q++,J++){var Z=l[y][J],ee=0,et=0,ei=0,en=1;if(V>0){for(var er=0;er<V;er++)if(1===U[er]||2===U[er]){en=Z[3+er]/256;break}}switch(H){case 0:if(d[0].hasBytesPerSample)var es=Math.pow(16,2*d[0].bytesPerSample);Z.forEach(function(e,t,n){n[t]=es-e});case 1:ee=et=ei=AM(Z[0],d[0].bitsPerSample);break;case 2:ee=AM(Z[0],d[0].bitsPerSample),et=AM(Z[1],d[1].bitsPerSample),ei=AM(Z[2],d[2].bitsPerSample);break;case 3:if(void 0===G)throw Error("Palette image missing color map");var ea=Z[0];ee=AM(G[ea],16),et=AM(G[q+ea],16),ei=AM(G[2*q+ea],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",H)}N.fillStyle=AR(ee,et,ei,en),N.fillRect(Q,Y+K,1,1)}z=$}}return}})(t.fileData,e),a(!0)}catch{l(!0)}},[t,s]),o?(0,hR.jsx)(gg,{...e,children:(0,hR.jsx)("div",{children:n("brokenFile")})}):(0,hR.jsx)(gg,{...e,children:(0,hR.jsx)(AL,{id:"tiff-img"})})};AP.fileTypes=["tif","tiff","image/tif","image/tiff"],AP.weight=0,AP.fileLoader=e=>gr({...e,readerTypeFunction:"arrayBuffer"});let AL=fp.canvas`
  max-width: 95%;
  max-height: 95%;
`,AI=({mainState:{currentDocument:e}})=>(0,hR.jsx)(AD,{id:"txt-renderer",children:null==e?void 0:e.fileData});AI.fileTypes=["txt","text/plain"],AI.weight=0,AI.fileLoader=ga;let AD=fp.div`
  display: flex;
  flex-direction: column;
  width: 100%;
  padding: 30px;
`;var AF={exports:{}};AF.exports=function e(){var t="u">typeof self?self:"u">typeof window?window:void 0!==t?t:{},n=!t.document&&!!t.postMessage,s=t.IS_PAPA_WORKER||!1,a={},o=0,l={parse:function(n,s){var h,c=(s=s||{}).dynamicTyping||!1;if(_(c)&&(s.dynamicTypingFunction=c,c={}),s.dynamicTyping=c,s.transform=!!_(s.transform)&&s.transform,s.worker&&l.WORKERS_SUPPORTED){var g=function(){if(!l.WORKERS_SUPPORTED)return!1;var n,s,h=(n=t.URL||t.webkitURL||null,s=e.toString(),l.BLOB_URL||(l.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",s,")();"],{type:"text/javascript"})))),c=new t.Worker(h);return c.onmessage=y,c.id=o++,a[c.id]=c}();return g.userStep=s.step,g.userChunk=s.chunk,g.userComplete=s.complete,g.userError=s.error,s.step=_(s.step),s.chunk=_(s.chunk),s.complete=_(s.complete),s.error=_(s.error),delete s.worker,void g.postMessage({input:n,config:s,workerId:g.id})}var m=null;return l.NODE_STREAM_INPUT,"string"==typeof n?(n=65279===(h=n).charCodeAt(0)?h.slice(1):h,m=s.download?new d(s):new p(s)):!0===n.readable&&_(n.read)&&_(n.on)?m=new f(s):(t.File&&n instanceof File||n instanceof Object)&&(m=new u(s)),m.stream(n)},unparse:function(e,t){var n=!1,s=!0,a=",",o=`\r
`,h='"',c=h+h,d=!1,u=null,p=!1;if("object"==typeof t){if("string"!=typeof t.delimiter||l.BAD_DELIMITERS.filter(function(e){return -1!==t.delimiter.indexOf(e)}).length||(a=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(d=t.skipEmptyLines),"string"==typeof t.newline&&(o=t.newline),"string"==typeof t.quoteChar&&(h=t.quoteChar),"boolean"==typeof t.header&&(s=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw Error("Option columns is empty");u=t.columns}void 0!==t.escapeChar&&(c=t.escapeChar+h),("boolean"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(p=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\-@\t\r].*$/)}var f=RegExp(m(h),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return g(null,e,d);if("object"==typeof e[0])return g(u||Object.keys(e[0]),e,d)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||u),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:"object"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),g(e.fields||[],e.data||[],d);throw Error("Unable to serialize unrecognized input");function g(e,t,n){var l="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var h=Array.isArray(e)&&0<e.length,c=!Array.isArray(t[0]);if(h&&s){for(var d=0;d<e.length;d++)0<d&&(l+=a),l+=v(e[d],d);0<t.length&&(l+=o)}for(var u=0;u<t.length;u++){var p=h?e.length:t[u].length,f=!1,g=h?0===Object.keys(t[u]).length:0===t[u].length;if(n&&!h&&(f="greedy"===n?""===t[u].join("").trim():1===t[u].length&&0===t[u][0].length),"greedy"===n&&h){for(var m=[],y=0;y<p;y++){var b=c?e[y]:y;m.push(t[u][b])}f=""===m.join("").trim()}if(!f){for(var w=0;w<p;w++){0<w&&!g&&(l+=a);var A=h&&c?e[w]:w;l+=v(t[u][A],w)}u<t.length-1&&(!n||0<p&&!g)&&(l+=o)}}return l}function v(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var s=!1;p&&"string"==typeof e&&p.test(e)&&(e="'"+e,s=!0);var o=e.toString().replace(f,c);return(s=s||!0===n||"function"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(o,l.BAD_DELIMITERS)||-1<o.indexOf(a)||" "===o.charAt(0)||" "===o.charAt(o.length-1))?h+o+h:o}}};if(l.RECORD_SEP="\x1e",l.UNIT_SEP="\x1f",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!n&&!!t.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=0xa00000,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=v,l.ParserHandle=g,l.NetworkStreamer=d,l.FileStreamer=u,l.StringStreamer=p,l.ReadableStreamStreamer=f,t.jQuery){var h=t.jQuery;h.fn.parse=function(e){var n=e.config||{},s=[];return this.each(function(e){if(!("INPUT"===h(this).prop("tagName").toUpperCase()&&"file"===h(this).attr("type").toLowerCase()&&t.FileReader)||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)s.push({file:this.files[a],inputElem:this,instanceConfig:h.extend({},n)})}),a(),this;function a(){if(0!==s.length){var t,n,a,c=s[0];if(_(e.before)){var d=e.before(c.file,c.inputElem);if("object"==typeof d){if("abort"===d.action)return t=c.file,n=c.inputElem,a=d.reason,void(_(e.error)&&e.error({name:"AbortError"},t,n,a));if("skip"===d.action)return void o();"object"==typeof d.config&&(c.instanceConfig=h.extend(c.instanceConfig,d.config))}else if("skip"===d)return void o()}var u=c.instanceConfig.complete;c.instanceConfig.complete=function(e){_(u)&&u(e,c.file,c.inputElem),o()},l.parse(c.file,c.instanceConfig)}else _(e.complete)&&e.complete()}function o(){s.splice(0,1),a()}}}function c(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(e){var t=A(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new g(t),(this._handle.streamer=this)._config=t}).call(this,e),this.parseChunk=function(e,n){if(this.isFirstChunk&&_(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(e);void 0!==a&&(e=a)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+e;this._partialLine="";var h=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var c=h.meta.cursor;this._finished||(this._partialLine=o.substring(c-this._baseIndex),this._baseIndex=c),h&&h.data&&(this._rowCount+=h.data.length);var d=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)t.postMessage({results:h,workerId:l.WORKER_ID,finished:d});else if(_(this._config.chunk)&&!n){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);h=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!d||!_(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(e){_(this._config.error)?this._config.error(e):s&&this._config.error&&t.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function d(e){var t;(e=e||{}).chunkSize||(e.chunkSize=l.RemoteChunkSize),c.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),n||(t.onload=x(this._chunkLoaded,this),t.onerror=x(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var s in e)t.setRequestHeader(s,e[s])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+a)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(e=t.getResponseHeader("Content-Range"))?-1:parseInt(e.substring(e.lastIndexOf("/")+1))),this.parseChunk(t.responseText)))},this._chunkError=function(e){var n=t.statusText||e;this._sendError(Error(n))}}function u(e){(e=e||{}).chunkSize||(e.chunkSize=l.LocalChunkSize),c.call(this,e);var t,n,s="u">typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((t=new FileReader).onload=x(this._chunkLoaded,this),t.onerror=x(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,a)}var o=t.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function p(e){var t;c.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,n=this._config.chunkSize;return n?(e=t.substring(0,n),t=t.substring(n)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function f(e){c.call(this,e=e||{});var t=[],n=!0,s=!1;this.pause=function(){c.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){c.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):n=!0},this._streamData=x(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=x(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=x(function(){this._streamCleanUp(),s=!0,this._streamData("")},this),this._streamCleanUp=x(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(e){var t,n,s,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,o=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,h=this,c=0,d=0,u=!1,p=!1,f=[],g={data:[],errors:[],meta:{}};if(_(e.step)){var y=e.step;e.step=function(t){if(g=t,x())w();else{if(w(),0===g.data.length)return;c+=t.data.length,e.preview&&c>e.preview?n.abort():(g.data=g.data[0],y(g,h))}}}function b(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function w(){return g&&s&&(S("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),s=!1),e.skipEmptyLines&&(g.data=g.data.filter(function(e){return!b(e)})),x()&&function(){if(g)if(Array.isArray(g.data[0])){for(var t=0;x()&&t<g.data.length;t++)g.data[t].forEach(n);g.data.splice(0,1)}else g.data.forEach(n);function n(t,n){_(e.transformHeader)&&(t=e.transformHeader(t,n)),f.push(t)}}(),function(){if(!g||!e.header&&!e.dynamicTyping&&!e.transform)return g;function t(t,n){var s,l=e.header?{}:[];for(s=0;s<t.length;s++){var h,c,u=s,p=t[s];e.header&&(u=s>=f.length?"__parsed_extra":f[s]),e.transform&&(p=e.transform(p,u)),h=u,c=p,e.dynamicTypingFunction&&void 0===e.dynamicTyping[h]&&(e.dynamicTyping[h]=e.dynamicTypingFunction(h)),p=(e.dynamicTyping[h]||e.dynamicTyping)===!0?"true"===c||"TRUE"===c||"false"!==c&&"FALSE"!==c&&(!function(e){if(a.test(e)){var t=parseFloat(e);if(-0x20000000000000<t&&t<0x20000000000000)return!0}return!1}(c)?o.test(c)?new Date(c):""===c?null:c:parseFloat(c)):c,"__parsed_extra"===u?(l[u]=l[u]||[],l[u].push(p)):l[u]=p}return e.header&&(s>f.length?S("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+s,d+n):s<f.length&&S("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+s,d+n)),l}var n=1;return!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(t),n=g.data.length):g.data=t(g.data,0),e.header&&g.meta&&(g.meta.fields=f),d+=n,g}()}function x(){return e.header&&0===f.length}function S(e,t,n,s){var a={type:e,code:t,message:n};void 0!==s&&(a.row=s),g.errors.push(a)}this.parse=function(a,o,h){var c=e.quoteChar||'"';if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var n=RegExp(m(t)+"([^]*?)"+m(t),"gm"),s=(e=e.replace(n,"")).split("\r"),a=e.split(`
`),o=1<a.length&&a[0].length<s[0].length;if(1===s.length||o)return`
`;for(var l=0,h=0;h<s.length;h++)s[h][0]===`
`&&l++;return l>=s.length/2?`\r
`:"\r"}(a,c)),s=!1,e.delimiter)_(e.delimiter)&&(e.delimiter=e.delimiter(a),g.meta.delimiter=e.delimiter);else{var d=function(t,n,s,a,o){var h,c,d,u;o=o||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var p=0;p<o.length;p++){var f=o[p],g=0,m=0,y=0;d=void 0;for(var w=new v({comments:a,delimiter:f,newline:n,preview:10}).parse(t),A=0;A<w.data.length;A++)if(s&&b(w.data[A]))y++;else{var x=w.data[A].length;m+=x,void 0!==d?0<x&&(g+=Math.abs(x-d),d=x):d=x}0<w.data.length&&(m/=w.data.length-y),(void 0===c||g<=c)&&(void 0===u||u<m)&&1.99<m&&(c=g,h=f,u=m)}return{successful:!!(e.delimiter=h),bestDelimiter:h}}(a,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);d.successful?e.delimiter=d.bestDelimiter:(s=!0,e.delimiter=l.DefaultDelimiter),g.meta.delimiter=e.delimiter}var p=A(e);return e.preview&&e.header&&p.preview++,t=a,g=(n=new v(p)).parse(t,o,h),w(),u?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return u},this.pause=function(){u=!0,n.abort(),t=_(e.chunk)?"":t.substring(n.getCharIndex())},this.resume=function(){h.streamer._halted?(u=!1,h.streamer.parseChunk(t,!0)):setTimeout(h.resume,3)},this.aborted=function(){return p},this.abort=function(){p=!0,n.abort(),g.meta.aborted=!0,_(e.complete)&&e.complete(g),t=""}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function v(e){var t,n=(e=e||{}).delimiter,s=e.newline,a=e.comments,o=e.step,h=e.preview,c=e.fastMode,d=t=void 0===e.quoteChar||null===e.quoteChar?'"':e.quoteChar;if(void 0!==e.escapeChar&&(d=e.escapeChar),("string"!=typeof n||-1<l.BAD_DELIMITERS.indexOf(n))&&(n=","),a===n)throw Error("Comment character same as delimiter");!0===a?a="#":("string"!=typeof a||-1<l.BAD_DELIMITERS.indexOf(a))&&(a=!1),s!==`
`&&"\r"!==s&&s!==`\r
`&&(s=`
`);var u=0,p=!1;this.parse=function(l,f,g){if("string"!=typeof l)throw Error("Input must be a string");var v=l.length,y=n.length,b=s.length,w=a.length,A=_(o),x=[],S=[],k=[],E=u=0;if(!l)return X();if(e.header&&!f){var C=l.split(s)[0].split(n),M=[],R={},T=!1;for(var P in C){var L=C[P];_(e.transformHeader)&&(L=e.transformHeader(L,P));var I=L,D=R[L]||0;for(0<D&&(T=!0,I=L+"_"+D),R[L]=D+1;M.includes(I);)I=I+"_"+D;M.push(I)}if(T){var F=l.split(s);F[0]=M.join(n),l=F.join(s)}}if(c||!1!==c&&-1===l.indexOf(t)){for(var N=l.split(s),O=0;O<N.length;O++){if(k=N[O],u+=k.length,O!==N.length-1)u+=s.length;else if(g)break;if(!a||k.substring(0,w)!==a){if(A){if(x=[],U(k.split(n)),Y(),p)return X()}else U(k.split(n));if(h&&h<=O)return x=x.slice(0,h),X(!0)}}return X()}for(var W=l.indexOf(n,u),j=l.indexOf(s,u),B=RegExp(m(d)+m(t),"g"),$=l.indexOf(t,u);;)if(l[u]!==t)if(a&&0===k.length&&l.substring(u,u+w)===a){if(-1===j)return X();u=j+b,j=l.indexOf(s,u),W=l.indexOf(n,u)}else if(-1!==W&&(W<j||-1===j))k.push(l.substring(u,W)),u=W+y,W=l.indexOf(n,u);else{if(-1===j)break;if(k.push(l.substring(u,j)),q(j+b),A&&(Y(),p))return X();if(h&&x.length>=h)return X(!0)}else for($=u,u++;;){if(-1===($=l.indexOf(t,$+1)))return g||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:u}),G();if($===v-1)return G(l.substring(u,$).replace(B,t));if(t!==d||l[$+1]!==d){if(t===d||0===$||l[$-1]!==d){-1!==W&&W<$+1&&(W=l.indexOf(n,$+1)),-1!==j&&j<$+1&&(j=l.indexOf(s,$+1));var z=V(-1===j?W:Math.min(W,j));if(l.substr($+1+z,y)===n){k.push(l.substring(u,$).replace(B,t)),l[u=$+1+z+y]!==t&&($=l.indexOf(t,u)),W=l.indexOf(n,u),j=l.indexOf(s,u);break}var H=V(j);if(l.substring($+1+H,$+1+H+b)===s){if(k.push(l.substring(u,$).replace(B,t)),q($+1+H+b),W=l.indexOf(n,u),$=l.indexOf(t,u),A&&(Y(),p))return X();if(h&&x.length>=h)return X(!0);break}S.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:u}),$++}}else $++}return G();function U(e){x.push(e),E=u}function V(e){var t=0;if(-1!==e){var n=l.substring($+1,e);n&&""===n.trim()&&(t=n.length)}return t}function G(e){return g||(void 0===e&&(e=l.substring(u)),k.push(e),u=v,U(k),A&&Y()),X()}function q(e){u=e,U(k),k=[],j=l.indexOf(s,u)}function X(e){return{data:x,errors:S,meta:{delimiter:n,linebreak:s,aborted:p,truncated:!!e,cursor:E+(f||0)}}}function Y(){o(X()),x=[],S=[]}},this.abort=function(){p=!0},this.getCharIndex=function(){return u}}function y(e){var t=e.data,n=a[t.workerId],s=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){s=!0,b(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:w,resume:w};if(_(n.userStep)){for(var l=0;l<t.results.data.length&&(n.userStep({data:t.results.data[l],errors:t.results.errors,meta:t.results.meta},o),!s);l++);delete t.results}else _(n.userChunk)&&(n.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!s&&b(t.workerId,t.results)}function b(e,t){var n=a[e];_(n.userComplete)&&n.userComplete(t),n.terminate(),delete a[e]}function w(){throw Error("Not implemented.")}function A(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=A(e[n]);return t}function x(e,t){return function(){e.apply(t,arguments)}}function _(e){return"function"==typeof e}return s&&(t.onmessage=function(e){var n=e.data;if(void 0===l.WORKER_ID&&n&&(l.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:l.WORKER_ID,results:l.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var s=l.parse(n.input,n.config);s&&t.postMessage({workerId:l.WORKER_ID,results:s,finished:!0})}}),(d.prototype=Object.create(c.prototype)).constructor=d,(u.prototype=Object.create(c.prototype)).constructor=u,(p.prototype=Object.create(p.prototype)).constructor=p,(f.prototype=Object.create(c.prototype)).constructor=f,l}();let AN=hB(AF.exports),AO=({mainState:{currentDocument:e,config:t}})=>{let[n,s]=(0,hT.useState)([]);return(0,hT.useEffect)(()=>{var n;if(null!=e&&e.fileData){let a=AN.parse(e.fileData,{delimiter:(null==t?void 0:t.csvDelimiter)??","});!(null!=(n=a.errors)&&n.length)&&a.data&&s(a.data)}},[e,null==t?void 0:t.csvDelimiter]),n.length?(0,hR.jsx)(AW,{children:(0,hR.jsxs)(Aj,{children:[(0,hR.jsx)("thead",{children:(0,hR.jsx)("tr",{children:n[0].map(e=>(0,hR.jsx)("th",{children:e},e))})}),(0,hR.jsx)("tbody",{children:n.slice(1,n.length).map(e=>(0,hR.jsx)("tr",{children:e.map(e=>(0,hR.jsx)("td",{children:e},e))},e.join("")))})]})}):null};AO.fileTypes=["csv","text/csv"],AO.weight=0,AO.fileLoader=ga;let AW=fp.div`
  width: 100%;
`,Aj=fp.table`
  width: 100%;
  text-align: left;

  th,
  td {
    padding: 5px 10px;

    &:empty {
      display: none;
    }
  }
`,AB=e=>(0,hR.jsx)(gg,{...e});AB.fileTypes=["gif","image/gif"],AB.weight=0;let A$=({mainState:{currentDocument:e}})=>e?(0,hR.jsx)(Az,{id:"video-renderer",children:(0,hR.jsx)(AH,{controls:!0,src:e.uri})}):null;A$.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"],A$.weight=0;let Az=fp.div`
  width: 100%;
`,AH=fp.video`
  width: 100%;
  height: 100%;
  border: 0;
`,AU=e=>(0,hR.jsx)(gg,{...e});AU.fileTypes=["webp","image/webp"],AU.weight=0;let AV=[gy,gb,gx,g_,Am,Ab,AP,AI,AO,AB,A$,AU],AG=(0,hT.forwardRef)((e,t)=>{let{documents:n,theme:s}=e;if(!n)throw Error("Please provide an array of documents to DocViewer!");return(0,hR.jsx)(fT,{ref:t,pluginRenderers:AV,...e,children:(0,hR.jsx)(fa,{theme:s?{...gf,...s}:gf,children:(0,hR.jsxs)(AX,{id:"react-doc-viewer","data-testid":"react-doc-viewer",className:e.className,style:e.style,children:[(0,hR.jsx)(gi,{}),(0,hR.jsx)(gh,{})]})})})}),Aq=(0,hT.memo)(AG),AX=fp.div`
  display: flex;
  flex-direction: column;
  background: #ffffff;
  width: 100%;
  height: 100%;
`}}]);